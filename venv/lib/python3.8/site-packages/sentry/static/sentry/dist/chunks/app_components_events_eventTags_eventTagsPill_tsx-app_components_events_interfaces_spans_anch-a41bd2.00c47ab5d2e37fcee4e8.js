"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_events_eventTags_eventTagsPill_tsx-app_components_events_interfaces_spans_anch-a41bd2"],{"./app/components/deviceName.tsx":(e,t,r)=>{r.d(t,{H:()=>a,q:()=>o}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/react/index.js");const i={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,4":"iPhone XS Max","iPhone11,6":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AirPods1,1":"AirPods (1st generation)","AirPods2,1":"AirPods (2nd generation)","iProd8,1":"AirPods Pro"};var s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(t){if("string"!=typeof t)return null;if(null===e)return t;const[r,...n]=t.split(" "),s=i[r];return void 0===s?t:`${s} ${n.join(" ")}`}function a(e){let{value:t,children:r}=e;const i=(0,n.useMemo)((()=>o(t)),[t]);return i?(0,s.tZ)("span",{"data-test-id":"loaded-device-name",children:r?r(i):i}):null}e=r.hmd(e)},"./app/components/discover/discoverFeature.tsx":(e,t,r)=>{r.d(t,{Z:()=>d});var n=r("./app/components/acl/feature.tsx"),i=r("./app/components/acl/featureDisabled.tsx"),s=r("./app/components/hovercard.tsx"),o=r("./app/locale.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t}=e;const r=(0,o.t)("Requires discover feature.");return(0,a.tZ)(n.Z,{hookName:"feature-disabled:open-discover",features:["organizations:discover-basic"],renderDisabled:e=>(0,a.tZ)(s.uI,{body:(0,a.tZ)(i.Z,{features:e.features,hideHelpToggle:!0,message:r,featureName:r}),children:e.children(e)}),children:e=>{let{hasFeature:r}=e;return t({hasFeature:r})}})}l.displayName="DiscoverFeature";const d=l},"./app/components/discoverButton.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var n=r("./app/components/button.tsx"),i=r("./app/components/discover/discoverFeature.tsx"),s=r("./app/locale.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,...r}=e;return(0,o.tZ)(i.Z,{children:e=>{let{hasFeature:i}=e;return(0,o.tZ)(n.ZP,{disabled:!i,"aria-label":(0,s.t)("Open in Discover"),...r,children:t})}})}a.displayName="DiscoverButton";const l=a},"./app/components/events/eventTags/eventTagsPill.tsx":(e,t,r)=>{r.d(t,{Z:()=>x});var n=r("../node_modules/query-string/index.js"),i=r("./app/components/events/meta/annotatedText/index.tsx"),s=r("./app/components/events/meta/metaProxy.tsx"),o=r("./app/components/links/externalLink.tsx"),a=r("./app/components/pill.tsx"),l=r("./app/components/version.tsx"),d=r("./app/components/versionHoverCard.tsx"),c=r("./app/icons/index.tsx"),p=r("./app/utils.tsx"),h=r("./app/components/deviceName.tsx"),u=r("./app/components/links/link.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{var t;let{tag:{key:r,value:n},meta:s,streamPath:o,locationSearch:a}=e;const l=(0,m.tZ)(i.Z,{value:(0,p.ri)(n)&&(0,m.tZ)(h.H,{value:String(n)}),meta:s});return null!=s&&null!==(t=s.err)&&void 0!==t&&t.length||!(0,p.ri)(r)?l:(0,m.tZ)(u.Z,{to:{pathname:o,search:a},children:l})},v={name:"1w4n49d",styles:"position:relative;top:1px"},f=e=>{let{tag:t,query:r,organization:h,projectId:u,streamPath:f}=e;const x=`?${n.stringify(r)}`,{key:y,value:w}=t,b="release"===y,Z=y||(0,m.tZ)(i.Z,{value:y,meta:(0,s.xZ)(t,"key")}),S=y?void 0:"error";return(0,m.BX)(a.Z,{name:Z,value:w,type:S,children:[b?(0,m.tZ)(d.Z,{organization:h,projectSlug:u,releaseVersion:w,showUnderline:!0,underlineColor:"linkUnderline",children:(0,m.tZ)(l.Z,{version:String(w),truncate:!0})}):(0,m.tZ)(g,{tag:t,meta:(0,s.xZ)(t,"value"),streamPath:f,locationSearch:x}),(0,p.CB)(w)&&(0,m.tZ)(o.Z,{href:w,className:"external-icon",children:(0,m.tZ)(c.V$,{size:"xs",css:v})})]})};f.displayName="EventTagsPill";const x=f},"./app/components/events/interfaces/spans/anchorLinkManager.tsx":(e,t,r)=>{r.d(t,{$:()=>l,z:()=>a});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=(0,i.createContext)({registerScrollFn:()=>()=>{},scrollToHash:()=>{}});class a extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"scrollFns",new Map),(0,n.Z)(this,"scrollToHash",(e=>{if(this.scrollFns.has(e)){const{fn:t,isSpanInGroup:r}=this.scrollFns.get(e);t(),r&&setTimeout((()=>{var t;return null===(t=this.scrollFns.get(e))||void 0===t?void 0:t.fn()}))}})),(0,n.Z)(this,"registerScrollFn",((e,t,r)=>{this.scrollFns.set(e,{fn:t,isSpanInGroup:r})}))}componentDidMount(){this.scrollToHash(location.hash)}render(){const e={registerScrollFn:this.registerScrollFn,scrollToHash:this.scrollToHash};return(0,s.tZ)(o.Provider,{value:e,children:this.props.children})}}a.displayName="Provider";const l=o.Consumer},"./app/components/events/interfaces/spans/context.tsx":(e,t,r)=>{r.d(t,{$:()=>s,z:()=>i});const n=(0,r("../node_modules/react/index.js").createContext)({getViewChildTransactionTarget:()=>{}}),i=n.Provider,s=n.Consumer},"./app/components/events/interfaces/spans/cursorGuideHandler.tsx":(e,t,r)=>{r.d(t,{$:()=>d,z:()=>l});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("./app/components/performance/waterfall/utils.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,i.createContext)({showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0,displayCursorGuide:()=>{},hideCursorGuide:()=>{}});class l extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0}),(0,n.Z)(this,"hasInteractiveLayer",(()=>!!this.props.interactiveLayerRef.current)),(0,n.Z)(this,"displayCursorGuide",(e=>{if(!this.hasInteractiveLayer())return;const{trace:t,dragProps:r}=this.props,n=this.props.interactiveLayerRef.current,i=(0,s.FV)(n),o=t.traceEndTimestamp-t.traceStartTimestamp,a=r.viewWindowStart,l=r.viewWindowEnd,d=t.traceStartTimestamp+a*o,c=t.traceEndTimestamp-(1-l)*o-d,p=(0,s.uZ)((e-i.x)/i.width,0,1),h=p*Math.abs(t.traceEndTimestamp-t.traceStartTimestamp),u=(t.traceStartTimestamp+h-d)/c;this.setState({showCursorGuide:!0,mouseLeft:p,traceViewMouseLeft:u})})),(0,n.Z)(this,"hideCursorGuide",(()=>{this.hasInteractiveLayer()&&this.setState({showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0})}))}render(){const e={showCursorGuide:this.state.showCursorGuide,mouseLeft:this.state.mouseLeft,traceViewMouseLeft:this.state.traceViewMouseLeft,displayCursorGuide:this.displayCursorGuide,hideCursorGuide:this.hideCursorGuide};return(0,o.tZ)(a.Provider,{value:e,children:this.props.children})}}l.displayName="Provider";const d=a.Consumer},"./app/components/events/interfaces/spans/dividerHandlerManager.tsx":(e,t,r)=>{r.d(t,{$:()=>p,z:()=>c});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("./app/components/performance/waterfall/utils.tsx"),o=r("./app/utils/userselect.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(e,t)=>{e.forEach((e=>{e.current&&t(e.current)}))},d=(0,i.createContext)({dividerPosition:.4,onDragStart:()=>{},setHover:()=>{},addDividerLineRef:()=>(0,i.createRef)(),addGhostDividerLineRef:()=>(0,i.createRef)()});class c extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{dividerPosition:.4}),(0,n.Z)(this,"previousUserSelect",null),(0,n.Z)(this,"dividerHandlePosition",.4),(0,n.Z)(this,"isDragging",!1),(0,n.Z)(this,"dividerLineRefs",[]),(0,n.Z)(this,"ghostDividerLineRefs",[]),(0,n.Z)(this,"hasInteractiveLayer",(()=>!!this.props.interactiveLayerRef.current)),(0,n.Z)(this,"addDividerLineRef",(()=>{const e=(0,i.createRef)();return this.dividerLineRefs.push(e),e})),(0,n.Z)(this,"addGhostDividerLineRef",(()=>{const e=(0,i.createRef)();return this.ghostDividerLineRefs.push(e),e})),(0,n.Z)(this,"setHover",(e=>{this.isDragging||l(this.dividerLineRefs,(t=>{e?t.classList.add("hovering"):t.classList.remove("hovering")}))})),(0,n.Z)(this,"onDragStart",(e=>{!this.isDragging&&"mousedown"===e.type&&this.hasInteractiveLayer()&&(e.stopPropagation(),this.previousUserSelect=(0,o.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),this.setHover(!0),this.isDragging=!0,l(this.dividerLineRefs,(e=>{e.style.backgroundColor="rgba(73,80,87,0.75)",e.style.cursor="col-resize"})),l(this.ghostDividerLineRefs,(e=>{e.style.cursor="col-resize";const{parentNode:t}=e;t&&(t.style.display="block")})))})),(0,n.Z)(this,"onDragMove",(e=>{if(!this.isDragging||"mousemove"!==e.type||!this.hasInteractiveLayer())return;const t=(0,s.FV)(this.props.interactiveLayerRef.current),r=(e.pageX-t.x)/t.width;this.dividerHandlePosition=(0,s.uZ)(r,0,1);const n=(0,s.yI)(this.dividerHandlePosition);l(this.ghostDividerLineRefs,(e=>{const{parentNode:t}=e;t&&(t.style.width=`calc(${n} + 0.5px)`)}))})),(0,n.Z)(this,"onDragEnd",(e=>{this.isDragging&&"mouseup"===e.type&&this.hasInteractiveLayer()&&(this.cleanUpListeners(),this.previousUserSelect&&((0,o.l)(this.previousUserSelect),this.previousUserSelect=null),this.isDragging=!1,this.setHover(!1),l(this.dividerLineRefs,(e=>{e.style.backgroundColor="",e.style.cursor=""})),l(this.ghostDividerLineRefs,(e=>{e.style.cursor="";const{parentNode:t}=e;t&&(t.style.display="none")})),this.setState({dividerPosition:this.dividerHandlePosition}))})),(0,n.Z)(this,"cleanUpListeners",(()=>{this.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd))}))}componentWillUnmount(){this.cleanUpListeners()}render(){const e={dividerPosition:this.state.dividerPosition,setHover:this.setHover,onDragStart:this.onDragStart,addDividerLineRef:this.addDividerLineRef,addGhostDividerLineRef:this.addGhostDividerLineRef};return(0,a.tZ)(d.Provider,{value:e,children:this.props.children})}}c.displayName="Provider";const p=d.Consumer},"./app/components/events/interfaces/spans/header.tsx":(e,t,r)=>{r.d(t,{gM:()=>te,il:()=>me,ZP:()=>fe});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),o=r("../node_modules/lodash/isFinite.js"),a=r.n(o),l=r("./app/components/charts/styles.tsx"),d=r("./app/components/events/interfaces/spans/utils.tsx"),c=r("./app/components/performance/waterfall/utils.tsx"),p=r("./app/components/questionTooltip.tsx"),h=r("./app/locale.tsx"),u=r("./app/styles/space.tsx"),m=r("./app/types/event.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=Symbol("Other");class f extends s.Component{getTransactionEvent(){const{event:e}=this.props;if("transaction"===e.type)return e}generateStats(){var e,t;const{topN:r,operationNameFilters:n}=this.props,i=this.getTransactionEvent();if(!i)return[];const s=null==i||null===(e=i.contexts)||void 0===e?void 0:e.trace;if(!s)return[];const o=i.entries.find((e=>e.type===m.UZ.SPANS));let a=null!==(t=null==o?void 0:o.data)&&void 0!==t?t:[];const l={op:s.op,timestamp:i.endTimestamp,start_timestamp:i.startTimestamp,trace_id:s.trace_id||"",span_id:s.span_id||"",data:{}};a=a.length>0?a:[l],"active_filter"===n.type&&(a=[...a,l],a=a.filter((e=>{const t=(0,d.yk)(e);return!("string"==typeof t&&!n.operationNames.has(t))})));const c=a.reduce(((e,t)=>{let r=t.start_timestamp,n=t.timestamp;n<r&&(r=t.timestamp,n=t.start_timestamp);let i=t.op;"string"!=typeof i&&(i="unknown");const s=[r,n],o=e[i];return Array.isArray(o)?(o.push(s),e[i]=function(e){e.sort(((e,t)=>e[0]<t[0]?-1:t[0]<e[0]?1:0));const t=[];for(const r of e){if(0===t.length){t.push(r);continue}const e=t[t.length-1],n=e[1],[i,s]=r;n<i?t.push(r):e[1]=Math.max(n,s)}return t}(o),e):(e[i]=[s],e)}),{}),p=Object.entries(c).reduce(((e,t)=>{let[r,n]=t;const i=n.reduce(((e,t)=>{let[r,n]=t;return e+Math.abs(n-r)}),0);return e[r]=i,e}),{}),h=Object.entries(p).sort(((e,t)=>{const r=e[1],n=t[1];return r===n?0:r<n?1:-1})),u=h.slice(0,r).map((e=>{let[t,r]=e;return{name:t,percentage:0,totalInterval:r}})),g=h.slice(r).reduce(((e,t)=>{let[r,n]=t;return e.totalInterval+=n,e}),{name:v,percentage:0,totalInterval:0});g.totalInterval>0&&u.push(g);const f=u.reduce(((e,t)=>e+t.totalInterval),0);return u.forEach((e=>{e.percentage=e.totalInterval/f})),u}render(){const{hideHeader:e}=this.props;if(!this.getTransactionEvent())return null;const t=this.generateStats().map((e=>{const{name:t,percentage:r,totalInterval:n}=e,i=t===v,s="string"==typeof t?t:(0,h.t)("Other"),o=Math.round(1e3*n*100)/100,l=a()(r)?Math.round(100*r):"∞",d=(0,c.hd)(s);return(0,g.BX)(w,{children:[(0,g.BX)(S,{children:[(0,g.tZ)(b,{style:{backgroundColor:i?"transparent":d}}),(0,g.tZ)(P,{children:s})]}),(0,g.BX)(Z,{children:[(0,g.BX)(j,{children:[o,"ms"]}),(0,g.BX)(k,{children:[l,"%"]})]})]},s)}));return e?(0,g.tZ)(y,{children:t}):(0,g.BX)(x,{children:[(0,g.BX)(l.OT,{children:[(0,h.t)("Operation Breakdown"),(0,g.tZ)(p.Z,{position:"top",size:"sm",containerDisplayMode:"block",title:(0,h.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once. Percentages are calculated by dividing the summed span durations by the total of all span durations.")})]}),t]})}}f.displayName="OpsBreakdown",(0,n.Z)(f,"defaultProps",{topN:4,hideHeader:!1});const x=(0,i.Z)("div",{target:"ebxobs98"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,u.Z)(4),";"),y=(0,i.Z)("div",{target:"ebxobs97"})("font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,u.Z)(2)," ",(0,u.Z)(3),";"),w=(0,i.Z)("div",{target:"ebxobs96"})("display:flex;justify-content:space-between;margin-bottom:",(0,u.Z)(.5),";*+*{margin-left:",(0,u.Z)(.5),";}"),b=(0,i.Z)("div",{target:"ebxobs95"})("content:'';display:block;width:8px;min-width:8px;height:8px;margin-right:",(0,u.Z)(1),";border-radius:100%;"),Z=(0,i.Z)("div",{target:"ebxobs94"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),S=(0,i.Z)(Z,{target:"ebxobs93"})({name:"d3v9zr",styles:"overflow:hidden"}),P=(0,i.Z)("div",{target:"ebxobs92"})({name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"}),j=(0,i.Z)("div",{target:"ebxobs91"})("color:",(e=>e.theme.gray300),";font-variant-numeric:tabular-nums;"),k=(0,i.Z)("div",{target:"ebxobs90"})({name:"sw7g73",styles:"min-width:40px;text-align:right;font-variant-numeric:tabular-nums"}),T=f;var D=r("./app/components/performance/waterfall/miniHeader.tsx"),_=r("./app/stores/configStore.tsx"),C=r("./app/utils/theme.tsx"),I=r("./app/components/events/interfaces/spans/constants.tsx"),L=r("./app/components/events/interfaces/spans/cursorGuideHandler.tsx"),B=r("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),M=r("./app/components/tooltip.tsx"),A=r("./app/utils.tsx"),z=r("./app/utils/performance/vitals/constants.tsx");function W(e){const{event:t,generateBounds:r,dividerPosition:n}=e,i=(0,d.is)(t,r);return(0,g.tZ)(R,{style:{width:`calc(${(0,c.yI)(1-n)} - 0.5px)`},children:Array.from(i.values()).map((e=>{const t=Object.values(e.marks)[0],{timestamp:n}=t,i=(0,d.vu)(n,r);if(!(0,A.ri)(i.left)||!(0,A.ri)(i.width)||!i.isSpanVisibleInView)return null;const s=Object.keys(e.marks).map((e=>z.r9[`measurements.${e}`]));return s.length>1?(0,g.tZ)(F,{failedThreshold:e.failedThreshold,left:(0,c.yI)(i.left||0),vitals:s},String(n)):(0,g.tZ)(N,{failedThreshold:e.failedThreshold,left:(0,c.yI)(i.left||0),vital:s[0]},String(n))}))})}W.displayName="MeasurementsPanel";const R=(0,i.Z)("div",{target:"ebsav3l3"})({name:"1ite3ux",styles:"position:relative;overflow:hidden;height:20px"}),$=(0,i.Z)("div",{target:"ebsav3l2"})({name:"eceuti",styles:"transform:translateX(-50%);position:absolute;display:flex;top:0;height:100%;user-select:none;white-space:nowrap"}),E=(0,i.Z)("div",{target:"ebsav3l1"})({name:"snm0j3",styles:"position:absolute;top:0;height:100%;user-select:none;white-space:nowrap"}),V=(0,i.Z)("div",{target:"ebsav3l0"})("transform:",(e=>e.isSingleLabel?"translate(-50%, 15%)":"translateY(15%)"),";font-size:",(e=>e.theme.fontSizeExtraSmall),";font-weight:600;color:",(e=>e.failedThreshold?`${e.theme.red300}`:`${e.theme.gray500}`),";background:",(e=>e.theme.white),";border:1px solid;border-color:",(e=>e.failedThreshold?e.theme.red300:e.theme.gray100),";border-radius:",(e=>e.theme.borderRadius),";height:75%;display:flex;justify-content:center;align-items:center;padding:",(0,u.Z)(.25),";margin-right:",(0,u.Z)(.25),";"),X=W;class N extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{width:1}),(0,n.Z)(this,"elementDOMRef",(0,s.createRef)())}componentDidMount(){const{current:e}=this.elementDOMRef;e&&this.setState({width:e.clientWidth})}render(){const{left:e,failedThreshold:t,vital:r}=this.props;return(0,g.tZ)(E,{ref:this.elementDOMRef,style:{left:`clamp(calc(0.5 * ${this.state.width}px), ${e}, calc(100% - 0.5 * ${this.state.width}px))`},children:(0,g.tZ)(V,{failedThreshold:t,isSingleLabel:!0,children:(0,g.tZ)(M.Z,{title:r.name,position:"top",containerDisplayMode:"inline-block",children:r.acronym})})})}}N.displayName="LabelContainer";class F extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{width:1}),(0,n.Z)(this,"elementDOMRef",(0,s.createRef)())}componentDidMount(){const{current:e}=this.elementDOMRef;e&&this.setState({width:e.clientWidth})}render(){const{left:e,failedThreshold:t,vitals:r}=this.props;return(0,g.tZ)($,{ref:this.elementDOMRef,style:{left:`clamp(calc(0.5 * ${this.state.width}px), ${e}, calc(100% - 0.5 * ${this.state.width}px))`},children:r.map((e=>(0,g.tZ)(V,{failedThreshold:t,children:(0,g.tZ)(M.Z,{title:e.name,position:"top",containerDisplayMode:"inline-block",children:e.acronym})},`${e.name}-label`)))})}}F.displayName="MultiLabelContainer";var U=r("./app/components/events/interfaces/spans/scrollbarManager.tsx"),O=r("./app/components/events/interfaces/spans/types.tsx");class H extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{minimapWidth:void 0})}componentDidMount(){this.fetchMinimapWidth()}componentDidUpdate(){this.fetchMinimapWidth()}fetchMinimapWidth(){const{minimapInteractiveRef:e}=this.props;if(e.current){const t=e.current.getBoundingClientRect().width;t!==this.state.minimapWidth&&this.setState({minimapWidth:t})}}renderCursorGuide(e){let{cursorGuideHeight:t,showCursorGuide:r,mouseLeft:n}=e;return r&&n?(0,g.tZ)(pe,{style:{left:(0,c.yI)(n),height:`${t}px`}}):null}renderViewHandles(e){let{isDragging:t,onLeftHandleDragStart:r,leftHandlePosition:n,onRightHandleDragStart:i,rightHandlePosition:o,viewWindowStart:a,viewWindowEnd:l}=e;const d=t?(0,g.tZ)(he,{left:a,onMouseDown:()=>{},isDragging:!1}):null,c=(0,g.tZ)(he,{left:n,onMouseDown:r,isDragging:t}),p=(0,g.tZ)(he,{left:o,onMouseDown:i,isDragging:t}),h=t?(0,g.tZ)(he,{left:l,onMouseDown:()=>{},isDragging:!1}):null;return(0,g.BX)(s.Fragment,{children:[d,h,c,p]})}renderFog(e){return(0,g.BX)(s.Fragment,{children:[(0,g.tZ)(ae,{style:{height:"100%",width:(0,c.yI)(e.viewWindowStart)}}),(0,g.tZ)(ae,{style:{height:"100%",width:(0,c.yI)(1-e.viewWindowEnd),left:(0,c.yI)(e.viewWindowEnd)}})]})}renderDurationGuide(e){let{showCursorGuide:t,mouseLeft:r}=e;if(!t||!r)return null;const n=this.props.minimapInteractiveRef.current;if(!n)return null;const i=(0,c.FV)(n),{trace:s}=this.props,o=r*Math.abs(s.traceEndTimestamp-s.traceStartTimestamp),a={top:0,left:`calc(${100*r}% + 4px)`},l=(1-r)*i.width<=100;return(0,g.tZ)(ee,{style:a,alignLeft:l,children:(0,g.tZ)("span",{children:(0,c.bQ)(o)})})}renderTicks(){const{trace:e}=this.props,{minimapWidth:t}=this.state,r=Math.abs(e.traceEndTimestamp-e.traceStartTimestamp);let n=5;if(t&&(t<=350&&(n=4),t<=280&&(n=3),t<=160&&(n=2),t<=130&&(n=1)),1===n)return(0,g.tZ)(Y,{duration:.5*r,style:{left:(0,c.yI)(.5)}},"1");const i=1/(n-1),s=[];for(let e=0;e<n;e++){if(0===e){s.push((0,g.tZ)(Y,{align:O.tA.Left,hideTickMarker:!0,duration:0,style:{left:(0,u.Z)(1)}},"first"));continue}if(e===n-1){s.push((0,g.tZ)(Y,{duration:r,align:O.tA.Right,hideTickMarker:!0,style:{right:(0,u.Z)(1)}},"last"));continue}const t=i*e;s.push((0,g.tZ)(Y,{duration:r*t,style:{left:(0,c.yI)(t)}},String(e)))}return s}renderTimeAxis(e){let{showCursorGuide:t,mouseLeft:r}=e;return(0,g.BX)(q,{children:[this.renderTicks(),this.renderCursorGuide({showCursorGuide:t,mouseLeft:r,cursorGuideHeight:I.h0}),this.renderDurationGuide({showCursorGuide:t,mouseLeft:r})]})}renderWindowSelection(e){if(!e.isWindowSelectionDragging)return null;const t=Math.min(e.windowSelectionInitial,e.windowSelectionCurrent);return(0,g.tZ)(ue,{style:{left:(0,c.yI)(t),width:(0,c.yI)(e.windowSelectionSize)}})}generateBounds(){const{dragProps:e,trace:t}=this.props;return(0,d.IG)({traceStartTimestamp:t.traceStartTimestamp,traceEndTimestamp:t.traceEndTimestamp,viewStart:e.viewWindowStart,viewEnd:e.viewWindowEnd})}renderSecondaryHeader(){var e;const{event:t}=this.props,r=Object.keys(null!==(e=t.measurements)&&void 0!==e?e:{}).length>0;return(0,g.tZ)(B.$,{children:e=>{const{dividerPosition:n}=e;return(0,g.BX)(me,{children:[(0,g.tZ)(U.$6,{children:e=>{let{virtualScrollbarRef:t,scrollBarAreaRef:r,onDragStart:i,onScroll:s}=e;return(0,g.BX)(D.cs,{ref:this.props.virtualScrollBarContainerRef,style:{width:`calc(${(0,c.yI)(n)} - 0.5px)`},onScroll:s,children:[(0,g.tZ)("div",{style:{width:0,height:"1px"},ref:r}),(0,g.tZ)(D.Qk,{"data-type":"virtual-scrollbar",ref:t,onMouseDown:i,children:(0,g.tZ)(D.v6,{})})]})}}),(0,g.tZ)(D._i,{}),r?(0,g.tZ)(X,{event:t,generateBounds:this.generateBounds(),dividerPosition:n}):null]})}})}render(){return(0,g.tZ)(te,{children:(0,g.tZ)(B.$,{children:e=>{const{dividerPosition:t}=e;return(0,g.BX)(s.Fragment,{children:[(0,g.tZ)(ge,{style:{width:`calc(${(0,c.yI)(t)} - 0.5px)`},children:this.props.event&&(0,g.tZ)(T,{operationNameFilters:this.props.operationNameFilters,event:this.props.event,topN:3,hideHeader:!0})}),(0,g.tZ)(D._i,{style:{position:"absolute",top:0,left:`calc(${(0,c.yI)(t)} - 0.5px)`,height:`${I.DX+I.h0}px`}}),(0,g.tZ)(G,{spans:this.props.spans,generateBounds:this.props.generateBounds,dividerPosition:t,rootSpan:this.props.rootSpan}),(0,g.tZ)(L.$,{children:e=>{let{displayCursorGuide:r,hideCursorGuide:n,mouseLeft:i,showCursorGuide:s}=e;return(0,g.BX)(ve,{ref:this.props.minimapInteractiveRef,style:{width:`calc(${(0,c.yI)(1-t)} - 0.5px)`,left:`calc(${(0,c.yI)(t)} + 0.5px)`},onMouseEnter:e=>{r(e.pageX)},onMouseLeave:()=>{n()},onMouseMove:e=>{r(e.pageX)},onMouseDown:e=>{const t=e.target;t instanceof Element&&t.getAttribute&&t.getAttribute("data-ignore")||this.props.dragProps.onWindowSelectionDragStart(e)},children:[(0,g.BX)(ne,{children:[this.renderFog(this.props.dragProps),this.renderCursorGuide({showCursorGuide:s,mouseLeft:i,cursorGuideHeight:I.DX}),this.renderViewHandles(this.props.dragProps),this.renderWindowSelection(this.props.dragProps)]}),this.renderTimeAxis({showCursorGuide:s,mouseLeft:i})]})}}),this.renderSecondaryHeader()]})}})})}}H.displayName="TraceViewHeader";class G extends s.PureComponent{renderRootSpan(){const{spans:e,generateBounds:t}=this.props;return e.map(((e,r)=>{switch(e.type){case"root_span":case"span":case"span_group_chain":{const{span:n}=e,i=(0,c.hd)((0,d.yk)(n)),s=t({startTimestamp:n.start_timestamp,endTimestamp:n.timestamp}),{left:o,width:a}=this.getBounds(s);return(0,g.tZ)(le,{style:{backgroundColor:"span_group_chain"===e.type?C.ZP.blue300:i,left:o,width:a}},`${e.type}-${r}`)}case"span_group_siblings":{const{spanSiblingGrouping:n}=e;return(0,g.tZ)(de,{"data-test-id":"minimap-sibling-group-bar",children:null==n?void 0:n.map(((e,r)=>{let{span:n}=e;const i=t({startTimestamp:n.start_timestamp,endTimestamp:n.timestamp}),{left:s,width:o}=this.getBounds(i);return(0,g.tZ)(le,{style:{backgroundColor:C.ZP.blue300,left:s,width:o,minWidth:0,position:"absolute"}},r)}))},`${e.type}-${r}`)}default:return null}}))}getBounds(e){switch(e.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{left:(0,c.yI)(0),width:"0px"};case"TIMESTAMPS_EQUAL":return{left:(0,c.yI)(e.start),width:`${e.width}px`};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{left:(0,c.yI)(e.start),width:(0,c.yI)(e.end-e.start)};default:return e}}render(){const{dividerPosition:e}=this.props;return(0,g.tZ)(re,{style:{width:`calc(${(0,c.yI)(1-e)} - 0.5px)`,left:`calc(${(0,c.yI)(e)} + 0.5px)`},children:(0,g.tZ)(ce,{id:"minimap-background-slider",children:this.renderRootSpan()})})}}G.displayName="ActualMinimap";const q=(0,i.Z)("div",{target:"e1jbvrxt19"})("width:100%;position:absolute;left:0;top:",I.DX,"px;border-top:1px solid ",(e=>e.theme.border),";height:",I.h0,"px;background-color:",(e=>e.theme.background),";color:",(e=>e.theme.gray300),";font-size:10px;font-weight:500;font-variant-numeric:tabular-nums;overflow:hidden;"),Q=(0,i.Z)("div",{target:"e1jbvrxt18"})("height:",I.h0,"px;position:absolute;top:0;display:flex;align-items:center;user-select:none;"),J=(0,i.Z)("span",{target:"e1jbvrxt17"})("position:absolute;line-height:1;white-space:nowrap;",(e=>{let{align:t}=e;switch(t){case O.tA.Center:return"transform: translateX(-50%)";case O.tA.Left:return null;case O.tA.Right:return"transform: translateX(-100%)";default:throw Error(`Invalid tick alignment: ${t}`)}}),";"),K=(0,i.Z)("div",{target:"e1jbvrxt16"})("width:1px;height:4px;background-color:",(e=>e.theme.gray200),";position:absolute;top:0;left:0;transform:translateX(-50%);"),Y=e=>{const{style:t,duration:r,hideTickMarker:n=!1,align:i=O.tA.Center}=e;return(0,g.BX)(Q,{style:t,children:[n?null:(0,g.tZ)(K,{}),(0,g.tZ)(J,{align:i,children:(0,c.bQ)(r)})]})};Y.displayName="TickLabel";const ee=(0,i.Z)("div",{target:"e1jbvrxt15"})("position:absolute;background-color:",(e=>e.theme.background),";padding:4px;height:100%;border-radius:3px;border:1px solid rgba(0, 0, 0, 0.1);line-height:1;white-space:nowrap;",(e=>{let{alignLeft:t}=e;return t?"transform: translateX(-100%) translateX(-8px);":null}),";"),te=(0,i.Z)("div",{target:"e1jbvrxt14"})("width:100%;position:sticky;left:0;top:",(e=>_.Z.get("demoMode")?e.theme.demo.headerSize:0),";z-index:",(e=>e.theme.zIndex.traceView.minimapContainer),";background-color:",(e=>e.theme.background),";border-bottom:1px solid ",(e=>e.theme.border),";height:",I.ZR,"px;border-top-left-radius:",(e=>e.theme.borderRadius),";border-top-right-radius:",(e=>e.theme.borderRadius),";"),re=(0,i.Z)("div",{target:"e1jbvrxt13"})("height:",I.DX,"px;max-height:",I.DX,"px;overflow:hidden;position:absolute;top:0;"),ne=(0,i.Z)("div",{target:"e1jbvrxt12"})("height:",I.DX,"px;width:100%;position:relative;left:0;"),ie=(0,i.Z)("div",{target:"e1jbvrxt11"})("position:absolute;top:0;height:",I.DX,"px;"),se=(0,i.Z)("div",{target:"e1jbvrxt10"})("height:",I.DX-I.S5,"px;width:2px;background-color:",(e=>e.theme.textColor),";"),oe=(0,i.Z)("div",{target:"e1jbvrxt9"})("position:absolute;background-color:",(e=>e.theme.textColor),";cursor:col-resize;width:8px;height:",I.S5,"px;bottom:0;left:-3px;"),ae=(0,i.Z)("div",{target:"e1jbvrxt8"})("background-color:",(e=>e.theme.textColor),";opacity:0.1;position:absolute;top:0;"),le=(0,i.Z)("div",{target:"e1jbvrxt7"})({name:"qf74iz",styles:"position:relative;height:2px;min-height:2px;max-height:2px;margin:2px 0;min-width:1px;border-radius:1px;box-sizing:border-box"}),de=(0,i.Z)("div",{target:"e1jbvrxt6"})({name:"1iwhu92",styles:"display:flex;position:relative;height:2px;min-height:2px;max-height:2px;top:-2px"}),ce=(0,i.Z)("div",{target:"e1jbvrxt5"})({name:"bjn8wh",styles:"position:relative"}),pe=(0,i.Z)("div",{target:"e1jbvrxt4"})("position:absolute;top:0;width:1px;background-color:",(e=>e.theme.red300),";transform:translateX(-50%);"),he=e=>{let{left:t,onMouseDown:r,isDragging:n}=e;return(0,g.BX)(ie,{style:{left:(0,c.yI)(t)},children:[(0,g.tZ)(se,{}),(0,g.tZ)(oe,{"data-ignore":"true",onMouseDown:r,isDragging:n,style:{height:`${I.S5}px`}})]})};he.displayName="Handle";const ue=(0,i.Z)("div",{target:"e1jbvrxt3"})("position:absolute;top:0;height:",I.DX,"px;background-color:",(e=>e.theme.textColor),";opacity:0.1;"),me=(0,i.Z)("div",{target:"e1jbvrxt2"})("position:absolute;top:",I.DX+I.h0,"px;left:0;height:",I.h0,"px;width:100%;background-color:",(e=>e.theme.backgroundSecondary),";display:flex;border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;"),ge=(0,i.Z)("div",{target:"e1jbvrxt1"})("height:",I.DX+I.h0,"px;position:absolute;left:0;top:0;overflow:hidden;"),ve=(0,i.Z)("div",{target:"e1jbvrxt0"})("height:",I.DX+I.h0,"px;position:absolute;top:0;"),fe=H},"./app/components/events/interfaces/spans/scrollbarManager.tsx":(e,t,r)=>{r.d(t,{$6:()=>v,Iw:()=>f,zt:()=>g});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/react/index.js")),s=r("../node_modules/lodash/throttle.js"),o=r.n(s),a=r("./app/components/performance/waterfall/utils.tsx"),l=r("./app/utils/getDisplayName.tsx"),d=r("./app/utils/userselect.tsx"),c=r("./app/components/events/interfaces/spans/utils.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=(0,i.createContext)({generateContentSpanBarRef:()=>()=>{},virtualScrollbarRef:(0,i.createRef)(),scrollBarAreaRef:(0,i.createRef)(),onDragStart:()=>{},onScroll:()=>{},onWheel:()=>{},updateScrollState:()=>{},markSpanOutOfView:()=>{},markSpanInView:()=>{},storeSpanBar:()=>{}}),u=(e,t)=>{e instanceof Set?e.forEach((e=>{document.body.contains(e)&&t(e)})):e.current&&t(e.current)},m=(e,t,r)=>e+r*(t-e);class g extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{maxContentWidth:void 0}),(0,n.Z)(this,"anchorCheckInterval",null),(0,n.Z)(this,"contentSpanBar",new Set),(0,n.Z)(this,"virtualScrollbar",(0,i.createRef)()),(0,n.Z)(this,"scrollBarArea",(0,i.createRef)()),(0,n.Z)(this,"isDragging",!1),(0,n.Z)(this,"isWheeling",!1),(0,n.Z)(this,"wheelTimeout",null),(0,n.Z)(this,"animationTimeout",null),(0,n.Z)(this,"previousUserSelect",null),(0,n.Z)(this,"spansInView",new c.Io),(0,n.Z)(this,"spanBars",[]),(0,n.Z)(this,"initializeScrollState",(()=>{if(0===this.contentSpanBar.size||!this.hasInteractiveLayer())return;u(this.contentSpanBar,(e=>{e.style.removeProperty("width"),e.style.removeProperty("max-width"),e.style.removeProperty("overflow"),e.style.removeProperty("transform")}));const e=Array.from(this.contentSpanBar).reduce(((e,t)=>{const r=null===t.offsetParent;if(!document.body.contains(t)||r)return e;const n=t.scrollWidth;return n>e?n:e}),0);u(this.contentSpanBar,(t=>{t.style.width=`${e}px`,t.style.maxWidth=`${e}px`,t.style.overflow="hidden"})),u(this.scrollBarArea,(t=>{t.style.width=`${e}px`,t.style.maxWidth=`${e}px`})),u(this.props.interactiveLayerRef,(e=>{e.scrollLeft=0}));const t=this.getReferenceSpanBar();t&&this.syncVirtualScrollbar(t);const r=this.spansInView.getScrollVal();this.performScroll(r)})),(0,n.Z)(this,"syncVirtualScrollbar",(e=>{if(!this.virtualScrollbar.current||!this.hasInteractiveLayer())return;const t=this.virtualScrollbar.current,r=e.getBoundingClientRect().width;if(void 0===r||r<=0)return void(t.style.width="0");const n=this.props.interactiveLayerRef.current.getBoundingClientRect().width,i=n/(n+(r-n));i>=1?t.style.width="0":(t.style.width=`max(50px, ${(0,a.yI)(i)})`,t.style.removeProperty("transform"))})),(0,n.Z)(this,"generateContentSpanBarRef",(()=>{let e=null;return t=>{e&&(this.contentSpanBar.delete(e),e=null),t&&(this.contentSpanBar.add(t),e=t)}})),(0,n.Z)(this,"hasInteractiveLayer",(()=>!!this.props.interactiveLayerRef.current)),(0,n.Z)(this,"initialMouseClickX",void 0),(0,n.Z)(this,"performScroll",((e,t)=>{const{interactiveLayerRef:r}=this.props;if(!r.current)return;t&&this.startAnimation();const n=r.current,i=n.getBoundingClientRect();n.scrollLeft=e,u(this.scrollBarArea,(t=>{u(this.virtualScrollbar,(r=>{const n=t.getBoundingClientRect(),s=e/n.width,o=1-(0,a.FV)(r).width/i.width,l=(0,a.uZ)(s,0,o)*i.width;r.style.transform=`translateX(${l}px)`,r.style.transformOrigin="left"}))})),u(this.contentSpanBar,(t=>{const r=-e;t.style.transform=`translateX(${r}px)`,t.style.transformOrigin="left"}))})),(0,n.Z)(this,"throttledScroll",o()(this.performScroll,300,{trailing:!0})),(0,n.Z)(this,"onWheel",(e=>{if(this.isDragging||!this.hasInteractiveLayer())return;this.disableAnimation(),this.isWheeling=!0,this.wheelTimeout&&clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((()=>{this.isWheeling=!1,this.wheelTimeout=null}),200);const t=this.props.interactiveLayerRef.current,r=t.scrollWidth-t.clientWidth,n=(0,a.uZ)(t.scrollLeft+e,0,r);this.performScroll(n)})),(0,n.Z)(this,"onScroll",(()=>{if(this.isDragging||this.isWheeling||!this.hasInteractiveLayer())return;const e=this.props.interactiveLayerRef.current.scrollLeft;this.performScroll(e)})),(0,n.Z)(this,"onDragStart",(e=>{if(this.isDragging||"mousedown"!==e.type||!this.hasInteractiveLayer()||!this.virtualScrollbar.current)return;e.stopPropagation();const t=(0,a.FV)(this.virtualScrollbar.current);this.initialMouseClickX=Math.abs(e.clientX-t.x),this.previousUserSelect=(0,d.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),this.isDragging=!0,u(this.virtualScrollbar,(e=>{e.classList.add("dragging"),document.body.style.setProperty("cursor","grabbing","important")}))})),(0,n.Z)(this,"onDragMove",(e=>{if(!this.isDragging||"mousemove"!==e.type||!this.hasInteractiveLayer()||!this.virtualScrollbar.current||void 0===this.initialMouseClickX)return;const t=this.virtualScrollbar.current,r=this.props.interactiveLayerRef.current.getBoundingClientRect(),n=(0,a.FV)(t),i=(e.pageX-r.x-this.initialMouseClickX)/r.width,s=1-n.width/r.width,o=(0,a.uZ)(i,0,1),l=(0,a.uZ)(o,0,s)*r.width;t.style.transform=`translate3d(${l}px, 0, 0)`,t.style.transformOrigin="left";const d=(0,a.uZ)(i/s,0,1);u(this.contentSpanBar,(e=>{const t=e.getBoundingClientRect().width-r.width,n=-m(0,t,d);e.style.transform=`translate3d(${n}px, 0, 0)`,e.style.transformOrigin="left"})),u(this.props.interactiveLayerRef,(e=>{u(this.scrollBarArea,(t=>{const n=t.getBoundingClientRect().width-r.width,i=m(0,n,d);e.scrollLeft=i}))}))})),(0,n.Z)(this,"onDragEnd",(e=>{this.isDragging&&"mouseup"===e.type&&this.hasInteractiveLayer()&&(this.cleanUpListeners(),this.previousUserSelect&&((0,d.l)(this.previousUserSelect),this.previousUserSelect=null),this.isDragging=!1,u(this.virtualScrollbar,(e=>{e.classList.remove("dragging"),document.body.style.removeProperty("cursor")})))})),(0,n.Z)(this,"cleanUpListeners",(()=>{this.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd))})),(0,n.Z)(this,"markSpanOutOfView",(e=>{if(!this.spansInView.removeSpan(e))return;const t=this.spansInView.getScrollVal();this.throttledScroll(t,!0)})),(0,n.Z)(this,"markSpanInView",((e,t)=>{if(!this.spansInView.addSpan(e,t))return;const r=this.spansInView.getScrollVal();this.throttledScroll(r,!0)})),(0,n.Z)(this,"storeSpanBar",(e=>{this.spanBars.push(e)}))}componentDidMount(){if(this.initializeScrollState(),window.location.hash.split("#")[1]){this.spansInView.isRootSpanInView=!1;const e=window.location.hash.replace((0,c.ct)(""),"");return this.anchorCheckInterval=setInterval((()=>{this.spanBars.forEach((e=>e.connectObservers())),this.spansInView.has(e)&&(clearInterval(this.anchorCheckInterval),this.anchorCheckInterval=null)}),50),void setTimeout((()=>{this.anchorCheckInterval&&(clearInterval(this.anchorCheckInterval),this.anchorCheckInterval=null)}),1e3)}this.spanBars.forEach((e=>e.connectObservers()))}componentDidUpdate(e){const t=this.props.dividerPosition!==e.dividerPosition,r=e.dragProps&&this.props.dragProps&&(e.dragProps.viewWindowStart!==this.props.dragProps.viewWindowStart||e.dragProps.viewWindowEnd!==this.props.dragProps.viewWindowEnd);(t||r)&&this.initializeScrollState()}componentWillUnmount(){this.cleanUpListeners(),this.anchorCheckInterval&&clearInterval(this.anchorCheckInterval)}getReferenceSpanBar(){for(const e of this.contentSpanBar){const t=null===e.offsetParent;if(document.body.contains(e)&&!t)return e}}startAnimation(){u(this.contentSpanBar,(e=>{e.style.transition="transform 0.3s"})),this.animationTimeout&&clearTimeout(this.animationTimeout),this.animationTimeout=setTimeout((()=>{u(this.contentSpanBar,(e=>{e.style.transition=""})),this.animationTimeout=null}),300)}disableAnimation(){u(this.contentSpanBar,(e=>{e.style.transition=""}))}render(){const e={generateContentSpanBarRef:this.generateContentSpanBarRef,onDragStart:this.onDragStart,onScroll:this.onScroll,onWheel:this.onWheel,virtualScrollbarRef:this.virtualScrollbar,scrollBarAreaRef:this.scrollBarArea,updateScrollState:this.initializeScrollState,markSpanOutOfView:this.markSpanOutOfView,markSpanInView:this.markSpanInView,storeSpanBar:this.storeSpanBar};return(0,p.tZ)(h.Provider,{value:e,children:this.props.children})}}g.displayName="Provider";const v=h.Consumer,f=e=>{var t;return t=class extends i.Component{render(){return(0,p.tZ)(h.Consumer,{children:t=>{const r={...this.props,...t};return(0,p.tZ)(e,{...r})}})}},(0,n.Z)(t,"displayName",`withScrollbarManager(${(0,l.Z)(e)})`),t}},"./app/components/events/interfaces/spans/spanDetail.tsx":(e,t,r)=>{r.d(t,{X2:()=>ie,wh:()=>q,iF:()=>Q,ZP:()=>ce});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),a=r("../node_modules/lodash/map.js"),l=r.n(a),d=r("../node_modules/lodash/omit.js"),c=r.n(d),p=r("./app/components/acl/feature.tsx"),h=r("./app/components/alert.tsx"),u=r("./app/components/button.tsx"),m=r("./app/components/dateTime.tsx"),g=r("./app/components/discoverButton.tsx"),v=r("./app/components/fileSize.tsx"),f=r("./app/components/links/externalLink.tsx"),x=r("./app/components/links/link.tsx"),y=r("./app/components/loadingIndicator.tsx"),w=r("./app/components/performance/waterfall/rowDetails.tsx"),b=r("./app/components/pill.tsx"),Z=r("./app/components/pills.tsx"),S=r("./app/components/quickTrace/utils.tsx"),P=r("./app/constants/pageFilters.tsx"),j=r("./app/icons/index.tsx"),k=r("./app/locale.tsx"),T=r("./app/styles/space.tsx"),D=r("./app/types/utils.tsx"),_=r("./app/utils.tsx"),C=r("./app/utils/discover/eventView.tsx"),I=r("./app/utils/discover/urls.tsx"),L=r("./app/utils/getDynamicText.tsx"),B=r("./app/utils/withApi.tsx"),M=r("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),A=r("./app/views/performance/transactionSummary/utils.tsx"),z=r("./app/components/events/interfaces/spans/context.tsx"),W=(r("../node_modules/prism-sentry/index.css"),r("../node_modules/@sentry/hub/esm/exports.js")),R=r("./app/actionCreators/projects.tsx"),$=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class E extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{loading:!0,html:void 0,link:void 0}),(0,n.Z)(this,"fetchData",(async()=>{const{platform:e,api:t,orgSlug:r,projectSlug:n}=this.props;if(!e)return;let i;switch(this.setState({loading:!0}),e){case"sentry.python":i="python-tracing";break;case"sentry.javascript.node":i="node-tracing";break;case"sentry.javascript.react-native":i="react-native-tracing";break;default:return void this.setState({loading:!1})}try{const{html:e,link:s}=await(0,R.iC)(t,r,n,i);this.setState({html:e,link:s})}catch(e){W.Tb(e),this.setState({html:void 0,link:void 0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}render(){const{platform:e}=this.props;return e?this.state.loading?(0,$.tZ)("div",{children:(0,$.tZ)(y.Z,{})}):this.state.html?(0,$.BX)("div",{children:[(0,$.tZ)("h4",{children:(0,k.t)("Requires Manual Instrumentation")}),(0,$.tZ)(V,{dangerouslySetInnerHTML:{__html:this.state.html}}),(0,$.tZ)("p",{children:(0,k._N)("For in-depth instructions on setting up tracing, view [docLink:our documentation].",{docLink:(0,$.tZ)("a",{href:this.state.link})})})]}):(0,$.BX)("div",{children:[(0,$.tZ)("h4",{children:(0,k.t)("Requires Manual Instrumentation")}),(0,$.tZ)("p",{children:(0,k._N)("To manually instrument certain regions of your code, view [docLink:our documentation].",{docLink:(0,$.tZ)(f.Z,{href:"https://docs.sentry.io/product/performance/getting-started/"})})})]}):null}}E.displayName="InlineDocs";const V=(0,i.Z)("div",{target:"e1p2d0fm0"})({name:"196c2e",styles:"p{line-height:1.5;}pre{word-break:break-all;white-space:pre-wrap;}"}),X=(0,B.Z)(E);var N=r("./app/components/events/interfaces/spans/types.tsx"),F=r("./app/components/events/interfaces/spans/utils.tsx");const U=["Encoded Body Size","Decoded Body Size","Transfer Size"];class O extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{errorsOpened:!1}),(0,n.Z)(this,"toggleErrors",(()=>{this.setState((e=>{let{errorsOpened:t}=e;return{errorsOpened:!t}}))}))}renderTraversalButton(){if(!this.props.childTransactions)return(0,$.tZ)(H,{size:"xsmall",disabled:!0,children:(0,$.tZ)(K,{size:12})});if(this.props.childTransactions.length<=0)return null;const{span:e,trace:t,event:r,organization:n}=this.props;if((0,D.hu)(!(0,F.hw)(e)),1===this.props.childTransactions.length)return null;const i=new Set(n.features),{start:s,end:o}=(0,F.TC)({start:t.traceStartTimestamp,end:t.traceEndTimestamp}),a=C.ZP.fromSavedQuery({id:void 0,name:`Children from Span ID ${e.span_id}`,fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:`event.type:transaction trace:${e.trace_id} trace.parent_span:${e.span_id}`,projects:i.has("global-views")?[P.mP]:[Number(r.projectID)],version:2,start:s,end:o});return(0,$.tZ)(H,{"data-test-id":"view-child-transactions",size:"xsmall",to:a.getResultsViewUrlTarget(n.slug),children:(0,k.t)("View Children")})}renderSpanChild(){const{childTransactions:e,organization:t,location:r}=this.props;if(!e||1!==e.length)return null;const n=e[0],i={"project.name":n.project_slug,transaction:n.transaction,"trace.span":n.span_id,id:n.event_id},s=(o=i,(0,I.JE)({id:o.id,"project.name":o["project.name"]}));var o;const a=(0,$.tZ)(z.$,{children:e=>{let{getViewChildTransactionTarget:o}=e;const a=o({...i,eventSlug:s});if(!a)return null;const l=(0,A.e1)({orgSlug:t.slug,transaction:i.transaction,query:c()(r.query,Object.values(P.V)),projectID:String(n.project_id)});return(0,$.BX)(oe,{children:[(0,$.tZ)(G,{"data-test-id":"view-child-transaction",size:"xsmall",to:a,children:(0,k.t)("View Transaction")}),(0,$.tZ)(G,{size:"xsmall",to:l,children:(0,k.t)("View Summary")})]})}});return(0,$.tZ)(ie,{title:"Child Transaction",extra:a,children:`${i.transaction} (${i["project.name"]})`})}renderTraceButton(){const{span:e,organization:t,event:r}=this.props;return(0,F.hw)(e)?null:(0,$.tZ)(G,{size:"xsmall",to:(0,S.aV)(r,t),children:(0,k.t)("View Trace")})}renderViewSimilarSpansButton(){const{span:e,organization:t,location:r,event:n}=this.props;if((0,F.hw)(e)||!e.op||!e.hash)return null;const i=n.title,s=(0,M.BP)({orgSlug:t.slug,transaction:i,query:r.query,spanSlug:{op:e.op,group:e.hash},projectID:n.projectID});return(0,$.tZ)(G,{size:"xsmall",to:s,children:(0,k.t)("View Similar Spans")})}renderOrphanSpanMessage(){const{span:e}=this.props;return(0,F.ro)(e)?(0,$.tZ)(h.Z,{type:"info",showIcon:!0,system:!0,children:(0,k.t)("This is a span that has no parent span within this transaction. It has been attached to the transaction root span by default.")}):null}renderSpanErrorMessage(){const{span:e,organization:t,relatedErrors:r}=this.props,{errorsOpened:n}=this.state;if(!r||r.length<=0||(0,F.hw)(e))return null;const i=n?r:r.slice(0,5);return(0,$.BX)(h.Z,{type:"error",showIcon:!0,system:!0,children:[(0,$.tZ)(w.CM,{children:(0,k.tn)("An error event occurred in this transaction.","%s error events occurred in this transaction.",r.length)}),(0,$.tZ)(w.TV,{children:i.map((e=>(0,$.BX)(s.Fragment,{children:[(0,$.tZ)(w._U,{level:e.level}),(0,$.tZ)(w.wE,{children:e.level}),(0,$.tZ)(w.St,{children:(0,$.tZ)(x.Z,{to:(0,S.F7)(e,t),children:e.title})})]},e.event_id)))}),r.length>5&&(0,$.tZ)(te,{size:"xsmall",onClick:this.toggleErrors,children:n?(0,k.t)("Show less"):(0,k.t)("Show more")})]})}partitionSizes(e){const t=U.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{}),r={...e};return U.forEach((e=>delete r[e])),{sizeKeys:t,nonSizeKeys:r}}renderSpanDetails(){var e,t;const{span:r,event:n,location:i,organization:o,scrollToHash:a}=this.props;var d,c;if((0,F.hw)(r))return(0,$.tZ)(Q,{children:(0,$.tZ)(X,{platform:(null===(d=n.sdk)||void 0===d?void 0:d.name)||"",orgSlug:o.slug,projectSlug:null!==(c=null==n?void 0:n.projectSlug)&&void 0!==c?c:""})});const h=r.start_timestamp,u=r.timestamp,g=`${Number((1e3*(u-h)).toFixed(3)).toLocaleString()}ms`,x=Object.keys(r).filter((e=>!N.gL.has(e))),{sizeKeys:y,nonSizeKeys:w}=this.partitionSizes(null!==(e=null==r?void 0:r.data)&&void 0!==e?e:{}),b=U.map((e=>y[e])).every((e=>0===e));return(0,$.BX)(s.Fragment,{children:[this.renderOrphanSpanMessage(),this.renderSpanErrorMessage(),(0,$.tZ)(Q,{children:(0,$.tZ)("table",{className:"table key-value",children:(0,$.BX)("tbody",{children:[(0,$.tZ)(ie,{title:(0,F.hw)(r)?(0,$.tZ)(re,{children:"Span ID"}):(0,$.BX)(re,{onClick:(0,F.rF)(r.span_id,a,i),children:["Span ID",(0,$.tZ)(ne,{})]}),extra:this.renderTraversalButton(),children:r.span_id}),(0,$.tZ)(ie,{title:"Parent Span ID",children:r.parent_span_id||""}),this.renderSpanChild(),(0,$.tZ)(ie,{title:"Trace ID",extra:this.renderTraceButton(),children:r.trace_id}),(0,$.tZ)(ie,{title:"Description",extra:this.renderViewSimilarSpansButton(),children:null!==(t=null==r?void 0:r.description)&&void 0!==t?t:""}),(0,$.tZ)(ie,{title:"Status",children:r.status||""}),(0,$.tZ)(ie,{title:"Start Date",children:(0,L.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,$.BX)(s.Fragment,{children:[(0,$.tZ)(m.Z,{date:1e3*h}),` (${h})`]})})}),(0,$.tZ)(ie,{title:"End Date",children:(0,L.Z)({fixed:"Mar 16, 2020 9:10:13 AM UTC",value:(0,$.BX)(s.Fragment,{children:[(0,$.tZ)(m.Z,{date:1e3*u}),` (${u})`]})})}),(0,$.tZ)(ie,{title:"Duration",children:g}),(0,$.tZ)(ie,{title:"Operation",children:r.op||""}),(0,$.tZ)(ie,{title:"Same Process as Parent",children:void 0!==r.same_process_as_parent?String(r.same_process_as_parent):null}),(0,$.BX)(p.Z,{organization:o,features:["organizations:performance-suspect-spans-view"],children:[(0,$.tZ)(ie,{title:"Span Group",children:(0,_.ri)(r.hash)?String(r.hash):null}),(0,$.tZ)(ie,{title:"Span Self Time",children:(0,_.ri)(r.exclusive_time)?`${Number(r.exclusive_time.toFixed(3)).toLocaleString()}ms`:null})]}),(0,$.tZ)(se,{span:r}),b&&(0,$.BX)(ee,{children:["The following sizes were not collected for security reasons. Check if the host serves the appropriate",(0,$.tZ)(f.Z,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin",children:(0,$.tZ)("span",{className:"val-string",children:"Timing-Allow-Origin"})}),"header. You may have to enable this collection manually."]}),l()(y,((e,t)=>(0,$.tZ)(ie,{title:t,children:(0,$.BX)(s.Fragment,{children:[(0,$.tZ)(v.Z,{bytes:e}),e>=1024&&(0,$.tZ)("span",{children:` (${JSON.stringify(e,null,4)||""} B)`})]})},t))),l()(w,((e,t)=>(0,$.tZ)(ie,{title:t,children:JSON.stringify(e,null,4)||""},t))),x.map((e=>(0,$.tZ)(ie,{title:e,children:JSON.stringify(r[e],null,4)||""},e)))]})})})]})}render(){return(0,$.tZ)(q,{"data-component":"span-detail",onClick:e=>{e.stopPropagation()},children:this.renderSpanDetails()})}}O.displayName="SpanDetail";const H=(0,i.Z)(g.Z,{target:"eb56mm213"})("position:absolute;top:",(0,T.Z)(.75),";right:",(0,T.Z)(.5),";"),G=(0,i.Z)(u.ZP,{target:"eb56mm212"})(""),q=(0,i.Z)("div",{target:"eb56mm211"})("border-bottom:1px solid ",(e=>e.theme.border),";cursor:auto;"),Q=(0,i.Z)("div",{target:"eb56mm210"})("padding:",(0,T.Z)(2),";"),J=(0,i.Z)("td",{target:"eb56mm29"})({name:"bjn8wh",styles:"position:relative"}),K=(0,i.Z)(y.Z,{target:"eb56mm28"})("display:flex;align-items:center;height:",(0,T.Z)(2),";margin:0;"),Y=(0,i.Z)("p",{target:"eb56mm27"})("font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,T.Z)(2)," ",(0,T.Z)(0),";"),ee=e=>{let{children:t}=e;return(0,$.BX)("tr",{children:[(0,$.tZ)("td",{className:"key"}),(0,$.tZ)(J,{className:"value",children:(0,$.tZ)(Y,{children:t})})]})};ee.displayName="TextTr";const te=(0,i.Z)(u.ZP,{target:"eb56mm26"})("margin-top:",(0,T.Z)(.75),";"),re=(0,i.Z)("a",{target:"eb56mm25"})("display:flex;color:",(e=>e.theme.textColor),";:hover{color:",(e=>e.theme.textColor),";}"),ne=(0,i.Z)(j.rS,{target:"eb56mm24"})("display:block;color:",(e=>e.theme.gray300),";margin-left:",(0,T.Z)(1),";"),ie=e=>{let{title:t,keep:r,children:n,extra:i=null}=e;return r||n?(0,$.BX)("tr",{children:[(0,$.tZ)("td",{className:"key",children:t}),(0,$.tZ)(J,{className:"value",children:(0,$.BX)(ae,{children:[(0,$.tZ)(le,{children:(0,$.tZ)("span",{className:"val-string",children:n})}),(0,$.tZ)(de,{children:i})]})})]}):null};ie.displayName="Row";const se=e=>{let{span:t}=e;const r=null==t?void 0:t.tags;if(!r)return null;const n=Object.keys(r);return n.length<=0?null:(0,$.BX)("tr",{children:[(0,$.tZ)("td",{className:"key",children:"Tags"}),(0,$.tZ)("td",{className:"value",children:(0,$.tZ)(Z.Z,{style:{padding:"8px"},children:n.map(((e,t)=>(0,$.tZ)(b.Z,{name:e,value:String(r[e])||""},t)))})})]})};se.displayName="Tags";const oe=(0,i.Z)("div",{target:"eb56mm23"})("display:flex;flex-direction:column;gap:",(0,T.Z)(.5),";"),ae=(0,i.Z)("div",{target:"eb56mm22"})("display:grid;grid-template-columns:auto min-content;gap:",(0,T.Z)(1),";border-radius:4px;background-color:",(e=>e.theme.surface100),";margin:2px;"),le=(0,i.Z)("pre",{target:"eb56mm21"})({name:"100r3j",styles:"margin:0!important;background-color:transparent!important"}),de=(0,i.Z)("div",{target:"eb56mm20"})({name:"16h96lx",styles:"padding:8px 10px"}),ce=(0,B.Z)((0,o.withRouter)(O))},"./app/components/events/interfaces/spans/types.tsx":(e,t,r)=>{r.d(t,{YT:()=>s,gL:()=>n,tA:()=>i}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");const n=new Set(["trace_id","parent_span_id","span_id","start_timestamp","timestamp","same_process_as_parent","op","description","status","data","tags","hash","exclusive_time"]);let i,s;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center"}(i||(i={})),function(e){e[e.DESCENDANTS=0]="DESCENDANTS",e[e.SIBLINGS=1]="SIBLINGS"}(s||(s={}))},"./app/components/fileSize.tsx":(e,t,r)=>{r.d(t,{Z:()=>d});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/utils.tsx"),s=r("./app/utils/getDynamicText.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const{className:t,bytes:r}=e;return(0,o.tZ)(l,{className:t,children:(0,s.Z)({value:(0,i.F)(r),fixed:"xx KB"})})}a.displayName="FileSize";const l=(0,n.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),d=a},"./app/components/performance/waterfall/messageRow.tsx":(e,t,r)=>{r.d(t,{V:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/components/performance/waterfall/constants.tsx"),s=r("./app/components/performance/waterfall/row.tsx"),o=r("./app/styles/space.tsx");const a=(0,n.Z)(s.X2,{target:"e1khbnog0"})("display:block;cursor:auto;line-height:",i.d,"px;padding-left:",(0,o.Z)(1),";padding-right:",(0,o.Z)(1),";color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";outline:1px solid ",(e=>e.theme.border),";font-size:",(e=>e.theme.fontSizeSmall),";z-index:",(e=>e.theme.zIndex.traceView.rowInfoMessage),";>*+*{margin-left:",(0,o.Z)(2),";}")},"./app/components/performance/waterfall/miniHeader.tsx":(e,t,r)=>{r.d(t,{Qk:()=>o,_i:()=>i,cs:()=>s,v6:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const i=(0,n.Z)("div",{target:"e1663mch3"})("width:1px;background-color:",(e=>e.theme.border),";"),s=(0,n.Z)("div",{target:"e1663mch2"})("display:block;width:100%;height:",70,"px;&>div[data-type='virtual-scrollbar'].dragging>div{background-color:",(e=>e.theme.textColor),";opacity:0.8;cursor:grabbing;}overflow-x:scroll;"),o=(0,n.Z)("div",{target:"e1663mch1"})("height:8px;width:0;padding-left:4px;padding-right:4px;position:sticky;top:",6,"px;left:0;cursor:grab;"),a=(0,n.Z)("div",{target:"e1663mch0"})("height:8px;width:100%;border-radius:20px;transition:background-color 150ms ease;background-color:",(e=>e.theme.textColor),";opacity:0.5;")},"./app/components/performance/waterfall/row.tsx":(e,t,r)=>{r.d(t,{E5:()=>l,Qc:()=>a,X2:()=>o});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/components/performance/waterfall/constants.tsx"),s=r("./app/components/performance/waterfall/utils.tsx");const o=(0,n.Z)("div",{target:"e1wrqgcn2"})("display:",(e=>e.visible?"block":"none"),";border-top:",(e=>e.showBorder?`1px solid ${e.theme.border}`:null),";margin-top:",(e=>e.showBorder?"-1px":null),";position:relative;overflow:hidden;min-height:",i.d,"px;cursor:",(e=>{var t;return null!==(t=e.cursor)&&void 0!==t?t:"pointer"}),";transition:background-color 0.15s ease-in-out;&:last-child{&>[data-component='span-detail']{border-bottom:none!important;}}"),a=(0,n.Z)("div",{target:"e1wrqgcn1"})("display:flex;position:relative;height:",i.d,"px;overflow:hidden;user-select:none;&:hover>div[data-type='span-row-cell']{background-color:",(e=>e.showDetail?e.theme.textColor:e.theme.backgroundSecondary),";}"),l=(0,n.Z)("div",{target:"e1wrqgcn0"})("position:relative;height:100%;overflow:hidden;background-color:",(e=>(0,s.dF)(e)),";transition:background-color 125ms ease-in-out;color:",(e=>e.showDetail?e.theme.background:"inherit"),";display:flex;align-items:center;")},"./app/components/performance/waterfall/rowDetails.tsx":(e,t,r)=>{r.d(t,{CM:()=>s,St:()=>d,TV:()=>o,_U:()=>a,wE:()=>l});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/styles/space.tsx");const s=(0,n.Z)("div",{target:"e1j8ceje4"})({name:"1eoy87d",styles:"display:flex;justify-content:space-between"}),o=(0,n.Z)("div",{target:"e1j8ceje3"})("display:grid;align-items:center;grid-template-columns:16px 72px auto;gap:",(0,i.Z)(.75),";margin-top:",(0,i.Z)(.75),";"),a=(0,n.Z)("div",{target:"e1j8ceje2"})("background-color:",(e=>e.theme.level[e.level]),";content:'';width:",(0,i.Z)(1),";min-width:",(0,i.Z)(1),";height:",(0,i.Z)(1),";margin-right:",(0,i.Z)(1),";border-radius:100%;flex:1;"),l=(0,n.Z)("span",{target:"e1j8ceje1"})({name:"m0jwvv",styles:"width:80px"}),d=(0,n.Z)("span",{target:"e1j8ceje0"})((e=>e.theme.overflowEllipsis),";")},"./app/components/performance/waterfall/rowDivider.tsx":(e,t,r)=>{r.d(t,{Hr:()=>d,cS:()=>p,kP:()=>a,mk:()=>h,xN:()=>l});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/icons/index.tsx"),s=r("./app/styles/space.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.Z)("div",{target:"e1hoco293"})({name:"zxn8uc",styles:"position:relative;min-width:1px"}),l=(0,n.Z)("div",{target:"e1hoco292"})("background-color:",(e=>e.showDetail?e.theme.textColor:e.theme.border),";position:absolute;height:100%;width:1px;transition:background-color 125ms ease-in-out;z-index:",(e=>e.theme.zIndex.traceView.dividerLine),";&:after{content:'';z-index:-1;position:absolute;left:-2px;top:0;width:5px;height:100%;}&.hovering{background-color:",(e=>e.theme.textColor),";width:3px;transform:translateX(-1px);margin-right:-2px;cursor:ew-resize;&:after{left:-2px;width:7px;}}"),d=(0,n.Z)("div",{target:"e1hoco291"})({name:"19s8nj4",styles:"position:absolute;width:100%;height:100%"}),c=(0,n.Z)("div",{target:"e1hoco290"})("position:absolute;margin:",(0,s.Z)(.25),";left:-11px;background:",(e=>e.theme.background),";width:",(0,s.Z)(3),";height:",(0,s.Z)(3),";border:1px solid ",(e=>e.theme[e.borderColor]),";border-radius:50%;z-index:",(e=>e.theme.zIndex.traceView.dividerLine),";display:flex;align-items:center;justify-content:center;");function p(){return(0,o.tZ)(c,{borderColor:"red300",children:(0,o.tZ)(i.zC,{color:"red300",size:"xs"})})}function h(e){let{expanded:t,onClick:r}=e;return(0,o.tZ)(c,{"data-test-id":"embedded-transaction-badge",borderColor:"border",onClick:e=>{e.stopPropagation(),e.preventDefault(),r()},children:t?(0,o.tZ)(i.JZ,{color:"textColor",size:"xs"}):(0,o.tZ)(i.N_,{color:"textColor",size:"xs"})})}p.displayName="ErrorBadge",h.displayName="EmbeddedTransactionBadge"},"./app/components/performance/waterfall/rowTitle.tsx":(e,t,r)=>{r.d(t,{$D:()=>l,Wh:()=>o,mw:()=>s,rv:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/components/performance/waterfall/constants.tsx");const s=(0,n.Z)("div",{target:"e1z0v4to3"})("display:flex;align-items:center;height:",i.d,"px;position:absolute;left:0;top:0;width:100%;user-select:none;"),o=(0,n.Z)("div",{target:"e1z0v4to2"})("position:relative;height:100%;font-size:",(e=>e.theme.fontSizeSmall),";white-space:nowrap;display:flex;flex:1;align-items:center;"),a=(0,n.Z)("span",{target:"e1z0v4to1"})("color:",(e=>e.errored?e.theme.error:"inherit"),";"),l=(0,n.Z)("span",{target:"e1z0v4to0"})("color:",(e=>e.theme.linkColor),";")},"./app/components/pill.tsx":(e,t,r)=>{r.d(t,{Z:()=>u});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("../node_modules/react/index.js"),s=r("./app/styles/space.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,i.memo)((e=>{let{name:t,value:r,children:n,type:i,className:s}=e;const{valueType:a,renderValue:l}=(()=>{if(void 0===r)return{};switch(r){case"true":case!0:return{valueType:"positive",renderValue:"true"};case"false":case!1:return{valueType:"negative",renderValue:"false"};case null:case void 0:return{valueType:"error",renderValue:"n/a"};default:return{valueType:void 0,renderValue:String(r)}}})();return(0,o.BX)(h,{type:null!=i?i:a,className:s,children:[(0,o.tZ)(c,{children:t}),(0,o.tZ)(p,{children:null!=n?n:l})]})})),l=e=>{let{type:t,theme:r}=e;return"error"===t?`\n        background: ${r.red100};\n        border: 1px solid ${r.red300};\n      `:`\n        border: 1px solid ${r.border};\n      `},d=e=>{let{type:t,theme:r}=e;switch(t){case"positive":return`\n        background: ${r.green100};\n        border: 1px solid ${r.green300};\n        border-left-color: ${r.green300};\n        font-family: ${r.text.familyMono};\n        margin: -1px;\n      `;case"error":return`\n        border-left-color: ${r.red300};\n        background: ${r.red100};\n        border: 1px solid ${r.red300};\n        margin: -1px;\n      `;case"negative":return`\n        border-left-color: ${r.red300};\n        background: ${r.red100};\n        border: 1px solid ${r.red300};\n        font-family: ${r.text.familyMono};\n        margin: -1px;\n      `;default:return`\n        background: ${r.backgroundSecondary};\n        font-family: ${r.text.familyMono};\n      `}},c=(0,n.Z)("span",{target:"e1qdl66w2"})("padding:",(0,s.Z)(.5)," ",(0,s.Z)(1),";min-width:0;white-space:nowrap;display:flex;align-items:center;"),p=(0,n.Z)(c,{target:"e1qdl66w1"})("border-left:1px solid ",(e=>e.theme.border),";border-radius:",(e=>`0 ${e.theme.button.borderRadius} ${e.theme.button.borderRadius} 0`),";max-width:100%;display:flex;align-items:center;>a{max-width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block;vertical-align:text-bottom;}.pill-icon,.external-icon{display:inline;margin:0 0 0 ",(0,s.Z)(1),";color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}}"),h=(0,n.Z)("li",{target:"e1qdl66w0"})("white-space:nowrap;margin:0 ",(0,s.Z)(1)," ",(0,s.Z)(1)," 0;display:flex;border-radius:",(e=>e.theme.button.borderRadius),";box-shadow:",(e=>e.theme.dropShadowLightest),";line-height:1.2;max-width:100%;:last-child{margin-right:0;}",l,";",p,"{",d,";}"),u=a},"./app/components/pills.tsx":(e,t,r)=>{r.d(t,{Z:()=>n});const n=(0,r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1nyfzl40"})("display:flex;flex-wrap:wrap;font-size:",(e=>e.theme.fontSizeSmall),";")},"./app/components/quickTrace/utils.tsx":(e,t,r)=>{r.d(t,{F7:()=>h,MV:()=>g,Tn:()=>m,aV:()=>v,t_:()=>p}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("./app/components/organizations/pageFilters/parse.tsx"),i=r("./app/constants/pageFilters.tsx"),s=r("./app/utils.tsx"),o=r("./app/utils/discover/eventView.tsx"),a=r("./app/utils/discover/urls.tsx"),l=r("./app/utils/performance/quickTrace/utils.tsx"),d=r("./app/utils/performance/urls.ts"),c=(r("./app/utils/tokenizeSearch.tsx"),r("./app/views/performance/traceDetails/utils.tsx"));function p(e){return(0,s.ri)(e["transaction.duration"])}function h(e,t){return`/organizations/${t.slug}/issues/${e.issue_id}/events/${e.event_id}`}function u(e,t,r){const n=(0,a.JE)({id:e.event_id,project:e.project_slug}),i={...r,query:{...r.query,project:String(e.project_id)}};return(0,a.eQ)({orgSlug:t.slug,eventSlug:n,eventView:o.ZP.fromLocation(i)})}function m(e,t,r,n){return"issue"===n?h(e,t):u(e,t,r)}function g(e,t,r,n){return"performance"===n?function(e,t,r){const n=(0,a.JE)({id:e.event_id,project:e.project_slug}),i={...r.query,project:String(e.project_id)};return(0,d.D)(t.slug,n,e.transaction,i)}(e,t,r):u(e,t,r)}function v(e,t){var r,s,a;const d=null!==(r=null===(s=e.contexts)||void 0===s||null===(a=s.trace)||void 0===a?void 0:a.trace_id)&&void 0!==r?r:"",p=(0,n.fK)((0,l.$J)(e));return t.features.includes("performance-view")?(0,c.YA)(t,d,p,{}):o.ZP.fromSavedQuery({id:void 0,name:`Events with Trace ID ${d}`,fields:["title","event.type","project","trace.span","timestamp"],orderby:"-timestamp",query:`trace:${d}`,projects:t.features.includes("global-views")?[i.mP]:[Number(e.projectID)],version:2,...p}).getResultsViewUrlTarget(t.slug)}},"./app/utils/fuzzySearch.tsx":(e,t,r)=>{r.d(t,{I:()=>i}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.error.cause.js");const n={includeScore:!0,includeMatches:!0,threshold:.4,location:0,distance:75,minMatchCharLength:2};async function i(e,t){if(!t.keys)throw new Error("You need to define `options.keys`");return new((await r.e("vendors-node_modules_fuse_js_dist_fuse_esm_js").then(r.bind(r,"../node_modules/fuse.js/dist/fuse.esm.js"))).default)(e,{...n,...t})}},"./app/utils/performance/urls.ts":(e,t,r)=>{r.d(t,{D:()=>s});var n=r("./app/components/events/interfaces/spans/utils.tsx"),i=r("./app/utils.tsx");function s(e,t,r,s,o){const a={...s||{},transaction:r};(0,i.ri)(a.transaction)||delete a.transaction;const l={pathname:`/organizations/${e}/performance/${t}/`,query:a,hash:(0,i.ri)(o)?(0,n.ct)(o):void 0};return(0,i.ri)(l.hash)||delete l.hash,l}},"./app/utils/userselect.tsx":(e,t,r)=>{r.d(t,{l:()=>n});const n=e=>{const t={userSelect:document.body.style.userSelect,MozUserSelect:document.body.style.MozUserSelect,msUserSelect:document.body.style.msUserSelect,webkitUserSelect:document.body.style.webkitUserSelect};return document.body.style.userSelect=e.userSelect||"",document.body.style.MozUserSelect=e.MozUserSelect||"",document.body.style.msUserSelect=e.msUserSelect||"",document.body.style.webkitUserSelect=e.webkitUserSelect||"",t}},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,r)=>{function n(e){let{orgSlug:t,transaction:r,query:n,spanSlug:i,projectID:s}=e;const o=function(e){let{orgSlug:t,spanSlug:r}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(r.op)}:${r.group}/`}({orgSlug:t,spanSlug:i});return{pathname:o,query:{transaction:r,project:s,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}let i;r.d(t,{BP:()=>n,wL:()=>i}),function(e){e.MIN="min",e.MAX="max"}(i||(i={}))},"./app/views/performance/transactionSummary/utils.tsx":(e,t,r)=>{r.d(t,{K0:()=>d,PU:()=>p,Z6:()=>u,e1:()=>h,uI:()=>g,vd:()=>m,xf:()=>c});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=r("./app/styles/space.tsx"),s=r("./app/utils/discover/urls.tsx"),o=r("./app/utils/performance/urls.ts"),a=r("./app/utils/tokenizeSearch.tsx"),l=r("./app/views/performance/traceDetails/utils.tsx");let d;function c(e){const t=p(e);return t.removeFilter("transaction"),t}function p(e){const t=new a.MY(e);return t.removeFilter("event.type"),t}function h(e){let{orgSlug:t,transaction:r,projectID:n,query:i,unselectedSeries:s="p100()",display:o,trendFunction:a,trendColumn:l,showTransactions:d,additionalQuery:p}=e;const h=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let u;return u="string"==typeof i.query?c(i.query).formatString():i.query,{pathname:h,query:{transaction:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:u,unselectedSeries:s,showTransactions:d,display:o,trendFunction:a,trendColumn:l,...p}}}function u(e){return(t,r,n)=>{const i=`${r.trace}`;return i?(0,l.YA)(t,i,e,{}):{}}}function m(e){return(t,r,n,i)=>{const a=(0,s.JE)(r);return(0,o.D)(t.slug,a,e,n,i)}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(d||(d={}));const g=(0,n.Z)("div",{target:"e1radvp0"})("margin-top:",(0,i.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_eventTags_eventTagsPill_tsx-app_components_events_interfaces_spans_anch-a41bd2.2171595ee638934c306da40a6c321a1e.js.map