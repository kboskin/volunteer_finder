"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionOverview_charts_tsx-app_views_releases_de-8283aa"],{"./app/components/charts/barChartZoom.tsx":(e,t,r)=>{r.d(t,{Z:()=>u});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),i=r("./app/components/charts/components/dataZoomInside.tsx"),a=r("./app/components/charts/components/toolBox.tsx"),l=r("./app/utils/callIfFunction.tsx");class d extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"zooming",null),(0,s.Z)(this,"handleChartReady",(e=>{(0,l.g)(this.props.onChartReady,e)})),(0,s.Z)(this,"handleChartFinished",((e,t)=>{var r;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const s=null===(r=t._componentsViews)||void 0===r?void 0:r.find((e=>e._features&&e._features.dataZoom));s&&!s._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0})})),(0,s.Z)(this,"handleDataZoom",((e,t)=>{const r=t.getModel(),{startValue:s,endValue:n}=r._payload.batch[0];if(null!==s&&null!==n){const{buckets:e,location:r,paramStart:i,paramEnd:a,minZoomWidth:d,onHistoryPush:u}=this.props,{start:c}=e[s],{end:p}=e[n];if(void 0===d||p-c>d){const e={pathname:r.pathname,query:{...r.query,[i]:c,[a]:p}};u?u(c,p):o.browserHistory.push(e)}else t.dispatchAction({type:"restore"}),(0,l.g)(this.props.onDataZoomCancelled)}else t.dispatchAction({type:"restore"}),(0,l.g)(this.props.onDataZoomCancelled);(0,l.g)(this.props.onDataZoom,e,t)}))}render(){const{children:e,xAxisIndex:t}=this.props;return e({onChartReady:this.handleChartReady,onFinished:this.handleChartFinished,dataZoom:(0,i.Z)({xAxisIndex:t}),toolBox:(0,a.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom})}}d.displayName="BarChartZoom";const u=d},"./app/components/charts/components/visualMap.tsx":(e,t,r)=>{function s(e){return e}r.d(t,{Z:()=>s}),r("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/errorPanel.tsx":(e,t,r)=>{r.d(t,{Z:()=>s});const s=(0,r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1six6h50"})("display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height||"200px"),";position:relative;border-color:transparent;margin-bottom:0;color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeExtraLarge),";")},"./app/components/charts/eventsChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>N});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),o=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),i=r("../node_modules/lodash/isEqual.js"),a=r.n(i),l=r("./app/components/charts/areaChart.tsx"),d=r("./app/components/charts/barChart.tsx"),u=r("./app/components/charts/chartZoom.tsx"),c=r("./app/components/charts/errorPanel.tsx"),p=r("./app/components/charts/lineChart.tsx"),m=r("./app/components/charts/releaseSeries.tsx"),h=r("./app/components/charts/transitionChart.tsx"),g=r("./app/components/charts/transparentLoadingMask.tsx"),v=r("./app/components/charts/utils.tsx"),S=r("./app/components/charts/worldMapChart.tsx"),f=r("./app/icons/index.tsx"),y=r("./app/locale.tsx"),R=r("./app/utils.tsx"),Z=r("./app/utils/discover/charts.tsx"),E=r("./app/utils/discover/fields.tsx"),x=r("./app/utils/queryString.tsx"),_=r("./app/components/charts/eventsGeoRequest.tsx"),A=r("./app/components/charts/eventsRequest.tsx"),T=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{seriesSelection:{},forceUpdate:!1}),(0,s.Z)(this,"handleLegendSelectChanged",(e=>{const{disableableSeries:t=[]}=this.props,{selected:r}=e,s=Object.keys(r).reduce(((e,s)=>{const n=["Releases","Other"].includes(s)||t.includes(s);return e[s]=!n||r[s],e}),{});this.setState({seriesSelection:s,forceUpdate:!0},(()=>this.setState({forceUpdate:!1})))}))}shouldComponentUpdate(e,t){return!(!t.forceUpdate&&a()(this.state.seriesSelection,t.seriesSelection)&&(e.reloading||!e.timeseriesData||a()(this.props.timeseriesData,e.timeseriesData)&&a()(this.props.releaseSeries,e.releaseSeries)&&a()(this.props.previousTimeseriesData,e.previousTimeseriesData)&&a()(this.props.tableData,e.tableData)))}getChartComponent(){const{showDaily:e,timeseriesData:t,yAxis:r,chartComponent:s}=this.props;if((0,R.ri)(s))return s;if(e)return d.v;if(t.length>1)switch((0,E.fD)(r)){case"line":return p.w;case"area":return l.T;default:throw new Error(`Unknown multi plot type for ${r}`)}return l.T}render(){var e,t;const{theme:r,loading:s,reloading:n,yAxis:o,releaseSeries:i,zoomRenderProps:a,timeseriesData:l,previousTimeseriesData:u,showLegend:c,legendOptions:p,chartOptions:m,currentSeriesNames:h,previousSeriesNames:g,seriesTransformer:f,previousSeriesTransformer:R,colors:E,height:x,timeframe:_,topEvents:A,tableData:b,fromDiscover:I,...w}=this.props,{seriesSelection:N}=this.state;let C=this.getChartComponent();if(C===S.y){const{data:e,title:t}=(0,v.JT)(b),r=[{seriesName:t,data:e}];return(0,T.tZ)(S.y,{series:r,fromDiscover:I})}C=C;const O=[...h.length>0?h:[(0,y.t)("Current")],...g.length>0?g:[(0,y.t)("Previous")]],D=(0,y.t)("Releases"),L=A&&A+1===l.length;L&&O.push("Other"),Array.isArray(i)&&O.push(D);const P=i&&i[0],j=Array.isArray(i)&&(null==P||null===(e=P.markLine)||void 0===e?void 0:e.data)&&P.markLine.data.length>=v.XO,$=Array.isArray(i)&&0===Object.keys(N).length&&j?{[D]:!1}:N,k=c?{right:16,top:12,data:O,selected:$,...null!=p?p:{}}:void 0;let U=Array.isArray(i)?[...l,...i]:l,F=u;var z;f&&(U=f(U)),R&&(F=null===(z=F)||void 0===z?void 0:z.map((e=>R(e))));const B=l.length?null!==(t=null==E?void 0:E.slice(0,U.length))&&void 0!==t?t:[...r.charts.getColorPalette(l.length-2-(L?1:0))]:void 0;B&&B.length&&L&&B.push(r.chartOther);const G={colors:B,grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:e=>(0,Z.CX)(e,o)},xAxis:_?{min:_.start,max:_.end}:void 0,yAxis:{axisLabel:{color:r.chartLabel,formatter:e=>(0,Z.gu)(e,o)}},...null!=m?m:{},animation:typeof C!=typeof d.v&&void 0};return(0,T.tZ)(C,{...w,...a,...G,legend:k,onLegendSelectChanged:this.handleLegendSelectChanged,series:U,previousPeriod:F||void 0,height:x})}}b.displayName="Chart";const I=(0,o.d)(b);class w extends n.Component{isStacked(){const{topEvents:e,yAxis:t}=this.props;return"number"==typeof e&&e>0||Array.isArray(t)&&t.length>1}render(){const{api:e,organization:t,period:r,utc:s,query:o,router:i,start:a,end:l,projects:d,environments:p,showLegend:R,minutesThresholdToDisplaySeconds:Z,yAxis:b,disablePrevious:w,disableReleases:N,emphasizeReleases:C,currentSeriesName:O,previousSeriesName:D,seriesTransformer:L,previousSeriesTransformer:P,field:j,interval:$,showDaily:k,topEvents:U,orderby:F,confirmedQuery:z,colors:B,chartHeader:G,legendOptions:q,chartOptions:M,preserveReleaseQueryParams:H,releaseQueryExtra:V,disableableSeries:X,chartComponent:W,usePageZoom:Y,height:Q,withoutZerofill:K,fromDiscover:J,...ee}=this.props,te=!w&&!a&&!l,re=(0,x.qP)(b),se=re.map((e=>{let t=e&&(0,E.GO)(e)?(0,E.vp)(e):e;return t&&t.length>60&&(t=t.substr(0,60)+"..."),t})),ne=D?[D]:se.map((e=>(0,y.t)("previous %s",e))),oe=O?[O]:se,ie=k?"1d":$||(0,v.ZS)(this.props,"high");let ae=e=>{let{zoomRenderProps:t,releaseSeries:r,errored:s,loading:o,reloading:i,results:a,timeseriesData:l,previousTimeseriesData:d,timeframe:u,tableData:p}=e;if(s)return(0,T.tZ)(c.Z,{children:(0,T.tZ)(f.FC,{color:"gray300",size:"lg"})});const m=a||l;return(0,T.BX)(h.Z,{loading:o,reloading:i,height:Q?`${Q}px`:void 0,children:[(0,T.tZ)(g.Z,{visible:i}),n.isValidElement(G)&&G,(0,T.tZ)(I,{zoomRenderProps:t,loading:o,reloading:i,showLegend:R,minutesThresholdToDisplaySeconds:Z,releaseSeries:r||[],timeseriesData:null!=m?m:[],previousTimeseriesData:d,currentSeriesNames:oe,previousSeriesNames:ne,seriesTransformer:L,previousSeriesTransformer:P,stacked:this.isStacked(),yAxis:re[0],showDaily:k,colors:B,legendOptions:q,chartOptions:M,disableableSeries:X,chartComponent:W,height:Q,timeframe:u,topEvents:U,tableData:null!=p?p:[],fromDiscover:J})]})};if(!N){const e=ae;ae=t=>(0,T.tZ)(m.Z,{utc:s,period:r,start:a,end:l,projects:d,environments:p,emphasizeReleases:C,preserveQueryParams:H,queryExtra:V,children:r=>{let{releaseSeries:s}=r;return e({...t,releaseSeries:s})}})}return(0,T.tZ)(u.Z,{router:i,period:r,start:a,end:l,utc:s,usePageDate:Y,...ee,children:s=>W===S.y?(0,T.tZ)(_.Z,{api:e,organization:t,yAxis:b,query:o,orderby:F,projects:d,period:r,start:a,end:l,environments:p,referrer:ee.referrer,children:e=>{let{errored:t,loading:r,reloading:n,tableData:o}=e;return ae({errored:t,loading:r,reloading:n,zoomRenderProps:s,tableData:o})}}):(0,T.tZ)(A.Z,{...ee,api:e,organization:t,period:r,project:d,environment:p,start:a,end:l,interval:ie,query:o,includePrevious:te,currentSeriesNames:oe,previousSeriesNames:ne,yAxis:b,field:j,orderby:F,topEvents:U,confirmedQuery:z,partial:!0,withoutZerofill:K&&!this.isStacked(),userModified:(0,x.ro)(i.location.query.userModified),children:e=>ae({...e,zoomRenderProps:s})})})}}w.displayName="EventsChart";const N=w},"./app/components/charts/eventsGeoRequest.tsx":(e,t,r)=>{r.d(t,{Z:()=>a}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/react/index.js"),n=r("./app/utils/dates.tsx"),o=r("./app/utils/discover/eventView.tsx"),i=r("./app/utils/discover/genericDiscoverQuery.tsx");const a=e=>{let{api:t,organization:r,yAxis:a,query:l,orderby:d,projects:u,period:c,start:p,end:m,environments:h,referrer:g,children:v}=e;const S=o.ZP.fromSavedQuery({id:void 0,name:"",version:2,fields:Array.isArray(a)?a:[a],query:l,orderby:null!=d?d:"",projects:u,range:null!=c?c:"",start:p?(0,n.v5)(p):void 0,end:m?(0,n.v5)(m):void 0,environment:h}),[f,y]=(0,s.useState)(void 0),[R,Z]=(0,s.useState)(!1),[E,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{let e=!0;return x(!1),f&&Z(!0),(0,i.AA)(t,`/organizations/${r.slug}/events-geo/`,{...S.generateQueryStringObject(),referrer:g}).then((t=>{e&&(y([t[0]]),Z(!1))})).catch((()=>{e&&(x(!0),Z(!1))})),()=>{e=!1}}),[l,a,p,m,c,h,u]),v({errored:E,loading:!f&&!E,reloading:R,tableData:f})}},"./app/components/charts/lineChart.tsx":(e,t,r)=>{r.d(t,{w:()=>i});var s=r("./app/components/charts/series/lineSeries.tsx"),n=r("./app/components/charts/baseChart.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:r,...i}=e;return(0,o.tZ)(n.Z,{...i,series:t.map((e=>{let{seriesName:t,data:n,dataArray:o,...i}=e;return(0,s.Z)({...r,...i,name:t,data:o||(null==n?void 0:n.map((e=>{let{value:t,name:r}=e;return[r,t]}))),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/charts/optionSelector.tsx":(e,t,r)=>{r.d(t,{Z:()=>p});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),o=r("./app/components/featureBadge.tsx"),i=r("./app/components/forms/compactSelect.tsx"),a=r("./app/components/truncate.tsx"),l=r("./app/utils.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{options:t,onChange:r,selected:s,title:o,featureType:u,multiple:p,...m}=e;const h=(0,n.useMemo)((()=>t.map((e=>({...e,label:(0,d.tZ)(a.Z,{value:String(e.label),maxLength:60,expandDirection:"left"})})))),[t]);return(0,d.tZ)(i.Z,{options:h,value:s,onChange:function(e){r(p?e.map((e=>e.value)):e.value)},isOptionDisabled:function(e){return e.disabled||p&&3===s.length&&!s.includes(e.value)},multiple:p,triggerProps:{size:"small",borderless:!0,prefix:(0,d.BX)(n.Fragment,{children:[o,(0,l.ri)(u)?(0,d.tZ)(c,{type:u}):null]})},placement:"bottom right",...m})}u.displayName="OptionSelector";const c=(0,s.Z)(o.Z,{target:"e1a4edto0"})({name:"6og82r",styles:"margin-left:0px"}),p=u},"./app/components/charts/releaseSeries.tsx":(e,t,r)=>{r.d(t,{Z:()=>_});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),i=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),a=r("../node_modules/lodash/isEqual.js"),l=r.n(a),d=r("../node_modules/lodash/memoize.js"),u=r.n(d),c=r("../node_modules/lodash/partition.js"),p=r.n(c),m=r("./app/actionCreators/indicator.tsx"),h=r("./app/components/charts/components/markLine.tsx"),g=r("./app/locale.tsx"),v=r("./app/utils.tsx"),S=r("./app/utils/dates.tsx"),f=r("./app/utils/formatters.tsx"),y=r("./app/utils/parseLinkHeader.tsx"),R=r("./app/utils/withApi.tsx"),Z=r("./app/utils/withOrganization.tsx");function E(e,t,r){const s={};return Object.keys(r).forEach((e=>{let t=r[e];!t||"start"!==e&&"end"!==e||(t=(0,S.v5)(t)),t&&(s[e]=t)})),e.clear(),e.requestPromise(`/organizations/${t.slug}/releases/stats/`,{includeAllArgs:!0,method:"GET",query:s})}class x extends n.Component{constructor(){var e;super(...arguments),e=this,(0,s.Z)(this,"state",{releases:null,releaseSeries:[]}),(0,s.Z)(this,"_isMounted",!1),(0,s.Z)(this,"getOrganizationReleasesMemoized",u()(((e,t,r)=>E(e,t,r)),((e,t,r)=>Object.values(r).map((e=>JSON.stringify(e))).join("-")))),(0,s.Z)(this,"getReleaseSeries",(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{organization:s,router:n,tooltip:o,environments:i,start:a,end:l,period:d,preserveQueryParams:u,queryExtra:c,theme:p}=e.props,m={...c};s.features.includes("global-views")&&(m.project=n.location.query.project),u&&(m.environment=[...i],m.start=a?(0,S.v5)(a):void 0,m.end=l?(0,S.v5)(l):void 0,m.statsPeriod=d||void 0);const y=(0,h.Z)({animation:!1,lineStyle:{color:p.purple300,opacity:.3,type:"solid",...r},label:{show:!1},data:t.map((e=>({xAxis:+new Date(e.date),name:(0,f.ko)(e.version,!0),value:(0,f.ko)(e.version,!0),onClick:()=>{n.push({pathname:`/organizations/${s.slug}/releases/${e.version}/`,query:m})},label:{formatter:()=>(0,f.ko)(e.version,!0)}}))),tooltip:o||{trigger:"item",formatter:t=>{let{data:r}=t;const s=(0,S.L0)(r.value,"MMM D, YYYY LT",{local:!e.props.utc}),n=(0,v.YU)((0,f.ko)(r.name,!0));return['<div class="tooltip-series">',`<div><span class="tooltip-label"><strong>${(0,g.t)("Release")}</strong></span> ${n}</div>`,"</div>",'<div class="tooltip-date">',s,"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")}}});return{seriesName:"Releases",color:p.purple200,data:[],markLine:y}}))}componentDidMount(){this._isMounted=!0;const{releases:e}=this.props;e?this.setReleasesWithSeries(e):this.fetchData()}componentDidUpdate(e){l()(e.projects,this.props.projects)&&l()(e.environments,this.props.environments)&&l()(e.start,this.props.start)&&l()(e.end,this.props.end)&&l()(e.period,this.props.period)&&l()(e.query,this.props.query)?l()(e.emphasizeReleases,this.props.emphasizeReleases)||this.setReleasesWithSeries(this.state.releases):this.fetchData()}componentWillUnmount(){this._isMounted=!1,this.props.api.clear()}async fetchData(){const{api:e,organization:t,projects:r,environments:s,period:n,start:o,end:i,memoized:a,query:l}=this.props,d={start:o,end:i,project:r,environment:s,statsPeriod:n,query:l};let u=!0;const c=[];for(;u;)try{const r=a?this.getOrganizationReleasesMemoized:E,[s,,n]=await r(e,t,d);c.push(...s),this._isMounted&&this.setReleasesWithSeries(c);const o=null==n?void 0:n.getResponseHeader("Link");if(o){var p,h;const e=(0,y.Z)(o);u=null!==(p=null==e||null===(h=e.next)||void 0===h?void 0:h.results)&&void 0!==p&&p,d.cursor=e.next.cursor}else u=!1}catch{(0,m.Iw)((0,g.t)("Error fetching releases")),u=!1}}setReleasesWithSeries(e){const{emphasizeReleases:t=[]}=this.props,r=[];if(t.length){const[s,n]=p()(e,(e=>!t.includes(e.version)));s.length&&r.push(this.getReleaseSeries(s,{type:"dotted"})),n.length&&r.push(this.getReleaseSeries(n,{opacity:.8}))}else r.push(this.getReleaseSeries(e));this.setState({releases:e,releaseSeries:r})}render(){const{children:e}=this.props;return e({releases:this.state.releases,releaseSeries:this.state.releaseSeries})}}x.displayName="ReleaseSeries";const _=(0,o.withRouter)((0,Z.Z)((0,R.Z)((0,i.d)(x))))},"./app/components/charts/sessionsRequest.tsx":(e,t,r)=>{r.d(t,{Z:()=>g});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/lodash/isEqual.js"),i=r.n(o),a=r("../node_modules/lodash/omitBy.js"),l=r.n(a),d=r("./app/actionCreators/indicator.tsx"),u=r("./app/locale.tsx"),c=r("./app/utils/sessions.tsx");const p=["api","children","organization"],m=e=>l()(e,((e,t)=>p.includes(t)));class h extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{reloading:!1,errored:!1,response:null}),(0,s.Z)(this,"fetchData",(async()=>{const{api:e,isDisabled:t,shouldFilterSessionsInTimeWindow:r}=this.props;if(!t){this.setState((e=>({reloading:null!==e.response,errored:!1})));try{const t=await e.requestPromise(this.path,{query:this.baseQueryParams});this.setState({reloading:!1,response:r?(0,c.U5)(t,this.baseQueryParams.start,this.baseQueryParams.end):t})}catch(e){var s,n;(0,d.Iw)(null!==(s=null===(n=e.responseJSON)||void 0===n?void 0:n.detail)&&void 0!==s?s:(0,u.t)("Error loading health data")),this.setState({reloading:!1,errored:!0})}}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){i()(m(e),m(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return`/organizations/${e.slug}/sessions/`}get baseQueryParams(){const{project:e,environment:t,field:r,statsPeriod:s,start:n,end:o,query:i,groupBy:a,interval:l,organization:d}=this.props;return{project:e,environment:t,field:r,statsPeriod:s,query:i,groupBy:a,start:n,end:o,interval:l||(0,c.Xz)({start:n,end:o,period:s},{highFidelity:d.features.includes("minute-resolution-sessions")})}}render(){const{reloading:e,errored:t,response:r}=this.state,{children:s}=this.props;return s({loading:null===r,reloading:e,errored:t,response:r})}}h.displayName="SessionsRequest";const g=h},"./app/components/charts/stackedAreaChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>a});var s=r("../node_modules/react/index.js"),n=r("./app/components/charts/areaChart.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Component{render(){return(0,o.tZ)(n.T,{tooltip:{filter:e=>e>0},...this.props,stacked:!0})}}i.displayName="StackedAreaChart";const a=i},"./app/components/charts/transitionChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/components/charts/loadingPanel.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const r=t.prevReloading,s=e.reloading,n=t.prevLoading,o=e.loading;return n!==o?{prevReloading:s,prevLoading:o,key:t.key+1}:o?{prevReloading:s,prevLoading:o,key:t.key}:r&&!s?{prevReloading:s,prevLoading:o,key:t.key+1}:{prevReloading:s,prevLoading:o,key:t.key}}render(){const{height:e,loading:t,reloading:r}=this.props;return t&&!r?(0,i.tZ)(o.Z,{height:e,"data-test-id":"events-request-loading"}):(0,i.tZ)(n.Fragment,{children:this.props.children},String(this.state.key))}}a.displayName="TransitionChart",(0,s.Z)(a,"defaultProps",{height:"200px"});const l=a},"./app/components/charts/transparentLoadingMask.tsx":(e,t,r)=>{r.d(t,{Z:()=>i});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/components/loadingMask.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,s.Z)((e=>{let{className:t,visible:r,children:s,...i}=e;const a=r?{...i,"data-test-id":"loading-placeholder"}:i;return(0,o.tZ)(n.Z,{className:t,...a,children:s})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/charts/worldMapChart.tsx":(e,t,r)=>{r.d(t,{y:()=>p}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/react/index.js"),n=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),o=r("../node_modules/echarts/core.js"),i=r("../node_modules/echarts/lib/core/echarts.js"),a=r("../node_modules/lodash/max.js"),l=r.n(a),d=r("./app/components/charts/components/visualMap.tsx");r("../node_modules/echarts/lib/chart/map.js");var u=r("./app/components/charts/baseChart.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{series:t,seriesOptions:a,fromDiscover:p,fromDiscoverQueryList:m,...h}=e;const g=(0,n.a)(),[v,S]=(0,s.useState)((()=>({countryToCodeMap:null,map:null,codeToCountryMap:null})));if((0,s.useEffect)((()=>{let e=!1;return e||async function(){try{var e;const[t,s]=await Promise.all([r.e("app_data_countryCodesMap_tsx").then(r.bind(r,"./app/data/countryCodesMap.tsx")),r.e("app_data_world_json").then(r.t.bind(r,"./app/data/world.json",19))]),n=t.default,a=s.default;null===(e=i.je)||void 0===e||e.call(o,"sentryWorld",a);const l={};for(const e in a)l[n[e]]=e;S({countryToCodeMap:n,map:a,codeToCountryMap:l})}catch{}}(),()=>{e=!0}}),[]),null===v.countryToCodeMap||null===v.map)return null;const f=t.map((e=>{var t;let{seriesName:r,data:s,...n}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{map:""};return{roam:!0,...e,emphasis:{label:{show:!1},...e.emphasis},type:"map"}}({...a,...n,map:"sentryWorld",name:r,nameMap:null!==(t=v.countryToCodeMap)&&void 0!==t?t:void 0,aspectScale:.85,zoom:p?1.1:m?.9:1.3,center:[10.97,m?-12:9.71],itemStyle:{areaColor:g.gray200,borderColor:g.backgroundSecondary},emphasis:{itemStyle:{areaColor:g.pink300},label:{show:!1}},data:s,silent:m,roam:!m})})),y=l()(t.map((e=>{let{data:t}=e;return l()(t.map((e=>{let{value:t}=e;return t})))})))||1;return(0,c.tZ)(u.Z,{options:{backgroundColor:m?void 0:g.background,visualMap:[(0,d.Z)({show:!m,left:p?void 0:"right",right:p?5:void 0,min:0,max:y,inRange:{color:[g.purple200,g.purple300]},text:["High","Low"],textStyle:{color:g.textColor},calculable:!1})]},...h,yAxis:null,xAxis:null,series:f,tooltip:{formatter:e=>{var t;const{marker:r,name:s,value:n}=Array.isArray(e)?e[0]:e;if(isNaN(n))return"";const o="number"==typeof n?n.toLocaleString():"";return[`<div class="tooltip-series tooltip-series-solo">\n               <div><span class="tooltip-label">${r} <strong>${(null===(t=v.codeToCountryMap)||void 0===t?void 0:t[s])||s}</strong></span> ${o}</div>\n            </div>`,'<div class="tooltip-arrow"></div>'].join("")}},height:p?400:void 0})}p.displayName="WorldMapChart"},"./app/components/discover/discoverFeature.tsx":(e,t,r)=>{r.d(t,{Z:()=>d});var s=r("./app/components/acl/feature.tsx"),n=r("./app/components/acl/featureDisabled.tsx"),o=r("./app/components/hovercard.tsx"),i=r("./app/locale.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t}=e;const r=(0,i.t)("Requires discover feature.");return(0,a.tZ)(s.Z,{hookName:"feature-disabled:open-discover",features:["organizations:discover-basic"],renderDisabled:e=>(0,a.tZ)(o.uI,{body:(0,a.tZ)(n.Z,{features:e.features,hideHelpToggle:!0,message:r,featureName:r}),children:e.children(e)}),children:e=>{let{hasFeature:r}=e;return t({hasFeature:r})}})}l.displayName="DiscoverFeature";const d=l},"./app/components/discover/transactionsList.tsx":(e,t,r)=>{r.d(t,{Z:()=>z});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),i=r("../node_modules/react-router/es/index.js"),a=r("./app/components/assistant/guideAnchor.tsx"),l=r("./app/components/button.tsx"),d=r("./app/components/discoverButton.tsx"),u=r("./app/components/dropdownButton.tsx"),c=r("./app/components/dropdownControl.tsx"),p=r("./app/components/pagination.tsx"),m=r("./app/locale.tsx"),h=r("./app/styles/space.tsx"),g=r("./app/utils/discover/discoverQuery.tsx"),v=r("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),S=r("./app/utils/queryString.tsx"),f=r("./app/utils/tokenizeSearch.tsx"),y=r("./app/views/eventsV2/utils.tsx"),R=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),Z=r("./app/components/gridEditable/sortLink.tsx"),E=r("./app/components/links/link.tsx"),x=r("./app/components/loadingIndicator.tsx"),_=r("./app/components/panels/panelTable.tsx"),A=r("./app/components/questionTooltip.tsx"),T=r("./app/utils/discover/fieldRenderers.tsx"),b=r("./app/utils/discover/fields.tsx"),I=r("./app/views/eventsV2/table/cellAction.tsx"),w=r("./app/views/performance/styles.tsx"),N=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends o.PureComponent{getTitles(){const{eventView:e,titles:t}=this.props;return null!=t?t:e.getFields()}renderHeader(){const{tableData:e,columnOrder:t}=this.props,r=null==e?void 0:e.meta,s=()=>{};return this.getTitles().map(((e,n)=>{const i=t[n],a=(0,b.qG)(i.name,i.type,r);return"span_ops_breakdown.relative"===i.key?(0,N.tZ)(O,{children:(0,N.tZ)(Z.Z,{align:a,title:e===(0,m.t)("operation duration")?(0,N.BX)(o.Fragment,{children:[e,(0,N.tZ)(L,{size:"xs",position:"top",title:(0,m.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]}):e,direction:void 0,canSort:!1,generateSortLink:s})},n):(0,N.tZ)(O,{children:(0,N.tZ)(Z.Z,{align:a,title:e,direction:void 0,canSort:!1,generateSortLink:s})},n)}))}renderRow(e,t,r,s){const{eventView:n,organization:o,location:i,generateLink:a,handleCellAction:l,titles:d,useAggregateAlias:u}=this.props,c=n.getFields();return d&&d.length&&(r=r.slice(0,d.length)),r.map(((r,n)=>{var d;const p=String(r.key),m=u?(0,b.LY)(p):p,h=s[m];let g=(0,T.Js)(p,s,u)(e,{organization:o,location:i});const v=null==a||null===(d=a[p])||void 0===d?void 0:d.call(a,o,e,i.query);v&&(g=(0,N.tZ)(E.Z,{"data-test-id":`view-${c[n]}`,to:v,children:g}));const S=["integer","number","duration"].includes(h),f=`${t}:${r.key}:${n}`;return g=S?(0,N.tZ)(w.Ci,{children:g}):(0,N.tZ)(w.r8,{children:g}),l&&(g=(0,N.tZ)(I.ZP,{column:r,dataRow:e,handleCellAction:l(r),children:g})),(0,N.tZ)(D,{children:g},f)}))}renderResults(){const{isLoading:e,tableData:t,columnOrder:r}=this.props;let s=[];return e?s:t&&t.meta&&t.data?(t.data.forEach(((e,n)=>{t.meta&&(s=s.concat(this.renderRow(e,n,r,t.meta)))})),s):s}render(){const{isLoading:e,tableData:t}=this.props,r=t&&t.data&&t.meta&&t.data.length>0,s=(0,N.tZ)(x.Z,{style:{margin:"70px auto"}});return(0,N.tZ)(_.Z,{"data-test-id":"transactions-table",isEmpty:!r,emptyMessage:(0,m.t)("No transactions found"),headers:this.renderHeader(),isLoading:e,disablePadding:!0,loader:s,children:this.renderResults()})}}C.displayName="TransactionsTable";const O=(0,n.Z)("div",{target:"e892l522"})("padding:",(0,h.Z)(2),";"),D=(0,n.Z)("div",{target:"e892l521"})("padding:",(0,h.Z)(1)," ",(0,h.Z)(2),";",(e=>e.theme.overflowEllipsis),";"),L=(0,n.Z)(A.Z,{target:"e892l520"})({name:"1dgfen9",styles:"position:relative;top:1px;left:4px"}),P=C;class j extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"handleCursor",((e,t,r)=>{const{cursorName:s}=this.props;i.browserHistory.push({pathname:t,query:{...r,[s]:e}})}))}getEventView(){const{eventView:e,selected:t}=this.props,r=e.withSorts([t.sort]);if(t.query){const e=new f.MY(r.query);t.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),r.query=e.formatString()}return r}generateDiscoverEventView(){const{generateDiscoverEventView:e}=this.props;return"function"==typeof e?e():this.getEventView()}generatePerformanceTransactionEventsView(){var e;const{generatePerformanceTransactionEventsView:t}=this.props;return null!==(e=null==t?void 0:t())&&void 0!==e?e:this.getEventView()}renderHeader(){const{organization:e,selected:t,options:r,handleDropdownChange:s,handleOpenAllEventsClick:n,handleOpenInDiscoverClick:i,showTransactions:u,breakdown:p}=this.props;return(0,N.BX)(o.Fragment,{children:[(0,N.tZ)("div",{children:(0,N.tZ)(c.ZP,{button:e=>{let{isOpen:r,getActorProps:s}=e;return(0,N.tZ)(k,{...s(),isOpen:r,prefix:(0,m.t)("Filter"),size:"xsmall",children:t.label})},children:r.map((e=>{let{value:r,label:n}=e;return(0,N.tZ)(c.hP,{"data-test-id":`option-${r}`,onSelect:s,eventKey:r,isActive:r===t.value,children:n},r)}))})}),!this.isTrend()&&(n?(0,N.tZ)(a.Z,{target:"release_transactions_open_in_transaction_events",children:(0,N.tZ)(l.ZP,{onClick:n,to:this.generatePerformanceTransactionEventsView().getPerformanceTransactionEventsViewUrlTarget(e.slug,{showTransactions:(0,R.Zq)(u),breakdown:p}),size:"xsmall","data-test-id":"transaction-events-open",children:(0,m.t)("View All Events")})}):(0,N.tZ)(a.Z,{target:"release_transactions_open_in_discover",children:(0,N.tZ)(d.Z,{onClick:i,to:this.generateDiscoverEventView().getResultsViewUrlTarget(e.slug),size:"xsmall","data-test-id":"discover-open",children:(0,m.t)("Open in Discover")})}))]})}renderTransactionTable(){var e;const{location:t,organization:r,handleCellAction:s,cursorName:n,limit:i,titles:a,generateLink:l,forceLoading:d}=this.props,u=r.features.includes("performance-frontend-use-events-endpoint"),c=this.getEventView(),p=c.getColumns(),m=(0,S.ro)(null===(e=t.query)||void 0===e?void 0:e[n]),h=e=>{let{isLoading:n,pageLinks:i,tableData:d}=e;return(0,N.BX)(o.Fragment,{children:[(0,N.BX)($,{children:[this.renderHeader(),(0,N.tZ)(U,{pageLinks:i,onCursor:this.handleCursor,size:"xsmall"})]}),(0,N.tZ)(P,{eventView:c,organization:r,location:t,isLoading:n,tableData:d,columnOrder:p,titles:a,generateLink:l,handleCellAction:s,useAggregateAlias:!u})]})};return d?h({isLoading:!0,pageLinks:null,tableData:null}):(0,N.tZ)(g.Z,{location:t,eventView:c,orgSlug:r.slug,limit:i,cursor:m,referrer:"api.discover.transactions-list",useEvents:u,children:h})}renderTrendsTable(){var e;const{trendView:t,location:r,selected:s,organization:n,cursorName:i,generateLink:a}=this.props,l=t.clone();if(l.sorts=[s.sort],l.trendType=s.trendType,s.query){const e=new f.MY(l.query);s.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),l.query=e.formatString()}const d=(0,S.ro)(null===(e=r.query)||void 0===e?void 0:e[i]);return(0,N.tZ)(v.iC,{eventView:l,orgSlug:n.slug,location:r,cursor:d,limit:5,children:e=>{let{isLoading:t,trendsData:s,pageLinks:i}=e;return(0,N.BX)(o.Fragment,{children:[(0,N.BX)($,{children:[this.renderHeader(),(0,N.tZ)(U,{pageLinks:i,onCursor:this.handleCursor,size:"small"})]}),(0,N.tZ)(P,{eventView:l,organization:n,location:r,isLoading:t,tableData:s,titles:["transaction","percentage","difference"],columnOrder:(0,y.Hg)([{field:"transaction"},{field:"trend_percentage()"},{field:"trend_difference()"}]),generateLink:a,useAggregateAlias:!0})]})}})}isTrend(){const{selected:e}=this.props;return void 0!==e.trendType}render(){return(0,N.tZ)(o.Fragment,{children:this.isTrend()?this.renderTrendsTable():this.renderTransactionTable()})}}j.displayName="_TransactionsList",(0,s.Z)(j,"defaultProps",{cursorName:"transactionCursor",limit:5});const $=(0,n.Z)("div",{target:"ez2v7e92"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,h.Z)(1),";align-items:center;"),k=(0,n.Z)(u.Z,{target:"ez2v7e91"})({name:"10c716n",styles:"min-width:145px"}),U=(0,n.Z)(p.Z,{target:"ez2v7e90"})("margin:0 0 0 ",(0,h.Z)(1),";"),F=e=>(0,N.tZ)(j,{...e});F.displayName="TransactionsList";const z=F},"./app/components/discoverButton.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var s=r("./app/components/button.tsx"),n=r("./app/components/discover/discoverFeature.tsx"),o=r("./app/locale.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,...r}=e;return(0,i.tZ)(n.Z,{children:e=>{let{hasFeature:n}=e;return(0,i.tZ)(s.ZP,{disabled:!n,"aria-label":(0,o.t)("Open in Discover"),...r,children:t})}})}a.displayName="DiscoverButton";const l=a},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{G:()=>l,v:()=>a});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),o=r("./app/styles/space.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,s.Z)("dl",{target:"e13z4zle2"})({name:"u4s7v9",styles:"display:grid;grid-template-columns:50% 50%"}),l=e=>{let{keyName:t,value:r}=e;return(0,i.BX)(n.Fragment,{children:[(0,i.tZ)(u,{children:t}),(0,i.tZ)(c,{children:r})]})};l.displayName="KeyValueTableRow";const d=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,o.Z)(.5)} ${(0,o.Z)(1)};\nfont-weight: normal;\nline-height: inherit;\n${e=>e.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},u=(0,s.Z)("dt",{target:"e13z4zle1"})(d,";color:",(e=>e.theme.textColor),";"),c=(0,s.Z)("dd",{target:"e13z4zle0"})(d,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/notAvailable.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/components/tooltip.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{tooltip:t,className:r}=e;return(0,o.tZ)(n.Z,{title:t,skipWrapper:!0,disabled:void 0===t,children:(0,o.tZ)(a,{className:r,children:"â€”"})})}i.displayName="NotAvailable";const a=(0,s.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),l=i},"./app/components/pageTimeRangeSelector.tsx":(e,t,r)=>{r.d(t,{Z:()=>p});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/components/organizations/timeRangeSelector/index.tsx"),o=r("./app/components/panels/index.tsx"),i=r("./app/locale.tsx"),a=r("./app/styles/space.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{className:t,...r}=e;return(0,l.tZ)(u,{className:t,children:(0,l.tZ)(n.Z,{label:(0,l.tZ)(c,{children:(0,i.t)("Date Range:")}),detached:!0,...r},`period:${r.relative}-start:${r.start}-end:${r.end}-utc:${r.utc}-defaultPeriod:${r.defaultPeriod}`)})}d.displayName="PageTimeRangeSelector";const u=(0,s.Z)(o.s_,{target:"e1hsuxgy1"})("padding:0;margin:0;display:flex;justify-content:center;align-items:center;height:42px;background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";>div{width:100%;align-self:stretch;}>div>div:first-child>div{padding:0 ",(0,a.Z)(2),";}>div>div:last-child:not(:first-child){min-width:calc(100% + 2px);transform:translateX(-1px);right:auto;}"),c=(0,s.Z)("span",{target:"e1hsuxgy0"})("text-align:left;font-weight:600;color:",(e=>e.theme.textColor),";>span:last-child{font-weight:400;}"),p=d},"./app/utils/discover/discoverQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var s=r("./app/utils/withApi.tsx"),n=r("./app/utils/discover/genericDiscoverQuery.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function a(e){const t=e.useEvents?"events":"eventsv2",r=e.useEvents?(e,t)=>{var r;const{fields:s,...n}=null!==(r=e.meta)&&void 0!==r?r:{};return{...e,meta:{...s,...n}}}:void 0;return(0,o.tZ)(n.ZP,{route:t,shouldRefetchData:i,afterFetch:r,...e})}a.displayName="DiscoverQuery";const l=(0,s.Z)(a)},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,r)=>{r.d(t,{Eg:()=>h,kP:()=>m,nP:()=>u,nl:()=>c,oR:()=>p}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js");var s=r("../node_modules/react/index.js"),n=(r("./app/utils/localStorage.tsx"),r("./app/utils/useOrganization.tsx")),o=r("./app/utils/performance/contexts/utils.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[a,l,d]=(0,o.n)({name:"MetricsEnhancedSettingContext"}),u=d.Consumer;let c,p;!function(e){e.unset="unset",e.metrics="metrics",e.transactions="transactions"}(c||(c={})),function(e){e.auto="auto",e.metricsOnly="metricsOnly",e.transactionsOnly="transactionsOnly"}(p||(p={}));const m=e=>{let{children:t,_hasMEPState:r}=e;const o=(0,n.Z)().features.includes("performance-use-metrics"),l=void 0!==r,[d,u]=(0,s.useReducer)(((e,t)=>t),p.auto),[m,h]=(0,s.useReducer)(((e,t)=>t),c.unset),g=l?r:d,v=o&&(g===p.metricsOnly||g===p.auto),S=o&&g===p.auto,f=o&&g===p.metricsOnly,y=o&&g===p.transactionsOnly,R=`${g}`;return(0,i.tZ)(a,{value:{autoSampleState:m,metricSettingState:g,hideSinceMetricsOnly:v,shouldQueryProvideMEPParams:S,shouldQueryProvideMEPMetricParams:f,shouldQueryProvideMEPTransactionParams:y,memoizationKey:R,setMetricSettingState:u,setAutoSampleState:h},children:t})};m.displayName="MEPSettingProvider";const h=l},"./app/utils/performance/histogram/constants.tsx":(e,t,r)=>{r.d(t,{d:()=>n});var s=r("./app/locale.tsx");const n=[{label:(0,s.t)("Exclude"),value:"exclude_outliers"},{label:(0,s.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/histogramQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>c}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/react/index.js"),n=r("../node_modules/lodash/omit.js"),o=r.n(n),i=r("./app/utils/discover/genericDiscoverQuery.tsx"),a=r("./app/utils/withApi.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const{fields:t,numBuckets:r,min:s,max:n,precision:i,dataFilter:a,eventView:l,location:d}=e,u={field:t,numBuckets:r,min:s,max:n,precision:i,dataFilter:a},c=o()(l.getEventsAPIPayload(d),["field","sort","per_page"]);return Object.assign(u,c)}function u(e){const{children:t,fields:r,didReceiveMultiAxis:n}=e;return 0===r.length?(0,l.tZ)(s.Fragment,{children:t({isLoading:!1,error:null,pageLinks:null,histograms:{}})}):(0,l.tZ)(i.ZP,{route:"events-histogram",getRequestPayload:d,didFetch:function(e){if(n){const t={};Object.entries(e).forEach((e=>{let[r,s]=e;return t[r]=s.length?s.reduce(((e,t)=>e+t.count),0):0})),n(t)}},...o()(e,"children"),children:t=>{let{tableData:r,...s}=t;return e.children({histograms:r,...s})}})}u.displayName="HistogramQuery";const c=(0,a.Z)(u)},"./app/utils/performance/histogram/index.tsx":(e,t,r)=>{r.d(t,{V:()=>d,Z:()=>u});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),i=r("./app/utils/queryString.tsx"),a=r("./app/utils/performance/histogram/constants.tsx");class l extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;o.browserHistory.push({pathname:e.pathname,query:d(e,t)})})),(0,s.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:r}=this.props;o.browserHistory.push({pathname:t.pathname,query:{...d(t,r),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,i.ro)(e.query.dataFilter):a.d[0].value;return a.d.find((e=>e.value===t))||a.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:a.d};return this.props.children(e)}}function d(e,t){const r={...e.query,cursor:void 0};return delete r.dataFilter,t.forEach((e=>delete r[e])),r}l.displayName="Histogram";const u=l},"./app/utils/performance/trends/trendsDiscoverQuery.tsx":(e,t,r)=>{r.d(t,{ZP:()=>p,iC:()=>c});var s=r("./app/utils/discover/genericDiscoverQuery.tsx"),n=r("./app/utils/withApi.tsx"),o=r("./app/utils/withProjects.tsx"),i=r("./app/views/performance/trends/utils.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{eventView:t,projects:r}=e,s=null==t?void 0:t.getEventsAPIPayload(e.location),n=(0,i.CE)(e.location,e.trendFunctionField),o=(0,i.IO)(e.location,r,t.project);return s.trendFunction=(0,i.ed)(n.field,o.column),s.trendType=(null==t?void 0:t.trendType)||e.trendChangeType,s.interval=null==t?void 0:t.interval,s.middle=null==t?void 0:t.middle,s}function d(e){return(0,a.tZ)(s.ZP,{...e,route:"events-trends-stats",getRequestPayload:l,children:t=>{let{tableData:r,...s}=t;return e.children({trendsData:r,...s})}})}function u(e){return(0,a.tZ)(s.ZP,{...e,route:"events-trends",getRequestPayload:l,children:t=>{let{tableData:r,...s}=t;return e.children({trendsData:r,...s})}})}d.displayName="TrendsDiscoverQuery",u.displayName="EventsDiscoverQuery";const c=(0,n.Z)((0,o.Z)(u)),p=(0,n.Z)((0,o.Z)(d))},"./app/views/performance/landing/widgets/types.tsx":(e,t,r)=>{let s,n;r.d(t,{A:()=>n}),function(e){e.ERROR="error",e.LOADING="loading",e.EMPTY="empty",e.DATA="data"}(s||(s={})),function(e){e.histogram="histogram",e.area="area",e.vitals="vitals",e.line_list="line_list",e.trends="trends"}(n||(n={}))},"./app/views/performance/landing/widgets/utils.tsx":(e,t,r)=>{r.d(t,{CJ:()=>i,I2:()=>d,gM:()=>a,rp:()=>m,zM:()=>h,zS:()=>l}),r("../node_modules/core-js/modules/es.array.includes.js");var s=r("./app/utils.tsx"),n=r("./app/utils/localStorage.tsx"),o=r("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const i=["children","organization","yAxis","period","start","end","environment","project","referrer"];function a(e){let t={};const r={preventMetricAggregates:"1"};return e.shouldQueryProvideMEPParams&&(t={...t,...r,metricsEnhanced:"1",dataset:"metricsEnhanced"}),e.shouldQueryProvideMEPTransactionParams&&(t={...t,...r,dataset:"discover"}),e.shouldQueryProvideMEPMetricParams&&(t={...t,...r,dataset:"metrics"}),(0,s.z)(t)?void 0:t}const l=[o.s.MOST_RELATED_ERRORS,o.s.MOST_RELATED_ISSUES];function d(e,t){if(!l.includes(t))return a(e)}const u="landing-chart-container",c=(e,t,r)=>`landing-chart-container#${t}#${r}#${e}`;function p(){return JSON.parse(n.Z.getItem(u)||"{}")}const m=(e,t,r,s,n)=>{if(n)return s;const i=c(e,r,t),a=p(),l=null==a?void 0:a[i];return l&&Object.values(o.s).includes(l)?l:s},h=(e,t,r,s)=>{const o=c(e,r,t),i=p();i[o]=s,function(e){n.Z.setItem(u,JSON.stringify(e))}(i)}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(e,t,r)=>{r.d(t,{W:()=>d,s:()=>a});var s=r("./app/constants/chartPalette.tsx"),n=r("./app/locale.tsx"),o=r("./app/views/performance/data.tsx"),i=r("./app/views/performance/landing/widgets/types.tsx");let a;!function(e){e.DURATION_HISTOGRAM="duration_histogram",e.LCP_HISTOGRAM="lcp_histogram",e.FCP_HISTOGRAM="fcp_histogram",e.FID_HISTOGRAM="fid_histogram",e.APDEX_AREA="apdex_area",e.P50_DURATION_AREA="p50_duration_area",e.P75_DURATION_AREA="p75_duration_area",e.P95_DURATION_AREA="p95_duration_area",e.P99_DURATION_AREA="p99_duration_area",e.P75_LCP_AREA="p75_lcp_area",e.TPM_AREA="tpm_area",e.FAILURE_RATE_AREA="failure_rate_area",e.USER_MISERY_AREA="user_misery_area",e.WORST_LCP_VITALS="worst_lcp_vitals",e.WORST_FCP_VITALS="worst_fcp_vitals",e.WORST_CLS_VITALS="worst_cls_vitals",e.WORST_FID_VITALS="worst_fid_vitals",e.MOST_IMPROVED="most_improved",e.MOST_REGRESSED="most_regressed",e.MOST_RELATED_ERRORS="most_related_errors",e.MOST_RELATED_ISSUES="most_related_issues",e.SLOW_HTTP_OPS="slow_http_ops",e.SLOW_DB_OPS="slow_db_ops",e.SLOW_RESOURCE_OPS="slow_resource_ops",e.SLOW_BROWSER_OPS="slow_browser_ops",e.COLD_STARTUP_AREA="cold_startup_area",e.WARM_STARTUP_AREA="warm_startup_area",e.SLOW_FRAMES_AREA="slow_frames_area",e.FROZEN_FRAMES_AREA="frozen_frames_area",e.MOST_SLOW_FRAMES="most_slow_frames",e.MOST_FROZEN_FRAMES="most_frozen_frames"}(a||(a={}));const l=s.Z[5],d=e=>{let{organization:t}=e;return{[a.DURATION_HISTOGRAM]:{title:(0,n.t)("Duration Distribution"),titleTooltip:(0,o.$r)(t,o.V$.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:i.A.histogram,chartColor:l[5]},[a.LCP_HISTOGRAM]:{title:(0,n.t)("LCP Distribution"),titleTooltip:(0,o.$r)(t,o.V$.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:i.A.histogram,chartColor:l[5]},[a.FCP_HISTOGRAM]:{title:(0,n.t)("FCP Distribution"),titleTooltip:(0,o.$r)(t,o.V$.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:i.A.histogram,chartColor:l[5]},[a.FID_HISTOGRAM]:{title:(0,n.t)("FID Distribution"),titleTooltip:(0,o.$r)(t,o.V$.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:i.A.histogram,chartColor:l[5]},[a.WORST_LCP_VITALS]:{title:(0,n.t)("Worst LCP Web Vitals"),titleTooltip:(0,o.$r)(t,o.V$.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:i.A.vitals},[a.WORST_FCP_VITALS]:{title:(0,n.t)("Worst FCP Web Vitals"),titleTooltip:(0,o.$r)(t,o.V$.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:i.A.vitals},[a.WORST_FID_VITALS]:{title:(0,n.t)("Worst FID Web Vitals"),titleTooltip:(0,o.$r)(t,o.V$.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:i.A.vitals},[a.WORST_CLS_VITALS]:{title:(0,n.t)("Worst CLS Web Vitals"),titleTooltip:(0,o.$r)(t,o.V$.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:i.A.vitals},[a.TPM_AREA]:{title:(0,n.t)("Transactions Per Minute"),titleTooltip:(0,o.$r)(t,o.V$.TPM),fields:["tpm()"],dataType:i.A.area,chartColor:l[1]},[a.APDEX_AREA]:{title:(0,n.t)("Apdex"),titleTooltip:(0,o.$r)(t,o.V$.APDEX),fields:["apdex()"],dataType:i.A.area,chartColor:l[4]},[a.P50_DURATION_AREA]:{title:(0,n.t)("p50 Duration"),titleTooltip:(0,o.$r)(t,o.V$.P50),fields:["p50(transaction.duration)"],dataType:i.A.area,chartColor:l[3]},[a.P75_DURATION_AREA]:{title:(0,n.t)("p75 Duration"),titleTooltip:(0,o.$r)(t,o.V$.P75),fields:["p75(transaction.duration)"],dataType:i.A.area,chartColor:l[3]},[a.P95_DURATION_AREA]:{title:(0,n.t)("p95 Duration"),titleTooltip:(0,o.$r)(t,o.V$.P95),fields:["p95(transaction.duration)"],dataType:i.A.area,chartColor:l[3]},[a.P99_DURATION_AREA]:{title:(0,n.t)("p99 Duration"),titleTooltip:(0,o.$r)(t,o.V$.P99),fields:["p99(transaction.duration)"],dataType:i.A.area,chartColor:l[3]},[a.P75_LCP_AREA]:{title:(0,n.t)("p75 LCP"),titleTooltip:(0,o.$r)(t,o.V$.P75),fields:["p75(measurements.lcp)"],dataType:i.A.area,chartColor:l[1]},[a.FAILURE_RATE_AREA]:{title:(0,n.t)("Failure Rate"),titleTooltip:(0,o.$r)(t,o.V$.FAILURE_RATE),fields:["failure_rate()"],dataType:i.A.area,chartColor:l[2]},[a.USER_MISERY_AREA]:{title:(0,n.t)("User Misery"),titleTooltip:(0,o.$r)(t,o.V$.USER_MISERY),fields:["user_misery()"],dataType:i.A.area,chartColor:l[0]},[a.COLD_STARTUP_AREA]:{title:(0,n.t)("Cold Startup Time"),titleTooltip:(0,o.$r)(t,o.V$.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:i.A.area,chartColor:l[4]},[a.WARM_STARTUP_AREA]:{title:(0,n.t)("Warm Startup Time"),titleTooltip:(0,o.$r)(t,o.V$.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:i.A.area,chartColor:l[3]},[a.SLOW_FRAMES_AREA]:{title:(0,n.t)("Slow Frames"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:i.A.area,chartColor:l[0]},[a.FROZEN_FRAMES_AREA]:{title:(0,n.t)("Frozen Frames"),titleTooltip:(0,o.$r)(t,o.V$.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:i.A.area,chartColor:l[5]},[a.MOST_RELATED_ERRORS]:{title:(0,n.t)("Most Related Errors"),titleTooltip:(0,o.$r)(t,o.V$.MOST_ERRORS),fields:["failure_count()"],dataType:i.A.line_list,chartColor:l[0]},[a.MOST_RELATED_ISSUES]:{title:(0,n.t)("Most Related Issues"),titleTooltip:(0,o.$r)(t,o.V$.MOST_ISSUES),fields:["count()"],dataType:i.A.line_list,chartColor:l[0]},[a.SLOW_HTTP_OPS]:{title:(0,n.t)("Slow HTTP Ops"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:i.A.line_list,chartColor:l[0]},[a.SLOW_BROWSER_OPS]:{title:(0,n.t)("Slow Browser Ops"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:i.A.line_list,chartColor:l[0]},[a.SLOW_RESOURCE_OPS]:{title:(0,n.t)("Slow Resource Ops"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:i.A.line_list,chartColor:l[0]},[a.SLOW_DB_OPS]:{title:(0,n.t)("Slow DB Ops"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:i.A.line_list,chartColor:l[0]},[a.MOST_SLOW_FRAMES]:{title:(0,n.t)("Most Slow Frames"),titleTooltip:(0,o.$r)(t,o.V$.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:i.A.line_list,chartColor:l[0]},[a.MOST_FROZEN_FRAMES]:{title:(0,n.t)("Most Frozen Frames"),titleTooltip:(0,o.$r)(t,o.V$.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:i.A.line_list,chartColor:l[0]},[a.MOST_IMPROVED]:{title:(0,n.t)("Most Improved"),titleTooltip:(0,n.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:i.A.trends},[a.MOST_REGRESSED]:{title:(0,n.t)("Most Regressed"),titleTooltip:(0,n.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:i.A.trends}}}},"./app/views/performance/styles.tsx":(e,t,r)=>{r.d(t,{Ci:()=>i,Mt:()=>a,r8:()=>o});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/styles/space.tsx");const o=(0,s.Z)("div",{target:"exyvyft3"})({name:"mmdt3g",styles:"font-size:14px"}),i=(0,s.Z)(o,{target:"exyvyft2"})({name:"1ofxr9c",styles:"text-align:right;font-variant-numeric:tabular-nums;flex-grow:1"}),a=(0,s.Z)("div",{target:"exyvyft1"})("display:grid;grid-template-columns:1fr 1fr;padding:",(0,n.Z)(2)," ",(0,n.Z)(3)," ",(0,n.Z)(1)," ",(0,n.Z)(3),";gap:",(0,n.Z)(3),";")},"./app/views/performance/transactionSummary/transactionOverview/charts.tsx":(e,t,r)=>{r.d(t,{D:()=>Ie,Z:()=>Oe}),r("../node_modules/core-js/modules/es.array.includes.js");var s=r("../node_modules/react-router/es/index.js"),n=r("./app/components/charts/optionSelector.tsx"),o=r("./app/components/charts/styles.tsx"),i=r("./app/components/panels/index.tsx"),a=r("./app/components/placeholder.tsx"),l=r("./app/locale.tsx"),d=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=r("./app/utils/performance/histogram/index.tsx"),c=r("./app/utils/queryString.tsx"),p=r("./app/views/releases/detail/overview/index.tsx"),m=r("./app/views/performance/trends/types.tsx"),h=r("./app/views/performance/trends/utils.tsx"),g=r("./app/views/performance/transactionSummary/filter.tsx"),v=r("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),S=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){let{location:t}=e;return(0,S.tZ)(u.Z,{location:t,zoomKeys:[v.Oo,v.mo],children:e=>{let{filterOptions:t,handleFilterChange:r,activeFilter:s}=e;return(0,S.tZ)(n.Z,{title:(0,l.t)("Outliers"),selected:s.value,options:t,onChange:r})}})}f.displayName="ChartControls";const y=f;var R=r("../node_modules/react/index.js"),Z=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),E=r("./app/components/charts/eventsRequest.tsx"),x=r("./app/components/charts/utils.tsx"),_=r("./app/components/organizations/pageFilters/parse.tsx"),A=r("./app/components/questionTooltip.tsx"),T=r("./app/utils/dates.tsx"),b=r("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),I=r("./app/utils/useApi.tsx"),w=r("./app/views/performance/landing/widgets/utils.tsx"),N=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./app/components/charts/areaChart.tsx")),C=r("./app/components/charts/chartZoom.tsx"),O=r("./app/components/charts/errorPanel.tsx"),D=r("./app/components/charts/releaseSeries.tsx"),L=r("./app/components/charts/transitionChart.tsx"),P=r("./app/components/charts/transparentLoadingMask.tsx"),j=r("./app/icons/index.tsx"),$=r("./app/utils/discover/charts.tsx"),k=r("./app/utils/getDynamicText.tsx");function U(e){let{errored:t,theme:r,series:s,timeFrame:n,start:o,end:i,period:l,projects:d,environments:u,loading:c,reloading:p,legend:m,utc:h,queryExtra:g,router:v,onLegendSelectChanged:f}=e;if(t)return(0,S.tZ)(O.Z,{children:(0,S.tZ)(j.FC,{color:"gray500",size:"lg"})});const y={grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:$.CX},xAxis:n?{min:n.start,max:n.end}:void 0,yAxis:{axisLabel:{color:r.chartLabel,formatter:e=>(0,$.gu)(e,"p50()")}}},R=s&&r.charts.getColorPalette(s.length-2)||[],Z=s?s.map(((e,t)=>({...e,color:R[t],lineStyle:{opacity:0}}))).reverse():[];return(0,S.tZ)(C.Z,{router:v,period:l,start:o,end:i,utc:h,children:e=>(0,S.tZ)(D.Z,{start:o,end:i,queryExtra:g,period:l,utc:h,projects:d,environments:u,children:t=>{let{releaseSeries:r}=t;return(0,S.BX)(L.Z,{loading:c,reloading:p,children:[(0,S.tZ)(P.Z,{visible:p}),(0,k.Z)({value:(0,S.tZ)(N.T,{...e,...y,legend:m,onLegendSelectChanged:f,series:[...Z,...r]}),fixed:(0,S.tZ)(a.Z,{height:"200px",testId:"skeleton-ui"})})]})}})})}U.displayName="Content";const F=U;var z;function B(e){var t;let{project:r,environment:n,location:i,organization:a,query:d,statsPeriod:u,router:p,queryExtra:m,currentFilter:h,withoutZerofill:v,start:f,end:y}=e;const N=(0,I.Z)(),C=(0,Z.a)(),O=(0,b.Eg)(),D=f?(0,T.hC)(f):null,L=y?(0,T.hC)(y):null,P=u,j={start:D,end:L,period:P},$={theme:C,router:p,start:D,end:L,utc:"true"===(0,_.fK)(i.query).utc,legend:{right:10,top:5,selected:(0,x.RI)(i)},queryExtra:m,period:P,projects:r,environments:n,onLegendSelectChanged:function(e){const{selected:t}=e,r=Object.keys(t).filter((e=>!t[e])),n={...i,query:{...i.query,unselectedSeries:r}};s.browserHistory.push(n)}},k={api:N,start:D,end:L,project:r,environment:n,query:d,period:P,interval:(0,x.ZS)(j,"high")},U=null!==(t=g.BW[h])&&void 0!==t?t:"",B=(0,S.BX)(o.ws,{children:[h===g.f1.None?(0,l.t)("Duration Breakdown"):(0,l._N)("Span Operation Breakdown - [operationName]",{operationName:h}),(0,S.tZ)(A.Z,{size:"sm",position:"top",title:(0,l.t)("Duration Breakdown reflects transaction durations by percentile over time.")})]}),G=Object.values(z).map((e=>`${e}(${U})`));return(0,S.BX)(R.Fragment,{children:[B,(0,S.tZ)(E.Z,{...k,organization:a,showLoading:!1,includePrevious:!1,yAxis:G,partial:!0,withoutZerofill:v,referrer:"api.performance.transaction-summary.duration-chart",queryExtras:(0,w.gM)(O),userModified:(0,c.ro)(i.query.userModified),children:e=>{let{results:t,errored:r,loading:s,reloading:n,timeframe:o}=e;return(0,S.tZ)(F,{series:t,errored:r,loading:s,reloading:n,timeFrame:o,...$})}})]})}!function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.p100="p100"}(z||(z={})),B.displayName="DurationChart";const G=(0,s.withRouter)(B);var q=r("../node_modules/lodash/isEqual.js"),M=r.n(q),H=r("../node_modules/lodash/pick.js"),V=r.n(H),X=r("./app/components/asyncComponent.tsx"),W=r("./app/components/charts/loadingPanel.tsx"),Y=r("./app/utils.tsx"),Q=r("./app/utils/discover/eventView.tsx"),K=r("./app/views/performance/utils.tsx"),J=r("./app/utils/formatters.tsx");function ee(e){const t=(0,Z.a)();return(0,S.tZ)(N.T,{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:{type:"category",truncate:!0,axisLabel:{showMinLabel:!0,showMaxLabel:!0},axisTick:{interval:0,alignWithLabel:!0}},yAxis:{type:"value",axisLabel:{color:t.chartLabel,formatter:e=>(0,$.gu)(e,"p50()")}},tooltip:{valueFormatter:e=>(0,J.g9)(e/1e3,2)},...e})}ee.displayName="Chart";const te=ee,re=/(\d+)$/,se=/(\d+)\)$/;function ne(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=Object.keys(e[0]).map((r=>{const s=(t?re:se).exec(r);if(!s)return[-1,-1];let n=Number(s[1]);return n>100&&(n/=10),[n,e[0][r]]})).filter((e=>e[0]>0));return r.sort(((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0)),[{seriesName:(0,l.t)("Duration"),data:r.map((e=>({value:e[1],name:`${e[0].toLocaleString()}%`})))}]}class oe extends X.Z{getEndpoints(){const{organization:e,query:t,start:r,end:s,statsPeriod:n,environment:o,project:i,fields:a,location:l}=this.props,d=Q.ZP.fromSavedQuery({id:"",name:"",version:2,fields:a,orderby:"",projects:i,range:n,query:t,environment:o,start:r,end:s}).getEventsAPIPayload(l);return d.referrer="api.performance.durationpercentilechart",[["chartData",e.features.includes("performance-frontend-use-events-endpoint")?`/organizations/${e.slug}/events/`:`/organizations/${e.slug}/eventsv2/`,{query:d}]]}componentDidUpdate(e){this.shouldRefetchData(e)&&this.fetchData()}shouldRefetchData(e){return!this.state.loading&&!M()(V()(e,K.U7),V()(this.props,K.U7))}renderLoading(){return(0,S.tZ)(W.Z,{"data-test-id":"histogram-loading"})}renderError(){return(0,S.tZ)(O.Z,{children:(0,S.tZ)(j.FC,{color:"gray300",size:"lg"})})}renderBody(){const{currentFilter:e,organization:t}=this.props,{chartData:r}=this.state;return(0,Y.ri)(r)?(0,S.tZ)(te,{series:ne(r.data,!t.features.includes("performance-frontend-use-events-endpoint")),colors:t=>e===g.f1.None?t.charts.getColorPalette(1):[(0,g.bE)(e)]}):null}}const ie=oe;function ae(e){let{currentFilter:t,...r}=e;const s=(0,S.BX)(o.ws,{children:[t===g.f1.None?(0,l.t)("Duration Percentiles"):(0,l._N)("Span Operation Percentiles - [operationName]",{operationName:t}),(0,S.tZ)(A.Z,{position:"top",size:"sm",title:(0,l.t)("Compare the duration at each percentile. Compare with Latency Histogram to see transaction volume at duration intervals.")})]}),n=function(){if(t===g.f1.None)return["percentile(transaction.duration, 0.10)","percentile(transaction.duration, 0.25)","percentile(transaction.duration, 0.50)","percentile(transaction.duration, 0.75)","percentile(transaction.duration, 0.90)","percentile(transaction.duration, 0.95)","percentile(transaction.duration, 0.99)","percentile(transaction.duration, 0.995)","percentile(transaction.duration, 0.999)","p100()"];const e=(0,g.T$)(t);return[`percentile(${e}, 0.10)`,`percentile(${e}, 0.25)`,`percentile(${e}, 0.50)`,`percentile(${e}, 0.75)`,`percentile(${e}, 0.90)`,`percentile(${e}, 0.95)`,`percentile(${e}, 0.99)`,`percentile(${e}, 0.995)`,`percentile(${e}, 0.999)`,`p100(${e})`]}();return(0,S.BX)(R.Fragment,{children:[s,(0,S.tZ)(ie,{...r,currentFilter:t,fields:n})]})}ae.displayName="DurationPercentileChart";const le=ae;var de=r("./app/components/charts/barChart.tsx"),ue=r("./app/components/charts/barChartZoom.tsx"),ce=r("./app/utils/performance/histogram/histogramQuery.tsx"),pe=r("./app/utils/performance/histogram/utils.tsx"),me=r("./app/utils/theme.tsx");function he(e){var t;let{organization:r,query:s,start:n,end:o,statsPeriod:i,environment:a,project:d,location:c,currentFilter:p}=e;const[m,h]=(0,R.useState)(!1);function f(){m&&h(!1)}const y=Q.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:d,range:i,query:s,environment:a,start:n,end:o},c),{min:Z,max:E}=(0,v.Hj)(c),x=null!==(t=(0,g.T$)(p))&&void 0!==t?t:"transaction.duration";return(0,S.tZ)(u.Z,{location:c,zoomKeys:[v.Oo,v.mo],children:e=>{let{activeFilter:t}=e;return(0,S.tZ)(ce.Z,{location:c,orgSlug:r.slug,eventView:y,numBuckets:50,fields:[x],min:Z,max:E,dataFilter:t.value,children:e=>{var t;let{histograms:r,isLoading:s,error:n}=e;return s?(0,S.tZ)(W.Z,{"data-test-id":"histogram-loading"}):n?(0,S.tZ)(O.Z,{children:(0,S.tZ)(j.FC,{color:"gray300",size:"lg"})}):function(e){const t={type:"category",truncate:!0,axisTick:{interval:0,alignWithLabel:!0}},r=p===g.f1.None?[...me.ZP.charts.getColorPalette(1)]:[(0,g.bE)(p)],s={formatter(e){const t=Array.isArray(e)?e:[e];let r=[];if(m)r=['<div class="tooltip-series tooltip-series-solo">',(0,l.t)("Target zoom region too small"),"</div>"];else{r=t.map((e=>{const t=e.seriesName,r=e.value[1].toLocaleString();return['<div class="tooltip-series">',`<div><span class="tooltip-label">${e.marker} <strong>${t}</strong></span> ${r}</div>`,"</div>"].join("")}));const e=t[0].value[0];r.push(`<div class="tooltip-date">${e}</div>`)}return r.push('<div class="tooltip-arrow"></div>'),r.join("")}},n={seriesName:(0,l.t)("Count"),data:(0,pe.GT)(e,{type:"duration"})};return(0,S.tZ)(ue.Z,{minZoomWidth:50,location:c,paramStart:v.Oo,paramEnd:v.mo,xAxisIndex:[0],buckets:(0,pe._W)(e),onDataZoomCancelled:()=>h(!0),children:e=>(0,S.tZ)(de.v,{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:t,yAxis:{type:"value"},series:[n],tooltip:s,colors:r,onMouseOver:f,...e})})}(null!==(t=null==r?void 0:r[x])&&void 0!==t?t:[])}})}})}he.displayName="Content";const ge=he;function ve(e){let{currentFilter:t,...r}=e;const s=(0,S.BX)(o.ws,{children:[t===g.f1.None?(0,l.t)("Duration Distribution"):(0,l._N)("Span Operation Distribution - [operationName]",{operationName:t}),(0,S.tZ)(A.Z,{position:"top",size:"sm",title:(0,l.t)("Duration Distribution reflects the volume of transactions per median duration.")})]});return(0,S.BX)(R.Fragment,{children:[s,(0,S.tZ)(ge,{...r,currentFilter:t})]})}ve.displayName="LatencyChart";const Se=ve;var fe=r("./app/components/charts/lineChart.tsx");function ye(e){let{errored:t,theme:r,series:s,timeFrame:n,start:o,end:i,period:d,projects:u,environments:c,loading:p,reloading:m,legend:g,utc:v,queryExtra:f,router:y,onLegendSelectChanged:R}=e;if(t)return(0,S.tZ)(O.Z,{children:(0,S.tZ)(j.FC,{color:"gray500",size:"lg"})});const Z={grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:e=>(0,$.CX)(e,"p50()")},xAxis:n?{min:n.start,max:n.end}:void 0,yAxis:{min:0,axisLabel:{color:r.chartLabel,formatter:e=>(0,$.gu)(e,"p50()")}}},E=s?s.map((e=>({...e,color:r.purple300,lineStyle:{opacity:.75,width:1}}))).reverse():[],{smoothedResults:x}=(0,h.vq)(s,(0,l.t)("Smoothed")),_=x?x.map((e=>({...e,color:r.purple300,lineStyle:{opacity:1}}))):[];return(0,S.tZ)(C.Z,{router:y,period:d,start:o,end:i,utc:v,children:e=>(0,S.tZ)(D.Z,{start:o,end:i,queryExtra:f,period:d,utc:v,projects:u,environments:c,children:t=>{let{releaseSeries:r}=t;return(0,S.BX)(L.Z,{loading:p,reloading:m,children:[(0,S.tZ)(P.Z,{visible:m}),(0,k.Z)({value:(0,S.tZ)(fe.w,{...e,...Z,legend:g,onLegendSelectChanged:R,series:[...E,..._,...r]}),fixed:(0,S.tZ)(a.Z,{height:"200px",testId:"skeleton-ui"})})]})}})})}ye.displayName="Content";const Re=ye;function Ze(e){var t;let{project:r,environment:n,location:i,organization:a,query:d,statsPeriod:u,router:p,trendFunction:m,trendParameter:g,queryExtra:v,withoutZerofill:f,start:y,end:b}=e;const w=(0,I.Z)(),N=(0,Z.a)(),C=y?(0,T.hC)(y):null,O=b?(0,T.hC)(b):null,D=u,L={start:C,end:O,period:D},P={theme:N,router:p,start:C,end:O,utc:"true"===(null===(t=(0,_.fK)(i.query))||void 0===t?void 0:t.utc),legend:{right:10,top:0,selected:(0,x.RI)(i)},queryExtra:v,period:D,projects:r,environments:n,onLegendSelectChanged:function(e){const{selected:t}=e,r=Object.keys(t).filter((e=>!t[e])),n={...i,query:{...i.query,unselectedSeries:r}};s.browserHistory.push(n)}},j={api:w,start:C,end:O,project:r,environment:n,query:d,period:D,interval:(0,x.ZS)(L,"high")},$=(0,S.BX)(o.ws,{children:[(0,l.t)("Trend"),(0,S.tZ)(A.Z,{size:"sm",position:"top",title:(0,l.t)("Trends shows the smoothed value of an aggregate over time.")})]}),k=(0,h.ed)(m,g);return(0,S.BX)(R.Fragment,{children:[$,(0,S.tZ)(E.Z,{...j,organization:a,showLoading:!1,includePrevious:!1,yAxis:k,currentSeriesNames:[k],partial:!0,withoutZerofill:f,referrer:"api.performance.transaction-summary.trends-chart",userModified:(0,c.ro)(i.query.userModified),children:e=>{let{errored:t,loading:r,reloading:s,timeseriesData:n,timeframe:o}=e;return(0,S.tZ)(Re,{series:n,errored:t,loading:r,reloading:s,timeFrame:o,...P})}})]})}Ze.displayName="TrendChart";const Ee=(0,s.withRouter)(Ze);var xe=r("./app/utils/discover/fields.tsx");function _e(e){let{errored:t,theme:r,series:s,timeFrame:n,start:o,end:i,period:l,projects:d,environments:u,loading:c,reloading:m,legend:h,utc:g,queryExtra:v,router:f,onLegendSelectChanged:y}=e;if(t)return(0,S.tZ)(O.Z,{children:(0,S.tZ)(j.FC,{color:"gray500",size:"lg"})});const R={grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:$.CX},xAxis:n?{min:n.start,max:n.end}:void 0,yAxis:{axisLabel:{color:r.chartLabel,formatter:e=>(0,$.gu)(e,"p75(measurements.fcp)")}}},Z=s&&r.charts.getColorPalette(s.length-2)||[],E=s?s.map(((e,t)=>({...e,color:Z[t]}))):[];return(0,S.tZ)(C.Z,{router:f,period:l,start:o,end:i,utc:g,children:e=>(0,S.tZ)(D.Z,{start:o,end:i,queryExtra:{...v,showTransactions:p.TransactionsListOption.SLOW_LCP},period:l,utc:g,projects:d,environments:u,children:t=>{let{releaseSeries:r}=t;return(0,S.BX)(L.Z,{loading:c,reloading:m,children:[(0,S.tZ)(P.Z,{visible:m}),(0,k.Z)({value:(0,S.tZ)(fe.w,{...e,...R,legend:h,onLegendSelectChanged:y,series:[...E,...r]}),fixed:(0,S.tZ)(a.Z,{height:"200px",testId:"skeleton-ui"})})]})}})})}_e.displayName="Content";const Ae=_e;function Te(e){let{project:t,environment:r,location:n,organization:i,query:a,statsPeriod:d,router:u,queryExtra:p,withoutZerofill:m,start:h,end:g}=e;const v=(0,I.Z)(),f=(0,Z.a)(),y=[xe.Zl.FCP,xe.Zl.LCP,xe.Zl.FID,xe.Zl.CLS],b=h?(0,T.hC)(h):null,w=g?(0,T.hC)(g):null,N=d,C={start:b,end:w,period:N},O={theme:f,router:u,start:b,end:w,utc:"true"===(0,_.fK)(n.query).utc,legend:{right:10,top:0,selected:(0,x.RI)(n),formatter:e=>{const t=(0,xe.hW)(e);if(null!==t){const r=(0,xe.b8)(t);null!==r&&(e=r.toUpperCase())}return e}},queryExtra:p,period:N,projects:t,environments:r,onLegendSelectChanged:e=>{const{selected:t}=e,r=Object.keys(t).filter((e=>!t[e])),o={...n,query:{...n.query,unselectedSeries:r}};s.browserHistory.push(o)}},D={api:v,start:b,end:w,project:t,environment:r,query:a,period:N,interval:(0,x.ZS)(C,"high")},L=(0,S.BX)(o.ws,{children:[(0,l.t)("Web Vitals Breakdown"),(0,S.tZ)(A.Z,{size:"sm",position:"top",title:(0,l.t)("Web Vitals Breakdown reflects the 75th percentile of web vitals over time.")})]}),P=y.map((e=>`p75(${e})`));return(0,S.BX)(R.Fragment,{children:[L,(0,S.tZ)(E.Z,{...D,organization:i,showLoading:!1,includePrevious:!1,yAxis:P,partial:!0,withoutZerofill:m,referrer:"api.performance.transaction-summary.vitals-chart",userModified:(0,c.ro)(n.query.userModified),children:e=>{let{results:t,errored:r,loading:s,reloading:n,timeframe:o}=e;return(0,S.tZ)(Ae,{series:t,errored:r,loading:s,reloading:n,timeFrame:o,...O})}})]})}Te.displayName="VitalsChart";const be=(0,s.withRouter)(Te);let Ie;function we(e){return e===g.f1.None?[{value:Ie.DURATION,label:(0,l.t)("Duration Breakdown")},{value:Ie.DURATION_PERCENTILE,label:(0,l.t)("Duration Percentiles")},{value:Ie.LATENCY,label:(0,l.t)("Duration Distribution")},{value:Ie.TREND,label:(0,l.t)("Trends")},{value:Ie.VITALS,label:(0,l.t)("Web Vitals")}]:[{value:Ie.DURATION,label:(0,l.t)("Span Operation Breakdown")},{value:Ie.DURATION_PERCENTILE,label:(0,l.t)("Span Operation Percentiles")},{value:Ie.LATENCY,label:(0,l.t)("Span Operation Distribution")},{value:Ie.TREND,label:(0,l.t)("Trends")},{value:Ie.VITALS,label:(0,l.t)("Web Vitals")}]}!function(e){e.DURATION_PERCENTILE="durationpercentile",e.DURATION="duration",e.LATENCY="latency",e.TREND="trend",e.VITALS="vitals"}(Ie||(Ie={}));const Ne=h.T1.map((e=>{let{field:t,label:r}=e;return{value:t,label:r}}));function Ce(e){let{totalValues:t,eventView:r,organization:g,location:f,currentFilter:R,withoutZerofill:Z}=e;const E=h.cs.map((e=>{let{column:t,label:r}=e;return{value:t,label:r}}));let x=(0,c.ro)(f.query.display,Ie.DURATION),_=(0,c.ro)(f.query.trendFunction,Ne[0].value),A=(0,c.ro)(f.query.trendColumn,E[0].value);Object.values(Ie).includes(x)||(x=Ie.DURATION),Object.values(m.Z2).includes(_)||(_=m.Z2.P50),Object.values(m.A2).includes(A)||(A=m.A2.DURATION);const T={yAxis:x===Ie.VITALS?"countVital":"countDuration",showTransactions:x===Ie.VITALS?p.TransactionsListOption.SLOW_LCP:x===Ie.DURATION?p.TransactionsListOption.SLOW:void 0};return(0,S.BX)(i.s_,{children:[(0,S.BX)(o.BO,{children:[x===Ie.LATENCY&&(0,S.tZ)(Se,{organization:g,location:f,query:r.query,project:r.project,environment:r.environment,start:r.start,end:r.end,statsPeriod:r.statsPeriod,currentFilter:R}),x===Ie.DURATION&&(0,S.tZ)(G,{organization:g,query:r.query,queryExtra:T,project:r.project,environment:r.environment,start:r.start,end:r.end,statsPeriod:r.statsPeriod,currentFilter:R,withoutZerofill:Z}),x===Ie.DURATION_PERCENTILE&&(0,S.tZ)(le,{organization:g,location:f,query:r.query,project:r.project,environment:r.environment,start:r.start,end:r.end,statsPeriod:r.statsPeriod,currentFilter:R}),x===Ie.TREND&&(0,S.tZ)(Ee,{trendFunction:_,trendParameter:A,organization:g,query:r.query,queryExtra:T,project:r.project,environment:r.environment,start:r.start,end:r.end,statsPeriod:r.statsPeriod,withoutZerofill:Z}),x===Ie.VITALS&&(0,S.tZ)(be,{organization:g,query:r.query,queryExtra:T,project:r.project,environment:r.environment,start:r.start,end:r.end,statsPeriod:r.statsPeriod,withoutZerofill:Z})]}),(0,S.BX)(o.xx,{children:[(0,S.BX)(o.m2,{children:[(0,S.tZ)(o.OT,{children:(0,l.t)("Total Transactions")},"total-heading"),(0,S.tZ)(o.uN,{children:null===t?(0,S.tZ)(a.Z,{height:"24px"}):t.toLocaleString()},"total-value")]}),(0,S.BX)(o.m2,{children:[x===Ie.TREND&&(0,S.tZ)(n.Z,{title:(0,l.t)("Percentile"),selected:_,options:Ne,onChange:function(e){s.browserHistory.push({pathname:f.pathname,query:{...f.query,trendFunction:e}})}}),x===Ie.TREND&&(0,S.tZ)(n.Z,{title:(0,l.t)("Parameter"),selected:A,options:E,onChange:function(e){s.browserHistory.push({pathname:f.pathname,query:{...f.query,trendColumn:e}})}}),x===Ie.LATENCY&&(0,S.tZ)(y,{location:f}),(0,S.tZ)(n.Z,{title:(0,l.t)("Display"),selected:x,options:we(R),onChange:function(e){const t=(0,c.ro)(f.query.display,Ie.DURATION);(0,d.Z)("performance_views.transaction_summary.change_chart_display",{organization:g,from_chart:t,to_chart:e}),s.browserHistory.push({pathname:f.pathname,query:{...(0,u.V)(f,[v.Oo,v.mo]),display:e}})}})]})]})]})}Ce.displayName="TransactionSummaryCharts";const Oe=Ce},"./app/views/releases/detail/commitsAndFiles/emptyState.tsx":(e,t,r)=>{r.d(t,{Z:()=>a});var s=r("./app/components/emptyStateWarning.tsx"),n=r("./app/components/panels/index.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=e=>{let{children:t}=e;return(0,o.tZ)(n.s_,{children:(0,o.tZ)(n.N,{children:(0,o.tZ)(s.Z,{children:(0,o.tZ)("p",{children:t})})})})};i.displayName="EmptyState";const a=i},"./app/views/releases/detail/overview/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{TransactionsListOption:()=>Dr,default:()=>kr});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),i=r("../node_modules/react-router/es/index.js"),a=r("../node_modules/moment/moment.js"),l=r.n(a),d=r("./app/actionCreators/release.tsx"),u=r("./app/api.tsx"),c=r("./app/components/acl/feature.tsx"),p=r("./app/components/charts/sessionsRequest.tsx"),m=r("./app/components/dateTime.tsx"),h=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),g=r("./app/components/alert.tsx"),v=r("./app/components/loadingIndicator.tsx"),S=r("./app/components/notAvailable.tsx"),f=r("./app/components/panels/index.tsx"),y=r("./app/components/panels/panelTable.tsx"),R=r("./app/icons/index.tsx"),Z=r("./app/locale.tsx"),E=r("./app/styles/space.tsx"),x=r("./app/utils/discover/discoverQuery.tsx"),_=r("./app/utils/discover/fieldRenderers.tsx"),A=r("./app/utils/discover/fields.tsx"),T=r("./app/utils/performance/vitals/constants.tsx"),b=r("./app/views/performance/utils.tsx"),I=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function w(e){let{organization:t,location:r,project:s,releaseEventView:n,allReleasesTableData:a,thisReleaseTableData:l,performanceType:d,isLoading:u}=e;const c=(null==a?void 0:a.meta)&&(0,_.Js)("user_misery()",a.meta,!1);function p(e,t,r){if(void 0===e||void 0===t)return(0,I.tZ)(M,{});const s=e-t,n=s>=1e3?s/1e3:s,o=100*(e-t),i=Math.round(Math.abs(o)),a=Math.abs(n).toFixed(2);return 0===s?(0,I.tZ)(H,{children:"0"+("duration"===r?"ms":"%")}):(0,I.BX)(V,{color:s>=0?"success":"error",children:[`${"duration"===r?a:i}${"duration"===r?s>=1e3?"s":"ms":"%"}`,(0,I.tZ)(X,{color:s>=0?"success":"error",direction:s>=0?"down":"up",size:"xs"})]})}function m(){var e,t,r,s;const n=null==a||null===(e=a.data)||void 0===e||null===(t=e[0])||void 0===t?void 0:t["user_misery()"],o=null==l||null===(r=l.data)||void 0===r||null===(s=r[0])||void 0===s?void 0:s["user_misery()"];return(0,I.tZ)(j,{children:p(n,o,"number")})}const h=(0,I.tZ)(D,{}),g={[b.iy.FRONTEND]:{title:(0,Z.t)("Frontend Performance"),section:function(){const e=[{title:A.Zl.FCP,field:"p75(measurements.fcp)"},{title:A.Zl.FID,field:"p75(measurements.fid)"},{title:A.Zl.LCP,field:"p75(measurements.lcp)"},{title:A.Zl.CLS,field:"p75(measurements.cls)"}],s=[{title:"HTTP",column:"p75(spans.http)",field:"p75(spans.http)"},{title:"Browser",column:"p75(spans.browser)",field:"p75(spans.browser)"},{title:"Resource",column:"p75(spans.resource)",field:"p75(spans.resource)"}],d=e.map(((e,r)=>{const s=n.withColumns([{kind:"field",field:`p75(${e.title})`}]);return(0,I.tZ)($,{children:(0,I.BX)(i.Link,{to:s.getResultsViewUrlTarget(t.slug),children:[T.r9[e.title].name," (",T.r9[e.title].acronym,")"]})},r)})),u=s.map(((e,r)=>{const s=n.withColumns([{kind:"field",field:`${e.column}`}]);return(0,I.tZ)($,{children:(0,I.tZ)(i.Link,{to:s.getResultsViewUrlTarget(t.slug),children:(0,Z.t)(e.title)})},r)})),h=e.map((e=>(null==a?void 0:a.meta)&&(0,_.Js)(e.field,null==a?void 0:a.meta,!1))),g=s.map((e=>(null==a?void 0:a.meta)&&(0,_.Js)(e.field,null==a?void 0:a.meta,!1))),v=e.map((e=>{var t,r,s,n,o,i;return{allReleasesRow:{data:null==a||null===(t=a.data)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[e.field],meta:null==a||null===(s=a.meta)||void 0===s?void 0:s[e.field]},thisReleaseRow:{data:null==l||null===(n=l.data)||void 0===n||null===(o=n[0])||void 0===o?void 0:o[e.field],meta:null==l||null===(i=l.meta)||void 0===i?void 0:i[e.field]}}})),S=s.map((e=>{var t,r,s,n,o,i;return{allReleasesRow:{data:null==a||null===(t=a.data)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[e.field],meta:null==a||null===(s=a.meta)||void 0===s?void 0:s[e.field]},thisReleaseRow:{data:null==l||null===(n=l.data)||void 0===n||null===(o=n[0])||void 0===o?void 0:o[e.field],meta:null==l||null===(i=l.meta)||void 0===i?void 0:i[e.field]}}})),y=(0,I.BX)("div",{children:[(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),e.map(((e,t)=>(0,I.tZ)(B,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})},e[t])))]}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),s.map(((e,t)=>(0,I.tZ)(B,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})},e[t])))]})]});return(0,I.BX)(o.Fragment,{children:[(0,I.BX)("div",{children:[(0,I.tZ)(f.Lv,{children:(0,Z.t)("User Misery")}),(0,I.BX)(j,{children:[(0,I.tZ)("div",{children:(0,Z.t)("Web Vitals")}),d]}),(0,I.BX)(j,{children:[(0,I.tZ)("div",{children:(0,Z.t)("Span Operations")}),u]})]}),0===(null==a?void 0:a.data.length)?y:null==a?void 0:a.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r}),o=null==h?void 0:h.map((s=>null==s?void 0:s(e,{organization:t,location:r}))),i=null==g?void 0:g.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:n}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),o.map((e=>e))]}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),i.map((e=>e))]})]},s)})),0===(null==l?void 0:l.data.length)?y:null==l?void 0:l.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r}),o=null==h?void 0:h.map((s=>null==s?void 0:s(e,{organization:t,location:r}))),i=null==g?void 0:g.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.tZ)("div",{children:(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:n}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),o.map((e=>e))]}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),i.map((e=>e))]})]})},s)})),(0,I.BX)("div",{children:[m(),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),null==v?void 0:v.map((e=>{var t,r,s;return p(null===(t=e.allReleasesRow)||void 0===t?void 0:t.data,null===(r=e.thisReleaseRow)||void 0===r?void 0:r.data,null===(s=e.allReleasesRow)||void 0===s?void 0:s.meta)}))]}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),null==S?void 0:S.map((e=>{var t,r,s;return p(null===(t=e.allReleasesRow)||void 0===t?void 0:t.data,null===(r=e.thisReleaseRow)||void 0===r?void 0:r.data,null===(s=e.allReleasesRow)||void 0===s?void 0:s.meta)}))]})]})]})}()},[b.iy.BACKEND]:{title:(0,Z.t)("Backend Performance"),section:function(){const e=[{title:"HTTP",column:"p75(spans.http)",field:"p75_spans_http"},{title:"DB",column:"p75(spans.db)",field:"p75_spans_db"}],s=e.map(((e,r)=>{const s=n.withColumns([{kind:"field",field:`${e.column}`}]);return(0,I.tZ)($,{children:(0,I.tZ)(i.Link,{to:s.getResultsViewUrlTarget(t.slug),children:(0,Z.t)(e.title)})},r)})),d=(null==a?void 0:a.meta)&&(0,_.Js)("apdex",a.meta,!1),u=e.map((e=>(null==a?void 0:a.meta)&&(0,_.Js)(e.field,null==a?void 0:a.meta,!1))),h=e.map((e=>{var t,r,s,n,o,i;return{allReleasesRow:{data:null==a||null===(t=a.data)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[e.field],meta:null==a||null===(s=a.meta)||void 0===s?void 0:s[e.field]},thisReleaseRow:{data:null==l||null===(n=l.data)||void 0===n||null===(o=n[0])||void 0===o?void 0:o[e.field],meta:null==l||null===(i=l.meta)||void 0===i?void 0:i[e.field]}}})),g=(0,I.BX)("div",{children:[(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})}),(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),e.map(((e,t)=>(0,I.tZ)(B,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})},e[t])))]})]});return(0,I.BX)(o.Fragment,{children:[(0,I.BX)("div",{children:[(0,I.tZ)(f.Lv,{children:(0,Z.t)("User Misery")}),(0,I.tZ)(j,{children:(0,I.tZ)("div",{children:(0,Z.t)("Apdex")})}),(0,I.BX)(j,{children:[(0,I.tZ)("div",{children:(0,Z.t)("Span Operations")}),s]})]}),0===(null==a?void 0:a.data.length)?g:null==a?void 0:a.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r}),o=null==d?void 0:d(e,{organization:t,location:r}),i=null==u?void 0:u.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:n}),(0,I.tZ)(F,{children:o}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),i.map((e=>e))]})]},s)})),0===(null==l?void 0:l.data.length)?g:null==l?void 0:l.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r}),o=null==d?void 0:d(e,{organization:t,location:r}),i=null==u?void 0:u.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:n}),(0,I.tZ)(F,{children:o}),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),i.map((e=>e))]})]},s)})),(0,I.BX)("div",{children:[m(),function(){var e,t,r,s;const n=null==a||null===(e=a.data)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.apdex,o=null==l||null===(r=l.data)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.apdex;return(0,I.tZ)(j,{children:p(n,o,"string")})}(),(0,I.BX)(j,{children:[(0,I.tZ)(k,{}),null==h?void 0:h.map((e=>{var t,r,s;return p(null===(t=e.allReleasesRow)||void 0===t?void 0:t.data,null===(r=e.thisReleaseRow)||void 0===r?void 0:r.data,null===(s=e.allReleasesRow)||void 0===s?void 0:s.meta)}))]})]})]})}()},[b.iy.MOBILE]:{title:(0,Z.t)("Mobile Performance"),section:function(){const e=[A.$n.AppStartCold,A.$n.AppStartWarm,A.$n.FramesSlow,A.$n.FramesFrozen].map((e=>(0,I.tZ)(f.Lv,{children:T.TT[e].name},e))),s=["p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow)","p75(measurements.frames_frozen)"],n=s.map((e=>(null==a?void 0:a.meta)&&(0,_.Js)(e,null==a?void 0:a.meta,!1))),i=s.map((e=>{var t,r,s,n,o,i;return{allReleasesRow:{data:null==a||null===(t=a.data)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[e],meta:null==a||null===(s=a.meta)||void 0===s?void 0:s[e]},thisReleaseRow:{data:null==l||null===(n=l.data)||void 0===n||null===(o=n[0])||void 0===o?void 0:o[e],meta:null==l||null===(i=l.meta)||void 0===i?void 0:i[e]}}})),d=(0,I.BX)("div",{children:[(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})}),s.map(((e,t)=>(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})},e[t])))]});return(0,I.BX)(o.Fragment,{children:[(0,I.BX)("div",{children:[(0,I.tZ)(f.Lv,{children:(0,Z.t)("User Misery")}),e]}),0===(null==a?void 0:a.data.length)?d:null==a?void 0:a.data.map(((e,s)=>{const o=null==c?void 0:c(e,{organization:t,location:r}),i=null==n?void 0:n.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:o}),i.map(((e,t)=>(0,I.tZ)(j,{children:e},t)))]},s)})),0===(null==l?void 0:l.data.length)?d:null==l?void 0:l.data.map(((e,s)=>{const o=null==c?void 0:c(e,{organization:t,location:r}),i=null==n?void 0:n.map((s=>null==s?void 0:s(e,{organization:t,location:r})));return(0,I.BX)("div",{children:[(0,I.tZ)(U,{children:o}),i.map(((e,t)=>(0,I.tZ)(j,{children:e},t)))]},s)})),(0,I.BX)("div",{children:[m(),null==i?void 0:i.map(((e,t)=>{var r,s,n;return(0,I.tZ)(j,{children:p(null===(r=e.allReleasesRow)||void 0===r?void 0:r.data,null===(s=e.thisReleaseRow)||void 0===s?void 0:s.data,null===(n=e.allReleasesRow)||void 0===n?void 0:n.meta)},t)}))]})]})}()},[b.iy.ANY]:{title:(0,Z.t)("[Unknown] Performance"),section:function(){const e=(0,I.tZ)("div",{children:(0,I.tZ)(z,{children:(0,I.tZ)(M,{tooltip:(0,Z.t)("No results found")})})});return(0,I.BX)(o.Fragment,{children:[(0,I.tZ)("div",{children:(0,I.tZ)(f.Lv,{children:(0,Z.t)("User Misery")})}),0===(null==a?void 0:a.data.length)?e:null==a?void 0:a.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r});return(0,I.tZ)("div",{children:(0,I.tZ)(U,{children:n})},s)})),0===(null==l?void 0:l.data.length)?e:null==l?void 0:l.data.map(((e,s)=>{const n=null==c?void 0:c(e,{organization:t,location:r});return(0,I.tZ)("div",{children:(0,I.tZ)(U,{children:n})},s)})),(0,I.tZ)("div",{children:m()})]})}()}},v=d===b.iy.ANY;return(0,I.BX)(o.Fragment,{children:[(0,I.tZ)(L,{children:g[d].title}),v&&(0,I.tZ)(q,{type:"warning",showIcon:!0,system:!0,children:(0,Z._N)("For more performance metrics, specify which platform this project is using in [link]",{link:(0,I.tZ)(i.Link,{to:`/settings/${t.slug}/projects/${s.slug}/`,children:(0,Z.t)("project settings.")})})}),(0,I.tZ)(P,{isLoading:u,headers:[(0,I.tZ)(G,{align:"left",children:(0,Z.t)("Description")},"description"),(0,I.tZ)(G,{align:"right",children:(0,Z.t)("All Releases")},"releases"),(0,I.tZ)(G,{align:"right",children:(0,Z.t)("This Release")},"release"),(0,I.tZ)(G,{align:"right",children:(0,Z.t)("Change")},"change")],disablePadding:!0,loader:h,disableTopBorder:v,children:g[d].section})]})}function N(e){let{organization:t,project:r,allReleasesEventView:s,releaseEventView:n,performanceType:o,location:i}=e;return(0,I.tZ)(x.Z,{eventView:s,orgSlug:t.slug,location:i,useEvents:!0,children:e=>{let{isLoading:a,tableData:l}=e;return(0,I.tZ)(x.Z,{eventView:n,orgSlug:t.slug,location:i,useEvents:!0,children:e=>{let{isLoading:d,tableData:u}=e;return(0,I.tZ)(w,{isLoading:a||d,organization:t,location:i,project:r,allReleasesEventView:s,releaseEventView:n,allReleasesTableData:l,thisReleaseTableData:u,performanceType:o})}})}})}w.displayName="PerformanceCardTable",N.displayName="PerformanceCardTableWrapper";const C=N,O=e=>(0,h.iv)("color:",e.theme.chartOther,";text-align:right;",""),D=(0,n.Z)(v.Z,{target:"e3pectd15"})({name:"109hxx0",styles:"margin:70px auto"}),L=(0,n.Z)("div",{target:"e3pectd14"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";padding:",(0,E.Z)(2),";border-top:1px solid ",(e=>e.theme.border),";border-left:1px solid ",(e=>e.theme.border),";border-right:1px solid ",(e=>e.theme.border),";border-top-left-radius:",(e=>e.theme.borderRadius),";border-top-right-radius:",(e=>e.theme.borderRadius),";"),P=(0,n.Z)(y.Z,{target:"e3pectd13"})("border-top-left-radius:0;border-top-right-radius:0;border-top:",(e=>e.disableTopBorder?"none":`1px solid ${e.theme.border}`),";@media (max-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:min-content 1fr 1fr 1fr;}"),j=(0,n.Z)(f.Lv,{target:"e3pectd12"})({name:"1wb4dzc",styles:"display:block;white-space:nowrap;width:100%"}),$=(0,n.Z)("div",{target:"e3pectd11"})("margin-left:",(0,E.Z)(3),";"),k=(0,n.Z)("div",{target:"e3pectd10"})({name:"1ncq4tc",styles:"height:24px"}),U=(0,n.Z)(f.Lv,{target:"e3pectd9"})({name:"1f60if8",styles:"justify-content:flex-end"}),F=(0,n.Z)(f.Lv,{target:"e3pectd8"})({name:"2qga7i",styles:"text-align:right"}),z=(0,n.Z)(f.Lv,{target:"e3pectd7"})("display:block;",O,";"),B=(0,n.Z)("div",{target:"e3pectd6"})(O,";"),G=(0,n.Z)("div",{target:"e3pectd5"})("text-align:",(e=>e.align),";margin-left:",(e=>"left"===e.align&&(0,E.Z)(2)),";padding-right:",(e=>"right"===e.align&&(0,E.Z)(2)),";",(e=>e.theme.overflowEllipsis),";"),q=(0,n.Z)(g.Z,{target:"e3pectd4"})("border-top:1px solid ",(e=>e.theme.border),";border-right:1px solid ",(e=>e.theme.border),";border-left:1px solid ",(e=>e.theme.border),";margin-bottom:0;"),M=(0,n.Z)(S.Z,{target:"e3pectd3"})({name:"2qga7i",styles:"text-align:right"}),H=(0,n.Z)("div",{target:"e3pectd2"})("color:",(e=>e.theme.subText),";text-align:right;"),V=(0,n.Z)("div",{target:"e3pectd1"})("color:",(e=>e.theme[e.color]),";text-align:right;"),X=(0,n.Z)(R.CC,{target:"e3pectd0"})("color:",(e=>e.theme[e.color]),";margin-left:",(0,E.Z)(.5),";");var W=r("./app/components/discover/transactionsList.tsx"),Y=r("./app/components/environmentPageFilter.tsx"),Q=r("./app/components/layouts/thirds.tsx"),K=r("./app/components/organizations/pageFilters/parse.tsx"),J=r("./app/components/pageTimeRangeSelector.tsx"),ee=r("./app/constants/index.tsx"),te=r("./app/types/index.tsx"),re=r("./app/utils/dates.tsx"),se=r("./app/utils/discover/eventView.tsx"),ne=r("./app/utils/formatters.tsx"),oe=r("./app/utils/queryString.tsx"),ie=r("./app/utils/routeTitle.tsx"),ae=r("./app/utils/withApi.tsx"),le=r("./app/utils/withOrganization.tsx"),de=r("./app/utils/withPageFilters.tsx"),ue=r("./app/views/asyncView.tsx"),ce=r("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),pe=r("./app/views/performance/transactionSummary/utils.tsx"),me=r("./app/views/performance/trends/types.tsx"),he=r("./app/views/releases/utils/index.tsx"),ge=r("./app/views/releases/detail/index.tsx"),ve=r("./app/components/asyncComponent.tsx"),Se=r("./app/components/avatar/userAvatar.tsx"),fe=r("./app/components/button.tsx"),ye=r("./app/components/collapsible.tsx"),Re=r("./app/components/sidebarSection.tsx"),Ze=r("./app/utils.tsx");class Ee extends ve.Z{constructor(){super(...arguments),(0,s.Z)(this,"shouldReload",!0)}getEndpoints(){const{orgId:e,projectSlug:t,version:r}=this.props;return[["commits",`/projects/${e}/${t}/releases/${encodeURIComponent(r)}/commits/`]]}componentDidUpdate(e){e.version!==this.props.version&&this.remountComponent()}getDisplayPercent(e){const{commits:t}=this.state,r=Math.round((0,Ze.aQ)(e,t.length));return`${r<1?"<1":r}%`}renderBody(){var e;const t=null===(e=this.state.commits)||void 0===e?void 0:e.reduce(((e,t)=>{var r,s;const n=null!==(r=null===(s=t.author)||void 0===s?void 0:s.email)&&void 0!==r?r:"unknown";return e.hasOwnProperty(n)?e[n].commitCount+=1:e[n]={commitCount:1,author:t.author},e}),{}),r=Object.values(t).sort(((e,t)=>t.commitCount-e.commitCount));return r.length?(0,I.tZ)(Re.Z,{title:(0,Z.t)("Commit Author Breakdown"),children:(0,I.tZ)(ye.Z,{expandButton:e=>{let{onExpand:t,numberOfHiddenItems:r}=e;return(0,I.tZ)(fe.ZP,{priority:"link",onClick:t,children:(0,Z.tn)("Show %s collapsed author","Show %s collapsed authors",r)})},children:r.map(((e,t)=>{var r;let{commitCount:s,author:n}=e;return(0,I.BX)(xe,{children:[(0,I.tZ)(Se.Z,{user:n,size:20,hasTooltip:!0}),(0,I.tZ)(_e,{children:(0,ne.He)(n||{},!1)}),(0,I.tZ)(Ae,{children:(0,Z.tn)("%s commit","%s commits",s)}),(0,I.tZ)(Te,{children:this.getDisplayPercent(s)})]},null!==(r=null==n?void 0:n.email)&&void 0!==r?r:t)}))})}):null}}const xe=(0,n.Z)("div",{target:"e10xjmnv3"})("display:inline-grid;grid-template-columns:30px 2fr 1fr 40px;width:100%;margin-bottom:",(0,E.Z)(1),";font-size:",(e=>e.theme.fontSizeMedium),";"),_e=(0,n.Z)("div",{target:"e10xjmnv2"})("color:",(e=>e.theme.textColor),";",(e=>e.theme.overflowEllipsis),";"),Ae=(0,n.Z)("div",{target:"e10xjmnv1"})("color:",(e=>e.theme.subText),";text-align:right;"),Te=(0,n.Z)("div",{target:"e10xjmnv0"})({name:"myuf92",styles:"min-width:40px;text-align:right"}),be=Ee;var Ie=r("./app/components/links/link.tsx"),we=r("./app/components/tag.tsx"),Ne=r("./app/utils/tokenizeSearch.tsx");const Ce=e=>{let{deploy:t,orgSlug:r,projectId:s,version:n,className:o}=e;const i=!!r&&!!n,a=(0,I.tZ)(we.Z,{className:o,type:"highlight",icon:i&&(0,I.tZ)(R.V$,{}),textMaxWidth:80,tooltipText:i?(0,Z.t)("Open In Issues"):void 0,children:t.environment});return i?(0,I.tZ)(Ie.Z,{to:{pathname:`/organizations/${r}/issues/`,query:{project:null!=s?s:null,environment:t.environment,query:new Ne.MY([`release:${n}`]).formatString()}},children:a}):a};Ce.displayName="DeployBadge";const Oe=Ce;var De=r("./app/components/textOverflow.tsx"),Le=r("./app/components/timeSince.tsx");const Pe=e=>{let{version:t,orgSlug:r,projectId:s,deploys:n}=e;return(0,I.tZ)(Re.Z,{title:(0,Z.t)("Deploys"),children:n.map((e=>(0,I.BX)(je,{children:[(0,I.tZ)($e,{deploy:e,orgSlug:r,version:t,projectId:s}),(0,I.tZ)(De.Z,{children:(0,I.tZ)(Le.Z,{date:e.dateFinished})})]},e.id)))})};Pe.displayName="Deploys";const je=(0,n.Z)("div",{target:"ebzjdob1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,E.Z)(1),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";"),$e=(0,n.Z)(Oe,{target:"ebzjdob0"})("margin-right:",(0,E.Z)(1),";"),ke=Pe;var Ue=r("./app/components/idBadge/index.tsx"),Fe=r("./app/components/organizations/pageFilters/utils.tsx");function ze(e){let{projects:t,location:r,version:s,organization:n}=e;return(0,I.tZ)(Re.Z,{title:(0,Z.tn)("Other Project for This Release","Other Projects for This Release",t.length),children:(0,I.tZ)(ye.Z,{expandButton:e=>{let{onExpand:t,numberOfHiddenItems:r}=e;return(0,I.tZ)(fe.ZP,{priority:"link",onClick:t,children:(0,Z.tn)("Show %s collapsed project","Show %s collapsed projects",r)})},children:t.map((e=>(0,I.BX)(Be,{children:[(0,I.tZ)(Ue.Z,{project:e,avatarSize:16}),(0,I.tZ)(fe.ZP,{size:"xsmall",to:{pathname:`/organizations/${n.slug}/releases/${encodeURIComponent(s)}/`,query:{...(0,Fe.GN)(r.query),project:e.id,yAxis:void 0}},children:(0,Z.t)("View")})]},e.id)))})})}ze.displayName="OtherProjects";const Be=(0,n.Z)("div",{target:"e1vy22z50"})("display:grid;grid-template-columns:1fr max-content;align-items:center;justify-content:space-between;margin-bottom:",(0,E.Z)(.75),";font-size:",(e=>e.theme.fontSizeMedium),";@media (min-width: ",(e=>e.theme.breakpoints.medium),") and (max-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:200px max-content;}"),Ge=ze;var qe=r("./app/components/count.tsx"),Me=r("./app/components/keyValueTable.tsx"),He=r("./app/components/version.tsx");const Ve=e=>{var t;let{release:r,releaseMeta:s,orgSlug:n,projectSlug:o}=e;const{version:i,versionInfo:a,dateCreated:l,firstEvent:d,lastEvent:u}=r;return(0,I.tZ)(Re.Z,{title:(0,Z.t)("Project Release Details"),children:(0,I.BX)(Me.v,{children:[(0,I.tZ)(Me.G,{keyName:(0,Z.t)("Created"),value:(0,I.tZ)(m.Z,{date:l,seconds:!1})}),(0,I.tZ)(Me.G,{keyName:(0,Z.t)("Version"),value:(0,I.tZ)(He.Z,{version:i,anchor:!1})}),(0,I.tZ)(Me.G,{keyName:(0,Z.t)("Package"),value:(0,I.tZ)(Xe,{ellipsisDirection:"left",children:null!==(t=a.package)&&void 0!==t?t:"â€”"})}),(0,I.tZ)(Me.G,{keyName:(0,Z.t)("First Event"),value:d?(0,I.tZ)(Le.Z,{date:d}):"â€”"}),(0,I.tZ)(Me.G,{keyName:(0,Z.t)("Last Event"),value:u?(0,I.tZ)(Le.Z,{date:u}):"â€”"}),(0,I.tZ)(Me.G,{keyName:(0,Z.t)("Source Maps"),value:(0,I.BX)(Ie.Z,{to:`/settings/${n}/projects/${o}/source-maps/${encodeURIComponent(i)}/`,children:[(0,I.tZ)(qe.Z,{value:s.releaseFileCount})," ",(0,Z.tn)("artifact","artifacts",s.releaseFileCount)]})})]})})};Ve.displayName="ProjectReleaseDetails";const Xe=(0,n.Z)(De.Z,{target:"e11dcsas0"})({name:"olmadw",styles:"line-height:inherit;text-align:right"}),We=Ve;var Ye=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),Qe=r("./app/components/charts/chartZoom.tsx"),Ke=r("./app/components/charts/errorPanel.tsx"),Je=r("./app/components/charts/lineChart.tsx"),et=r("./app/components/charts/transitionChart.tsx"),tt=r("./app/components/charts/transparentLoadingMask.tsx"),rt=r("./app/components/questionTooltip.tsx"),st=r("./app/components/tooltip.tsx"),nt=r("./app/utils/sessions.tsx"),ot=r("./app/views/releases/detail/utils.tsx");const it={0:te.kI.SESSIONS,1:te.kI.USERS};function at(e){var t,r;let{release:s,project:n,environment:o,releaseSessions:i,allSessions:a,loading:l,reloading:d,errored:u,router:c,location:p}=e;const m=(0,Ye.a)(),h=!!(0,nt.sA)(null==i?void 0:i.groups,te.kI.USERS);function g(){if(!i)return[];const e=[...(0,ot.Mn)(s,n,m,p,{hideLabel:!0,axisIndex:0}),{seriesName:(0,Z.t)("Sessions"),connectNulls:!0,yAxisIndex:0,xAxisIndex:0,data:(0,nt.hD)(i.groups,null==a?void 0:a.groups,i.intervals,te.kI.SESSIONS)}];if(h){const t=(0,ot.Mn)(s,n,m,p,{hideLabel:!0,axisIndex:1});e.push(...t),e.push({seriesName:(0,Z.t)("Users"),connectNulls:!0,yAxisIndex:1,xAxisIndex:1,data:(0,nt.hD)(i.groups,null==a?void 0:a.groups,i.intervals,te.kI.USERS)})}return e}const v=m.charts.getColorPalette(2),f={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},max:100,axisLabel:{formatter:e=>`${e}%`,color:m.chartLabel}},y={height:h?280:140,grid:[{top:"40px",left:"10px",right:"10px",height:"100px"},{top:"180px",left:"10px",right:"10px",height:"100px"}],axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:Array.from(new Array(2)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,...f},{gridIndex:1,...f}],isGroupedByDate:!0,showTimeInTooltip:!0,colors:[v[0],v[1]],tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t,r)=>{const{axisIndex:s,dataIndex:n}=r||{},o=(0,nt.SU)(null==i?void 0:i.groups,it[null!=s?s:0],null!=n?n:0);return t&&Object.values(ot.N8).includes(t)?"":`<span>${(0,ne.Du)(o)} <span style="color: ${m.textColor};margin-left: ${(0,E.Z)(.5)}">${e}%</span></span>`},filter:(e,t)=>{const{seriesName:r,axisIndex:s}=t;return 1!==s||!Object.values(ot.N8).includes(r)}}},{statsPeriod:x,start:_,end:A,utc:T}=(0,he.O7)({location:p,releaseBounds:(0,he.C8)(s)}),b=null===(t=s.adoptionStages)||void 0===t||null===(r=t[n.slug])||void 0===r?void 0:r.stage,w=he.EB[b],N=0===o.length||o.length>1;return(0,I.BX)("div",{children:[(0,he.Jl)(n.platform)&&(0,I.tZ)(Re.Z,{title:(0,Z.t)("Adoption Stage"),icon:N&&(0,I.tZ)(rt.Z,{position:"top",title:(0,Z.t)("See if a release has low adoption, been adopted by users, or replaced by another release. Select an environment above to view the stage this release is in."),size:"sm"}),children:w&&!N?(0,I.BX)("div",{children:[(0,I.tZ)(st.Z,{title:w.tooltipTitle,isHoverable:!0,children:(0,I.tZ)(we.Z,{type:w.type,children:w.name})}),(0,I.tZ)(dt,{children:(0,Z._N)("in [environment]",{environment:o})})]}):(0,I.tZ)(lt,{children:(0,I.tZ)(S.Z,{})})}),(0,I.BX)(ut,{children:[!l&&(0,I.tZ)(pt,{top:"0px",children:(0,I.tZ)(ct,{title:(0,Z.t)("Sessions Adopted"),icon:(0,I.tZ)(rt.Z,{position:"top",title:(0,Z.t)("Adoption compares the sessions of a release with the total sessions for this project."),size:"sm"})})}),!l&&h&&(0,I.tZ)(pt,{top:"140px",children:(0,I.tZ)(ct,{title:(0,Z.t)("Users Adopted"),icon:(0,I.tZ)(rt.Z,{position:"top",title:(0,Z.t)("Adoption compares the users of a release with the total users for this project."),size:"sm"})})}),u?(0,I.tZ)(Ke.Z,{height:"280px",children:(0,I.tZ)(R.FC,{color:"gray300",size:"lg"})}):(0,I.BX)(et.Z,{loading:l,reloading:d,height:"280px",children:[(0,I.tZ)(tt.Z,{visible:d}),(0,I.tZ)(Qe.Z,{router:c,period:null!=x?x:void 0,utc:"true"===T,start:_,end:A,usePageDate:!0,xAxisIndex:[0,1],children:e=>(0,I.tZ)(Je.w,{...y,...e,series:g(),transformSinglePointToLine:!0})})]})]})]})}at.displayName="ReleaseAdoption";const lt=(0,n.Z)("div",{target:"ecm7kxd4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),dt=(0,n.Z)("span",{target:"ecm7kxd3"})("color:",(e=>e.theme.textColor),";margin-left:",(0,E.Z)(.5),";font-size:",(e=>e.theme.fontSizeSmall),";"),ut=(0,n.Z)("div",{target:"ecm7kxd2"})({name:"bjn8wh",styles:"position:relative"}),ct=(0,n.Z)(Re.Z,{target:"ecm7kxd1"})({name:"ti75j2",styles:"margin:0"}),pt=(0,n.Z)("div",{target:"ecm7kxd0"})("position:absolute;top:",(e=>e.top),";z-index:1;left:0;right:0;"),mt=(0,i.withRouter)(at);function ht(e){var t;let{organization:r,release:s,project:n}=e;const{lastDeploy:o,dateCreated:i,version:a}=s;return(0,I.BX)(gt,{children:[(0,I.tZ)(Re.Z,{title:null!=o&&o.dateFinished?(0,Z.t)("Date Deployed"):(0,Z.t)("Date Created"),children:(0,I.tZ)(Le.Z,{date:null!==(t=null==o?void 0:o.dateFinished)&&void 0!==t?t:i})}),(0,I.tZ)(Re.Z,{title:(0,Z.t)("Last Deploy"),children:null!=o&&o.dateFinished?(0,I.tZ)(Oe,{deploy:o,orgSlug:r.slug,version:a,projectId:n.id}):(0,I.tZ)(S.Z,{})})]})}ht.displayName="ReleaseStats";const gt=(0,n.Z)("div",{target:"efpxwwm0"})("display:grid;grid-template-columns:50% 50%;grid-row-gap:",(0,E.Z)(2),";"),vt=ht;var St=r("../node_modules/lodash/pick.js"),ft=r.n(St),yt=r("./app/constants/pageFilters.tsx");class Rt extends ve.Z{constructor(){super(...arguments),(0,s.Z)(this,"shouldReload",!0)}getEndpoints(){const{location:e,organization:t,projectSlug:r,version:s}=this.props;return[["releaseStats",`/projects/${t.slug}/${r}/releases/${encodeURIComponent(s)}/stats/`,{query:{...(0,K.fK)(ft()(e.query,[yt.nF.PROJECT,yt.nF.ENVIRONMENT])),type:"sessions"}}]]}componentDidUpdate(e){e.version!==this.props.version&&this.remountComponent()}renderLoading(){return this.renderBody()}renderBody(){var e;const t=null===(e=this.state.releaseStats)||void 0===e?void 0:e.usersBreakdown;if(null==t||!t.length)return null;const r=t.map(((e,t,r)=>{let{date:s,crashFreeUsers:n,totalUsers:o}=e;const i=Math.round((null!=n?n:0)*o/100),a=0===t?(0,Z.t)("Release created"):`${l()(r[0].date).from(s,!0)} ${(0,Z.t)("later")}`;return{date:l()(s),dateLabel:a,crashFreeUsers:n,crashFreeUserCount:i}})).filter((e=>e.date.isBefore())).reverse();return r.length?(0,I.tZ)(Re.Z,{title:(0,Z.t)("Total Crash Free Users"),children:(0,I.tZ)(Zt,{children:r.map((e=>(0,I.BX)(Et,{children:[(0,I.BX)(xt,{children:[(0,I.tZ)(_t,{bold:!0,children:e.date.format("MMMM D")}),(0,I.BX)(_t,{bold:!0,right:!0,children:[(0,I.tZ)(qe.Z,{value:e.crashFreeUserCount})," ",(0,Z.tn)("user","users",e.crashFreeUserCount)]})]}),(0,I.BX)(xt,{children:[(0,I.tZ)(_t,{children:e.dateLabel}),(0,I.tZ)(At,{right:!0,children:(0,Ze.ri)(e.crashFreeUsers)?(0,he.zB)(e.crashFreeUsers):"-"})]})]},e.date.toString())))})}):null}}const Zt=(0,n.Z)("div",{target:"e1e7mioh4"})("font-size:",(e=>e.theme.fontSizeMedium),";line-height:1.2;"),Et=(0,n.Z)("div",{target:"e1e7mioh3"})("border-left:1px solid ",(e=>e.theme.border),";padding-left:",(0,E.Z)(2),";padding-bottom:",(0,E.Z)(1),";margin-left:",(0,E.Z)(1),";position:relative;&:before{content:'';width:",10,"px;height:",10,"px;border-radius:100%;background-color:",(e=>e.theme.purple300),";position:absolute;top:0;left:-",Math.floor(5),"px;}&:last-child{border-left:0;}"),xt=(0,n.Z)("div",{target:"e1e7mioh2"})("display:grid;grid-column-gap:",(0,E.Z)(2),";grid-auto-flow:column;grid-auto-columns:1fr;padding-bottom:",(0,E.Z)(.5),";"),_t=(0,n.Z)("div",{target:"e1e7mioh1"})("text-align:",(e=>e.right?"right":"left"),";color:",(e=>e.bold?e.theme.textColor:e.theme.gray300),";padding-bottom:",(0,E.Z)(.25),";",(e=>e.theme.overflowEllipsis),";"),At=(0,n.Z)(_t,{target:"e1e7mioh0"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),Tt=Rt;var bt=r("./app/views/releases/detail/overview/releaseArchivedNotice.tsx"),It=r("../node_modules/@sentry/hub/esm/exports.js"),wt=r("./app/components/charts/styles.tsx"),Nt=r("./app/components/duration.tsx"),Ct=r("./app/components/globalSelectionLink.tsx"),Ot=r("./app/utils/getDynamicText.tsx"),Dt=r("./app/components/placeholder.tsx"),Lt=r("./app/components/radio.tsx");function Pt(e){let{type:t,role:r,drilldown:s,thisRelease:n,allReleases:o,diff:i,showPlaceholders:a,activeChart:l,chartDiff:d,onChartChange:u,onExpanderToggle:c,expanded:p,withExpanders:m}=e;return(0,I.BX)(zt,{htmlFor:t,isActive:t===l,isLoading:a,role:r,expanded:p,children:[(0,I.tZ)(kt,{children:(0,I.BX)(Ft,{children:[(0,I.tZ)(Lt.Z,{id:t,disabled:!1,checked:t===l,onChange:()=>u(t)}),ot.Om[t],"Â ",s]})}),(0,I.tZ)($t,{children:a?(0,I.tZ)(Dt.Z,{height:"20px"}):(0,Ze.ri)(o)?o:(0,I.tZ)(S.Z,{})}),(0,I.tZ)($t,{children:a?(0,I.tZ)(Dt.Z,{height:"20px"}):(0,Ze.ri)(n)?n:(0,I.tZ)(S.Z,{})}),(0,I.tZ)($t,{children:a?(0,I.tZ)(Dt.Z,{height:"20px"}):(0,Ze.ri)(i)?d:(0,I.tZ)(S.Z,{})}),m&&(0,I.tZ)(Ut,{children:"parent"===r&&(0,I.tZ)(Bt,{onClick:()=>c(t),borderless:!0,size:"zero",icon:(0,I.tZ)(R.g6,{direction:p?"up":"down"}),"aria-label":(0,Z.t)("Toggle chart group")})})]})}Pt.displayName="ReleaseComparisonChartRow";const jt=(0,n.Z)("div",{target:"e1frklny6"})("text-align:right;color:",(e=>e.theme.subText),";",(e=>e.theme.overflowEllipsis),";"),$t=(0,n.Z)(jt,{target:"e1frklny5"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),kt=(0,n.Z)(jt,{target:"e1frklny4"})("text-align:left;overflow:visible;color:",(e=>e.theme.textColor),";"),Ut=(0,n.Z)(jt,{target:"e1frklny3"})({name:"19mh0x6",styles:"display:flex;align-items:center;justify-content:flex-end"}),Ft=(0,n.Z)("div",{target:"e1frklny2"})("display:flex;align-items:center;position:relative;z-index:1;background:",(e=>e.theme.background),";input{width:",(0,E.Z)(2),";height:",(0,E.Z)(2),";flex-shrink:0;background-color:",(e=>e.theme.background),";margin-right:",(0,E.Z)(1),"!important;&:checked:after{width:",(0,E.Z)(1),";height:",(0,E.Z)(1),";}&:hover{cursor:pointer;}}"),zt=(0,n.Z)("label",{target:"e1frklny1"})("display:contents;font-weight:400;margin-bottom:0;>*{padding:",(0,E.Z)(1)," ",(0,E.Z)(2),";}",(e=>e.isActive&&!e.isLoading&&(0,h.iv)(jt,",",$t,",",kt,",",Ft,",",Ut,"{background-color:",e.theme.bodyBackground,";}",""))," &:hover{cursor:pointer;",jt,",",$t,",",kt,",",Ut,",",Ft,"{",(e=>!e.isLoading&&`background-color: ${e.theme.bodyBackground}`),";}}",(e=>("default"===e.role||"parent"===e.role&&!e.expanded)&&(0,h.iv)("&:not(:last-child){",jt,",",$t,",",kt,",",Ut,"{border-bottom:1px solid ",e.theme.border,";}}",""))," ",(e=>"children"===e.role&&(0,h.iv)(kt,"{padding-left:44px;position:relative;&:before{content:'';width:15px;height:36px;position:absolute;top:-17px;left:24px;border-bottom:1px solid ",e.theme.border,";border-left:1px solid ",e.theme.border,";}}",""))," ",(e=>"children"===e.role&&(0,h.iv)(jt,",",$t,",",kt,",",Ut,"{padding-bottom:",(0,E.Z)(.75),";padding-top:",(0,E.Z)(.75),";border-bottom:0;}","")),";"),Bt=(0,n.Z)(fe.ZP,{target:"e1frklny0"})({name:"z3qbed",styles:"&,&:hover,&:focus,&:active{background:transparent;}"}),Gt=Pt;var qt=r("./app/components/charts/eventsChart.tsx"),Mt=r("./app/components/charts/eventsRequest.tsx"),Ht=r("./app/components/charts/utils.tsx"),Vt=r("./app/utils/discover/charts.tsx"),Xt=r("./app/utils/useApi.tsx"),Wt=r("./app/views/performance/data.tsx");function Yt(e){let{release:t,project:r,chartType:s,value:n,diff:i,organization:a,router:l,period:d,start:c,end:p,utc:m,location:h}=e;const g=(0,Xt.Z)(),v=(0,Ye.a)();function S(){const e=v.charts.getColorPalette(14);switch(s){case te.GI.ERROR_COUNT:return[e[12]];case te.GI.TRANSACTION_COUNT:return[e[0]];case te.GI.FAILURE_RATE:return[e[9]];default:return}}function f(){const e=`release:${t.version}`;switch(s){case te.GI.ERROR_COUNT:return new Ne.MY(["!event.type:transaction",e]).formatString();case te.GI.TRANSACTION_COUNT:case te.GI.FAILURE_RATE:return new Ne.MY(["event.type:transaction",e]).formatString();default:return""}}function y(){switch(s){case te.GI.ERROR_COUNT:case te.GI.TRANSACTION_COUNT:return["count()"];case te.GI.FAILURE_RATE:return["failure_rate()"];default:return}}function R(){switch(s){case te.GI.ERROR_COUNT:case te.GI.TRANSACTION_COUNT:return"count()";case te.GI.FAILURE_RATE:return"failure_rate()";default:return""}}function E(){return s===te.GI.FAILURE_RATE?(0,Wt.$r)(a,Wt.V$.FAILURE_RATE):null}const x=h.query.project,_=h.query.environment,A=(0,ot.Mn)(t,r,v,h);return(0,I.tZ)(Mt.Z,{organization:a,api:new u.KU,period:d,project:x,environment:_,start:c,end:p,interval:(0,Ht.ZS)({start:c,end:p,period:d,utc:m},"high"),query:"event.type:transaction",includePrevious:!1,currentSeriesNames:[(0,Z.t)("All Releases")],yAxis:R(),field:y(),confirmedQuery:s===te.GI.FAILURE_RATE,partial:!0,referrer:"api.releases.release-details-chart",children:e=>{let{timeseriesData:t,loading:r,reloading:u}=e;return(0,I.tZ)(qt.Z,{query:f(),yAxis:R(),field:y(),colors:S(),api:g,router:l,organization:a,disableReleases:!0,disablePrevious:!0,showLegend:!0,projects:x,environments:_,start:null!=c?c:null,end:null!=p?p:null,period:d,utc:m,currentSeriesName:(0,Z.t)("This Release")+(r||u?" ":""),previousSeriesName:(0,Z.t)("All Releases"),disableableSeries:[(0,Z.t)("This Release"),(0,Z.t)("All Releases")],chartHeader:(0,I.BX)(o.Fragment,{children:[(0,I.BX)(wt.ws,{children:[ot.AO[s],E()&&(0,I.tZ)(rt.Z,{size:"sm",position:"top",title:E()})]}),(0,I.BX)(wt.r3,{children:[n," ",i]})]}),legendOptions:{right:10,top:0,textStyle:{padding:[2,0,0,0]}},chartOptions:{grid:{left:"10px",right:"10px",top:"70px",bottom:"0px"},tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t)=>t&&Object.values(ot.N8).includes(t)?"":(0,Vt.CX)(e,R())}},usePageZoom:!0,height:240,seriesTransformer:e=>[...e,...A],previousSeriesTransformer:e=>s===te.GI.FAILURE_RATE?null==t?void 0:t[0]:e,referrer:"api.releases.release-details-chart"})}})}Yt.displayName="ReleaseEventsChart";const Qt=(0,le.Z)((0,i.withRouter)(Yt));var Kt=r("../node_modules/lodash/round.js"),Jt=r.n(Kt),er=r("./app/components/charts/areaChart.tsx"),tr=r("./app/components/charts/stackedAreaChart.tsx");class rr extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"formatTooltipValue",((e,t)=>{if(t&&Object.values(ot.N8).includes(t))return"";const{chartType:r}=this.props;if(null===e)return"â€•";switch(r){case te.GI.CRASH_FREE_SESSIONS:case te.GI.HEALTHY_SESSIONS:case te.GI.ABNORMAL_SESSIONS:case te.GI.ERRORED_SESSIONS:case te.GI.CRASHED_SESSIONS:case te.GI.CRASH_FREE_USERS:case te.GI.HEALTHY_USERS:case te.GI.ABNORMAL_USERS:case te.GI.ERRORED_USERS:case te.GI.CRASHED_USERS:return(0,Ze.ri)(e)?`${e}%`:"â€•";case te.GI.SESSION_DURATION:return(0,Ze.ri)(e)&&"number"==typeof e?(0,ne._U)(e,!0):"â€•";case te.GI.SESSION_COUNT:case te.GI.USER_COUNT:default:return"number"==typeof e?e.toLocaleString():e}}))}getYAxis(){const{theme:e,chartType:t}=this.props;switch(t){case te.GI.CRASH_FREE_SESSIONS:case te.GI.CRASH_FREE_USERS:return{max:100,scale:!0,axisLabel:{formatter:e=>(0,he.zB)(e),color:e.chartLabel}};case te.GI.HEALTHY_SESSIONS:case te.GI.ABNORMAL_SESSIONS:case te.GI.ERRORED_SESSIONS:case te.GI.CRASHED_SESSIONS:case te.GI.HEALTHY_USERS:case te.GI.ABNORMAL_USERS:case te.GI.ERRORED_USERS:case te.GI.CRASHED_USERS:return{scale:!0,axisLabel:{formatter:e=>`${Jt()(e,2)}%`,color:e.chartLabel}};case te.GI.SESSION_DURATION:return{scale:!0,axisLabel:{formatter:e=>(0,ne.g9)(e,void 0,!0),color:e.chartLabel}};case te.GI.SESSION_COUNT:case te.GI.USER_COUNT:default:return}}getChart(){const{chartType:e}=this.props;switch(e){case te.GI.CRASH_FREE_SESSIONS:case te.GI.HEALTHY_SESSIONS:case te.GI.ABNORMAL_SESSIONS:case te.GI.ERRORED_SESSIONS:case te.GI.CRASHED_SESSIONS:case te.GI.CRASH_FREE_USERS:case te.GI.HEALTHY_USERS:case te.GI.ABNORMAL_USERS:case te.GI.ERRORED_USERS:case te.GI.CRASHED_USERS:default:return er.T;case te.GI.SESSION_COUNT:case te.GI.SESSION_DURATION:case te.GI.USER_COUNT:return tr.Z}}getColors(){const{theme:e,chartType:t}=this.props,r=e.charts.getColorPalette(14);switch(t){case te.GI.CRASH_FREE_SESSIONS:return[r[0]];case te.GI.HEALTHY_SESSIONS:return[e.green300];case te.GI.ABNORMAL_SESSIONS:return[r[15]];case te.GI.ERRORED_SESSIONS:return[r[12]];case te.GI.CRASHED_SESSIONS:return[e.red300];case te.GI.CRASH_FREE_USERS:return[r[6]];case te.GI.HEALTHY_USERS:return[e.green300];case te.GI.ABNORMAL_USERS:return[r[15]];case te.GI.ERRORED_USERS:return[r[12]];case te.GI.CRASHED_USERS:return[e.red300];case te.GI.SESSION_COUNT:case te.GI.SESSION_DURATION:case te.GI.USER_COUNT:default:return}}getSeries(e){const{releaseSessions:t,allSessions:r,release:s,location:n,project:o,theme:i}=this.props,a=(0,nt.Lv)(i);if(!t)return{};const l=(0,ot.Mn)(s,o,i,n);switch(e){case te.GI.CRASH_FREE_SESSIONS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.FS)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.SESSIONS)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.FS)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.SESSIONS)}],markLines:l};case te.GI.HEALTHY_SESSIONS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.SESSIONS,te.$y.HEALTHY)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.SESSIONS,te.$y.HEALTHY)}],markLines:l};case te.GI.ABNORMAL_SESSIONS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.SESSIONS,te.$y.ABNORMAL)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.SESSIONS,te.$y.ABNORMAL)}],markLines:l};case te.GI.ERRORED_SESSIONS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.SESSIONS,te.$y.ERRORED)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.SESSIONS,te.$y.ERRORED)}],markLines:l};case te.GI.CRASHED_SESSIONS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.SESSIONS,te.$y.CRASHED)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.SESSIONS,te.$y.CRASHED)}],markLines:l};case te.GI.CRASH_FREE_USERS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.FS)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.USERS)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.FS)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.USERS)}],markLines:l};case te.GI.HEALTHY_USERS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.USERS,te.$y.HEALTHY)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.USERS,te.$y.HEALTHY)}],markLines:l};case te.GI.ABNORMAL_USERS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.USERS,te.$y.ABNORMAL)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.USERS,te.$y.ABNORMAL)}],markLines:l};case te.GI.ERRORED_USERS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.USERS,te.$y.ERRORED)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.USERS,te.$y.ERRORED)}],markLines:l};case te.GI.CRASHED_USERS:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.Y5)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.USERS,te.$y.CRASHED)}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.Y5)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.USERS,te.$y.CRASHED)}],markLines:l};case te.GI.SESSION_COUNT:return{series:[{...a[te.$y.HEALTHY],data:(0,nt.iy)(te.kI.SESSIONS,t.groups.find((e=>e.by["session.status"]===te.$y.HEALTHY)),t.intervals)},{...a[te.$y.ERRORED],data:(0,nt.iy)(te.kI.SESSIONS,t.groups.find((e=>e.by["session.status"]===te.$y.ERRORED)),t.intervals)},{...a[te.$y.ABNORMAL],data:(0,nt.iy)(te.kI.SESSIONS,t.groups.find((e=>e.by["session.status"]===te.$y.ABNORMAL)),t.intervals)},{...a[te.$y.CRASHED],data:(0,nt.iy)(te.kI.SESSIONS,t.groups.find((e=>e.by["session.status"]===te.$y.CRASHED)),t.intervals)}],markLines:l};case te.GI.SESSION_DURATION:return{series:[{seriesName:(0,Z.t)("This Release"),connectNulls:!0,data:(0,nt.mo)(null==t?void 0:t.groups,null==t?void 0:t.intervals,te.kI.DURATION,(e=>(0,he.G5)(e/1e3)))}],previousSeries:[{seriesName:(0,Z.t)("All Releases"),data:(0,nt.mo)(null==r?void 0:r.groups,null==r?void 0:r.intervals,te.kI.DURATION,(e=>(0,he.G5)(e/1e3)))}],markLines:l};case te.GI.USER_COUNT:return{series:[{...a[te.$y.HEALTHY],data:(0,nt.iy)(te.kI.USERS,t.groups.find((e=>e.by["session.status"]===te.$y.HEALTHY)),t.intervals)},{...a[te.$y.ERRORED],data:(0,nt.iy)(te.kI.USERS,t.groups.find((e=>e.by["session.status"]===te.$y.ERRORED)),t.intervals)},{...a[te.$y.ABNORMAL],data:(0,nt.iy)(te.kI.USERS,t.groups.find((e=>e.by["session.status"]===te.$y.ABNORMAL)),t.intervals)},{...a[te.$y.CRASHED],data:(0,nt.iy)(te.kI.USERS,t.groups.find((e=>e.by["session.status"]===te.$y.CRASHED)),t.intervals)}],markLines:l};default:return{}}}render(){const{chartType:e,router:t,period:r,start:s,end:n,utc:o,value:i,diff:a,loading:l,reloading:d}=this.props,u=this.getChart(),{series:c,previousSeries:p,markLines:m}=this.getSeries(e),h={right:10,top:0,textStyle:{padding:[2,0,0,0]},data:[...null!=c?c:[],...null!=p?p:[]].map((e=>e.seriesName))};return(0,I.BX)(et.Z,{loading:l,reloading:d,height:"240px",children:[(0,I.tZ)(tt.Z,{visible:d}),(0,I.BX)(wt.ws,{"aria-label":(0,Z.t)("Chart Title"),children:[ot.AO[e],ot.Sz[e]&&(0,I.tZ)(rt.Z,{size:"sm",position:"top",title:ot.Sz[e]})]}),(0,I.BX)(wt.r3,{"aria-label":(0,Z.t)("Chart Value"),children:[i," ",a]}),(0,I.tZ)(Qe.Z,{router:t,period:r,utc:o,start:s,end:n,usePageDate:!0,children:e=>(0,I.tZ)(u,{legend:h,series:[...null!=c?c:[],...null!=m?m:[]],previousPeriod:null!=p?p:[],...e,grid:{left:"10px",right:"10px",top:"70px",bottom:"0px"},minutesThresholdToDisplaySeconds:nt.VH,yAxis:this.getYAxis(),tooltip:{valueFormatter:this.formatTooltipValue},colors:this.getColors(),transformSinglePointToBar:!0,height:240})})]})}}rr.displayName="ReleaseSessionsChart";const sr=(0,Ye.d)((0,i.withRouter)(rr));function nr(e){var t,r;let{release:s,project:n,releaseSessions:a,allSessions:l,platform:d,location:u,loading:c,reloading:p,errored:m,api:g,organization:v,hasHealthData:S}=e;const[y,E]=(0,o.useState)(null),[x,_]=(0,o.useState)(null),[A,T]=(0,o.useState)(!1),[b,w]=(0,o.useState)(new Set),[N,C]=(0,o.useState)(!1),O=[],D=[],L=v.features.includes("discover-basic")||v.features.includes("performance-view"),P=v.features.includes("performance-view"),{statsPeriod:j,start:$,end:k,utc:U}=(0,o.useMemo)((()=>(0,he.O7)({location:u,releaseBounds:(0,he.C8)(s)})),[s,u]);(0,o.useEffect)((()=>{const e=(0,oe.ro)(u.query.chart);[te.GI.HEALTHY_SESSIONS,te.GI.ABNORMAL_SESSIONS,te.GI.ERRORED_SESSIONS,te.GI.CRASHED_SESSIONS].includes(e)&&w((e=>new Set(e.add(te.GI.CRASH_FREE_SESSIONS)))),[te.GI.HEALTHY_USERS,te.GI.ABNORMAL_USERS,te.GI.ERRORED_USERS,te.GI.CRASHED_USERS].includes(e)&&w((e=>new Set(e.add(te.GI.CRASH_FREE_USERS)))),[te.GI.SESSION_COUNT,te.GI.USER_COUNT,te.GI.ERROR_COUNT,te.GI.TRANSACTION_COUNT].includes(e)&&C(!0)}),[u.query.chart]);const F=(0,o.useCallback)((async()=>{const e=`/organizations/${v.slug}/events/`,t={environment:(0,oe.qP)(u.query.environment),project:(0,oe.qP)(u.query.project),start:$,end:k,...j?{statsPeriod:j}:{}};T(!0);try{const[r,n,o,i]=await Promise.all([g.requestPromise(e,{query:{field:["failure_rate()","count()"],query:new Ne.MY(["event.type:transaction",`release:${s.version}`]).formatString(),...t}}),g.requestPromise(e,{query:{field:["failure_rate()","count()"],query:new Ne.MY(["event.type:transaction"]).formatString(),...t}}),g.requestPromise(e,{query:{field:["count()"],query:new Ne.MY(["event.type:error",`release:${s.version}`]).formatString(),...t}}),g.requestPromise(e,{query:{field:["count()"],query:new Ne.MY(["event.type:error"]).formatString(),...t}})]);_({allErrorCount:i.data[0]["count()"],releaseErrorCount:o.data[0]["count()"],allTransactionCount:n.data[0]["count()"],releaseTransactionCount:r.data[0]["count()"],releaseFailureRate:r.data[0]["failure_rate()"],allFailureRate:n.data[0]["failure_rate()"]}),T(!1)}catch(e){_(null),T(!1),It.Tb(e)}}),[g,k,u.query.environment,u.query.project,v.slug,j,s.version,$]),z=(0,o.useCallback)((async()=>{const e=`release:"${s.version}" error.handled:0`,t=`release:"${s.version}" error.handled:1`;try{var r,o;const s=await g.requestPromise(`/organizations/${v.slug}/issues-count/`,{query:{project:n.id,environment:(0,oe.qP)(u.query.environment),start:$,end:k,...j?{statsPeriod:j}:{},query:[e,t]}});E({handled:null!==(r=s[t])&&void 0!==r?r:0,unhandled:null!==(o=s[e])&&void 0!==o?o:0})}catch(e){E(null),It.Tb(e)}}),[g,k,u.query.environment,v.slug,j,n.id,s.version,$]);(0,o.useEffect)((()=>{(L||P)&&(F(),z())}),[F,z,L,P]);const B=(0,nt.Pn)(null==a?void 0:a.groups,te.kI.SESSIONS),G=(0,nt.Pn)(null==l?void 0:l.groups,te.kI.SESSIONS),q=(0,Ze.ri)(B)&&(0,Ze.ri)(G)?B-G:null,M=(0,nt.BN)(null==a?void 0:a.groups,te.kI.SESSIONS,te.$y.HEALTHY),H=(0,nt.BN)(null==l?void 0:l.groups,te.kI.SESSIONS,te.$y.HEALTHY),V=(0,Ze.ri)(M)&&(0,Ze.ri)(H)?M-H:null,X=(0,nt.BN)(null==a?void 0:a.groups,te.kI.SESSIONS,te.$y.ABNORMAL),W=(0,nt.BN)(null==l?void 0:l.groups,te.kI.SESSIONS,te.$y.ABNORMAL),Y=(0,Ze.ri)(X)&&(0,Ze.ri)(W)?X-W:null,Q=(0,nt.BN)(null==a?void 0:a.groups,te.kI.SESSIONS,te.$y.ERRORED),K=(0,nt.BN)(null==l?void 0:l.groups,te.kI.SESSIONS,te.$y.ERRORED),J=(0,Ze.ri)(Q)&&(0,Ze.ri)(K)?Q-K:null,ee=(0,nt.BN)(null==a?void 0:a.groups,te.kI.SESSIONS,te.$y.CRASHED),re=(0,nt.BN)(null==l?void 0:l.groups,te.kI.SESSIONS,te.$y.CRASHED),se=(0,Ze.ri)(ee)&&(0,Ze.ri)(re)?ee-re:null,ie=(0,nt.Pn)(null==a?void 0:a.groups,te.kI.USERS),ae=(0,nt.Pn)(null==l?void 0:l.groups,te.kI.USERS),le=(0,Ze.ri)(ie)&&(0,Ze.ri)(ae)?ie-ae:null,de=(0,nt.BN)(null==a?void 0:a.groups,te.kI.USERS,te.$y.HEALTHY),ue=(0,nt.BN)(null==l?void 0:l.groups,te.kI.USERS,te.$y.HEALTHY),ce=(0,Ze.ri)(de)&&(0,Ze.ri)(ue)?de-ue:null,pe=(0,nt.BN)(null==a?void 0:a.groups,te.kI.USERS,te.$y.ABNORMAL),me=(0,nt.BN)(null==l?void 0:l.groups,te.kI.USERS,te.$y.ABNORMAL),ge=(0,Ze.ri)(pe)&&(0,Ze.ri)(me)?pe-me:null,ve=(0,nt.BN)(null==a?void 0:a.groups,te.kI.USERS,te.$y.ERRORED),Se=(0,nt.BN)(null==l?void 0:l.groups,te.kI.USERS,te.$y.ERRORED),ye=(0,Ze.ri)(ve)&&(0,Ze.ri)(Se)?ve-Se:null,Re=(0,nt.BN)(null==a?void 0:a.groups,te.kI.USERS,te.$y.CRASHED),Ee=(0,nt.BN)(null==l?void 0:l.groups,te.kI.USERS,te.$y.CRASHED),xe=(0,Ze.ri)(Re)&&(0,Ze.ri)(Ee)?Re-Ee:null,_e=(0,nt.sA)(null==a?void 0:a.groups,te.kI.SESSIONS),Ae=(0,nt.sA)(null==l?void 0:l.groups,te.kI.SESSIONS),Te=(0,nt.sA)(null==a?void 0:a.groups,te.kI.USERS),be=(0,nt.sA)(null==l?void 0:l.groups,te.kI.USERS),Ie=(0,he.G5)((null!==(t=(0,nt.$K)(null==a?void 0:a.groups,te.kI.DURATION))&&void 0!==t?t:0)/1e3),we=(0,he.G5)((null!==(r=(0,nt.$K)(null==l?void 0:l.groups,te.kI.DURATION))&&void 0!==r?r:0)/1e3),Ce=null!=x&&x.releaseFailureRate&&null!=x&&x.allFailureRate?x.releaseFailureRate-x.allFailureRate:null;S&&(O.push({type:te.GI.CRASH_FREE_SESSIONS,role:"parent",drilldown:null,thisRelease:(0,Ze.ri)(B)?(0,he.G$)(B):null,allReleases:(0,Ze.ri)(G)?(0,he.G$)(G):null,diff:(0,Ze.ri)(q)?(0,he.G$)(q):null,diffDirection:q?q>0?"up":"down":null,diffColor:q?q>0?"green300":"red300":null}),b.has(te.GI.CRASH_FREE_SESSIONS)&&O.push({type:te.GI.HEALTHY_SESSIONS,role:"children",drilldown:null,thisRelease:(0,Ze.ri)(M)?(0,he.G$)(M):null,allReleases:(0,Ze.ri)(H)?(0,he.G$)(H):null,diff:(0,Ze.ri)(V)?(0,he.G$)(V):null,diffDirection:V?V>0?"up":"down":null,diffColor:V?V>0?"green300":"red300":null},{type:te.GI.ABNORMAL_SESSIONS,role:"children",drilldown:null,thisRelease:(0,Ze.ri)(X)?(0,he.G$)(X):null,allReleases:(0,Ze.ri)(W)?(0,he.G$)(W):null,diff:(0,Ze.ri)(Y)?(0,he.G$)(Y):null,diffDirection:Y?Y>0?"up":"down":null,diffColor:Y?Y>0?"red300":"green300":null},{type:te.GI.ERRORED_SESSIONS,role:"children",drilldown:(0,Ze.ri)(null==y?void 0:y.handled)?(0,I.tZ)(st.Z,{title:(0,Z.t)("Open in Issues"),children:(0,I.tZ)(Ct.Z,{to:(0,he.TB)(v.slug,n.id,s.version,{start:$,end:k,period:null!=j?j:void 0}),children:(0,Z._N)("([count] handled [issues])",{count:null!=y&&y.handled?y.handled>=100?"99+":y.handled:0,issues:(0,Z.tn)("issue","issues",null==y?void 0:y.handled)})})}):null,thisRelease:(0,Ze.ri)(Q)?(0,he.G$)(Q):null,allReleases:(0,Ze.ri)(K)?(0,he.G$)(K):null,diff:(0,Ze.ri)(J)?(0,he.G$)(J):null,diffDirection:J?J>0?"up":"down":null,diffColor:J?J>0?"red300":"green300":null},{type:te.GI.CRASHED_SESSIONS,role:"default",drilldown:(0,Ze.ri)(null==y?void 0:y.unhandled)?(0,I.tZ)(st.Z,{title:(0,Z.t)("Open in Issues"),children:(0,I.tZ)(Ct.Z,{to:(0,he.eY)(v.slug,n.id,s.version,{start:$,end:k,period:null!=j?j:void 0}),children:(0,Z._N)("([count] unhandled [issues])",{count:null!=y&&y.unhandled?y.unhandled>=100?"99+":y.unhandled:0,issues:(0,Z.tn)("issue","issues",null==y?void 0:y.unhandled)})})}):null,thisRelease:(0,Ze.ri)(ee)?(0,he.G$)(ee):null,allReleases:(0,Ze.ri)(re)?(0,he.G$)(re):null,diff:(0,Ze.ri)(se)?(0,he.G$)(se):null,diffDirection:se?se>0?"up":"down":null,diffColor:se?se>0?"red300":"green300":null}));const Oe=!!(0,nt.sA)(null==a?void 0:a.groups,te.kI.USERS);function De(e){i.browserHistory.push({...u,query:{...u.query,chart:e}})}function Le(e){b.has(e)?(b.delete(e),w(new Set(b))):w(new Set(b.add(e)))}function Pe(e,t,r){return e?(0,I.BX)(lr,{color:(0,Ze.ri)(t)?t:void 0,children:[e," ",(0,Ze.ri)(r)?(0,I.tZ)(R.CC,{direction:r,size:"xs"}):"0%"===e?null:(0,I.tZ)(ur,{})]}):null}S&&(Oe||c)&&(O.push({type:te.GI.CRASH_FREE_USERS,role:"parent",drilldown:null,thisRelease:(0,Ze.ri)(ie)?(0,he.G$)(ie):null,allReleases:(0,Ze.ri)(ae)?(0,he.G$)(ae):null,diff:(0,Ze.ri)(le)?(0,he.G$)(le):null,diffDirection:le?le>0?"up":"down":null,diffColor:le?le>0?"green300":"red300":null}),b.has(te.GI.CRASH_FREE_USERS)&&O.push({type:te.GI.HEALTHY_USERS,role:"children",drilldown:null,thisRelease:(0,Ze.ri)(de)?(0,he.G$)(de):null,allReleases:(0,Ze.ri)(ue)?(0,he.G$)(ue):null,diff:(0,Ze.ri)(ce)?(0,he.G$)(ce):null,diffDirection:ce?ce>0?"up":"down":null,diffColor:ce?ce>0?"green300":"red300":null},{type:te.GI.ABNORMAL_USERS,role:"children",drilldown:null,thisRelease:(0,Ze.ri)(pe)?(0,he.G$)(pe):null,allReleases:(0,Ze.ri)(me)?(0,he.G$)(me):null,diff:(0,Ze.ri)(ge)?(0,he.G$)(ge):null,diffDirection:ge?ge>0?"up":"down":null,diffColor:ge?ge>0?"red300":"green300":null},{type:te.GI.ERRORED_USERS,role:"children",drilldown:null,thisRelease:(0,Ze.ri)(ve)?(0,he.G$)(ve):null,allReleases:(0,Ze.ri)(Se)?(0,he.G$)(Se):null,diff:(0,Ze.ri)(ye)?(0,he.G$)(ye):null,diffDirection:ye?ye>0?"up":"down":null,diffColor:ye?ye>0?"red300":"green300":null},{type:te.GI.CRASHED_USERS,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(Re)?(0,he.G$)(Re):null,allReleases:(0,Ze.ri)(Ee)?(0,he.G$)(Ee):null,diff:(0,Ze.ri)(xe)?(0,he.G$)(xe):null,diffDirection:xe?xe>0?"up":"down":null,diffColor:xe?xe>0?"red300":"green300":null})),P&&O.push({type:te.GI.FAILURE_RATE,role:"default",drilldown:null,thisRelease:null!=x&&x.releaseFailureRate?(0,ne.rl)(null==x?void 0:x.releaseFailureRate):null,allReleases:null!=x&&x.allFailureRate?(0,ne.rl)(null==x?void 0:x.allFailureRate):null,diff:Ce?(0,ne.rl)(Math.abs(Ce)):null,diffDirection:Ce?Ce>0?"up":"down":null,diffColor:Ce?Ce>0?"red300":"green300":null}),S&&(O.push({type:te.GI.SESSION_DURATION,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(Ie)?(0,I.tZ)(Nt.Z,{seconds:Ie,abbreviation:!0}):null,allReleases:(0,Ze.ri)(we)?(0,I.tZ)(Nt.Z,{seconds:we,abbreviation:!0}):null,diff:null,diffDirection:null,diffColor:null}),D.push({type:te.GI.SESSION_COUNT,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(_e)?(0,I.tZ)(qe.Z,{value:_e}):null,allReleases:(0,Ze.ri)(Ae)?(0,I.tZ)(qe.Z,{value:Ae}):null,diff:null,diffDirection:null,diffColor:null}),(Oe||c)&&D.push({type:te.GI.USER_COUNT,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(Te)?(0,I.tZ)(qe.Z,{value:Te}):null,allReleases:(0,Ze.ri)(be)?(0,I.tZ)(qe.Z,{value:be}):null,diff:null,diffDirection:null,diffColor:null})),L&&D.push({type:te.GI.ERROR_COUNT,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(null==x?void 0:x.releaseErrorCount)?(0,I.tZ)(qe.Z,{value:null==x?void 0:x.releaseErrorCount}):null,allReleases:(0,Ze.ri)(null==x?void 0:x.allErrorCount)?(0,I.tZ)(qe.Z,{value:null==x?void 0:x.allErrorCount}):null,diff:null,diffDirection:null,diffColor:null}),P&&D.push({type:te.GI.TRANSACTION_COUNT,role:"default",drilldown:null,thisRelease:(0,Ze.ri)(null==x?void 0:x.releaseTransactionCount)?(0,I.tZ)(qe.Z,{value:null==x?void 0:x.releaseTransactionCount}):null,allReleases:(0,Ze.ri)(null==x?void 0:x.allTransactionCount)?(0,I.tZ)(qe.Z,{value:null==x?void 0:x.allTransactionCount}):null,diff:null,diffDirection:null,diffColor:null}),S||(O.push(...D),D.splice(0,D.length));let je=(0,oe.ro)(u.query.chart,S?te.GI.CRASH_FREE_SESSIONS:P?te.GI.FAILURE_RATE:te.GI.ERROR_COUNT),$e=[...O,...D].find((e=>e.type===je));$e||($e=O[0],je=O[0].type);const ke=c||A,Ue=S||D.length>0;if(m||!$e)return(0,I.tZ)(f.s_,{children:(0,I.tZ)(Ke.Z,{children:(0,I.tZ)(R.FC,{color:"gray300",size:"lg"})})});const Fe="0%"!==$e.diff&&"0%"!==$e.thisRelease?Pe($e.diff,$e.diffColor,$e.diffDirection):null;function ze(e){let{diff:t,diffColor:r,diffDirection:s,...n}=e;return(0,h.az)(Gt,{...n,key:n.type,diff:t,showPlaceholders:ke,activeChart:je,onChartChange:De,chartDiff:Pe(t,r,s),onExpanderToggle:Le,expanded:b.has(n.type),withExpanders:Ue})}return(0,I.BX)(o.Fragment,{children:[(0,I.tZ)(or,{children:(0,I.tZ)(wt.BO,{children:[te.GI.ERROR_COUNT,te.GI.TRANSACTION_COUNT,te.GI.FAILURE_RATE].includes(je)?(0,Ot.Z)({value:(0,I.tZ)(Qt,{release:s,project:n,chartType:je,period:null!=j?j:void 0,start:$,end:k,utc:"true"===U,value:$e.thisRelease,diff:Fe}),fixed:"Events Chart"}):(0,Ot.Z)({value:(0,I.tZ)(sr,{releaseSessions:a,allSessions:l,release:s,project:n,chartType:je,platform:d,period:null!=j?j:void 0,start:$,end:k,utc:"true"===U,value:$e.thisRelease,diff:Fe,loading:c,reloading:p}),fixed:"Sessions Chart"})})}),(0,I.BX)(dr,{headers:function(e){const t=[(0,I.tZ)(ar,{children:(0,Z.t)("Description")},"description"),(0,I.tZ)(ir,{children:(0,Z.t)("All Releases")},"releases"),(0,I.tZ)(ir,{children:(0,Z.t)("This Release")},"release"),(0,I.tZ)(ir,{children:(0,Z.t)("Change")},"change")];return e&&t.push((0,I.tZ)(ir,{},"expanders")),t}(Ue),"data-test-id":"release-comparison-table",withExpanders:Ue,children:[O.map((e=>ze(e))),N&&D.map((e=>ze(e))),D.length>0&&(0,I.BX)(cr,{onClick:()=>C(!N),children:[(0,I.BX)(pr,{children:[(0,I.tZ)(R.Zd,{size:"xs"}),N?(0,Z.tn)("Hide %s Other","Hide %s Others",D.length):(0,Z.tn)("Show %s Other","Show %s Others",D.length)]}),(0,I.tZ)(mr,{children:(0,I.tZ)(fe.ZP,{borderless:!0,size:"zero",icon:(0,I.tZ)(R.g6,{direction:N?"up":"down"}),"aria-label":(0,Z.t)("Toggle additional charts")})})]})]})]})}nr.displayName="ReleaseComparisonChart";const or=(0,n.Z)(f.s_,{target:"ezo15h58"})({name:"1524n4i",styles:"margin-bottom:0;border-bottom-left-radius:0;border-bottom:none;border-bottom-right-radius:0"}),ir=(0,n.Z)("div",{target:"ezo15h57"})("text-align:right;",(e=>e.theme.overflowEllipsis),";"),ar=(0,n.Z)(ir,{target:"ezo15h56"})({name:"5mb4cs",styles:"text-align:left;overflow:visible"}),lr=(0,n.Z)("div",{target:"ezo15h55"})("font-size:",(e=>e.theme.fontSizeLarge),";",(e=>e.color&&`color: ${e.theme[e.color]}`),";"),dr=(0,n.Z)(f.KB,{target:"ezo15h54"})("border-top-left-radius:0;border-top-right-radius:0;grid-template-columns:minmax(400px, auto) repeat(3, minmax(min-content, 1fr)) ",(e=>e.withExpanders?"75px":""),";>*{border-bottom:1px solid ",(e=>e.theme.border),";}@media (max-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:repeat(4, minmax(min-content, 1fr)) ",(e=>e.withExpanders?"75px":""),";}"),ur=(0,n.Z)(S.Z,{target:"ezo15h53"})({name:"1r5gb7q",styles:"display:inline-block"}),cr=(0,n.Z)("div",{target:"ezo15h52"})("display:contents;&:hover{cursor:pointer;}>*{padding:",(0,E.Z)(1)," ",(0,E.Z)(2),";}"),pr=(0,n.Z)("div",{target:"ezo15h51"})("color:",(e=>e.theme.gray300),";display:inline-grid;grid-template-columns:auto auto;gap:10px;align-items:center;justify-content:flex-start;svg{margin-left:",(0,E.Z)(.25),";}"),mr=(0,n.Z)("div",{target:"ezo15h50"})({name:"ek8iy4",styles:"grid-column:2/-1;display:flex;align-items:center;justify-content:flex-end"}),hr=nr;r("../node_modules/core-js/modules/es.string.replace.js");var gr,vr,Sr=r("../node_modules/lodash/isEqual.js"),fr=r.n(Sr),yr=r("../node_modules/query-string/index.js"),Rr=r("./app/components/buttonBar.tsx"),Zr=r("./app/components/issues/groupList.tsx"),Er=r("./app/components/pagination.tsx"),xr=r("./app/components/queryCount.tsx"),_r=r("./app/views/issueList/utils.tsx"),Ar=r("./app/views/releases/detail/commitsAndFiles/emptyState.tsx");!function(e){e.NEW="new",e.UNHANDLED="unhandled",e.REGRESSED="regressed",e.RESOLVED="resolved",e.ALL="all"}(gr||(gr={})),function(e){e.NEW="first-release",e.UNHANDLED="error.handled:0",e.REGRESSED="regressed_in_release",e.RESOLVED="is:resolved",e.ALL="release"}(vr||(vr={}));class Tr extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",this.getInitialState()),(0,s.Z)(this,"handleIssuesTypeSelection",(e=>{const{location:t}=this.props,r=e===gr.ALL?gr.ALL:e===gr.NEW?gr.NEW:e===gr.RESOLVED?gr.RESOLVED:e===gr.UNHANDLED?gr.UNHANDLED:e===gr.REGRESSED?gr.REGRESSED:"",s={...t,query:{...t.query,issuesType:r}};i.browserHistory.replace(s),this.setState({issuesType:e})})),(0,s.Z)(this,"handleFetchSuccess",((e,t)=>{this.setState({pageLinks:e.pageLinks,onCursor:t})})),(0,s.Z)(this,"renderEmptyMessage",(()=>{const{location:e,releaseBounds:t}=this.props,{issuesType:r}=this.state,s=!e.query.pageStatsPeriod&&!e.query.pageStart,{statsPeriod:n}=(0,he.O7)({location:e,releaseBounds:t}),o=n?ee.wh[n]:null,i=o?o.toLowerCase():(0,Z.t)("given timeframe");return(0,I.BX)(Ar.Z,{children:[r===gr.NEW?s?(0,Z.t)("No new issues in this release."):(0,Z._N)("No new issues for the [timePeriod].",{timePeriod:i}):null,r===gr.UNHANDLED?s?(0,Z.t)("No unhandled issues in this release."):(0,Z._N)("No unhandled issues for the [timePeriod].",{timePeriod:i}):null,r===gr.REGRESSED?s?(0,Z.t)("No regressed issues in this release."):(0,Z._N)("No regressed issues for the [timePeriod].",{timePeriod:i}):null,r===gr.RESOLVED&&(0,Z.t)("No resolved issues in this release."),r===gr.ALL?s?(0,Z.t)("No issues in this release"):(0,Z._N)("No issues for the [timePeriod].",{timePeriod:i}):null]})}))}getInitialState(){const{location:e}=this.props,t=e.query?e.query.issuesType:null;return{issuesType:t?t.includes(gr.NEW)?gr.NEW:t.includes(gr.UNHANDLED)?gr.REGRESSED:t.includes(gr.REGRESSED)?gr.UNHANDLED:t.includes(gr.RESOLVED)?gr.RESOLVED:(t.includes(gr.ALL),gr.ALL):gr.NEW,count:{new:null,all:null,resolved:null,unhandled:null,regressed:null}}}componentDidMount(){this.fetchIssuesCount()}componentDidUpdate(e){fr()((0,he.O7)({location:this.props.location,releaseBounds:this.props.releaseBounds}),(0,he.O7)({location:e.location,releaseBounds:e.releaseBounds}))||this.fetchIssuesCount()}getIssuesUrl(){const{version:e,organization:t}=this.props,{issuesType:r}=this.state,{queryParams:s}=this.getIssuesEndpoint(),n=new Ne.MY([]);switch(r){case gr.NEW:n.setFilterValues("firstRelease",[e]);break;case gr.UNHANDLED:n.setFilterValues("release",[e]),n.setFilterValues("error.handled",["0"]);break;case gr.REGRESSED:n.setFilterValues("regressed_in_release",[e]);break;case gr.RESOLVED:case gr.ALL:default:n.setFilterValues("release",[e])}return{pathname:`/organizations/${t.slug}/issues/`,query:{...s,limit:void 0,cursor:void 0,query:n.formatString()}}}getIssuesEndpoint(){const{version:e,organization:t,location:r,releaseBounds:s}=this.props,{issuesType:n}=this.state,o={...(0,he.O7)({location:r,releaseBounds:s}),limit:10,sort:_r.qh.FREQ,groupStatsPeriod:"auto"};switch(n){case gr.ALL:return{path:`/organizations/${t.slug}/issues/`,queryParams:{...o,query:new Ne.MY([`${vr.ALL}:${e}`]).formatString()}};case gr.RESOLVED:return{path:`/organizations/${t.slug}/releases/${encodeURIComponent(e)}/resolved/`,queryParams:{...o,query:""}};case gr.UNHANDLED:return{path:`/organizations/${t.slug}/issues/`,queryParams:{...o,query:new Ne.MY([`${vr.ALL}:${e}`,vr.UNHANDLED]).formatString()}};case gr.REGRESSED:return{path:`/organizations/${t.slug}/issues/`,queryParams:{...o,query:new Ne.MY([`${vr.REGRESSED}:${e}`]).formatString()}};case gr.NEW:default:return{path:`/organizations/${t.slug}/issues/`,queryParams:{...o,query:new Ne.MY([`${vr.NEW}:${e}`]).formatString()}}}}async fetchIssuesCount(){const{api:e,organization:t,version:r}=this.props,s=this.getIssueCountEndpoint(),n=`/organizations/${t.slug}/releases/${encodeURIComponent(r)}/resolved/`;try{await Promise.all([e.requestPromise(s),e.requestPromise(n)]).then((e=>{let[t,s]=e;this.setState({count:{all:t[`${vr.ALL}:"${r}"`]||0,new:t[`${vr.NEW}:"${r}"`]||0,resolved:s.length,unhandled:t[`${vr.UNHANDLED} ${vr.ALL}:"${r}"`]||0,regressed:t[`${vr.REGRESSED}:"${r}"`]||0}})}))}catch{}}getIssueCountEndpoint(){const{organization:e,version:t,location:r,releaseBounds:s}=this.props,n=`/organizations/${e.slug}/issues-count/`,o=[`${vr.NEW}:"${t}"`,`${vr.ALL}:"${t}"`,`${vr.UNHANDLED} ${vr.ALL}:"${t}"`,`${vr.REGRESSED}:"${t}"`].map((e=>e)),i={...(0,he.O7)({location:r,releaseBounds:s}),query:o};return`${n}?${yr.stringify(i)}`}render(){const{issuesType:e,count:t,pageLinks:r,onCursor:s}=this.state,{organization:n,queryFilterDescription:i,withChart:a}=this.props,{path:l,queryParams:d}=this.getIssuesEndpoint(),u=[{value:gr.ALL,label:(0,Z.t)("All Issues"),issueCount:t.all},{value:gr.NEW,label:(0,Z.t)("New Issues"),issueCount:t.new},{value:gr.UNHANDLED,label:(0,Z.t)("Unhandled"),issueCount:t.unhandled},{value:gr.REGRESSED,label:(0,Z.t)("Regressed"),issueCount:t.regressed},{value:gr.RESOLVED,label:(0,Z.t)("Resolved"),issueCount:t.resolved}];return(0,I.BX)(o.Fragment,{children:[(0,I.BX)(br,{children:[(0,I.tZ)(wr,{active:e,merged:!0,children:u.map((e=>{let{value:t,label:r,issueCount:s}=e;return(0,I.BX)(fe.ZP,{barId:t,size:"xsmall",onClick:()=>this.handleIssuesTypeSelection(t),"data-test-id":`filter-${t}`,children:[r,(0,I.tZ)(xr.Z,{count:s,max:99,hideParens:!0,hideIfEmpty:!1})]},t)}))}),(0,I.BX)(Ir,{gap:1,children:[(0,I.tZ)(fe.ZP,{to:this.getIssuesUrl(),size:"xsmall","data-test-id":"issues-button",children:(0,Z.t)("Open in Issues")}),(0,I.tZ)(Nr,{pageLinks:r,onCursor:s,size:"xsmall"})]})]}),(0,I.tZ)("div",{"data-test-id":"release-wrapper",children:(0,I.tZ)(Zr.Z,{orgId:n.slug,endpointPath:l,queryParams:d,query:"",canSelectGroups:!1,queryFilterDescription:i,withChart:a,narrowGroups:!0,renderEmptyMessage:this.renderEmptyMessage,withPagination:!1,onFetchSuccess:this.handleFetchSuccess})})]})}}Tr.displayName="ReleaseIssues",(0,s.Z)(Tr,"defaultProps",{withChart:!1});const br=(0,n.Z)("div",{target:"e7fml7j3"})("display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:block;",Rr._5,"{overflow:auto;}}"),Ir=(0,n.Z)(Rr.ZP,{target:"e7fml7j2"})("margin:",(0,E.Z)(1)," 0;"),wr=(0,n.Z)(Rr.ZP,{target:"e7fml7j1"})("grid-template-columns:repeat(4, 1fr);",fe.aN,"{white-space:nowrap;gap:",(0,E.Z)(.5),";span:last-child{color:",(e=>e.theme.buttonCount),";}}.active{",fe.aN,"{span:last-child{color:",(e=>e.theme.buttonCountActive),";}}}"),Nr=(0,n.Z)(Er.Z,{target:"e7fml7j0"})({name:"ti75j2",styles:"margin:0"}),Cr=(0,ae.Z)((0,le.Z)(Tr)),Or="release";let Dr;!function(e){e.FAILURE_COUNT="failure_count",e.TPM="tpm",e.SLOW="slow",e.SLOW_LCP="slow_lcp",e.REGRESSION="regression",e.IMPROVEMENT="improved"}(Dr||(Dr={}));class Lr extends ue.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleRestore",(async(e,t)=>{const{params:r,organization:s}=this.props;try{await(0,d.aQ)(new u.KU,{orgSlug:s.slug,projectSlug:e.slug,releaseVersion:r.release}),t()}catch{}})),(0,s.Z)(this,"handleTransactionsListSortChange",(e=>{const{location:t}=this.props,r={pathname:t.pathname,query:{...t.query,showTransactions:e,transactionCursor:void 0}};i.browserHistory.push(r)})),(0,s.Z)(this,"handleDateChange",(e=>{const{router:t,location:r}=this.props,{start:s,end:n,relative:o,utc:i}=e;if(s&&n){const e=i?l().utc:l();t.push({...r,query:{...r.query,pageStatsPeriod:void 0,pageStart:e(s).format(),pageEnd:e(n).format(),pageUtc:null!=i?i:void 0}})}else t.push({...r,query:{...r.query,pageStatsPeriod:o===Or?void 0:o,pageStart:void 0,pageEnd:void 0,pageUtc:void 0}})}))}getTitle(){const{params:e,organization:t}=this.props;return(0,ie.Z)((0,Z.t)("Release %s",(0,ne.ko)(e.release)),t.slug,!1)}getReleaseEventView(e,t,r,s){const{selection:n,location:o}=this.props,{environments:i}=n,{start:a,end:l,statsPeriod:d}=(0,he.O7)({location:o,releaseBounds:s}),u={id:void 0,version:2,name:`Release ${(0,ne.ko)(e)}`,query:`event.type:transaction release:${e}`,fields:["transaction","failure_count()","epm()","p50()"],orderby:"-failure_count",range:d||void 0,environment:i,projects:[t],start:a?(0,re.v5)(a):void 0,end:l?(0,re.v5)(l):void 0};switch(r.value){case Dr.SLOW_LCP:return se.ZP.fromSavedQuery({...u,query:`event.type:transaction release:${e} epm():>0.01 has:measurements.lcp`,fields:["transaction","failure_count()","epm()","p75(measurements.lcp)"],orderby:"p75_measurements_lcp"});case Dr.SLOW:return se.ZP.fromSavedQuery({...u,query:`event.type:transaction release:${e} epm():>0.01`});case Dr.FAILURE_COUNT:return se.ZP.fromSavedQuery({...u,query:`event.type:transaction release:${e} failure_count():>0`});default:return se.ZP.fromSavedQuery(u)}}getReleaseTrendView(e,t,r,s){const{selection:n,location:o}=this.props,{environments:i}=n,{start:a,end:l,statsPeriod:d}=(0,he.O7)({location:o,releaseBounds:s}),u=se.ZP.fromSavedQuery({id:void 0,version:2,name:`Release ${(0,ne.ko)(e)}`,fields:["transaction"],query:"tpm():>0.01 trend_percentage():>0%",range:d||void 0,environment:i,projects:[t],start:a?(0,re.v5)(a):void 0,end:l?(0,re.v5)(l):void 0});return u.middle=r,u}getReleasePerformanceEventView(e,t){return e===b.iy.FRONTEND?se.ZP.fromSavedQuery({...t,fields:[...t.fields,`p75(${A.Zl.FCP})`,`p75(${A.Zl.FID})`,`p75(${A.Zl.LCP})`,`p75(${A.Zl.CLS})`,"p75(spans.http)","p75(spans.browser)","p75(spans.resource)"]}):e===b.iy.BACKEND?se.ZP.fromSavedQuery({...t,fields:[...t.fields,"apdex()","p75(spans.http)","p75(spans.db)"]}):e===b.iy.MOBILE?se.ZP.fromSavedQuery({...t,fields:[...t.fields,`p75(${A.$n.AppStartCold})`,`p75(${A.$n.AppStartWarm})`,`p75(${A.$n.FramesSlow})`,`p75(${A.$n.FramesFrozen})`]}):se.ZP.fromSavedQuery({...t})}getAllReleasesPerformanceView(e,t,r){const{selection:s,location:n}=this.props,{environments:o}=s,{start:i,end:a,statsPeriod:l}=(0,he.O7)({location:n,releaseBounds:r}),d={id:void 0,version:2,name:"All Releases",query:"event.type:transaction",fields:["user_misery()"],range:l||void 0,environment:o,projects:[e],start:i?(0,re.v5)(i):void 0,end:a?(0,re.v5)(a):void 0};return this.getReleasePerformanceEventView(t,d)}getReleasePerformanceView(e,t,r,s){const{selection:n,location:o}=this.props,{environments:i}=n,{start:a,end:l,statsPeriod:d}=(0,he.O7)({location:o,releaseBounds:s}),u={id:void 0,version:2,name:`Release:${e}`,query:`event.type:transaction release:${e}`,fields:["user_misery()"],range:d||void 0,environment:i,projects:[t],start:a?(0,re.v5)(a):void 0,end:l?(0,re.v5)(l):void 0};return this.getReleasePerformanceEventView(r,u)}get pageDateTime(){const e=this.props.location.query,{start:t,end:r,statsPeriod:s}=(0,K.fK)(e,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});return s?{period:s}:t&&r?{start:l().utc(t).format(),end:l().utc(r).format()}:{}}render(){const{organization:e,selection:t,location:r,api:s}=this.props,{start:n,end:i,period:a,utc:d}=this.pageDateTime;return(0,I.tZ)(ge.ReleaseContext.Consumer,{children:u=>{let{release:h,project:g,deploys:v,releaseMeta:S,refetchData:f,hasHealthData:y,releaseBounds:R}=u;const{commitCount:E,version:x}=h,_=e.features.includes("discover-basic"),A=e.features.includes("performance-view"),T=e.features.includes("release-comparison-performance"),{environments:w}=t,N=(0,b.Bh)([g],[g.id]),{selectedSort:O,sortOptions:D}=function(e){const t=[{sort:{kind:"desc",field:"failure_count"},value:Dr.FAILURE_COUNT,label:(0,Z.t)("Failing Transactions")},{sort:{kind:"desc",field:"epm"},value:Dr.TPM,label:(0,Z.t)("Frequent Transactions")},{sort:{kind:"desc",field:"p50"},value:Dr.SLOW,label:(0,Z.t)("Slow Transactions")},{sort:{kind:"desc",field:"p75_measurements_lcp"},value:Dr.SLOW_LCP,label:(0,Z.t)("Slow LCP")},{sort:{kind:"desc",field:"trend_percentage()"},query:[["confidence()",">6"]],trendType:me.ER.REGRESSION,value:Dr.REGRESSION,label:(0,Z.t)("Trending Regressions")},{sort:{kind:"asc",field:"trend_percentage()"},query:[["confidence()",">6"]],trendType:me.ER.IMPROVED,value:Dr.IMPROVEMENT,label:(0,Z.t)("Trending Improvements")}],r=(0,oe.ro)(e.query.showTransactions,Dr.FAILURE_COUNT);return{selectedSort:t.find((e=>e.value===r))||t[0],sortOptions:t}}(r),L=this.getReleaseEventView(x,g.id,O,R),P=O.value!==Dr.SLOW_LCP?[(0,Z.t)("transaction"),(0,Z.t)("failure_count()"),(0,Z.t)("tpm()"),(0,Z.t)("p50()")]:[(0,Z.t)("transaction"),(0,Z.t)("failure_count()"),(0,Z.t)("tpm()"),(0,Z.t)("p75(lcp)")],j=this.getReleaseTrendView(x,g.id,S.released,R),$=this.getAllReleasesPerformanceView(g.id,N,R),k=this.getReleasePerformanceView(x,g.id,N,R),U={transaction:Pr(x,g.id,t,r.query.showTransactions)},F={api:s,organization:e,field:[te.kI.USERS,te.kI.SESSIONS,te.kI.DURATION],groupBy:["session.status"],...(0,he.O7)({location:r,releaseBounds:R}),shouldFilterSessionsInTimeWindow:!0};return(0,I.tZ)(p.Z,{...F,children:u=>{let{loading:b,reloading:z,errored:B,response:G}=u;return(0,I.tZ)(p.Z,{...F,query:`release:"${x}"`,children:u=>{let{loading:p,reloading:F,errored:q,response:M}=u;const H=b||p,V=z||F,X=B||q;return(0,I.BX)(Q.uT,{children:[(0,I.BX)(Q.or,{children:[(0,he.rF)(h)&&(0,I.tZ)(bt.Z,{onRestore:()=>this.handleRestore(g,f)}),(0,I.BX)(jr,{children:[(0,I.tZ)(Y.Z,{}),(0,I.tZ)($r,{organization:e,relative:null!=a?a:"",start:null!=n?n:null,end:null!=i?i:null,utc:null!=d?d:null,onUpdate:this.handleDateChange,relativeOptions:"ancient"!==R.type?{[Or]:(0,I.BX)(o.Fragment,{children:["clamped"===R.type?(0,Z.t)("Clamped Release Period"):(0,Z.t)("Entire Release Period")," ","(",(0,I.tZ)(m.Z,{date:R.releaseStart,timeAndDate:!0})," ","-"," ",(0,I.tZ)(m.Z,{date:R.releaseEnd,timeAndDate:!0}),")"]}),...ee.wh}:ee.wh,defaultPeriod:"ancient"!==R.type?Or:"90d",defaultAbsolute:{start:l()(R.releaseStart).subtract(1,"hour").toDate(),end:R.releaseEnd?l()(R.releaseEnd).add(1,"hour").toDate():void 0}})]}),(_||A||y)&&(0,I.tZ)(hr,{release:h,releaseSessions:M,allSessions:G,platform:g.platform,location:r,loading:H,reloading:V,errored:X,project:g,organization:e,api:s,hasHealthData:y}),(0,I.tZ)(Cr,{organization:e,selection:t,version:x,location:r,releaseBounds:R,queryFilterDescription:(0,Z.t)("In this release"),withChart:!0}),(0,I.tZ)(c.Z,{features:["performance-view"],children:T?(0,I.tZ)(C,{organization:e,project:g,location:r,allReleasesEventView:$,releaseEventView:k,performanceType:N}):(0,I.tZ)(W.Z,{location:r,organization:e,eventView:L,trendView:j,selected:O,options:D,handleDropdownChange:this.handleTransactionsListSortChange,titles:P,generateLink:U})})]}),(0,I.BX)(Q.MF,{children:[(0,I.tZ)(vt,{organization:e,release:h,project:g}),y&&(0,I.tZ)(mt,{releaseSessions:M,allSessions:G,loading:H,reloading:V,errored:X,release:h,project:g,environment:w}),(0,I.tZ)(We,{release:h,releaseMeta:S,orgSlug:e.slug,projectSlug:g.slug}),E>0&&(0,I.tZ)(be,{version:x,orgId:e.slug,projectSlug:g.slug}),S.projects.length>1&&(0,I.tZ)(Ge,{projects:S.projects.filter((e=>e.slug!==g.slug)),location:r,version:x,organization:e}),y&&(0,I.tZ)(Tt,{organization:e,version:x,projectSlug:g.slug,location:r}),v.length>0&&(0,I.tZ)(ke,{version:x,orgSlug:e.slug,deploys:v,projectId:g.id})]})]})}})}})}})}}function Pr(e,t,r,s){return(n,o,i)=>{const{transaction:a}=o,l=["regression","improved"].includes(s),{environments:d,datetime:u}=r,{start:c,end:p,period:m}=u;return(0,pe.e1)({orgSlug:n.slug,transaction:a,query:{query:l?"":`release:${e}`,environment:d,start:c?(0,re.v5)(c):void 0,end:p?(0,re.v5)(p):void 0,statsPeriod:m},projectID:t.toString(),display:l?ce.D.TREND:ce.D.DURATION})}}Lr.displayName="ReleaseOverview";const jr=(0,n.Z)("div",{target:"e1yz478u1"})("display:grid;grid-template-columns:minmax(0, max-content) 1fr;gap:",(0,E.Z)(2),";margin-bottom:",(0,E.Z)(2),";"),$r=(0,n.Z)(J.Z,{target:"e1yz478u0"})({name:"1k18kha",styles:"height:40px"}),kr=(0,ae.Z)((0,de.Z)((0,le.Z)(Lr)))},"./app/views/releases/detail/overview/releaseArchivedNotice.tsx":(e,t,r)=>{r.d(t,{Z:()=>c});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),o=r("./app/components/alert.tsx"),i=r("./app/components/button.tsx"),a=r("./app/locale.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{onRestore:t,multi:r}=e;return(0,l.BX)(o.Z,{type:"warning",children:[r?(0,a.t)("These releases have been archived."):(0,a.t)("This release has been archived."),!r&&t&&(0,l.BX)(n.Fragment,{children:[" ",(0,l.tZ)(u,{size:"zero",priority:"link",onClick:t,children:(0,a.t)("Restore this release")})]})]})}d.displayName="ReleaseArchivedNotice";const u=(0,s.Z)(i.ZP,{target:"ed64kpf0"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(e=>e.theme.textColor),";}"),c=d},"./app/views/releases/detail/utils.tsx":(e,t,r)=>{r.d(t,{AN:()=>f,AO:()=>R,DZ:()=>v,Mn:()=>_,N8:()=>x,Om:()=>y,Sz:()=>Z,bB:()=>g,pm:()=>S}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/lodash/pick.js"),n=r.n(s),o=r("../node_modules/moment/moment.js"),i=r.n(o),a=r("./app/components/charts/components/markLine.tsx"),l=r("./app/components/organizations/timeRangeSelector/utils.tsx"),d=r("./app/constants/pageFilters.tsx"),u=r("./app/locale.tsx"),c=r("./app/types/index.tsx"),p=r("./app/utils/queryString.tsx"),m=r("./app/views/releases/utils/index.tsx"),h=r("./app/views/releases/utils/sessionTerm.tsx");function g(e){return e.reduce(((e,t)=>{const{filename:r,repoName:s,author:n,type:o}=t;return e.hasOwnProperty(s)||(e[s]={}),e[s].hasOwnProperty(r)||(e[s][r]={authors:{},types:new Set}),n.email&&(e[s][r].authors[n.email]=n),e[s][r].types.add(o),e}),{})}function v(e){return e.reduce(((e,t)=>{var r,s;const n=null!==(r=null===(s=t.repository)||void 0===s?void 0:s.name)&&void 0!==r?r:(0,u.t)("unknown");return e.hasOwnProperty(n)||(e[n]=[]),e[n].push(t),e}),{})}function S(e){let{location:t,perPage:r=40,activeRepository:s}=e;const o={...n()(t.query,[...Object.values(d.nF),"cursor"]),per_page:r};return s?{...o,repo_name:s.name}:o}function f(e,t){return t?[t.name]:e}const y={[c.GI.CRASH_FREE_SESSIONS]:(0,u.t)("Crash Free Session Rate"),[c.GI.HEALTHY_SESSIONS]:(0,u.t)("Healthy"),[c.GI.ABNORMAL_SESSIONS]:(0,u.t)("Abnormal"),[c.GI.ERRORED_SESSIONS]:(0,u.t)("Errored"),[c.GI.CRASHED_SESSIONS]:(0,u.t)("Crashed Session Rate"),[c.GI.CRASH_FREE_USERS]:(0,u.t)("Crash Free User Rate"),[c.GI.HEALTHY_USERS]:(0,u.t)("Healthy"),[c.GI.ABNORMAL_USERS]:(0,u.t)("Abnormal"),[c.GI.ERRORED_USERS]:(0,u.t)("Errored"),[c.GI.CRASHED_USERS]:(0,u.t)("Crashed User Rate"),[c.GI.SESSION_COUNT]:(0,u.t)("Session Count"),[c.GI.SESSION_DURATION]:(0,u.t)("Session Duration p50"),[c.GI.USER_COUNT]:(0,u.t)("User Count"),[c.GI.ERROR_COUNT]:(0,u.t)("Error Count"),[c.GI.TRANSACTION_COUNT]:(0,u.t)("Transaction Count"),[c.GI.FAILURE_RATE]:(0,u.t)("Failure Rate")},R={[c.GI.CRASH_FREE_SESSIONS]:(0,u.t)("Crash Free Session Rate"),[c.GI.HEALTHY_SESSIONS]:(0,u.t)("Healthy Session Rate"),[c.GI.ABNORMAL_SESSIONS]:(0,u.t)("Abnormal Session Rate"),[c.GI.ERRORED_SESSIONS]:(0,u.t)("Errored Session Rate"),[c.GI.CRASHED_SESSIONS]:(0,u.t)("Crashed Session Rate"),[c.GI.CRASH_FREE_USERS]:(0,u.t)("Crash Free User Rate"),[c.GI.HEALTHY_USERS]:(0,u.t)("Healthy User Rate"),[c.GI.ABNORMAL_USERS]:(0,u.t)("Abnormal User Rate"),[c.GI.ERRORED_USERS]:(0,u.t)("Errored User Rate"),[c.GI.CRASHED_USERS]:(0,u.t)("Crashed User Rate"),[c.GI.SESSION_COUNT]:(0,u.t)("Session Count"),[c.GI.SESSION_DURATION]:(0,u.t)("Session Duration"),[c.GI.USER_COUNT]:(0,u.t)("User Count"),[c.GI.ERROR_COUNT]:(0,u.t)("Error Count"),[c.GI.TRANSACTION_COUNT]:(0,u.t)("Transaction Count"),[c.GI.FAILURE_RATE]:(0,u.t)("Failure Rate")},Z={[c.GI.CRASH_FREE_SESSIONS]:h.w0[h._k.CRASH_FREE_SESSIONS],[c.GI.CRASH_FREE_USERS]:h.w0[h._k.CRASH_FREE_USERS],[c.GI.SESSION_COUNT]:(0,u.t)("The number of sessions in a given period."),[c.GI.USER_COUNT]:(0,u.t)("The number of users in a given period.")};function E(e,t,r,s){const{hideLabel:n,axisIndex:o}=s||{};return{seriesName:e,type:"line",data:[{name:t,value:null}],yAxisIndex:null!=o?o:void 0,xAxisIndex:null!=o?o:void 0,color:r.gray300,markLine:(0,a.Z)({silent:!0,lineStyle:{color:r.gray300,type:"solid"},label:{position:"insideEndBottom",formatter:n?"":e,font:"Rubik",fontSize:11},data:[{xAxis:t}]})}}const x={created:(0,u.t)("Release Created"),adopted:(0,u.t)("Adopted"),unadopted:(0,u.t)("Replaced")};function _(e,t,r,s,n){var o;const a=[],d=null===(o=e.adoptionStages)||void 0===o?void 0:o[t.slug],u=1===(0,p.qP)(s.query.environment).length,c=(0,m.C8)(e),{statsPeriod:h,...g}=(0,m.O7)({location:s,releaseBounds:c});let{start:v,end:S}=g;const f=!(s.query.pageStart||s.query.pageEnd||s.query.pageStatsPeriod);if(h){const e=(0,l.s)(h,null);v=e.start,S=e.end}const y=i()(e.dateCreated).startOf("minute");if((y.isBetween(v,S)||f&&"normal"===c.type)&&a.push(E(x.created,y.valueOf(),r,n)),!u||!(0,m.Jl)(t.platform))return a;const R=(null==d?void 0:d.adopted)&&i()(d.adopted);R&&R.isBetween(v,S)&&a.push(E(x.adopted,R.valueOf(),r,n));const Z=(null==d?void 0:d.unadopted)&&i()(d.unadopted);return Z&&Z.isBetween(v,S)&&a.push(E(x.unadopted,Z.valueOf(),r,n)),a}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionOverview_charts_tsx-app_views_releases_de-8283aa.8bd30be1ffb3517fa43de7fd1d1feb8b.js.map