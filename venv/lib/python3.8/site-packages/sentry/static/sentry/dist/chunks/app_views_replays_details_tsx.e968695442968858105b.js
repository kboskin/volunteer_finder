"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_replays_details_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,r)=>{r.d(t,{T:()=>s});var n=r("./app/components/charts/series/lineSeries.tsx"),a=r("./app/components/charts/baseChart.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{series:t,stacked:r,colors:s,...o}=e;return(0,i.tZ)(a.Z,{...o,"data-test-id":"area-chart",colors:s,series:t.map(((e,t)=>{let{seriesName:a,data:i,...o}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:r?"area":void 0,name:a,data:i.map((e=>{let{name:t,value:r}=e;return[t,r]})),lineStyle:{color:null==s?void 0:s[t],opacity:1,width:.4},areaStyle:{color:null==s?void 0:s[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...o})}))})}s.displayName="AreaChart"},"./app/components/featureFeedback/index.tsx":(e,t,r)=>{r.d(t,{z:()=>l}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./app/actionCreators/modal.tsx"),a=r("./app/components/button.tsx"),i=r("./app/icons/index.tsx"),s=r("./app/locale.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{feedbackTypes:t,featureName:l,buttonProps:d={}}=e;return(0,o.tZ)(a.ZP,{icon:(0,o.tZ)(i.I8,{}),onClick:async function(){const e=await r.e("app_components_featureFeedback_feedbackModal_tsx").then(r.bind(r,"./app/components/featureFeedback/feedbackModal.tsx")),{FeedbackModal:a,modalCss:i}=e;(0,n.openModal)((e=>(0,o.tZ)(a,{...e,featureName:l,feedbackTypes:t})),{modalCss:i})},...d,children:(0,s.t)("Give Feedback")})}l.displayName="FeatureFeedback"},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{G:()=>l,v:()=>o});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),i=r("./app/styles/space.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=(0,n.Z)("dl",{target:"e13z4zle2"})({name:"u4s7v9",styles:"display:grid;grid-template-columns:50% 50%"}),l=e=>{let{keyName:t,value:r}=e;return(0,s.BX)(a.Fragment,{children:[(0,s.tZ)(c,{children:t}),(0,s.tZ)(u,{children:r})]})};l.displayName="KeyValueTableRow";const d=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,i.Z)(.5)} ${(0,i.Z)(1)};\nfont-weight: normal;\nline-height: inherit;\n${e=>e.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},c=(0,n.Z)("dt",{target:"e13z4zle1"})(d,";color:",(e=>e.theme.textColor),";"),u=(0,n.Z)("dd",{target:"e13z4zle0"})(d,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/tagsTable.tsx":(e,t,r)=>{r.d(t,{Z:()=>v});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/lodash/capitalize.js")),i=r.n(a),s=r("./app/components/charts/styles.tsx"),o=r("./app/components/events/meta/metaProxy.tsx"),l=r("./app/components/keyValueTable.tsx"),d=r("./app/components/links/link.tsx"),c=r("./app/components/tooltip.tsx"),u=r("./app/components/version.tsx"),m=r("./app/locale.tsx"),p=r("./app/styles/space.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{let{event:t,query:r,generateUrl:n,title:a=(0,m.t)("Tag Details")}=e;const p=(0,o.xN)(t).tags,g=e=>i()(e.replace(/_/g," ")),v=e=>{return(0,h.tZ)(Z,{children:(t=e[0],Array.isArray(t)?null!==(r=t[1])&&void 0!==r&&r.reason?g(t[1].reason):g(t[0]):g(t))});var t,r};return(0,h.BX)(y,{children:[(0,h.tZ)(s.OT,{children:a}),(0,h.tZ)(l.v,{children:p.map((e=>{var t,a,i;const s=r.includes(`${e.key}:`),p=s?void 0:n(e),g=(0,o.xZ)(e,"key"),y=(0,o.xZ)(e,"value"),Z=()=>"release"===e.key?(0,h.tZ)(u.Z,{version:e.value,anchor:!1,withPackage:!0}):e.value;return(0,h.tZ)(l.G,{keyName:null!=g&&null!==(t=g.err)&&void 0!==t&&t.length?(0,h.tZ)(c.Z,{title:v(g.err),children:(0,h.tZ)("i",{children:`<${(0,m.t)("invalid")}>`})}):(0,h.tZ)(f,{title:e.key,children:e.key}),value:null!=y&&null!==(a=y.err)&&void 0!==a&&a.length?(0,h.tZ)(c.Z,{title:v(y.err),children:(0,h.tZ)("i",{children:`<${(0,m.t)("invalid")}>`})}):null!=g&&null!==(i=g.err)&&void 0!==i&&i.length?(0,h.tZ)("span",{children:Z()}):s?(0,h.tZ)(c.Z,{title:(0,m.t)("This tag is in the current filter conditions"),children:(0,h.tZ)("span",{children:Z()})}):(0,h.tZ)(f,{title:Z(),children:(0,h.tZ)(d.Z,{to:p||"",children:Z()})})},e.key)}))})]})};g.displayName="TagsTable";const v=g,f=(0,n.Z)(c.Z,{target:"eaaaj7z2"})((e=>e.theme.overflowEllipsis),";"),y=(0,n.Z)("div",{target:"eaaaj7z1"})("margin-bottom:",(0,p.Z)(3),";"),Z=(0,n.Z)("div",{target:"eaaaj7z0"})({name:"1flj9lk",styles:"text-align:left"})},"./app/utils/getUrlPathname.tsx":(e,t,r)=>{function n(e){try{return new URL(e).pathname}catch{return}}r.d(t,{Z:()=>n}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url-search-params.js")},"./app/utils/replays/hooks/useDiscoveryQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>d}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/react/index.js"),a=r("./app/utils/discover/eventView.tsx"),i=r("./app/utils/useApi.tsx"),s=r("./app/utils/useOrganization.tsx");const o={isLoading:!0,error:void 0,data:void 0,pageLinks:void 0},l={query:{}};function d(e){let{endpoint:t,discoverQuery:r,ignoreCursor:d}=e;const[c,u]=(0,n.useState)(o),m=(0,i.Z)(),p=(0,s.Z)();return(0,n.useEffect)((()=>{!async function(){const e=t||`/organizations/${p.slug}/eventsv2/`,n=a.ZP.fromNewQueryWithLocation({environment:[],projects:[],id:"",name:"",version:2,...r},l).getEventsAPIPayload(l);u((e=>({...e,isLoading:!0,error:void 0}))),m.clear();try{const[t,,r]=await m.requestPromise(e,{includeAllArgs:!0,query:n});u((e=>{var n;return{...e,isLoading:!1,error:void 0,pageLinks:null!==(n=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==n?n:e.pageLinks,data:t.data}}))}catch(e){u((t=>({...t,isLoading:!1,error:e,data:void 0})))}}()}),[t,r,p.slug,d]),c}},"./app/utils/useLocation.tsx":(e,t,r)=>{r.d(t,{T:()=>a});var n=r("./app/utils/useRouteContext.tsx");function a(){return(0,n.s)().location}},"./app/utils/usePrevious.tsx":(e,t,r)=>{r.d(t,{Z:()=>a});var n=r("../node_modules/react/index.js");const a=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},"./app/views/replays/details.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>Hn});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),i=r("./app/components/errorBoundary.tsx"),s=r("./app/components/errors/detailedError.tsx"),o=r("./app/components/errors/notFound.tsx"),l=r("./app/components/events/interfaces/spans/header.tsx"),d=r("./app/components/layouts/thirds.tsx"),c=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js")),u=r("./app/components/panels/index.tsx"),m=r("./app/components/placeholder.tsx");r("../node_modules/core-js/modules/web.dom-collections.iterator.js");const p=(0,n.Z)("ul",{target:"eos1bss1"})("list-style:none;margin:0;padding:0;height:100%;width:100%;display:grid;grid-template-columns:repeat(",(e=>e.totalColumns),", 1fr) ",(e=>e.remainder),"fr;place-items:stretch;"),h=(0,n.Z)("li",{target:"eos1bss0"})("");var g=r("../node_modules/moment/moment.js"),v=r.n(g);function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=String(e);const n=Math.pow(10,t-1);if(e<n)for(;String(n).length>r.length;)r="0"+e;return r}const y=36e5;function Z(e,t){return v()(e).diff(v().unix(t)).valueOf()}function b(e,t){return v().utc(Z(e,t)).format("HH:mm:ss")}function x(e){if(e<=0)return"0:00";const t=Math.floor(e/y);e%=y;const r=Math.floor(e/6e4);e%=6e4;const n=Math.floor(e/1e3);return t?`${t}:${f(r)}:${f(n)}`:`${r}:${f(n)}`}function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=Math.floor(t/r);const a=e-n*t>0?1:0;n-=a;const i=[1*y,18e5,12e5,9e5,6e5,3e5,12e4,6e4,3e4,1e4,5e3,1e3],s=i.reduce(((t,r)=>(t.set(r,Math.floor(e/r)),t)),new Map),[o,l]=Array.from(s.entries()).filter((e=>{let[t,r]=e;return r<=n})).reduce(((e,t)=>t[1]>e[1]?t:e),[0,0]),d=(e-o*l)/o;return{timespan:o,cols:l,remaining:d}}function k(e,t){const r=e.startTimestamp<=t.startTimestamp&&t.startTimestamp<=e.endTimestamp,n=e.startTimestamp<=t.endTimestamp&&t.endTimestamp<=e.endTimestamp;return r||n}function T(e,t){return void 0===t||isNaN(t)||0===t?0:e/t}var S=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const N=(0,n.Z)(h,{target:"e145a7q30"})("border-right:1px ",(e=>e.lineStyle)," ",(e=>e.theme.gray100),";text-align:right;");function I(e){let{children:t,cols:r,lineStyle:n,remaining:a}=e;return(0,S.tZ)(p,{totalColumns:r,remainder:a,children:[...Array(r)].map(((e,r)=>(0,S.tZ)(N,{lineStyle:n,children:t?t(r):null},r)))})}function C(e){let{duration:t,minWidth:r=50,width:n}=e;const{timespan:a,cols:i,remaining:s}=w(t,n,r);return(0,S.tZ)(I,{cols:i,lineStyle:"solid",remaining:s,children:e=>(0,S.tZ)("small",{children:x((e+1)*a)})})}function E(e){let{duration:t,minWidth:r=20,width:n}=e;const{cols:a,remaining:i}=w(t,n,r);return(0,S.tZ)(I,{cols:a,lineStyle:"dotted",remaining:i})}I.displayName="Gridlines",C.displayName="MajorGridlines",E.displayName="MinorGridlines";var j=r("./app/components/events/interfaces/breadcrumbs/breadcrumb/type/index.tsx"),M=r("./app/components/events/interfaces/breadcrumbs/breadcrumb/type/icon.tsx"),R=r("./app/components/hovercard.tsx"),z=r("./app/styles/space.tsx"),P=r("./app/types/breadcrumbs.tsx");function A(e){let{className:t,crumbs:r,duration:n,startTimestamp:a,width:i}=e;const s=Math.floor(i/4),o=function(e,t,r,n){const a=1e3*e,i=isNaN(t)?1:t;return r.map((e=>{const{timestamp:t}=e,r=+new Date(String(t)),s=isNaN(r)?0:r-a;return[Math.floor(s/i*(n-1))+1,e]})).reduce(((e,t)=>{let[r,n]=t;var a;return e.has(r)?null===(a=e.get(r))||void 0===a||a.push(n):e.set(r,[n]),e}),new Map)}(a,n,r,s);return(0,S.tZ)(L,{className:t,totalColumns:s,remainder:0,children:Array.from(o.entries()).map((e=>{let[t,r]=e;return(0,S.tZ)(B,{column:t,children:(0,S.tZ)(_,{crumbs:r})},t)}))})}A.displayName="ReplayTimelineEvents";const L=(0,n.Z)(p,{target:"e1lcghnx5"})("height:",(0,z.Z)(4),";margin-top:",(0,z.Z)(1),";"),B=(0,n.Z)(h,{target:"e1lcghnx4"})("grid-column:",(e=>Math.floor(e.column)),";place-items:stretch;display:grid;&:hover{z-index:",(e=>e.theme.zIndex.initial),";}");function F(e){var t,r,n,a,i;switch(e.type){case P.kS.USER:case P.kS.UI:return null!==(t=e.message)&&void 0!==t?t:e.description;case P.kS.NAVIGATION:return null!==(r=null===(n=e.data)||void 0===n?void 0:n.to)&&void 0!==r?r:e.description;case P.kS.ERROR:return`${null===(a=e.data)||void 0===a?void 0:a.type}: ${null===(i=e.data)||void 0===i?void 0:i.value}`;default:return e.message}}function _(e){let{crumbs:t}=e;const r=(0,S.tZ)(O,{children:t.map((e=>(0,S.BX)(H,{children:[(0,S.tZ)(j.Z,{type:e.type,color:e.color,description:e.description}),(0,S.tZ)("small",{children:F(e)})]},e.id)))}),n=t.reduce(((e,t)=>function(e,t){const r={[P.kS.USER]:0,[P.kS.UI]:0,[P.kS.NAVIGATION]:1,[P.kS.ERROR]:2};return r[e.type]-r[t.type]}(e,t)>=1?e:t)),a=1===t.length?(0,S.tZ)(M.Z,{type:n.type}):t.length;return(0,S.tZ)($,{children:(0,S.tZ)(R.uI,{body:r,children:(0,S.tZ)(D,{color:n.color,children:a})},n.id)})}_.displayName="Event";const O=(0,n.Z)("ul",{target:"e1lcghnx3"})({name:"1xclg2i",styles:"margin:0;padding:0"}),H=(0,n.Z)("li",{target:"e1lcghnx2"})("display:flex;gap:",(0,z.Z)(1),";padding:",(0,z.Z)(.5),";border-bottom:1px solid ",(e=>e.theme.innerBorder),";&:last-child{border-bottom:none;}"),$=(0,n.Z)("div",{target:"e1lcghnx1"})("position:absolute;transform:translate(-50%);margin-left:",2,"px;"),D=(0,n.Z)("div",{target:"e1lcghnx0"})("font-size:",(e=>e.theme.fontSizeSmall),";display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;color:",(e=>e.theme.white),";background:",(e=>{var t;return null!==(t=e.theme[e.color])&&void 0!==t?t:e.color}),";border:1px solid ",(e=>e.theme.white),";box-shadow:",(e=>e.theme.dropShadowLightest),";"),U=A;var X=r("./app/components/tooltip.tsx"),q=r("./app/locale.tsx");function V(e){let{className:t,duration:r,spans:n,startTimestamp:i}=e;const s=function(e){if(!e.length)return[];const t=e.map((e=>{const t=1e3*e.startTimestamp,r=1e3*e.endTimestamp;return{spanCount:1,startTimestamp:t,endTimestamp:r,duration:r-t}})),[r,...n]=t,a=[r];for(const e of n){let t=!1;for(const r of a)if(k(r,e)){t=!0,r.spanCount+=1,r.startTimestamp=Math.min(r.startTimestamp,e.startTimestamp),r.endTimestamp=Math.max(r.endTimestamp,e.endTimestamp),r.duration=r.endTimestamp-r.startTimestamp;break}t||a.push(e)}return a}(n),o=1e3*i;return(0,S.tZ)(G,{className:t,children:s.map(((e,t)=>{const n=T(e.startTimestamp-o,r),i=T(e.duration,r),s=(0,q.tn)("%s network request","%s network requests",e.spanCount);return(0,S.tZ)(X.Z,{title:(0,S.BX)(a.Fragment,{children:[s,(0,S.tZ)("br",{}),e.duration.toFixed(2),"ms"]}),skipWrapper:!0,disableForVisualTest:!0,children:(0,S.tZ)(W,{startPct:n,widthPct:i})},t)}))})}V.displayName="ReplayTimelineEvents";const G=(0,n.Z)("ul",{target:"e1qmy7wx1"})("list-style:none;margin:0;padding:0;height:",(0,z.Z)(3),";position:relative;"),W=(0,n.Z)("li",{target:"e1qmy7wx0"})("display:block;position:absolute;top:0;left:",(e=>100*e.startPct),"%;min-width:1px;width:",(e=>100*e.widthPct),"%;height:100%;background:#865189;"),J=a.memo(V),Q=(0,n.Z)("div",{target:"ew7f4bw0"})({name:"ndjpn0",styles:"display:grid;grid-template:1fr/1fr;>*{grid-area:1/1;}"});r("../node_modules/core-js/modules/es.error.cause.js");var Y=r("../node_modules/@sentry/hub/esm/exports.js"),K=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js"),ee=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/types.js");const te=new Map;function re(e){let{replayer:t,nodeId:r}=e;if(!te.has(r))return!1;const n=te.get(r);return!(!n||!t.wrapper.contains(n.canvas)||(t.wrapper.removeChild(n.canvas),te.delete(r),0))}function ne(e){var t,r;let{replayer:n,nodeId:a,annotation:i="",color:s}=e;const{mouseTail:o,wrapper:l}=n,d=n.getMirror().getNode(a);if(!d||null===(t=n.iframe.contentDocument)||void 0===t||null===(r=t.body)||void 0===r||!r.contains(d))return null;const{top:c,left:u,width:m,height:p}=d.getBoundingClientRect(),h=null!=s?s:"rgba(168, 196, 236, 0.75)",g=o.cloneNode(),v=g.getContext("2d");if(!v)return null;v.fillStyle=h,v.fillRect(u,c,m,p),v.beginPath(),v.setLineDash([5,5]),v.moveTo(u,c),v.lineTo(u+m,c),v.lineTo(u+m,c+p),v.lineTo(u,c+p),v.closePath(),v.stroke(),v.font="24px Rubik",v.textAlign="right",v.textBaseline="bottom";const f=v.measureText(i).width;return v.fillStyle="rgba(30, 30, 30, 0.75)",v.fillRect(u+m-f,c+p-30,f,30),v.fillStyle="white",v.fillText(i,u+m,c+p),te.set(a,{canvas:g}),l.insertBefore(g,o),{canvas:g}}var ae=r("./app/utils/usePrevious.tsx"),ie=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");const se=a.createContext({clearAllHighlights:()=>{},currentHoverTime:void 0,currentTime:0,dimensions:{height:0,width:0},duration:void 0,fastForwardSpeed:0,highlight:()=>{},initRoot:()=>{},isBuffering:!1,isPlaying:!1,isSkippingInactive:!1,removeHighlight:()=>{},replay:null,setCurrentHoverTime:()=>{},setCurrentTime:()=>{},setSpeed:()=>{},speed:1,togglePlayPause:()=>{},toggleSkipInactive:()=>{}});function oe(e){let{children:t,replay:r,initialTimeOffset:n=0,value:i={}}=e;const s=null==r?void 0:r.getRRWebEvents(),o=(0,c.a)(),l=(0,ae.Z)(s),d=s!==l,u=(0,a.useRef)(null),[m,p]=(0,a.useState)({height:0,width:0}),[h,g]=(0,a.useState)(),[v,f]=(0,a.useState)(!1),[y,Z]=(0,a.useState)(!1),[b,x]=(0,a.useState)(1),[w,k]=(0,a.useState)(0),[T,N]=(0,a.useState)({target:-1,previous:-1}),I=(0,a.useRef)(void 0),C=e=>{p(e)},E=()=>{f(!1)},j=e=>{k(e.speed)},M=()=>{k(0)},R=(0,a.useCallback)((e=>{let{nodeId:t}=e;const r=u.current;r&&ne({replayer:r,nodeId:t})}),[]),z=(0,a.useCallback)((()=>{const e=u.current;e&&function(e){let{replayer:t}=e;for(const e of te.keys())re({replayer:t,nodeId:e})}({replayer:e})}),[]),P=(0,a.useCallback)((e=>{let{nodeId:t}=e;const r=u.current;r&&re({replayer:r,nodeId:t})}),[]),A=(0,a.useCallback)((e=>{if(void 0===s)return;if(null===e)return;if(u.current){var t;if(!d)return;if(0===(null===(t=u.current.iframe.contentDocument)||void 0===t?void 0:t.body.childElementCount))return;for(;e.firstChild;)e.removeChild(e.firstChild)}const r=new class{constructor(){let{defaultHighlightColor:e="rgba(168, 196, 236, 0.75)"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,ie.Z)(this,"defaultHighlightColor",void 0),(0,ie.Z)(this,"highlightsByNodeId",new Map),this.defaultHighlightColor=e}removeHighlight(e,t){re({nodeId:e,replayer:t})&&this.highlightsByNodeId.delete(e)}handler(e,t,r){var n;let{replayer:a}=r;if(this.highlightsByNodeId.size&&"removes"in e.data&&null!==(n=e.data.removes)&&void 0!==n&&n.length&&e.data.removes.forEach((e=>{"id"in e&&this.removeHighlight(e.id,a)})),this.highlightsByNodeId.size&&Array.from(this.highlightsByNodeId.entries()).filter((t=>{let[,{added:r,expires:n}]=t;return e.timestamp<r||e.timestamp>=n})).forEach((e=>{let[t]=e;this.removeHighlight(t,a)})),this.highlightsByNodeId.size&&3===e.type&&3===e.data.source&&Array.from(this.highlightsByNodeId.entries()).forEach((e=>{let[t]=e;this.removeHighlight(t,a)})),!function(e){return"nodeId"in e.data}(e)||e.data.nodeId<0)return;const i=e.data;ne({replayer:a,nodeId:i.nodeId,annotation:i.text})&&this.highlightsByNodeId.set(i.nodeId,{added:e.timestamp,expires:e.timestamp+5e3})}},n=new K.x(s,{root:e,blockClass:"sr-block",mouseTail:{duration:750,lineCap:"round",lineWidth:2,strokeStyle:o.purple200},plugins:[r]});n.on(ee.SA.Resize,C),n.on(ee.SA.Finish,E),n.on(ee.SA.SkipStart,j),n.on(ee.SA.SkipEnd,M),u.current=n}),[s,o.purple200,d]);(0,a.useEffect)((()=>{u.current&&s&&A(u.current.wrapper.parentElement)}),[A,s]);const L=(0,a.useCallback)((()=>u.current?Math.max(u.current.getCurrentTime(),0):0),[]),B=(0,a.useCallback)((e=>{var t;const r=u.current;if(!r)return;const n=e>(null===(t=u.current)||void 0===t?void 0:t.getMetaData().totalTime)?0:e;N({target:n,previous:L()}),I.current&&window.clearTimeout(I.current),v?(I.current=window.setTimeout((()=>r.play(n)),0),f(!0)):(I.current=window.setTimeout((()=>r.pause(n)),0),f(!1))}),[L,v]),F=(0,a.useCallback)((e=>{const t=u.current;t&&(v?(t.pause(),t.setConfig({speed:e}),t.play(L())):t.setConfig({speed:e}),x(e))}),[L,v]),_=(0,a.useCallback)((e=>{const t=u.current;t&&(e?t.play(L()):t.pause(L()),f(e))}),[L]),O=(0,a.useCallback)((e=>{const t=u.current;t&&(e!==t.config.skipInactive&&t.setConfig({skipInactive:e}),Z(e))}),[]);(0,a.useEffect)((()=>{n&&s&&u.current&&B(1e3*n)}),[s,u.current]);const H=function(e){const[t,r]=(0,a.useState)(0);return function(e){(0,a.useEffect)((()=>{const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}),[e])}((()=>r(e))),t}(L),[$,D]=-1!==T.target&&T.previous===H?[!0,T.target]:[!1,H];$||-1===T.target||N({target:-1,previous:-1});const U=null==r?void 0:r.getEvent(),X=U?1e3*(U.endTimestamp-U.startTimestamp):void 0;return(0,S.tZ)(se.Provider,{value:{clearAllHighlights:z,currentHoverTime:h,currentTime:D,dimensions:m,duration:X,fastForwardSpeed:w,highlight:R,initRoot:A,isBuffering:$,isPlaying:v,isSkippingInactive:y,removeHighlight:P,replay:r,setCurrentHoverTime:g,setCurrentTime:B,setSpeed:F,speed:b,togglePlayPause:_,toggleSkipInactive:O,...i},children:t})}oe.displayName="Provider";const le=()=>(0,a.useContext)(se);class de extends Error{}function ce(e){let{children:t}=e;const r=(0,a.useRef)(null),n=(0,a.useRef)(new AbortController),{duration:i,setCurrentHoverTime:s}=le(),o=(0,a.useCallback)((async e=>{if(r.current&&void 0!==i)try{const t=await function(e,t){let{signal:r}=t;return new Promise(((t,n)=>{r.aborted&&n(new de);const a=()=>{n(new de)},i=new IntersectionObserver((e=>{for(const n of e){const e=n.boundingClientRect;t(e),r.removeEventListener("abort",a)}i.disconnect()}));r.addEventListener("abort",a),i.observe(e)}))}(r.current,{signal:n.current.signal}),a=e.clientX-t.left;if(a>=0){const e=a/t.width;s(e*i)}else s(void 0)}catch(e){if(e instanceof de)return;Y.Tb(e)}else s(void 0)}),[n,i,s]),l=(0,a.useCallback)((()=>{n.current&&(n.current.abort(),n.current=new AbortController),s(void 0)}),[n,s]);return(0,S.tZ)("div",{ref:r,onMouseEnter:o,onMouseMove:o,onMouseLeave:l,children:t})}ce.displayName="HorizontalMouseTracking";const ue=ce;var me=r("./app/components/forms/controls/rangeSlider/index.tsx");const pe=(0,n.Z)("div",{target:"e1f3gzxp1"})({name:"1pv11yg",styles:"position:relative;height:100%;width:100%;pointer-events:none"}),he=(0,n.Z)("span",{target:"e1f3gzxp0"})("position:absolute;height:100%;width:",(e=>100*e.percent),"%;pointer-events:none;");function ge(e){let{className:t}=e;const{currentHoverTime:r,currentTime:n,duration:a,setCurrentTime:i}=le(),s=T(n,a),o=T(r||0,a);return(0,S.BX)(xe,{className:t,children:[(0,S.BX)(ve,{children:[r?(0,S.tZ)(be,{percent:o}):null,(0,S.tZ)(Ze,{percent:s})]}),(0,S.tZ)(fe,{children:(0,S.tZ)(ye,{name:"replay-timeline",min:0,max:a,value:Math.round(n),onChange:e=>i(e||0),showLabel:!1})})]})}ge.displayName="Scrubber";const ve=(0,n.Z)(pe,{target:"e138nie77"})("background:",(e=>e.theme.gray200),";"),fe=(0,n.Z)("div",{target:"e138nie76"})({name:"1aubja5",styles:"overflow:hidden;width:100%"}),ye=(0,n.Z)(me.Z,{target:"e138nie75"})({name:"ruo4g1",styles:"input{cursor:pointer;opacity:0;height:100%;}"}),Ze=(0,n.Z)(he,{target:"e138nie74"})("background:",(e=>e.theme.purple300),";"),be=(0,n.Z)(he,{target:"e138nie73"})("background:",(e=>e.theme.purple200),";"),xe=(0,n.Z)("div",{target:"e138nie72"})("position:relative;width:100%;&>*{position:absolute;top:0;left:0;}",be,":after{content:'';display:block;width:",(0,z.Z)(.5),";height:",(0,z.Z)(1.5),";pointer-events:none;background:",(e=>e.theme.purple200),";box-sizing:content-box;position:absolute;top:-",(0,z.Z)(.5),";right:-1px;}:hover ",be,":after{height:",(0,z.Z)(2),";top:-",(0,z.Z)(.5),";}"),we=(0,n.Z)(ge,{target:"e138nie71"})("height:",(0,z.Z)(.5),";:hover{margin-block:-",(0,z.Z)(.25),";height:",(0,z.Z)(1),";}",fe,"{height:",(0,z.Z)(.5),";}:hover ",fe,"{height:",(0,z.Z)(.75),";}"),ke=(0,n.Z)(ge,{target:"e138nie70"})("height:",(0,z.Z)(.5),";:hover{margin-block:-",(0,z.Z)(.25),";height:",(0,z.Z)(1),";}",fe,"{height:",(0,z.Z)(.5),";}:hover ",fe,"{height:",(0,z.Z)(.75),";}",Ze,":after{content:'';display:block;width:",(0,z.Z)(2),";height:",(0,z.Z)(2),";z-index:",(e=>e.theme.zIndex.initial),";pointer-events:none;background:",(e=>e.theme.purple300),";box-sizing:content-box;border-radius:",(0,z.Z)(2),";border:solid ",(e=>e.theme.white),";border-width:",(0,z.Z)(.5),";position:absolute;top:-",(0,z.Z)(1),";right:-",(0,z.Z)(1.5),";opacity:0;transition:opacity 0.1s ease;}:hover ",Ze,":after{opacity:1;}");var Te=r("../node_modules/@react-aria/utils/dist/module.js");function Se(e){let{children:t,className:r}=e;const n=(0,a.useRef)(null),[i,s]=(0,a.useState)({height:0,width:0}),o=(0,a.useCallback)((()=>{var e,t;s({height:(null===(e=n.current)||void 0===e?void 0:e.clientHeight)||0,width:(null===(t=n.current)||void 0===t?void 0:t.clientWidth)||0})}),[s]);return(0,Te.yU)({ref:n,onResize:o}),(0,S.tZ)("div",{className:r,ref:n,children:t(i)})}function Ne(e){let{color:t,currentTime:r,duration:n}=e;const a=T(r,n);return(0,S.tZ)(pe,{children:(0,S.tZ)(Ie,{color:t,percent:a})})}Se.displayName="Resizeable",Ne.displayName="TimelinePosition";const Ie=(0,n.Z)(he,{target:"e1wyjqxz0"})("border-right:",(0,z.Z)(.25)," solid ",(e=>e.color),";"),Ce=Ne,Ee=[P.kS.ERROR,P.kS.NAVIGATION,P.kS.UI,P.kS.USER];function je(e){let{}=e;const t=(0,c.a)(),{currentHoverTime:r,currentTime:n,duration:a,replay:i}=le();if(!i)return(0,S.tZ)(m.Z,{height:"86px",bottomGutter:2});const s=i.getRawCrumbs()||[],o=i.getRawSpans()||[],l=s.filter((e=>Ee.includes(e.type))),d=o.filter(i.isNotMemorySpan);return(0,S.tZ)(u.s_,{children:(0,S.tZ)(ue,{children:(0,S.tZ)(Se,{children:e=>{let{width:s}=e;return(0,S.BX)(Q,{children:[(0,S.tZ)(E,{duration:a||0,width:s}),(0,S.tZ)(C,{duration:a||0,width:s}),(0,S.BX)(Me,{children:[(0,S.tZ)(Ce,{color:t.purple300,currentTime:n,duration:a}),r?(0,S.tZ)(Ce,{color:t.purple200,currentTime:r,duration:a}):null,(0,S.BX)("div",{children:[(0,S.tZ)(we,{}),(0,S.tZ)(U,{crumbs:l,duration:a||0,startTimestamp:i.getEvent().startTimestamp,width:s}),(0,S.tZ)(J,{duration:a||0,spans:d,startTimestamp:i.getEvent().startTimestamp})]})]})]})}})})})}je.displayName="ReplayTimeline";const Me=(0,n.Z)(Q,{target:"e156rrl40"})({name:"1ghu3wd",styles:"padding-top:24px"}),Re=je;var ze=r("../node_modules/lodash/debounce.js"),Pe=r.n(ze),Ae=r("./app/components/button.tsx"),Le=r("./app/components/buttonBar.tsx"),Be=r("./app/components/events/interfaces/breadcrumbs/utils.tsx"),Fe=r("./app/components/forms/compactSelect.tsx"),_e=r("./app/icons/index.tsx");function Oe(e){let{crumbs:t,targetTimestampMs:r,allowExact:n=!1}=e;return t.reduce(((e,t)=>{const a=+new Date(t.timestamp||"");return a>r||!n&&a===r?e:!e||a>+new Date(e.timestamp||"")?t:e}),void 0)}var He=r("../node_modules/screenfull/index.js");function $e(){const e=(0,a.useRef)(null),[t,r]=(0,a.useState)(!1),n=(0,a.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navigationUI:"auto"};He.Z.isEnabled&&e.current&&await He.Z.request(e.current,t)}),[]),i=(0,a.useCallback)((async()=>{He.Z.isEnabled&&await He.Z.exit()}),[]),s=(0,a.useCallback)((()=>t?i():n()),[n,i,t]),o=()=>{r(He.Z.isFullscreen)};return(0,a.useEffect)((()=>(He.Z.on("change",o),()=>He.Z.off("change",o))),[]),{enter:n,exit:i,isEnabled:He.Z.isEnabled,isFullscreen:t,ref:e,toggle:s}}const De=[P.kS.ERROR,P.kS.INIT,P.kS.NAVIGATION,P.kS.UI,P.kS.USER];function Ue(){const{currentTime:e,isPlaying:t,replay:r,setCurrentTime:n,togglePlayPause:a}=le();return(0,S.BX)(Le.ZP,{merged:!0,children:[(0,S.tZ)(Ae.ZP,{size:"xsmall",title:(0,q.t)("Go back 10 seconds"),icon:(0,S.tZ)(_e.tr,{size:"sm"}),onClick:()=>n(e-1e4),"aria-label":(0,q.t)("Go back 10 seconds")}),(0,S.tZ)(Ae.ZP,{size:"xsmall",title:t?(0,q.t)("Pause the Replay"):(0,q.t)("Play the Replay"),icon:t?(0,S.tZ)(_e.ky,{size:"sm"}):(0,S.tZ)(_e.JF,{size:"sm"}),onClick:()=>a(!t),"aria-label":t?(0,q.t)("Pause the Replay"):(0,q.t)("Play the Replay")}),(0,S.tZ)(Ae.ZP,{size:"xsmall",title:(0,q.t)("Jump to next event"),icon:(0,S.tZ)(_e.pi,{size:"sm"}),onClick:()=>{const t=null==r?void 0:r.getEvent().startTimestamp;if(!t)return;const a=function(e){let{crumbs:t,targetTimestampMs:r,allowExact:n=!1}=e;return t.reduce(((e,t)=>{const a=+new Date(t.timestamp||"");return a<r||!n&&a===r?e:!e||a<+new Date(e.timestamp||"")?t:e}),void 0)}({crumbs:(0,Be.LP)((null==r?void 0:r.getRawCrumbs())||[]).filter((e=>De.includes(e.type))),targetTimestampMs:1e3*t+e});void 0!==t&&null!=a&&a.timestamp&&n(Z(a.timestamp,t))},"aria-label":(0,q.t)("Jump to next event")})]})}function Xe(){const{currentTime:e,duration:t}=le();return(0,S.BX)("span",{children:[x(e)," / ",t?x(t):"??:??"]})}function qe(e){let{speedOptions:t}=e;const{setSpeed:r,speed:n}=le();return(0,S.tZ)(Fe.Z,{triggerProps:{size:"xsmall",prefix:(0,q.t)("Speed")},value:n,options:t.map((e=>({value:e,label:`${e}x`,disabled:e===n}))),onChange:e=>{r(e.value)}})}Ue.displayName="ReplayPlayPauseBar",Xe.displayName="ReplayCurrentTime",qe.displayName="ReplayPlaybackSpeed";const Ve=e=>{let{toggleFullscreen:t=(()=>{}),speedOptions:r=[.1,.25,.5,1,2,4]}=e;const{isFullscreen:n}=$e(),{isSkippingInactive:a,toggleSkipInactive:i}=le();return(0,S.BX)(Ge,{children:[(0,S.tZ)(Ue,{}),(0,S.tZ)(Xe,{}),(0,S.tZ)(Ae.ZP,{size:"xsmall",title:(0,q.t)("Fast-forward idle moments"),"aria-label":(0,q.t)("Fast-forward idle moments"),icon:(0,S.tZ)(_e.CC,{size:"sm",direction:"right"}),priority:a?"primary":void 0,onClick:()=>i(!a)}),(0,S.tZ)(qe,{speedOptions:r}),(0,S.tZ)(Ae.ZP,{size:"xsmall",title:n?(0,q.t)("Exit full screen"):(0,q.t)("View in full screen"),"aria-label":n?(0,q.t)("Exit full screen"):(0,q.t)("View in full screen"),icon:(0,S.tZ)(_e.Iq,{size:"sm"}),priority:n?"primary":void 0,onClick:t})]})};Ve.displayName="ReplayControls";const Ge=(0,n.Z)("div",{target:"e1ryc6sl0"})("display:grid;grid-column-gap:",(0,z.Z)(1),";grid-template-columns:max-content auto max-content max-content max-content;align-items:center;"),We=Ve;var Je=r("./app/components/forms/textCopyInput.tsx"),Qe=(r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url-search-params.js"),r("../node_modules/lodash/last.js")),Ye=r.n(Qe);const Ke=function(e,t){var r,n,a;const i=e.getEvent(),s=e.getRawCrumbs(),o=1e3*i.startTimestamp+Math.floor(t),l=(0,Be.LP)(s).filter((e=>e.type===P.kS.NAVIGATION)),d=(null===(r=i.tags.find((e=>"url"===e.key)))||void 0===r?void 0:r.value)||"",c=d?new URL(d).origin:"",u=null===(n=Ye()(l.filter((e=>{let{timestamp:t}=e;return+new Date(t||0)<o}))))||void 0===n||null===(a=n.data)||void 0===a?void 0:a.to;return u?c+u:d};function et(){const{currentTime:e,replay:t}=le();return t?(0,S.tZ)(tt,{children:Ke(t,e)}):(0,S.tZ)(tt,{disabled:!0,children:""})}et.displayName="ReplayCurrentUrl";const tt=(0,n.Z)(Je.ZP,{target:"evzcn0b0"})(Je.Fy,"{background:",(e=>e.theme.white),";border:none;padding:0 ",(0,z.Z)(.75),";font-size:",(e=>e.theme.fontSizeMedium),";border-bottom-left-radius:0;height:",(0,z.Z)(4),";}",Je.Fy,"[disabled]{border:none;}",Je.qR,"{border-top:none;border-right:none;border-bottom:none;height:",(0,z.Z)(4),";min-height:",(0,z.Z)(4),";}"),rt=et;function nt(e){let{className:t}=e;return(0,S.tZ)(at,{className:t,children:(0,S.BX)(it,{children:[(0,S.tZ)(_e.jo,{size:"sm"}),(0,q.t)("Buffering...")]})})}nt.displayName="BufferingOverlay";const at=(0,n.Z)("div",{target:"e1tth60i1"})({name:"1p9eycc",styles:"user-select:none;display:grid;place-items:center"}),it=(0,n.Z)("div",{target:"e1tth60i0"})("display:grid;grid-template-columns:max-content max-content;gap:",(0,z.Z)(.75),";place-items:center;padding:",(0,z.Z)(3),";background:",(e=>e.theme.gray300),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";z-index:",(e=>e.theme.zIndex.initial),";"),st=nt;function ot(e){let{speed:t,className:r}=e;return(0,S.tZ)(lt,{className:r,children:(0,S.BX)(dt,{title:(0,q.t)("Fast forwarding"),children:[(0,S.tZ)(_e.CC,{size:"sm",direction:"right"}),t,"x"]})})}ot.displayName="FastForwardBadge";const lt=(0,n.Z)("div",{target:"e1135tm81"})({name:"8y7axy",styles:"user-select:none;display:grid;align-items:end;justify-items:start"}),dt=(0,n.Z)(X.Z,{target:"e1135tm80"})("display:grid;grid-template-columns:max-content max-content;gap:",(0,z.Z)(.5),";align-items:center;background:",(e=>e.theme.gray300),";color:",(e=>e.theme.white),";padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2),";border-top-right-radius:",(e=>e.theme.borderRadius),";z-index:",(e=>e.theme.zIndex.initial),";"),ct=ot;function ut(e){let{className:t,height:r=1/0}=e;const{initRoot:n,dimensions:i,fastForwardSpeed:s,isBuffering:o}=le(),l=(0,a.useRef)(null),d=(0,a.useRef)(null),[c,u]=(0,a.useState)({width:0,height:0});(0,a.useEffect)((()=>n(d.current)),[n]);const m=(0,a.useCallback)((()=>{var e,t;return u({width:(null===(e=l.current)||void 0===e?void 0:e.clientWidth)||0,height:(null===(t=l.current)||void 0===t?void 0:t.clientHeight)||0})}),[u]);return(0,Te.yU)({ref:l,onResize:m}),(0,a.useEffect)((()=>{void 0===window.ResizeObserver&&m()}),[m]),(0,a.useEffect)((()=>{if(d.current){const e=r===1/0?c.height:r,t=Math.min(c.width/i.width,e/i.height,1);t&&(d.current.style["transform-origin"]="top left",d.current.style.transform=`scale(${t})`,d.current.style.width=i.width*t+"px",d.current.style.height=i.height*t+"px")}}),[c,i,r]),(0,S.BX)(mt,{ref:l,className:"sr-block",minHeight:r,isLoaded:0!==i.height,children:[(0,S.tZ)("div",{ref:d,className:t}),s?(0,S.tZ)(pt,{speed:s}):null,o?(0,S.tZ)(ht,{}):null]})}ut.displayName="BasePlayerRoot";const mt=(0,n.Z)("div",{target:"elabtru4"})("width:100%;height:100%;",(e=>e.isLoaded?"":e.minHeight!==1/0?`min-height: ${e.minHeight}px !important;`:"")," display:flex;justify-content:center;align-items:center;position:relative;background-color:",(e=>e.theme.backgroundSecondary),";background-image:repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ",(e=>e.theme.backgroundSecondary)," 8px,\n      ",(e=>e.theme.backgroundSecondary)," 11px\n    ),repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ",(e=>e.theme.gray100)," 15px,\n      ",(e=>e.theme.gray100)," 16px\n    );"),pt=(0,n.Z)(ct,{target:"elabtru3"})({name:"m4y3yb",styles:"position:absolute;left:0;bottom:0"}),ht=(0,n.Z)(st,{target:"elabtru2"})({name:"j2pfbl",styles:"position:absolute;top:0;left:0;right:0;bottom:0"}),gt=(0,n.Z)(ut,{target:"elabtru1"})({name:"w62j26",styles:".replayer-wrapper{background:white;user-select:none;}.replayer-wrapper>.replayer-mouse-tail{position:absolute;pointer-events:none;}.replayer-wrapper>iframe{border:none;}"}),vt=(0,n.Z)(gt,{target:"elabtru0"})(".replayer-mouse{position:absolute;width:32px;height:32px;transition:left 0.05s linear,top 0.05s linear;background-size:contain;background-repeat:no-repeat;background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxMiAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTZWMEwxMS42IDExLjZINC44TDQuNCAxMS43TDAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4xIDE2LjdMNS41IDE4LjJMMC43OTk5OTkgNy4xTDQuNSA1LjZMOS4xIDE2LjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNC42NzQ1MSA4LjYxODUxTDIuODMwMzEgOS4zOTI3MUw1LjkyNzExIDE2Ljc2OTVMNy43NzEzMSAxNS45OTUzTDQuNjc0NTEgOC42MTg1MVoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xIDIuNFYxMy42TDQgMTAuN0w0LjQgMTAuNkg5LjJMMSAyLjRaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K');border-color:transparent;}.replayer-mouse:after{content:'';display:inline-block;width:32px;height:32px;background:",(e=>e.theme.purple300),";border-radius:100%;transform:translate(-50%, -50%);opacity:0.3;}.replayer-mouse.active:after{animation:click 0.2s ease-in-out 1;}.replayer-mouse.touch-device{background-image:none;width:70px;height:70px;border-radius:100%;margin-left:-37px;margin-top:-37px;border:4px solid rgba(73, 80, 246, 0);transition:left 0s linear,top 0s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device.touch-active{border-color:",(e=>e.theme.purple200),";transition:left 0.25s linear,top 0.25s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device:after{opacity:0;}.replayer-mouse.touch-device.active:after{animation:touch-click 0.2s ease-in-out 1;}@keyframes click{0%{opacity:0.3;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}@keyframes touch-click{0%{opacity:0;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}");function ft(e){let{isFullscreen:t,toggleFullscreen:r}=e;const n=(0,a.useRef)(null),i=(0,a.useRef)(null),[s,o]=(0,a.useState)(window.innerHeight),[l,d]=(0,a.useState)(0);return(0,a.useEffect)((()=>{const e=Pe()((()=>{o(window.innerHeight)}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>{var e,t,r;const a=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.offsetHeight)||0),o=(null===(r=i.current)||void 0===r?void 0:r.offsetHeight)||0,l=s-(a-o)-70;d(Math.max(200,l/2))}),[s]),(0,S.BX)(Zt,{ref:n,isFullscreen:t,children:[(0,S.tZ)(bt,{children:(0,S.tZ)(rt,{})}),(0,S.tZ)(bt,{ref:i,disablePadding:!0,noBorder:!0,children:(0,S.tZ)(vt,{height:t?1/0:l})}),(0,S.tZ)(ue,{children:(0,S.tZ)(ke,{})}),(0,S.tZ)(yt,{children:(0,S.tZ)(We,{toggleFullscreen:r})})]})}ft.displayName="ReplayView";const yt=(0,n.Z)(u.N,{target:"e185m34i2"})("padding:",(0,z.Z)(1),";"),Zt=(0,n.Z)(u.s_,{target:"e185m34i1"})("margin-bottom:0;",(e=>e.isFullscreen?"height: 100%;\n      display: grid;\n      grid-template-rows: auto 1fr auto;\n      ":""),";"),bt=(0,n.Z)(u.V9,{target:"e185m34i0"})("display:block;padding:0;",(e=>e.noBorder?"border-bottom: none;":""),";"),xt=ft;var wt=r("./app/styles/organization.tsx"),kt=r("../node_modules/pako/dist/pako.esm.mjs"),Tt=r("../node_modules/lodash/first.js"),St=r.n(Tt);class Nt{static factory(e){let{breadcrumbs:t,event:r,errors:n,rrwebEvents:a,spans:i}=e;return t&&r&&a&&i&&n?new Nt({breadcrumbs:t,event:r,errors:n,rrwebEvents:a,spans:i}):null}constructor(e){let{breadcrumbs:t,event:r,errors:n,rrwebEvents:a,spans:i}=e;(0,ie.Z)(this,"event",void 0),(0,ie.Z)(this,"rrwebEvents",void 0),(0,ie.Z)(this,"breadcrumbs",void 0),(0,ie.Z)(this,"spans",void 0),(0,ie.Z)(this,"getEvent",(()=>this.event)),(0,ie.Z)(this,"getRRWebEvents",(()=>this.rrwebEvents)),(0,ie.Z)(this,"getRawCrumbs",(()=>this.breadcrumbs)),(0,ie.Z)(this,"getRawSpans",(()=>this.spans)),(0,ie.Z)(this,"isMemorySpan",(e=>"memory"===e.op)),(0,ie.Z)(this,"isNotMemorySpan",(e=>!this.isMemorySpan(e)));const{startTimestampMS:s,endTimestampMS:o}=function(e,t,r){const n=e.map((e=>e.timestamp)),a=t.map((e=>e.timestamp)).filter(Boolean).map((e=>+new Date(1e3*e))),i=r.map((e=>1e3*e.startTimestamp)),s=r.map((e=>1e3*e.endTimestamp));return{startTimestampMS:Math.min(...n,...a,...i),endTimestampMS:Math.max(...n,...a,...s)}}(a,t,i);this.spans=function(e){return e.sort(((e,t)=>e.startTimestamp-t.startTimestamp))}(i),this.breadcrumbs=function(e,t,r,n){var a;const{tags:i}=t,s={type:P.kS.INIT,timestamp:new Date(e).toISOString(),level:P.nU.INFO,action:"replay-init",message:(0,q.t)("Start recording"),data:{url:null===(a=i.find((e=>"url"===e.key)))||void 0===a?void 0:a.value}},o=r.map((e=>({type:P.kS.ERROR,level:P.nU.ERROR,category:"exception",data:{type:e["error.type"],value:e["error.value"]},timestamp:e.timestamp})));return(0,Be.LP)([s,...n.map((e=>{let{timestamp:t,...r}=e;return{...r,type:P.kS.DEFAULT,timestamp:new Date(1e3*t).toISOString()}})),...o]).sort(((e,t)=>+new Date(e.timestamp||0)-+new Date(t.timestamp||0)))}(s,r,n,t),this.rrwebEvents=function(e,t,r,n){const a=r.filter((e=>{let{op:t,data:r}=e;return"largest-contentful-paint"===t&&(null==r?void 0:r.nodeId)>0})).map((e=>{let{startTimestamp:t,data:{nodeId:r}}=e;return{type:6,data:{nodeId:r,text:"LCP"},timestamp:Math.floor(1e3*t)}})),i=[].concat(n).concat(a).concat({type:5,timestamp:t,data:{tag:"replay-end"}});i.sort(((e,t)=>e.timestamp-t.timestamp));const s=St()(i);return s&&(s.timestamp=e),i}(s,o,i,a),this.event={...r,startTimestamp:s/1e3,endTimestamp:o/1e3}}}var It=r("./app/utils/useApi.tsx"),Ct=r("./app/utils/replays/hooks/useDiscoveryQuery.tsx");const Et=/rrweb-[0-9]{13}.json/;function jt(e){return Et.test(e.name)}const Mt=Object.freeze({errors:void 0,event:void 0,fetchError:void 0,fetching:!0,isErrorsFetching:!0,rrwebEvents:void 0,spans:void 0,breadcrumbs:void 0});var Rt=r("./app/utils/useRouteContext.tsx"),zt=r("./app/components/breadcrumbs.tsx"),Pt=r("./app/components/clipboard.tsx"),At=r("./app/components/duration.tsx"),Lt=r("./app/components/featureBadge.tsx"),Bt=r("./app/components/featureFeedback/index.tsx"),Ft=r("./app/components/idBadge/userBadge.tsx");const _t=(0,n.Z)("dl",{target:"el7w60r2"})("margin:0;display:grid;grid-template-rows:auto auto;grid-auto-columns:1fr;grid-auto-flow:column;gap:",(0,z.Z)(.5)," ",(0,z.Z)(2),";text-align:right;"),Ot=e=>{let{keyName:t,value:r}=e;return(0,S.BX)(a.Fragment,{children:[(0,S.tZ)(Ht,{children:t}),(0,S.tZ)($t,{children:r})]})};Ot.displayName="KeyMetricData";const Ht=(0,n.Z)("dt",{target:"el7w60r1"})("color:",(e=>e.theme.subText),";font-size:14px;font-weight:bold;"),$t=(0,n.Z)("dt",{target:"el7w60r0"})("color:",(e=>e.theme.textColor),";font-weight:normal;");var Dt=r("./app/components/sentryDocumentTitle.tsx"),Ut=r("./app/components/timeSince.tsx"),Xt=r("./app/utils/getUrlPathname.tsx");function qt(e){let{children:t,event:r,orgId:n,crumbs:i}=e;const{currentTime:s}=le(),o=r?`${r.id} - Replays - ${n}`:`Replays - ${n}`,l=(0,a.useMemo)((()=>function(e){const t=new URL(window.location.href),r=Math.floor(e/1e3||0);return r>0&&t.searchParams.set("t",r.toString()),t.toString()}(s)),[s]);return(0,S.tZ)(Dt.Z,{title:o,children:(0,S.BX)(a.Fragment,{children:[(0,S.BX)(d.h4,{children:[(0,S.tZ)(d.oB,{children:(0,S.tZ)(zt.Z,{crumbs:[{to:`/organizations/${n}/replays/`,label:(0,q.t)("Replays")},{label:(0,S.BX)(a.Fragment,{children:[(0,q.t)("Replay Details"),(0,S.tZ)(Lt.Z,{type:"alpha"})]})}]})}),(0,S.BX)(Yt,{children:[(0,S.tZ)(Pt.Z,{hideUnsupported:!0,value:l,children:(0,S.tZ)(Ae.ZP,{icon:(0,S.tZ)(_e.JH,{}),children:(0,q.t)("Share")})}),(0,S.tZ)(Bt.z,{featureName:"replay"})]}),(0,S.BX)(a.Fragment,{children:[(0,S.tZ)(d.oB,{children:(0,S.tZ)(Gt,{event:r})}),(0,S.tZ)(Wt,{children:(0,S.tZ)(Jt,{event:r,crumbs:i})})]})]}),t]})})}qt.displayName="DetailLayout";const Vt=(0,n.Z)((function(e){return(0,S.tZ)(m.Z,{width:"100%",height:"19px",...e})}),{target:"ejgjj0i3"})("background-color:",(e=>e.theme.background),";");function Gt(e){var t,r,n,a,i,s,o,l,d,c,u,m;let{event:p}=e;if(!p)return(0,S.tZ)(Vt,{width:"500px",height:"48px"});const h=p.tags.find((e=>{let{key:t}=e;return"url"===t})),g=null!==(t=(0,Xt.Z)(null!==(r=null==h?void 0:h.value)&&void 0!==r?r:""))&&void 0!==t?t:"";return(0,S.tZ)(Qt,{avatarSize:32,user:{username:null!==(n=null===(a=p.user)||void 0===a?void 0:a.username)&&void 0!==n?n:"",id:null!==(i=null===(s=p.user)||void 0===s?void 0:s.id)&&void 0!==i?i:"",ip_address:null!==(o=null===(l=p.user)||void 0===l?void 0:l.ip_address)&&void 0!==o?o:"",name:null!==(d=null===(c=p.user)||void 0===c?void 0:c.name)&&void 0!==d?d:"",email:null!==(u=null===(m=p.user)||void 0===m?void 0:m.email)&&void 0!==u?u:""},displayEmail:g})}Gt.displayName="EventHeader";const Wt=(0,n.Z)(d.kP,{target:"ejgjj0i2"})({name:"1kfiaox",styles:"width:325px"});function Jt(e){let{event:t,crumbs:r}=e;const{duration:n}=le(),a=null==r?void 0:r.filter((e=>"error"===e.type)).length;return(0,S.BX)(_t,{children:[(0,S.tZ)(Ot,{keyName:(0,q.t)("Timestamp"),value:t?(0,S.tZ)(Ut.Z,{date:t.dateReceived}):(0,S.tZ)(Vt,{})}),(0,S.tZ)(Ot,{keyName:(0,q.t)("Duration"),value:void 0!==n?(0,S.tZ)(At.Z,{seconds:Math.floor((i=n||0,i/1e3))||1,abbreviation:!0,exact:!0}):(0,S.tZ)(Vt,{})}),(0,S.tZ)(Ot,{keyName:(0,q.t)("Errors"),value:null!=a?a:(0,S.tZ)(Vt,{})})]});var i}Jt.displayName="EventMetaData";const Qt=(0,n.Z)(Ft.Z,{target:"ejgjj0i1"})("align-items:flex-start;",Ft.C,"{font-size:26px;}"),Yt=(0,n.Z)(d.kP,{target:"ejgjj0i0"})("display:grid;grid-template-columns:repeat(2, max-content);justify-content:flex-end;gap:",(0,z.Z)(1),";"),Kt=qt;var er=r("../node_modules/@sentry/utils/esm/misc.js"),tr=r("./app/components/events/interfaces/spans/index.tsx"),rr=r("./app/components/tagsTable.tsx"),nr=r("./app/types/event.tsx");let ar;r("../node_modules/core-js/modules/es.string.replace.js"),function(e){e.CONSOLE="console",e.NETWORK="network",e.TRACE="trace",e.ISSUES="issues",e.TAGS="tags",e.MEMORY="memory"}(ar||(ar={}));const ir=ar.CONSOLE,sr=function(){const e=location.hash.replace(/^#/,"");return e.toUpperCase()in ar?e:ir};var or=r("./app/utils/useOrganization.tsx"),lr=r("./app/components/searchBar.tsx"),dr=r("./app/views/settings/components/emptyMessage.tsx"),cr=(r("../node_modules/core-js/modules/es.string.replace-all.js"),r("../node_modules/sprintf-js/src/sprintf.js")),ur=r("./app/components/dateTime.tsx"),mr=r("./app/components/events/meta/annotatedText/index.tsx"),pr=r("./app/components/events/meta/metaProxy.tsx");function hr(e){if("object"!=typeof e)return e;try{return JSON.stringify(e)}catch{return e.toString()}}function gr(e){var t;let{breadcrumb:r}=e;const[n,...a]=null===(t=r.data)||void 0===t?void 0:t.arguments,i="string"==typeof n,s=i?cr.sprintf.parse(n).filter((e=>Array.isArray(e))):[],o=s.filter((e=>{let[t]=e;return"%c"===t})).map(((e,t)=>t)),l=a.slice(0,s.length);for(const e of o)l.splice(e,1);const d=a.slice(s.length).map(hr),c=i?(0,cr.vsprintf)(n.replaceAll("%c",""),l):hr(n);return(0,S.tZ)(mr.Z,{meta:(0,pr.xZ)(r,"message"),value:[c,...d].join(" ")})}function vr(e){let{breadcrumb:t,isActive:r=!1,isLast:n,startTimestamp:s=0}=e;const o={error:(0,S.tZ)(_e.bM,{isCircled:!0,size:"xs"}),warning:(0,S.tZ)(_e.FC,{size:"xs"})},{setCurrentTime:l,setCurrentHoverTime:d}=le(),c=Z(t.timestamp||"",s);return(0,S.BX)(a.Fragment,{children:[(0,S.tZ)(Zr,{isLast:n,level:t.level,isActive:r,children:o[t.level]}),(0,S.tZ)(br,{isLast:n,level:t.level,children:(0,S.tZ)(i.Z,{mini:!0,children:(0,S.tZ)(gr,{breadcrumb:t})})}),(0,S.tZ)(yr,{isLast:n,level:t.level,children:(0,S.tZ)(X.Z,{title:(0,S.tZ)(ur.Z,{date:t.timestamp,seconds:!0}),children:(0,S.tZ)("div",{onClick:()=>l(c),onMouseOver:()=>d(c),onMouseOut:()=>d(void 0),children:b(t.timestamp||"",s)})})})]})}gr.displayName="MessageFormatter",vr.displayName="ConsoleMessage";const fr=(0,n.Z)("div",{target:"efmgn2a3"})("background-color:",(e=>["warning","error"].includes(e.level)?e.theme.alert[e.level].backgroundLight:"inherit"),";color:",(e=>["warning","error"].includes(e.level)?e.theme.alert[e.level].iconHoverColor:"inherit"),";",(e=>e.isLast?"":`border-bottom: 1px solid ${e.theme.innerBorder}`),";"),yr=(0,n.Z)(fr,{target:"efmgn2a2"})("padding:",(0,z.Z)(.25)," ",(0,z.Z)(1),";cursor:pointer;"),Zr=(0,n.Z)(fr,{target:"efmgn2a1"})("padding:",(0,z.Z)(.5)," ",(0,z.Z)(1),";border-left:4px solid ",(e=>e.isActive?e.theme.focus:"transparent"),";"),br=(0,n.Z)(fr,{target:"efmgn2a0"})("padding:",(0,z.Z)(.25)," 0;white-space:pre-wrap;word-break:break-word;"),xr=vr,wr=e=>Array.from(new Set(e.map((e=>e.level))));function kr(e){let{breadcrumbs:t,startTimestamp:r=0}=e;const{currentHoverTime:n}=le(),[i,s]=(0,a.useState)(""),[o,l]=(0,a.useState)([]),d=Pe()((e=>s(e)),150),c=(0,a.useMemo)((()=>((e,t,r)=>t||0!==r.length?e.filter((e=>{const n=t.toLowerCase(),a=JSON.stringify(e.data).toLowerCase().includes(n);return r.length>0?a&&r.includes(e.level):a})):e)(t,i,o)),[o,i,t]),u=(0,a.useMemo)((()=>{var e;if(c.length<=0||void 0===n)return[-1,-1];let t=0;const a=c.length-1,i=c[a].timestamp||"";t=n>=Z(i,r)?a:c.findIndex((e=>Z(e.timestamp||"",r)>=(n||0)))-1;const s=b((null===(e=c[t])||void 0===e?void 0:e.timestamp)||"",r);return[c.findIndex((e=>b(e.timestamp||"",r)===s)),t]}),[n,c,r]);return(0,S.BX)(a.Fragment,{children:[(0,S.BX)(Tr,{children:[(0,S.tZ)(Fe.Z,{triggerProps:{prefix:(0,q.t)("Log Level")},multiple:!0,options:wr(t).map((e=>({value:e,label:e}))),onChange:e=>l(e.map((e=>e.value)))}),(0,S.tZ)(lr.Z,{onChange:d,placeholder:(0,q.t)("Search console logs...")})]}),c.length>0?(0,S.tZ)(Nr,{children:c.map(((e,n)=>(0,S.tZ)(xr,{isActive:n>=u[0]&&n<=u[1],startTimestamp:r,isLast:n===t.length-1,breadcrumb:e},n)))}):(0,S.tZ)(Sr,{title:(0,q.t)("No results found.")})]})}kr.displayName="Console";const Tr=(0,n.Z)("div",{target:"e1difbsh2"})("display:grid;gap:",(0,z.Z)(1),";grid-template-columns:max-content 1fr;margin-bottom:",(0,z.Z)(1),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){margin-top:",(0,z.Z)(1),";}"),Sr=(0,n.Z)(dr.Z,{target:"e1difbsh1"})({name:"1h3rtzg",styles:"align-items:center"}),Nr=(0,n.Z)(u.s_,{target:"e1difbsh0"})("display:grid;grid-template-columns:max-content auto max-content;width:100%;font-family:",(e=>e.theme.text.familyMono),";font-size:0.8em;"),Ir=kr;var Cr=r("../node_modules/lodash/keyBy.js"),Er=r.n(Cr),jr=r("./app/components/eventOrGroupExtraDetails.tsx"),Mr=r("./app/components/eventOrGroupHeader.tsx"),Rr=r("./app/components/stream/group.tsx"),zr=r("./app/components/stream/groupChart.tsx"),Pr=r("./app/utils/discover/discoverQuery.tsx"),Ar=r("./app/utils/discover/eventView.tsx"),Lr=r("./app/utils/theme.tsx"),Br=r("./app/utils/useLocation.tsx"),Fr=r("./app/utils/useMedia.tsx"),_r=r("./app/utils/usePageFilters.tsx");const Or=[(0,q.t)("Issue"),(0,q.t)("Graph"),(0,q.t)("Events"),(0,q.t)("Users")];function Hr(e){const t=(0,or.Z)(),r=(0,Br.T)(),n=(0,It.Z)(),{selection:i}=(0,_r.Z)(),s=(0,Fr.Z)(`(min-width: ${Lr.ZP.breakpoints.large})`),[o,l]=(0,a.useState)({}),[d,c]=(0,a.useState)({}),u=(0,a.useCallback)((async()=>{let r;try{r=await n.requestPromise(`/organizations/${t.slug}/issues/`,{includeAllArgs:!0,query:{project:e.projectId,query:`replayId:${e.replayId}`}}),l(Er()(r[0],"id"))}catch(e){return void l({})}try{var a;const i=await n.requestPromise(`/organizations/${t.slug}/issues-stats/`,{includeAllArgs:!0,query:{project:e.projectId,groups:null===(a=r[0])||void 0===a?void 0:a.map((e=>e.id)),query:`replayId:${e.replayId}`}});c(Er()(i[0],"id"))}catch(e){c({})}}),[n,t.slug,e.replayId,e.projectId]);(0,a.useEffect)((()=>{u()}),[u]);const p=e=>{const r=o[e["issue.id"]],n=d[e["issue.id"]];return r?(0,S.BX)(a.Fragment,{children:[(0,S.BX)(Ur,{children:[(0,S.tZ)(Mr.Z,{includeLink:!0,data:r,organization:t,size:"normal"}),(0,S.tZ)(jr.Z,{data:{...r,firstSeen:(null==n?void 0:n.firstSeen)||"",lastSeen:(null==n?void 0:n.lastSeen)||""}})]}),s&&(0,S.tZ)($r,{children:null!=n&&n.stats?(0,S.tZ)(zr.Z,{statsPeriod:Rr.g,data:n,showSecondaryPoints:!0,showMarkLine:!0}):(0,S.tZ)(m.Z,{height:"44px"})}),(0,S.tZ)(Dr,{children:null!=n&&n.count?null==n?void 0:n.count:(0,S.tZ)(m.Z,{height:"24px"})}),(0,S.tZ)(Dr,{children:null!=n&&n.userCount?null==n?void 0:n.userCount:(0,S.tZ)(m.Z,{height:"24px"})})]},r.id):null};return(0,S.tZ)(Pr.Z,{eventView:(()=>{const t={id:"",name:"",version:2,fields:["count(issue)","issue"],environment:i.environments,projects:i.projects,query:`replayId:${e.replayId} AND event.type:error`};return Ar.ZP.fromNewQueryWithLocation(t,r)})(),location:r,orgSlug:t.slug,limit:15,children:e=>{var t,r;return(0,S.tZ)(Xr,{isEmpty:0===(null===(t=e.tableData)||void 0===t?void 0:t.data.length),emptyMessage:(0,q.t)("No related Issues found."),isLoading:e.isLoading,headers:s?Or:Or.filter((e=>e!==(0,q.t)("Graph"))),children:(null===(r=e.tableData)||void 0===r?void 0:r.data.map(p))||null})}})}Hr.displayName="IssueList";const $r=(0,n.Z)("div",{target:"epxicfm3"})("width:200px;margin-left:-",(0,z.Z)(2),";padding-left:",(0,z.Z)(0),";"),Dr=(0,n.Z)("div",{target:"epxicfm2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ur=(0,n.Z)("div",{target:"epxicfm1"})({name:"p03qob",styles:"overflow:hidden;line-height:normal"}),Xr=(0,n.Z)(u.KB,{target:"epxicfm0"})("overflow:visible;grid-template-columns:minmax(1fr, max-content) repeat(3, max-content);@media (max-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:minmax(0, 1fr) repeat(2, max-content);}"),qr=Hr;var Vr=r("./app/components/charts/areaChart.tsx"),Gr=r("./app/components/charts/components/grid.tsx"),Wr=r("./app/components/charts/components/tooltip.tsx"),Jr=r("./app/components/charts/components/xAxis.tsx"),Qr=r("./app/components/charts/components/yAxis.tsx"),Yr=r("./app/components/emptyStateWarning.tsx"),Kr=r("./app/utils.tsx"),en=r("./app/utils/dates.tsx");const tn=e=>(0,en.L0)(1e3*e,"MMM D, YYYY hh:mm:ss A z",{local:!1});function rn(e){let{forwardedRef:t,memorySpans:r,startTimestamp:n=0,setCurrentTime:a,setCurrentHoverTime:i}=e;const s=(0,c.a)();if(r.length<=0)return(0,S.tZ)(Yr.Z,{withIcon:!1,small:!0,children:(0,q.t)("No memory metrics found")});const o={grid:(0,Gr.Z)({top:"40px",left:(0,z.Z)(1),right:(0,z.Z)(1)}),tooltip:(0,Wr.Z)({trigger:"axis",formatter:e=>['<div class="tooltip-series">',...e.map((e=>`\n            <div>\n              <span className="tooltip-label">${e.marker}<strong>${e.seriesName}</strong></span>\n          ${(0,Kr.F)(e.data[1])}\n            </div>\n          `)),"</div>",`<div class="tooltip-date" style="display: inline-block; width: max-content;">${(0,q.t)("Span Time")}:\n            ${tn(e[0].axisValue)}\n          </div>`,`<div class="tooltip-date" style="border: none;">Relative Time:\n            ${b(v()(1e3*e[0].axisValue).toDate().toUTCString(),n)}\n          </div>`,'<div class="tooltip-arrow"></div>'].join("")}),xAxis:(0,Jr.Z)({type:"time",axisLabel:{formatter:tn},theme:s}),yAxis:(0,Qr.Z)({type:"value",name:(0,q.t)("Heap Size"),theme:s,nameTextStyle:{padding:8,fontSize:s.fontSizeLarge,fontWeight:600,lineHeight:1.2,color:s.gray300},minInterval:1048576,maxInterval:Math.pow(1024,4),axisLabel:{formatter:e=>(0,Kr.F)(e,0)}}),onMouseOver:e=>{let{data:t}=e;t[0]&&i(1e3*(t[0]-n))},onMouseOut:()=>{i(void 0)},onClick:e=>{let{data:t}=e;t.value&&a(1e3*(t.value-n))}},l=[{seriesName:(0,q.t)("Used Heap Memory"),data:r.map((e=>({value:e.data.memory.usedJSHeapSize,name:e.endTimestamp}))),stack:"heap-memory",lineStyle:{opacity:.75,width:1}},{seriesName:(0,q.t)("Free Heap Memory"),data:r.map((e=>({value:e.data.memory.totalJSHeapSize-e.data.memory.usedJSHeapSize,name:e.endTimestamp}))),stack:"heap-memory",lineStyle:{opacity:.75,width:1}},{id:"currentTime",seriesName:(0,q.t)("Current player time"),data:[],markLine:{symbol:["",""],data:[],label:{show:!1},lineStyle:{type:"solid",color:s.purple300,width:2}}},{id:"hoverTime",seriesName:(0,q.t)("Hover player time"),data:[],markLine:{symbol:["",""],data:[],label:{show:!1},lineStyle:{type:"solid",color:s.purple200,width:2}}}];return(0,S.tZ)(nn,{children:(0,S.tZ)(Vr.T,{forwardedRef:t,series:l,...o})})}rn.displayName="MemoryChart";const nn=(0,n.Z)("div",{target:"e1gg6p480"})("margin-top:",(0,z.Z)(2),";margin-bottom:",(0,z.Z)(3),";border-radius:",(0,z.Z)(.5),";border:1px solid ",(e=>e.theme.border),";"),an=(0,a.memo)((0,a.forwardRef)(((e,t)=>(0,S.tZ)(rn,{forwardedRef:t,...e}))));function sn(e){let{currentTime:t,currentHoverTime:r,startTimestamp:n=0,...i}=e;const s=(0,a.useRef)(null),o=(0,c.a)();return(0,a.useEffect)((()=>{s.current&&s.current.getEchartsInstance().setOption({series:[{id:"currentTime",markLine:{data:[{xAxis:t/1e3+n}]}}]})}),[t,n,o]),(0,a.useEffect)((()=>{s.current&&s.current.getEchartsInstance().setOption({series:[{id:"hoverTime",markLine:{data:[...r?[{xAxis:r/1e3+n}]:[]]}}]})}),[r,n,o]),(0,S.tZ)(an,{ref:s,startTimestamp:n,...i})}sn.displayName="MemoryChartContainer";const on=sn;var ln=r("./app/components/loadingError.tsx"),dn=r("./app/components/loadingIndicator.tsx"),cn=r("./app/constants/pageFilters.tsx"),un=r("./app/utils/discover/genericDiscoverQuery.tsx"),mn=r("./app/utils/performance/quickTrace/utils.tsx"),pn=r("./app/views/performance/traceDetails/traceView.tsx");const hn=Object.freeze({error:null,isLoading:!0,pageLinks:null,traceEventView:null,traces:null});function gn(e){var t;let{event:r,organization:n}=e;const[i,s]=(0,a.useState)(hn),o=(0,It.Z)(),{location:l,params:{eventSlug:d,orgId:c}}=(0,Rt.s)(),[,u]=d.split(":");return(0,a.useEffect)((()=>(async function(){const e=(0,en.v5)(1e3*r.startTimestamp),t=(0,en.v5)(1e3*r.endTimestamp),n=Ar.ZP.fromSavedQuery({id:void 0,name:`Traces in replay ${u}`,fields:["trace","count(trace)","min(timestamp)"],orderby:"min_timestamp",query:`replayId:${u} !title:"sentry-replay-event*"`,projects:[cn.mP],version:2,start:e,end:t});try{const[r,,a]=await(0,un.AA)(o,`/organizations/${c}/events/`,n.getEventsAPIPayload(l)),i=r.data.map((e=>{let{trace:t}=e;return t})).filter((e=>e)),d=await Promise.all(i.map((r=>(0,un.AA)(o,`/organizations/${c}/events-trace/${r}/`,(0,mn.eF)({eventView:(0,mn._Z)({start:e,end:t}),location:l})))));s((e=>{var t;return{isLoading:!1,error:null,traceEventView:n,pageLinks:null!==(t=null==a?void 0:a.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,traces:d.flatMap((e=>{let[t]=e;return t}))||[]}}))}catch(e){s({isLoading:!1,error:e,pageLinks:null,traceEventView:null,traces:null})}}(),()=>{})),[o,u,c,l,r.startTimestamp,r.endTimestamp]),i.isLoading?(0,S.tZ)(dn.Z,{}):i.error||!i.traceEventView?(0,S.tZ)(ln.Z,{}):null!==(t=i.traces)&&void 0!==t&&t.length?(0,S.tZ)(pn.Z,{meta:null,traces:i.traces,location:l,organization:n,traceEventView:i.traceEventView,traceSlug:"Replay"}):(0,S.tZ)(Yr.Z,{withIcon:!1,small:!0,children:(0,q.t)("No traces found")})}gn.displayName="Trace";const vn=function(e){let{replay:t}=e;const r=sr(),{currentTime:n,currentHoverTime:i,setCurrentTime:s,setCurrentHoverTime:o}=le(),l=(0,or.Z)(),d=(0,a.useMemo)((()=>null==t?void 0:t.getRawSpans().filter(t.isMemorySpan)),[t]);if(!t||!d)return(0,S.tZ)(m.Z,{height:"150px"});const c=t.getEvent();switch(r){case"console":const e=function(e,t){return e.filter(P.T5).filter((e=>t.includes(e.category||"")))}(null==t?void 0:t.getRawCrumbs(),["console"]);return(0,S.tZ)(Ir,{breadcrumbs:null!=e?e:[],startTimestamp:null==c?void 0:c.startTimestamp});case"network":{const e={type:nr.UZ.SPANS,data:t.getRawSpans().filter(t.isNotMemorySpan).map((e=>{let{startTimestamp:t,endTimestamp:r,...n}=e;return{...n,timestamp:r,start_timestamp:t,span_id:(0,er.DM)(),parent_span_id:"replay_network_trace"}}))},r={...c,contexts:{trace:{type:"trace",op:"Network",description:"WIP",span_id:"replay_network_trace",status:"ok"}},entries:[e]};return(0,S.tZ)(tr.Z,{organization:l,event:r})}case"trace":return(0,S.tZ)(gn,{organization:l,event:c});case"issues":return(0,S.tZ)(qr,{replayId:c.id,projectId:c.projectID});case"tags":return(0,S.tZ)(rr.Z,{generateUrl:()=>"",event:c,query:""});case"memory":return(0,S.tZ)(on,{currentTime:n,currentHoverTime:i,memorySpans:d,setCurrentTime:s,setCurrentHoverTime:o,startTimestamp:null==c?void 0:c.startTimestamp});default:return null}};var fn=r("./app/components/navTabs.tsx");const yn=[(0,q.t)("Console"),(0,q.t)("Network"),(0,q.t)("Trace"),(0,q.t)("Issues"),(0,q.t)("Tags"),(0,q.t)("Memory")];function Zn(e){let{}=e;const t=sr();return(0,S.tZ)(fn.Z,{underlined:!0,children:yn.map((e=>(0,S.tZ)("li",{className:t===e.toLowerCase()?"active":"",children:(0,S.tZ)("a",{href:`#${e.toLowerCase()}`,children:e})},e)))})}Zn.displayName="FocusTabs";const bn=Zn,xn=(0,a.memo)((e=>{let{action:t}=e;const{title:r,description:n}=function(e){var t,r,n,a,i,s,o;switch(e.type){case P.kS.USER:case P.kS.UI:return{title:(0,q.t)("UI Click"),description:`${e.category}: ${e.message}`};case P.kS.NAVIGATION:return{title:(0,q.t)("Navigation"),description:`${e.category}: ${null!==(t=null===(r=e.data)||void 0===r?void 0:r.from)&&void 0!==t?t:""} => ${null!==(n=null===(a=e.data)||void 0===a?void 0:a.to)&&void 0!==n?n:""}`};case P.kS.ERROR:return{title:(0,q.t)("Error"),description:`${null===(i=e.data)||void 0===i?void 0:i.type}: ${null===(s=e.data)||void 0===s?void 0:s.value}`};case P.kS.INIT:return{title:(0,q.t)("Replay Start"),description:null===(o=e.data)||void 0===o?void 0:o.url};default:return{title:(0,q.t)("Default"),description:""}}}(t);return(0,S.tZ)(X.Z,{title:n,disabled:!n,skipWrapper:!0,disableForVisualTest:!0,children:(0,S.tZ)(wn,{children:r})})})),wn=(0,n.Z)("div",{target:"eigh5ro0"})("color:",(e=>e.theme.headingColor),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;text-transform:capitalize;"),kn=xn,Tn=e=>{let{relativeTime:t,timestamp:r}=e;return r&&t?(0,S.tZ)(X.Z,{title:(0,S.tZ)(ur.Z,{date:r}),disabled:!r,skipWrapper:!0,disableForVisualTest:!0,underlineColor:"gray300",showUnderline:!0,children:(0,S.tZ)(Sn,{children:b(r,t)})}):(0,S.tZ)("div",{})};Tn.displayName="PlayerRelativeTime";const Sn=(0,n.Z)("p",{target:"e1g9xaze0"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:normal;"),Nn=Tn;function In(e){let{number:t}=e;return(0,S.tZ)(a.Fragment,{children:[...Array(t)].map(((e,t)=>(0,S.tZ)(Ln,{height:"40px"},t)))})}In.displayName="CrumbPlaceholder";const Cn=[P.kS.ERROR,P.kS.INIT,P.kS.NAVIGATION,P.kS.UI,P.kS.USER];function En(e){let{event:t,crumbs:r}=e;const{setCurrentTime:n,setCurrentHoverTime:i,currentHoverTime:s,currentTime:o,highlight:l,removeHighlight:d,clearAllHighlights:c}=le(),u=(null==t?void 0:t.startTimestamp)||0,m=(null==r?void 0:r.filter((e=>Cn.includes(e.type))))||[],p=Boolean(t),h=Oe({crumbs:m,targetTimestampMs:1e3*u+o,allowExact:!0}),g=void 0!==s?Oe({crumbs:m,targetTimestampMs:1e3*u+(null!=s?s:0),allowExact:!0}):void 0,v=(0,a.useCallback)((e=>{var t;u&&i(Z(null!==(t=e.timestamp)&&void 0!==t?t:"",u)),e.data&&"nodeId"in e.data&&(c(),l({nodeId:e.data.nodeId}))}),[i,u,l,c]),f=(0,a.useCallback)((e=>{i(void 0),e.data&&"nodeId"in e.data&&d({nodeId:e.data.nodeId})}),[i,d]);return(0,S.BX)(jn,{children:[(0,S.tZ)(Mn,{children:(0,q.t)("Event Chapters")}),(0,S.BX)(Rn,{children:[!p&&(0,S.tZ)(In,{number:4}),p&&m.map((e=>(0,S.tZ)(zn,{onMouseEnter:()=>v(e),onMouseLeave:()=>f(e),children:(0,S.BX)(Pn,{isHovered:(null==g?void 0:g.id)===e.id,isSelected:(null==h?void 0:h.id)===e.id,onClick:()=>void 0!==e.timestamp?n(Z(e.timestamp,u)):null,children:[(0,S.BX)(An,{children:[(0,S.tZ)(j.Z,{type:e.type,color:e.color,description:e.description}),(0,S.tZ)(kn,{action:e})]}),(0,S.tZ)(Nn,{relativeTime:u,timestamp:e.timestamp})]})},e.id)))]})]})}En.displayName="UserActionsNavigator";const jn=(0,n.Z)(u.s_,{target:"e196mm4q6"})("width:100%;display:grid;grid-template-rows:auto 1fr;height:0;min-height:100%;@media only screen and (max-width: ",(e=>e.theme.breakpoints.large),"){height:fit-content;max-height:400px;margin-top:",(0,z.Z)(2),";}"),Mn=(0,n.Z)(u.V9,{target:"e196mm4q5"})("background-color:",(e=>e.theme.white),";border-bottom:none;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray300),";text-transform:capitalize;padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2)," ",(0,z.Z)(.5),";"),Rn=(0,n.Z)(u.N,{target:"e196mm4q4"})({name:"umwchj",styles:"overflow-y:auto"}),zn=(0,n.Z)(u.Lv,{target:"e196mm4q3"})("display:block;padding:",(0,z.Z)(0),";cursor:pointer;"),Pn=(0,n.Z)("button",{target:"e196mm4q2"})("display:inline-flex;width:100%;border:none;background:transparent;justify-content:space-between;align-items:center;border-left:4px solid transparent;padding:",(0,z.Z)(1)," ",(0,z.Z)(1.5),";",(e=>e.isHovered&&`background: ${e.theme.surface400};`)," ",(e=>e.isSelected&&`border-left: 4px solid ${e.theme.purple300};`),";"),An=(0,n.Z)("div",{target:"e196mm4q1"})("display:flex;align-items:center;gap:",(0,z.Z)(1),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.gray500),";"),Ln=(0,n.Z)(m.Z,{target:"e196mm4q0"})("margin:",(0,z.Z)(1)," ",(0,z.Z)(1.5),";width:auto;"),Bn=En;function Fn(){const{location:e,params:{eventSlug:t,orgId:r}}=(0,Rt.s)(),{t:n}=e.query,{fetchError:l,fetching:c,onRetry:u,replay:m}=function(e){let{eventSlug:t,orgId:r}=e;const[n,i]=t.split(":"),s=(0,It.Z)(),[o,l]=(0,a.useState)(Mt),d=(0,a.useCallback)((()=>s.requestPromise(`/organizations/${r}/events/${t}/`)),[s,r,t]),c=(0,a.useCallback)((async()=>{const e=(await s.requestPromise(`/projects/${r}/${n}/events/${i}/attachments/`)).filter(jt);return(await Promise.all(e.map((async e=>{const t=await s.requestPromise(`/api/0/projects/${r}/${n}/events/${i}/attachments/${e.id}/?download`,{includeAllArgs:!0});try{return JSON.parse(t[0])}catch(e){}try{var a;const e=await(null===(a=t[2])||void 0===a?void 0:a.rawResponse.blob()),r=await(null==e?void 0:e.arrayBuffer()),n=function(e){const t={breadcrumbs:[],replaySpans:[],recording:[]};return e.forEach((e=>{var r,n;"performanceSpan"===(null===(r=e.data)||void 0===r?void 0:r.tag)?t.replaySpans.push(e.data.payload):"breadcrumb"===(null==e||null===(n=e.data)||void 0===n?void 0:n.tag)?t.breadcrumbs.push(e.data.payload):t.recording.push(e)})),t}(JSON.parse((0,kt.rr)(r,{to:"string"})));return n}catch(e){return{}}})))).reduce(((e,t)=>(Object.entries(t).forEach((t=>{let[r,n]=t;if(!Array.isArray(n))throw new Error("Invalid value");e[r]=(e[r]||[]).concat(n)})),e)),{})}),[s,i,r,n]),{isLoading:u,data:m}=function(e){let{replayId:t,...r}=e;const n=(0,a.useMemo)((()=>({query:`replayId:${t} AND event.type:error`,fields:["event.id","error.value","timestamp","error.type","issue.id"],environment:[],projects:[]})),[t]);return(0,Ct.Z)({discoverQuery:n,...r})}({replayId:i});(0,a.useEffect)((()=>{u||l((e=>({...e,fetching:e.fetching||u,isErrorsFetching:u,errors:m})))}),[u,m]);const p=(0,a.useCallback)((async()=>{l(Mt);try{const[e,t]=await Promise.all([d(),c()]);l((r=>({...r,event:e,fetchError:void 0,fetching:r.isErrorsFetching||!1,rrwebEvents:t.recording,spans:t.replaySpans,breadcrumbs:t.breadcrumbs})))}catch(e){Y.Tb(e),l({...Mt,fetchError:e,fetching:!1})}}),[d,c]);(0,a.useEffect)((()=>{p()}),[p]);const h=(0,a.useMemo)((()=>Nt.factory({event:o.event,errors:o.errors,rrwebEvents:o.rrwebEvents,breadcrumbs:o.breadcrumbs,spans:o.spans})),[o.event,o.rrwebEvents,o.breadcrumbs,o.spans,o.errors]);return{fetchError:o.fetchError,fetching:o.fetching,onRetry:p,replay:h}}({eventSlug:t,orgId:r}),{ref:p,isFullscreen:h,toggle:g}=$e();return c||m?!c&&m&&m.getRRWebEvents().length<2?(0,S.tZ)(Kt,{event:m.getEvent(),orgId:r,children:(0,S.tZ)(s.Z,{onRetry:u,hideSupportLinks:!0,heading:(0,q.t)("Expected two or more replay events"),message:(0,S.BX)(a.Fragment,{children:[(0,S.tZ)("p",{children:(0,q.t)("This Replay may not have captured any user actions.")}),(0,S.tZ)("p",{children:(0,q.t)("Or there may be an issue loading the actions from the server, click to try loading the Replay again.")})]})})}):(0,S.tZ)(oe,{replay:m,initialTimeOffset:n,children:(0,S.tZ)(Kt,{event:null==m?void 0:m.getEvent(),orgId:r,crumbs:null==m?void 0:m.getRawCrumbs(),children:(0,S.BX)(d.uT,{children:[(0,S.tZ)(d.or,{ref:p,children:(0,S.tZ)(xt,{toggleFullscreen:g,isFullscreen:h})}),(0,S.tZ)(d.MF,{children:(0,S.tZ)(i.Z,{children:(0,S.tZ)(Bn,{crumbs:null==m?void 0:m.getRawCrumbs(),event:null==m?void 0:m.getEvent()})})}),(0,S.BX)(_n,{fullWidth:!0,children:[(0,S.tZ)(i.Z,{children:(0,S.tZ)(Re,{})}),(0,S.tZ)(bn,{})]}),(0,S.tZ)(On,{fullWidth:!0,children:(0,S.tZ)(i.Z,{children:(0,S.tZ)(vn,{replay:m})})})]})})}):(console.log({fetching:c,fetchError:l}),(0,S.tZ)(Kt,{orgId:r,children:(0,S.tZ)(wt.JH,{children:(0,S.tZ)(o.Z,{})})}))}Fn.displayName="ReplayDetails";const _n=(0,n.Z)(d.or,{target:"erh0irb1"})("position:sticky;top:0;z-index:",(e=>e.theme.zIndex.header),";margin:-",(0,z.Z)(1.5)," -",(0,z.Z)(4)," -",(0,z.Z)(3),";padding:",(0,z.Z)(1.5)," ",(0,z.Z)(4)," 0;max-width:none;background:",(e=>e.theme.background),";"),On=(0,n.Z)(d.or,{target:"erh0irb0"})(l.gM,"{position:relative;}"),Hn=Fn}}]);
//# sourceMappingURL=../sourcemaps/app_views_replays_details_tsx.069c3d29705e0f3e2707f0678d10f3e7.js.map