{"version":3,"file":"chunks/app_actionCreators_events_tsx-app_components_charts_loadingPanel_tsx-app_utils_discover_gener-671070.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/actionCreators/events.tsx","webpack:///./app/components/activity/item/avatar.tsx","webpack:///./app/components/charts/areaChart.tsx","webpack:///./app/components/charts/series/areaSeries.tsx","webpack:///./app/components/charts/components/visualMap.tsx","webpack:///./app/components/charts/lineChart.tsx","webpack:///./app/components/charts/loadingPanel.tsx","webpack:///./app/components/charts/worldMapChart.tsx","webpack:///./app/components/charts/series/mapSeries.tsx","webpack:///./app/components/loadingMask.tsx","webpack:///./app/utils/discover/charts.tsx","webpack:///./app/utils/discover/genericDiscoverQuery.tsx","webpack:///./app/utils/getPeriod.tsx","webpack:///./app/utils/performance/contexts/performanceEventViewContext.tsx","webpack:///./app/utils/performance/contexts/utils.tsx","webpack:///./app/views/eventsV2/backgroundSpace.tsx","webpack:///./app/views/eventsV2/banner.tsx","webpack:///./app/components/loading/loadingContainer.tsx","webpack:///./app/views/eventsV2/miniGraph.tsx","webpack:///./app/views/eventsV2/querycard.tsx","webpack:///./app/views/eventsV2/queryList.tsx","webpack:///./app/views/eventsV2/landing.tsx","webpack:///../node_modules/echarts/lib/component/helper/RoamController.js","webpack:///../node_modules/lodash/negate.js","webpack:///../node_modules/lodash/omitBy.js"],"sourcesContent":["import {LocationDescriptor} from 'history';\nimport pick from 'lodash/pick';\n\nimport {Client} from 'sentry/api';\nimport {canIncludePreviousPeriod} from 'sentry/components/charts/utils';\nimport {\n  DateString,\n  EventsStats,\n  MultiSeriesEventsStats,\n  OrganizationSummary,\n} from 'sentry/types';\nimport {LocationQuery} from 'sentry/utils/discover/eventView';\nimport {getPeriod} from 'sentry/utils/getPeriod';\nimport {PERFORMANCE_URL_PARAM} from 'sentry/utils/performance/constants';\nimport {QueryBatching} from 'sentry/utils/performance/contexts/genericQueryBatcher';\n\ntype Options = {\n  organization: OrganizationSummary;\n  partial: boolean;\n  comparisonDelta?: number;\n  end?: DateString;\n  environment?: Readonly<string[]>;\n  excludeOther?: boolean;\n  field?: string[];\n  generatePathname?: (org: OrganizationSummary) => string;\n  includePrevious?: boolean;\n  interval?: string;\n  limit?: number;\n  orderby?: string;\n  period?: string | null;\n  project?: Readonly<number[]>;\n  query?: string;\n  queryBatching?: QueryBatching;\n  queryExtras?: Record<string, string>;\n  referrer?: string;\n  start?: DateString;\n  team?: Readonly<string | string[]>;\n  topEvents?: number;\n  userModified?: string;\n  withoutZerofill?: boolean;\n  yAxis?: string | string[];\n};\n\n/**\n * Make requests to `events-stats` endpoint\n *\n * @param {Object} api API client instance\n * @param {Object} options Request parameters\n * @param {Object} options.organization Organization object\n * @param {Number[]} options.project List of project ids\n * @param {String[]} options.environment List of environments to query for\n * @param {Boolean} options.excludeOther Exclude the \"Other\" series when making a topEvents query\n * @param {String[]} options.team List of teams to query for\n * @param {String} options.period Time period to query for, in the format: <integer><units> where units are \"d\" or \"h\"\n * @param {String} options.interval Time interval to group results in, in the format: <integer><units> where units are \"d\", \"h\", \"m\", \"s\"\n * @param {Number} options.comparisonDelta Comparison delta for change alert event stats to include comparison stats\n * @param {Boolean} options.includePrevious Should request also return reqsults for previous period?\n * @param {Number} options.limit The number of rows to return\n * @param {String} options.query Search query\n * @param {QueryBatching} options.queryBatching A container for batching functions from a provider\n * @param {Record<string, string>} options.queryExtras A list of extra query parameters\n * @param {(org: OrganizationSummary) => string} options.generatePathname A function that returns an override for the pathname\n */\nexport const doEventsRequest = (\n  api: Client,\n  {\n    organization,\n    project,\n    environment,\n    team,\n    period,\n    start,\n    end,\n    interval,\n    comparisonDelta,\n    includePrevious,\n    query,\n    yAxis,\n    field,\n    topEvents,\n    orderby,\n    partial,\n    withoutZerofill,\n    referrer,\n    queryBatching,\n    generatePathname,\n    queryExtras,\n    excludeOther,\n    userModified,\n  }: Options\n): Promise<EventsStats | MultiSeriesEventsStats> => {\n  const pathname =\n    generatePathname?.(organization) ??\n    `/organizations/${organization.slug}/events-stats/`;\n\n  const shouldDoublePeriod = canIncludePreviousPeriod(includePrevious, period);\n  const urlQuery = Object.fromEntries(\n    Object.entries({\n      interval,\n      comparisonDelta,\n      project,\n      environment,\n      team,\n      query,\n      yAxis,\n      field,\n      topEvents,\n      orderby,\n      partial: partial ? '1' : undefined,\n      withoutZerofill: withoutZerofill ? '1' : undefined,\n      referrer: referrer ? referrer : 'api.organization-event-stats',\n      excludeOther: excludeOther ? '1' : undefined,\n      user_modified: pathname.includes('events-stats') ? userModified : undefined,\n    }).filter(([, value]) => typeof value !== 'undefined')\n  );\n\n  // Doubling period for absolute dates is not accurate unless starting and\n  // ending times are the same (at least for daily intervals). This is\n  // the tradeoff for now.\n  const periodObj = getPeriod({period, start, end}, {shouldDoublePeriod});\n\n  const queryObject = {\n    query: {\n      ...urlQuery,\n      ...periodObj,\n      ...queryExtras,\n    },\n  };\n\n  if (queryBatching?.batchRequest) {\n    return queryBatching.batchRequest(api, pathname, queryObject);\n  }\n\n  return api.requestPromise(pathname, queryObject);\n};\n\nexport type EventQuery = {\n  field: string[];\n  query: string;\n  environment?: string[];\n  equation?: string[];\n  noPagination?: boolean;\n  per_page?: number;\n  project?: string | string[];\n  referrer?: string;\n  sort?: string | string[];\n  team?: string | string[];\n};\n\nexport type TagSegment = {\n  count: number;\n  name: string;\n  url: LocationDescriptor;\n  value: string;\n  isOther?: boolean;\n  key?: string;\n};\n\nexport type Tag = {\n  key: string;\n  topValues: Array<TagSegment>;\n};\n\n/**\n * Fetches tag facets for a query\n */\nexport function fetchTagFacets(\n  api: Client,\n  orgSlug: string,\n  query: EventQuery\n): Promise<Tag[]> {\n  const urlParams = pick(query, Object.values(PERFORMANCE_URL_PARAM));\n\n  const queryOption = {...urlParams, query: query.query};\n\n  return api.requestPromise(`/organizations/${orgSlug}/events-facets/`, {\n    query: queryOption,\n  });\n}\n\n/**\n * Fetches total count of events for a given query\n */\nexport function fetchTotalCount(\n  api: Client,\n  orgSlug: String,\n  query: EventQuery & LocationQuery\n): Promise<number> {\n  const urlParams = pick(query, Object.values(PERFORMANCE_URL_PARAM));\n\n  const queryOption = {...urlParams, query: query.query};\n\n  type Response = {\n    count: number;\n  };\n\n  return api\n    .requestPromise(`/organizations/${orgSlug}/events-meta/`, {\n      query: queryOption,\n    })\n    .then((res: Response) => res.count);\n}\n","import styled from '@emotion/styled';\n\nimport UserAvatar from 'sentry/components/avatar/userAvatar';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconSentry} from 'sentry/icons';\nimport {AvatarUser} from 'sentry/types';\n\ntype Props = {\n  type: 'system' | 'user';\n  className?: string;\n  size?: number;\n  user?: AvatarUser;\n};\n\nfunction ActivityAvatar({className, type, user, size = 38}: Props) {\n  if (user) {\n    return <UserAvatar user={user} size={size} className={className} />;\n  }\n\n  if (type === 'system') {\n    // Return Sentry avatar\n    return (\n      <SystemAvatar className={className} size={size}>\n        <StyledIconSentry size=\"md\" />\n      </SystemAvatar>\n    );\n  }\n\n  return (\n    <Placeholder\n      className={className}\n      width={`${size}px`}\n      height={`${size}px`}\n      shape=\"circle\"\n    />\n  );\n}\n\nexport default ActivityAvatar;\n\ntype SystemAvatarProps = {\n  size: number;\n};\n\nconst SystemAvatar = styled('span')<SystemAvatarProps>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${p => p.size}px;\n  height: ${p => p.size}px;\n  background-color: ${p => p.theme.textColor};\n  color: ${p => p.theme.background};\n  border-radius: 50%;\n`;\n\nconst StyledIconSentry = styled(IconSentry)`\n  padding-bottom: 3px;\n`;\n","import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport AreaSeries from './series/areaSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type AreaChartSeries = Series & Omit<LineSeriesOption, 'data' | 'name'>;\n\nexport interface AreaChartProps extends Omit<ChartProps, 'series'> {\n  series: AreaChartSeries[];\n  stacked?: boolean;\n}\n\nexport function AreaChart({series, stacked, colors, ...props}: AreaChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      data-test-id=\"area-chart\"\n      colors={colors}\n      series={series.map(({seriesName, data, ...otherSeriesProps}, i) =>\n        AreaSeries({\n          stack: stacked ? 'area' : undefined,\n          name: seriesName,\n          data: data.map(({name, value}) => [name, value]),\n          lineStyle: {\n            color: colors?.[i],\n            opacity: 1,\n            width: 0.4,\n          },\n          areaStyle: {\n            color: colors?.[i],\n            opacity: 1.0,\n          },\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n          ...otherSeriesProps,\n        })\n      )}\n    />\n  );\n}\n","import type {LineSeriesOption} from 'echarts';\n\nimport LineSeries from 'sentry/components/charts/series/lineSeries';\n\nexport default function AreaSeries(props: LineSeriesOption = {}): LineSeriesOption {\n  return LineSeries({\n    ...props,\n  });\n}\n","import 'echarts/lib/component/visualMap';\n\nimport type {VisualMapComponentOption} from 'echarts';\n\nexport default function VisualMap(\n  visualMap: VisualMapComponentOption\n): VisualMapComponentOption {\n  return visualMap;\n}\n","import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport LineSeries from './series/lineSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type LineChartSeries = Series &\n  Omit<LineSeriesOption, 'data' | 'name'> & {\n    dataArray?: LineSeriesOption['data'];\n  };\n\nexport interface LineChartProps extends Omit<ChartProps, 'series'> {\n  series: LineChartSeries[];\n  seriesOptions?: LineSeriesOption;\n}\n\nexport function LineChart({series, seriesOptions, ...props}: LineChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      series={series.map(({seriesName, data, dataArray, ...options}) =>\n        LineSeries({\n          ...seriesOptions,\n          ...options,\n          name: seriesName,\n          data: dataArray || data?.map(({value, name}) => [name, value]),\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n        })\n      )}\n    />\n  );\n}\n","import styled from '@emotion/styled';\n\nimport LoadingMask from 'sentry/components/loadingMask';\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  height?: string;\n}\n\nconst LoadingPanel = styled(({height: _height, ...props}: Props) => (\n  <div {...props}>\n    <LoadingMask />\n  </div>\n))`\n  flex: 1;\n  flex-shrink: 0;\n  overflow: hidden;\n  height: ${p => p.height};\n  position: relative;\n  border-color: transparent;\n  margin-bottom: 0;\n`;\n\nLoadingPanel.defaultProps = {\n  height: '200px',\n};\n\nexport default LoadingPanel;\n","import {useEffect, useState} from 'react';\nimport {useTheme} from '@emotion/react';\nimport type {MapSeriesOption, TooltipComponentOption} from 'echarts';\nimport * as echarts from 'echarts/core';\nimport max from 'lodash/max';\n\nimport {Series, SeriesDataUnit} from 'sentry/types/echarts';\n\nimport VisualMap from './components/visualMap';\nimport MapSeries from './series/mapSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\ntype MapChartSeriesDataUnit = Omit<SeriesDataUnit, 'name' | 'itemStyle'> & {\n  // Docs for map itemStyle differ from Series data unit. See https://echarts.apache.org/en/option.html#series-map.data.itemStyle\n  itemStyle?: MapSeriesOption['itemStyle'];\n  name?: string;\n};\n\ntype MapChartSeries = Omit<Series, 'data'> & {\n  data: MapChartSeriesDataUnit[];\n};\n\nexport interface WorldMapChartProps extends Omit<ChartProps, 'series'> {\n  series: MapChartSeries[];\n  fromDiscover?: boolean;\n  fromDiscoverQueryList?: boolean;\n  seriesOptions?: MapSeriesOption;\n}\n\ntype JSONResult = Record<string, any>;\n\ntype State = {\n  codeToCountryMap: JSONResult | null;\n  countryToCodeMap: JSONResult | null;\n  map: JSONResult | null;\n};\n\nconst DEFAULT_ZOOM = 1.3;\nconst DISCOVER_ZOOM = 1.1;\nconst DISCOVER_QUERY_LIST_ZOOM = 0.9;\nconst DEFAULT_CENTER_X = 10.97;\nconst DISCOVER_QUERY_LIST_CENTER_Y = -12;\nconst DEFAULT_CENTER_Y = 9.71;\n\nexport function WorldMapChart({\n  series,\n  seriesOptions,\n  fromDiscover,\n  fromDiscoverQueryList,\n  ...props\n}: WorldMapChartProps) {\n  const theme = useTheme();\n  const [state, setState] = useState<State>(() => ({\n    countryToCodeMap: null,\n    map: null,\n    codeToCountryMap: null,\n  }));\n\n  useEffect(() => {\n    let unmounted = false;\n\n    if (!unmounted) {\n      loadWorldMap();\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, []);\n\n  async function loadWorldMap() {\n    try {\n      const [countryCodesMap, world] = await Promise.all([\n        import('sentry/data/countryCodesMap'),\n        import('sentry/data/world.json'),\n      ]);\n\n      const countryToCodeMap = countryCodesMap.default;\n      const worldMap = world.default;\n\n      // Echarts not available in tests\n      echarts.registerMap?.('sentryWorld', worldMap as any);\n\n      const codeToCountryMap: Record<string, string> = {};\n\n      for (const country in worldMap) {\n        codeToCountryMap[countryToCodeMap[country]] = country;\n      }\n\n      setState({\n        countryToCodeMap,\n        map: worldMap,\n        codeToCountryMap,\n      });\n    } catch {\n      // do nothing\n    }\n  }\n\n  if (state.countryToCodeMap === null || state.map === null) {\n    return null;\n  }\n\n  const processedSeries = series.map(({seriesName, data, ...options}) =>\n    MapSeries({\n      ...seriesOptions,\n      ...options,\n      map: 'sentryWorld',\n      name: seriesName,\n      nameMap: state.countryToCodeMap ?? undefined,\n      aspectScale: 0.85,\n      zoom: fromDiscover\n        ? DISCOVER_ZOOM\n        : fromDiscoverQueryList\n        ? DISCOVER_QUERY_LIST_ZOOM\n        : DEFAULT_ZOOM,\n      center: [\n        DEFAULT_CENTER_X,\n        fromDiscoverQueryList ? DISCOVER_QUERY_LIST_CENTER_Y : DEFAULT_CENTER_Y,\n      ],\n      itemStyle: {\n        areaColor: theme.gray200,\n        borderColor: theme.backgroundSecondary,\n      },\n      emphasis: {\n        itemStyle: {\n          areaColor: theme.pink300,\n        },\n        label: {\n          show: false,\n        },\n      },\n      data,\n      silent: fromDiscoverQueryList,\n      roam: !fromDiscoverQueryList,\n    })\n  );\n\n  // TODO(billy):\n  // For absolute values, we want min/max to based on min/max of series\n  // Otherwise it should be 0-100\n  const maxValue = max(series.map(({data}) => max(data.map(({value}) => value)))) || 1;\n\n  const tooltipFormatter: TooltipComponentOption['formatter'] = (format: any) => {\n    const {marker, name, value} = Array.isArray(format) ? format[0] : format;\n    // If value is NaN, don't show anything because we won't have a country code either\n    if (isNaN(value as number)) {\n      return '';\n    }\n\n    // `value` should be a number\n    const formattedValue = typeof value === 'number' ? value.toLocaleString() : '';\n    const countryOrCode = state.codeToCountryMap?.[name as string] || name;\n\n    return [\n      `<div class=\"tooltip-series tooltip-series-solo\">\n               <div><span class=\"tooltip-label\">${marker} <strong>${countryOrCode}</strong></span> ${formattedValue}</div>\n            </div>`,\n      '<div class=\"tooltip-arrow\"></div>',\n    ].join('');\n  };\n\n  return (\n    <BaseChart\n      options={{\n        backgroundColor: fromDiscoverQueryList ? undefined : theme.background,\n        visualMap: [\n          VisualMap({\n            show: !fromDiscoverQueryList,\n            left: fromDiscover ? undefined : 'right',\n            right: fromDiscover ? 5 : undefined,\n            min: 0,\n            max: maxValue,\n            inRange: {\n              color: [theme.purple200, theme.purple300],\n            },\n            text: ['High', 'Low'],\n            textStyle: {\n              color: theme.textColor,\n            },\n\n            // Whether show handles, which can be dragged to adjust \"selected range\".\n            // False because the handles are pretty ugly\n            calculable: false,\n          }),\n        ],\n      }}\n      {...props}\n      yAxis={null}\n      xAxis={null}\n      series={processedSeries}\n      tooltip={{\n        formatter: tooltipFormatter,\n      }}\n      height={fromDiscover ? 400 : undefined}\n    />\n  );\n}\n","import 'echarts/lib/chart/map';\n\nimport type {MapSeriesOption} from 'echarts';\n\nexport default function MapSeries(props: MapSeriesOption = {map: ''}): MapSeriesOption {\n  return {\n    roam: true,\n    ...props,\n    emphasis: {\n      label: {show: false},\n      ...props.emphasis,\n    },\n    type: 'map',\n  };\n}\n","import styled from '@emotion/styled';\n\nexport interface LoadingMaskProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst LoadingMask = styled('div')<LoadingMaskProps>`\n  background-color: ${p => p.theme.backgroundSecondary};\n  border-radius: ${p => p.theme.borderRadius};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nexport default LoadingMask;\n","import {t} from 'sentry/locale';\nimport {defined} from 'sentry/utils';\nimport {aggregateOutputType} from 'sentry/utils/discover/fields';\nimport {\n  DAY,\n  formatAbbreviatedNumber,\n  formatPercentage,\n  getDuration,\n  HOUR,\n  MINUTE,\n  SECOND,\n  WEEK,\n} from 'sentry/utils/formatters';\n\n/**\n * Formatter for chart tooltips that handle a variety of discover and metrics result values.\n * If the result is metric values, the value can be of type number or null\n */\nexport function tooltipFormatter(value: number | null, seriesName: string = ''): string {\n  if (!defined(value)) {\n    return '\\u2014';\n  }\n  switch (aggregateOutputType(seriesName)) {\n    case 'integer':\n    case 'number':\n      return value.toLocaleString();\n    case 'percentage':\n      return formatPercentage(value, 2);\n    case 'duration':\n      return getDuration(value / 1000, 2, true);\n    default:\n      return value.toString();\n  }\n}\n\n/**\n * Formatter for chart axis labels that handle a variety of discover result values\n * This function is *very similar* to tooltipFormatter but outputs data with less precision.\n */\nexport function axisLabelFormatter(\n  value: number,\n  seriesName: string,\n  abbreviation: boolean = false\n): string {\n  switch (aggregateOutputType(seriesName)) {\n    case 'integer':\n    case 'number':\n      return abbreviation ? formatAbbreviatedNumber(value) : value.toLocaleString();\n    case 'percentage':\n      return formatPercentage(value, 0);\n    case 'duration':\n      return axisDuration(value);\n    default:\n      return value.toString();\n  }\n}\n\n/**\n * Specialized duration formatting for axis labels.\n * In that context we are ok sacrificing accuracy for more\n * consistent sizing.\n *\n * @param value Number of milliseconds to format.\n */\nexport function axisDuration(value: number): string {\n  if (value === 0) {\n    return '0';\n  }\n  if (value >= WEEK) {\n    const label = (value / WEEK).toFixed(0);\n    return t('%swk', label);\n  }\n  if (value >= DAY) {\n    const label = (value / DAY).toFixed(0);\n    return t('%sd', label);\n  }\n  if (value >= HOUR) {\n    const label = (value / HOUR).toFixed(0);\n    return t('%shr', label);\n  }\n  if (value >= MINUTE) {\n    const label = (value / MINUTE).toFixed(0);\n    return t('%smin', label);\n  }\n  if (value >= SECOND) {\n    const label = (value / SECOND).toFixed(0);\n    return t('%ss', label);\n  }\n  const label = value.toFixed(0);\n  return t('%sms', label);\n}\n","import {Component, useContext} from 'react';\nimport {Location} from 'history';\n\nimport {EventQuery} from 'sentry/actionCreators/events';\nimport {Client, ResponseMeta} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport EventView, {\n  ImmutableEventView,\n  isAPIPayloadSimilar,\n  LocationQuery,\n} from 'sentry/utils/discover/eventView';\nimport {PerformanceEventViewContext} from 'sentry/utils/performance/contexts/performanceEventViewContext';\nimport {OrganizationContext} from 'sentry/views/organizationContext';\n\nimport {decodeScalar} from '../queryString';\n\nexport class QueryError {\n  message: string;\n  private originalError: any; // For debugging in case parseError picks a value that doesn't make sense.\n  constructor(errorMessage: string, originalError?: any) {\n    this.message = errorMessage;\n    this.originalError = originalError;\n  }\n\n  getOriginalError() {\n    return this.originalError;\n  }\n}\n\nexport type GenericChildrenProps<T> = {\n  /**\n   * Error, if not null.\n   */\n  error: null | QueryError;\n  /**\n   * Loading state of this query.\n   */\n  isLoading: boolean;\n  /**\n   * Pagelinks, if applicable. Can be provided to the Pagination component.\n   */\n  pageLinks: null | string;\n  /**\n   * Data / result.\n   */\n  tableData: T | null;\n};\n\ntype OptionalContextProps = {\n  eventView?: EventView | ImmutableEventView;\n  orgSlug?: string;\n};\n\ntype BaseDiscoverQueryProps = {\n  api: Client;\n  /**\n   * Used as the default source for cursor values.\n   */\n  location: Location;\n  /**\n   * Explicit cursor value if you aren't using `location.query.cursor` because there are\n   * multiple paginated results on the page.\n   */\n  cursor?: string;\n  /**\n   * Record limit to get.\n   */\n  limit?: number;\n  /**\n   * Include this whenever pagination won't be used. Limit can still be used when this is\n   * passed, but cursor will be ignored.\n   */\n  noPagination?: boolean;\n  /**\n   * Extra query parameters to be added.\n   */\n  queryExtras?: Record<string, string>;\n  /**\n   * Sets referrer parameter in the API Payload. Set of allowed referrers are defined\n   * on the OrganizationEventsV2Endpoint view.\n   */\n  referrer?: string;\n  /**\n   * A callback to set an error so that the error can be rendered in parent components\n   */\n  setError?: (errObject: QueryError | undefined) => void;\n};\n\nexport type DiscoverQueryPropsWithContext = BaseDiscoverQueryProps & OptionalContextProps;\nexport type DiscoverQueryProps = BaseDiscoverQueryProps & {\n  eventView: EventView | ImmutableEventView;\n  orgSlug: string;\n};\n\ntype InnerRequestProps<P> = DiscoverQueryProps & P;\ntype OuterRequestProps<P> = DiscoverQueryPropsWithContext & P;\n\nexport type ReactProps<T> = {\n  children?: (props: GenericChildrenProps<T>) => React.ReactNode;\n};\n\ntype ComponentProps<T, P> = {\n  /**\n   * Route to the endpoint\n   */\n  route: string;\n  /**\n   * A hook to modify data into the correct output after data has been received\n   */\n  afterFetch?: (data: any, props?: Props<T, P>) => T;\n  /**\n   * A hook before fetch that can be used to do things like clearing the api\n   */\n  beforeFetch?: (api: Client) => void;\n  /**\n   * A hook for parent orchestrators to pass down data based on query results, unlike afterFetch it is not meant for specializations as it will not modify data.\n   */\n  didFetch?: (data: T) => void;\n  /**\n   * Allows components to modify the payload before it is set.\n   */\n  getRequestPayload?: (props: Props<T, P>) => any;\n  /**\n   * An external hook to parse errors in case there are differences for a specific api.\n   */\n  parseError?: (error: any) => QueryError | null;\n  /**\n   * An external hook in addition to the event view check to check if data should be refetched\n   */\n  shouldRefetchData?: (prevProps: Props<T, P>, props: Props<T, P>) => boolean;\n};\n\ntype Props<T, P> = InnerRequestProps<P> & ReactProps<T> & ComponentProps<T, P>;\ntype OuterProps<T, P> = OuterRequestProps<P> & ReactProps<T> & ComponentProps<T, P>;\n\ntype State<T> = {\n  tableFetchID: symbol | undefined;\n} & GenericChildrenProps<T>;\n\n/**\n * Generic component for discover queries\n */\nclass _GenericDiscoverQuery<T, P> extends Component<Props<T, P>, State<T>> {\n  state: State<T> = {\n    isLoading: true,\n    tableFetchID: undefined,\n    error: null,\n\n    tableData: null,\n    pageLinks: null,\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props<T, P>) {\n    // Reload data if the payload changes\n    const refetchCondition = this._shouldRefetchData(prevProps);\n\n    // or if we've moved from an invalid view state to a valid one,\n    const eventViewValidation =\n      prevProps.eventView.isValid() === false && this.props.eventView.isValid();\n\n    const shouldRefetchExternal = this.props.shouldRefetchData\n      ? this.props.shouldRefetchData(prevProps, this.props)\n      : false;\n\n    if (refetchCondition || eventViewValidation || shouldRefetchExternal) {\n      this.fetchData();\n    }\n  }\n\n  getPayload(props: Props<T, P>) {\n    const {cursor, limit, noPagination, referrer, location} = props;\n    const payload = this.props.getRequestPayload\n      ? this.props.getRequestPayload(props)\n      : props.eventView.getEventsAPIPayload(props.location);\n\n    if (cursor) {\n      payload.cursor = cursor;\n    }\n    if (limit) {\n      payload.per_page = limit;\n    }\n    if (noPagination) {\n      payload.noPagination = noPagination;\n    }\n    if (referrer) {\n      payload.referrer = referrer;\n    }\n\n    if (['events', 'eventsv2'].includes(props.route)) {\n      const queryUserModified = decodeScalar(location.query?.userModified);\n      if (queryUserModified !== undefined) {\n        payload.user_modified = queryUserModified;\n      }\n    }\n\n    Object.assign(payload, props.queryExtras ?? {});\n\n    return payload;\n  }\n\n  _shouldRefetchData = (prevProps: Props<T, P>): boolean => {\n    const thisAPIPayload = this.getPayload(this.props);\n    const otherAPIPayload = this.getPayload(prevProps);\n\n    return (\n      !isAPIPayloadSimilar(thisAPIPayload, otherAPIPayload) ||\n      prevProps.limit !== this.props.limit ||\n      prevProps.route !== this.props.route ||\n      prevProps.cursor !== this.props.cursor\n    );\n  };\n\n  /**\n   * The error type isn't consistent across APIs. We see detail as just string some times, other times as an object.\n   */\n  _parseError = (error: any): QueryError | null => {\n    if (this.props.parseError) {\n      return this.props.parseError(error);\n    }\n\n    if (!error) {\n      return null;\n    }\n\n    const detail = error.responseJSON?.detail;\n    if (typeof detail === 'string') {\n      return new QueryError(detail, error);\n    }\n\n    const message = detail?.message;\n    if (typeof message === 'string') {\n      return new QueryError(message, error);\n    }\n\n    const unknownError = new QueryError(t('An unknown error occurred.'), error);\n    return unknownError;\n  };\n\n  fetchData = async () => {\n    const {api, beforeFetch, afterFetch, didFetch, eventView, orgSlug, route, setError} =\n      this.props;\n\n    if (!eventView.isValid()) {\n      return;\n    }\n\n    const url = `/organizations/${orgSlug}/${route}/`;\n    const tableFetchID = Symbol(`tableFetchID`);\n    const apiPayload: Partial<EventQuery & LocationQuery> = this.getPayload(this.props);\n\n    this.setState({isLoading: true, tableFetchID});\n\n    setError?.(undefined);\n\n    beforeFetch?.(api);\n\n    // clear any inflight requests since they are now stale\n    api.clear();\n\n    try {\n      const [data, , resp] = await doDiscoverQuery<T>(api, url, apiPayload);\n      if (this.state.tableFetchID !== tableFetchID) {\n        // invariant: a different request was initiated after this request\n        return;\n      }\n\n      const tableData = afterFetch ? afterFetch(data, this.props) : data;\n      didFetch?.(tableData);\n\n      this.setState(prevState => ({\n        isLoading: false,\n        tableFetchID: undefined,\n        error: null,\n        pageLinks: resp?.getResponseHeader('Link') ?? prevState.pageLinks,\n        tableData,\n      }));\n    } catch (err) {\n      const error = this._parseError(err);\n      this.setState({\n        isLoading: false,\n        tableFetchID: undefined,\n        error,\n        tableData: null,\n      });\n      if (setError) {\n        setError(error ?? undefined);\n      }\n    }\n  };\n\n  render() {\n    const {isLoading, error, tableData, pageLinks} = this.state;\n\n    const childrenProps: GenericChildrenProps<T> = {\n      isLoading,\n      error,\n      tableData,\n      pageLinks,\n    };\n    const children: ReactProps<T>['children'] = this.props.children; // Explicitly setting type due to issues with generics and React's children\n    return children?.(childrenProps);\n  }\n}\n\n// Shim to allow us to use generic discover query or any specialization with or without passing org slug or eventview, which are now contexts.\n// This will help keep tests working and we can remove extra uses of context-provided props and update tests as we go.\nexport function GenericDiscoverQuery<T, P>(props: OuterProps<T, P>) {\n  const organizationSlug = useContext(OrganizationContext)?.slug;\n  const performanceEventView = useContext(PerformanceEventViewContext)?.eventView;\n\n  const orgSlug = props.orgSlug ?? organizationSlug;\n  const eventView = props.eventView ?? performanceEventView;\n\n  if (orgSlug === undefined || eventView === undefined) {\n    throw new Error('GenericDiscoverQuery requires both an orgSlug and eventView');\n  }\n\n  const _props: Props<T, P> = {\n    ...props,\n    orgSlug,\n    eventView,\n  };\n  return <_GenericDiscoverQuery<T, P> {..._props} />;\n}\n\nexport type DiscoverQueryRequestParams = Partial<EventQuery & LocationQuery>;\n\nexport function doDiscoverQuery<T>(\n  api: Client,\n  url: string,\n  params: DiscoverQueryRequestParams\n): Promise<[T, string | undefined, ResponseMeta | undefined]> {\n  return api.requestPromise(url, {\n    method: 'GET',\n    includeAllArgs: true,\n    query: {\n      // marking params as any so as to not cause typescript errors\n      ...(params as any),\n    },\n  });\n}\n\nexport default GenericDiscoverQuery;\n","import moment from 'moment';\n\nimport {DEFAULT_STATS_PERIOD} from 'sentry/constants';\nimport {DateString} from 'sentry/types';\nimport {getUtcDateString} from 'sentry/utils/dates';\n\ntype DateObject = {\n  /**\n   * Ending date object\n   */\n  end?: DateString;\n  /**\n   * Relative period string in format \"<int><unit>\" (e.g. 4d for 4 days)\n   */\n  period?: string | null;\n  /**\n   * Starting date object\n   */\n  start?: DateString;\n};\n\ntype Options = {\n  /**\n   * Doubles the given period (useful for getting previous period data)\n   */\n  shouldDoublePeriod?: boolean;\n};\n\n/**\n * Gets the period to query with if we need to double the initial period in order\n * to get data for the previous period\n *\n * Returns an object with either a period or start/end dates ({statsPeriod: string} or {start: string, end: string})\n */\nexport function getPeriod(\n  {period, start, end}: DateObject,\n  {shouldDoublePeriod}: Options = {}\n) {\n  if (!period && !start && !end) {\n    period = DEFAULT_STATS_PERIOD;\n  }\n\n  // you can not specify both relative and absolute periods\n  // relative period takes precedence\n  if (period) {\n    if (!shouldDoublePeriod) {\n      return {statsPeriod: period};\n    }\n    const [, periodNumber, periodLength] = period.match(/([0-9]+)([mhdw])/)!;\n\n    return {statsPeriod: `${parseInt(periodNumber, 10) * 2}${periodLength}`};\n  }\n\n  if (!start || !end) {\n    throw new Error('start and end required');\n  }\n\n  const formattedStart = getUtcDateString(start);\n  const formattedEnd = getUtcDateString(end);\n\n  if (shouldDoublePeriod) {\n    // get duration of end - start and double\n    const diff = moment(end).diff(moment(start));\n\n    const previousPeriodStart = moment(start).subtract(diff);\n\n    // This is not as accurate as having 2 start/end objs\n    return {\n      start: getUtcDateString(previousPeriodStart),\n      end: formattedEnd,\n    };\n  }\n\n  return {\n    start: formattedStart,\n    end: formattedEnd,\n  };\n}\n","import EventView, {ImmutableEventView} from 'sentry/utils/discover/eventView';\n\nimport {createDefinedContext} from './utils';\n\ntype usePerformanceEventViewContext = {\n  eventView: EventView;\n};\n\nconst [\n  PerformanceEventViewProvider,\n  _usePerformanceEventView,\n  PerformanceEventViewContext,\n] = createDefinedContext<usePerformanceEventViewContext>({\n  name: 'PerformanceEventViewContext',\n});\n\nexport {PerformanceEventViewProvider, PerformanceEventViewContext};\n\n// Provides a readonly event view. Also omits anything that isn't currently read-only, although in the future we should switch the code in EventView instead.\n// If you need mutability, use the mutable version.\nexport function usePerformanceEventView(): ImmutableEventView {\n  return _usePerformanceEventView().eventView;\n}\n\nexport function useMutablePerformanceEventView() {\n  return usePerformanceEventView().clone();\n}\n","import {createContext, useContext} from 'react';\n\ntype CreateContextReturn<T> = [React.Provider<T>, () => T, React.Context<T>];\n/*\n * Creates provider, context and useContext hook, guarding against calling useContext without a provider.\n * [0]: https://github.com/chakra-ui/chakra-ui/blob/c0f9c287df0397e2aa9bd90eb3d5c2f2c08aa0b1/packages/utils/src/react-helpers.ts#L27\n *\n * Renamed to createDefinedContext to not conflate with React context.\n */\nexport function createDefinedContext<ContextType>(options: {\n  name: string;\n  errorMessage?: string;\n  strict?: boolean;\n}) {\n  const {\n    strict = true,\n    errorMessage = `useContext for \"${options.name}\" must be inside a Provider with a value`,\n    name,\n  } = options;\n\n  const Context = createContext<ContextType | undefined>(undefined);\n\n  Context.displayName = name;\n\n  function useDefinedContext() {\n    const context = useContext(Context);\n    if (!context && strict) {\n      throw new Error(errorMessage);\n    }\n    return context;\n  }\n\n  return [\n    Context.Provider,\n    useDefinedContext,\n    Context,\n  ] as CreateContextReturn<ContextType>;\n}\n","import {keyframes} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nconst twinkles = keyframes`\n  0% {opacity: 1;}\n  50% {opacity: 0;}\n  100% {opacity: 1;}\n`;\n\nconst hover = keyframes`\n  0% {transform: translateY(0) translateX(0);}\n  25% {transform: translateY(4px) translateX(-4px);}\n  50% {transform: translateY(0) translateX(0);}\n  75% {transform: translateY(4px) translateX(-4px);}\n  100% {transform: translateY(0) translate(0);}\n`;\n\nconst Twinkles = styled('path')`\n  fill: #d35bab;\n  animation: ${twinkles} 2s infinite;\n`;\n\nconst TwinklesDelay = styled('path')`\n  animation: ${twinkles} 2s infinite;\n  animation-delay: 1s;\n  fill: #ce5d9e;\n`;\n\nconst Planet = styled('g')`\n  animation: ${hover} 10s infinite;\n`;\n\nexport default function BackgroundSpace() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 1160.08 280.01\"\n      preserveAspectRatio=\"xMinYMin slice\"\n      height=\"100%\"\n      width=\"100%\"\n    >\n      <defs>\n        <linearGradient\n          id=\"linear-gradient\"\n          x1=\"580\"\n          y1=\"-163.62\"\n          x2=\"580\"\n          y2=\"289.19\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.19\" stopColor=\"#7a2878\" />\n          <stop offset=\"0.41\" stopColor=\"#612765\" />\n          <stop offset=\"0.56\" stopColor=\"#54275c\" />\n        </linearGradient>\n        <linearGradient\n          id=\"linear-gradient-2\"\n          x1=\"438.93\"\n          y1=\"-375.6\"\n          x2=\"619.69\"\n          y2=\"374.54\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.2\" stopColor=\"#8b3087\" />\n          <stop offset=\"0.76\" stopColor=\"#aa4689\" />\n          <stop offset=\"1\" stopColor=\"#a33f79\" />\n        </linearGradient>\n        <linearGradient\n          id=\"linear-gradient-3\"\n          x1=\"114.15\"\n          y1=\"-573.81\"\n          x2=\"340.44\"\n          y2=\"365.28\"\n          xlinkHref=\"#linear-gradient-2\"\n        />\n        <linearGradient\n          id=\"linear-gradient-4\"\n          x1=\"1494.33\"\n          y1=\"259.61\"\n          x2=\"1494.83\"\n          y2=\"259.61\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.2\" stopColor=\"#ff6668\" />\n          <stop offset=\"0.72\" stopColor=\"#b44968\" />\n        </linearGradient>\n        <linearGradient\n          id=\"linear-gradient-5\"\n          x1=\"536.86\"\n          y1=\"213.35\"\n          x2=\"534.35\"\n          y2=\"381.73\"\n          xlinkHref=\"#linear-gradient-4\"\n        />\n        <radialGradient\n          id=\"radial-gradient\"\n          cx=\"134.5\"\n          cy=\"307.77\"\n          fx=\"98.57685568341846\"\n          fy=\"320.2801558841244\"\n          r=\"380.71\"\n          gradientTransform=\"matrix(0.88, 0.47, -0.33, 0.61, 117.41, 55.32)\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop offset=\"0.2\" stopColor=\"#ff7d7f\" stopOpacity=\"0\" />\n          <stop offset=\"0.28\" stopColor=\"#ff7d7f\" stopOpacity=\"0.02\" />\n          <stop offset=\"0.38\" stopColor=\"#ff7d7f\" stopOpacity=\"0.08\" />\n          <stop offset=\"0.49\" stopColor=\"#ff7d7f\" stopOpacity=\"0.19\" />\n          <stop offset=\"0.61\" stopColor=\"#ff7d7f\" stopOpacity=\"0.33\" />\n          <stop offset=\"0.73\" stopColor=\"#ff7d7f\" stopOpacity=\"0.51\" />\n          <stop offset=\"0.87\" stopColor=\"#ff7d7f\" stopOpacity=\"0.74\" />\n          <stop offset=\"1\" stopColor=\"#ff7d7f\" />\n        </radialGradient>\n      </defs>\n      <g id=\"background\">\n        <rect fill=\"url(#linear-gradient)\" width=\"1160\" height=\"280\" />\n      </g>\n      <g id=\"streaks\">\n        <g>\n          <path\n            fill=\"#662665\"\n            d=\"M448.36,280c-4.4-31.92-8.18-68.42-8.77-102.41-1.12-64.44.22-121.22,45.16-177.59H422c-22.16,26.8-35.31,46.33-35.31,46.33S391.52,26.59,403.26,0H378.89a279,279,0,0,0-11.77,49.37C357.57,115.58,373,215.74,385.47,280Z\"\n          />\n          <path\n            fill=\"#662665\"\n            d=\"M722.56,137.09c-34.63,39.36-58.79,90.55-58.79,90.55l-12.16-13.52s27.36-62,80.07-96.63S853.82,70.87,853.82,70.87,757.19,97.73,722.56,137.09ZM690.63,280c7.71-43.77,25.77-103.7,68.08-144.26,73.82-70.78,163-64.87,236.84-69.43,58.57-3.62,135.31-11.92,164.53-15.19V0h-102.8A1046.22,1046.22,0,0,1,944.37,21C853.82,33,743.84,63.27,710.56,87.42c0,0,79.91-60.47,147.82-72.47S1004.5,6,1036.26,1.44q4.88-.7,9.44-1.44H872.77c-78.13,11.4-130.26,42.76-189.4,93.34C616.45,150.56,588,263.49,584.16,280Z\"\n          />\n          <g>\n            <path\n              fill=\"url(#linear-gradient-2)\"\n              d=\"M210.14,0c1.4,18.35,15.06,27.51,23.7,28.47,9.12,1,9.8-5.92,5.58-10.14-3-3-10.8-6.23-14.69-18.33ZM164.88,0a66.31,66.31,0,0,0,10.85,39.11S149.33,23.48,144.78,0H45.53a182.28,182.28,0,0,0,2,61.75c9,44.59,49,92.74,49,92.74l-37.67,6.08s-26.36-52-29.4-104.06c-1.24-21.3,3-40.85,8.34-56.51H0V280H1160V235.51c-31.07-3.31-115.41-12.26-150.09-15.81C967,215.31,908,206.18,908,206.18s78.05-13.51,146-11.32c42.37,1.37,82.1,4.59,106,6.81l.08-61.67c-19.59,4.72-77.35,18.33-143.41,31.05C935.07,186.76,778,210.74,650.09,179s-157.28-52-157.28-52C428.28,99.76,387.57,93,305.13,84.05S193,37.59,188.57,3.63c-.16-1.21-.26-2.43-.3-3.63ZM408,121.38c-34-9.12-89-26.52-89-26.52s65,6.75,98.15,15.88,91.22,34,91.22,34S442,130.5,408,121.38Z\"\n            />\n            <path\n              fill=\"url(#linear-gradient-3)\"\n              d=\"M251.92,34.72s-6.42,6.92,2.7,13.68S274.38,59,277.26,55.67s-2.88-4.57-8.45-11.32S258.17,30.66,251.92,34.72Z\"\n            />\n          </g>\n        </g>\n      </g>\n      <Planet id=\"planet\">\n        <g>\n          <path\n            fill=\"url(#linear-gradient-4)\"\n            d=\"M578.57,280c17-12.64,20.48-23.05,9.35-31.25-12.84-9.46-51.69-10.47-77.71-8.95-10.63.62-30.38,3.21-48.62,5.82l15,12.26s46.8-9.8,78.56-6.76,18.07,14.36-.85,24.83c-2.4,1.33-4.82,2.69-7.2,4.05Z\"\n          />\n          <path\n            fill=\"url(#linear-gradient-5)\"\n            d=\"M644.87,280l1.5-1.85c18.08-22,23.65-45.78-39.87-62.34C516.1,192.25,417.13,208,417.13,208l-2.36-.67L433.89,223c19.47-3.8,54.48-8.82,93.22-5.83,58.95,4.56,82.18,25.68,86.83,40.38,2.6,8.23-1.23,15.63-7.58,22.46Z\"\n          />\n          <path\n            fill=\"#ff9371\"\n            d=\"M644.87,280l1.5-1.85c18.08-22,23.65-45.78-39.87-62.34-40.85-10.65-83.46-13.26-117.89-12.92l-41.86,1.88-2.51.21c20.12-.33,115.29-1,164.37,15.14,55.08,18.08,46.12,39.19,37,50.51-2,2.45-4.72,5.69-7.65,9.37Z\"\n          />\n          <path\n            fill=\"#ff9371\"\n            d=\"M576.52,218.6s39.7,10.14,54.39,22.64,3.38,23.82,3.38,23.82,19.26-14.7,3.38-26S576.52,218.6,576.52,218.6Z\"\n          />\n          <path\n            fill=\"#ff9371\"\n            d=\"M578.57,280c17-12.64,20.48-23.05,9.35-31.25-12.84-9.46-51.69-10.47-77.71-8.95-8.71.51-23.53,2.34-38.63,4.42,9.12-.58,80.16-4.84,97.85.06,18.91,5.23,20.05,9.61,18.91,18.07-1,7.21-7.14,13.81-11.5,17.65Z\"\n          />\n        </g>\n        <g>\n          <path\n            fill=\"#582163\"\n            d=\"M509.8,280c-120.75-123.12-289-199.5-475-199.5q-17.49,0-34.76.89V280Z\"\n          />\n          <path\n            fill=\"#6b2775\"\n            d=\"M44.2,280,280.72,127.44A661,661,0,0,0,110.17,84.73C83.15,106.24,28.11,150.16,0,173.38V280Z\"\n          />\n          <path\n            fill=\"#6b2775\"\n            d=\"M483.75,280l17.43-8.63a670.42,670.42,0,0,0-69.4-59.48L312,280Z\"\n          />\n          <path\n            fill=\"#ff7d7f\"\n            d=\"M509.8,280c-120.75-123.12-289-199.5-475-199.5q-17.49,0-34.76.89v4.29C179.75,74.76,363.75,157,494.5,280Z\"\n          />\n          <path\n            fill=\"url(#radial-gradient)\"\n            d=\"M509.8,280c-120.74-123.12-289-199.5-475-199.5q-17.49,0-34.76.89V280Z\"\n          />\n        </g>\n      </Planet>\n      <g id=\"stars-static\">\n        <path\n          fill=\"#d35bab\"\n          d=\"M1121.59,268.29c1.28,1.1,4.29,1.4,4.29,1.4s-2.85,0-4.29,1.39c-1.25,1.25-1.4,4.3-1.4,4.3s-.14-3-1.4-4.3c-1-1-4.29-1.39-4.29-1.39s3-.25,4.29-1.4,1.4-4.3,1.4-4.3S1120.14,267.05,1121.59,268.29Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M104.51,15.9C106.46,17.56,111,18,111,18s-4.33-.06-6.51,2.12c-1.89,1.88-2.12,6.51-2.12,6.51s-.21-4.57-2.12-6.51C98.73,18.57,93.76,18,93.76,18s4.59-.38,6.51-2.12c1.71-1.56,2.12-6.51,2.12-6.51S102.31,14,104.51,15.9Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M196.69,68.5c2.53,2.16,8.44,2.75,8.44,2.75s-5.61-.08-8.44,2.74c-2.45,2.45-2.74,8.44-2.74,8.44s-.27-5.92-2.75-8.44c-2-2-8.43-2.74-8.43-2.74s5.95-.49,8.43-2.75c2.22-2,2.75-8.43,2.75-8.43S193.85,66.07,196.69,68.5Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M473,188.45c1.31,1.12,4.38,1.43,4.38,1.43s-2.91,0-4.38,1.43c-1.27,1.27-1.43,4.38-1.43,4.38s-.14-3.07-1.42-4.38c-1-1.06-4.39-1.43-4.39-1.43s3.1-.25,4.39-1.43,1.42-4.38,1.42-4.38S471.53,187.19,473,188.45Z\"\n        />\n        <path\n          fill=\"#ce5d9e\"\n          d=\"M693.5,263.34c2.77,2.37,9.28,3,9.28,3s-6.18-.08-9.28,3c-2.7,2.69-3,9.28-3,9.28s-.3-6.5-3-9.28c-2.19-2.24-9.28-3-9.28-3s6.55-.53,9.28-3c2.44-2.23,3-9.28,3-9.28S690.37,260.67,693.5,263.34Z\"\n        />\n        <path\n          fill=\"#ce5d9e\"\n          d=\"M752.05,219.29c3.48,3,11.63,3.79,11.63,3.79s-7.73-.11-11.63,3.78c-3.38,3.38-3.78,11.64-3.78,11.64s-.38-8.16-3.79-11.64c-2.75-2.8-11.63-3.78-11.63-3.78s8.21-.67,11.63-3.79c3.06-2.79,3.79-11.63,3.79-11.63S748.13,215.94,752.05,219.29Z\"\n        />\n        <path\n          fill=\"#ce5d9e\"\n          d=\"M834.09,219.21c1.85,1.58,6.17,2,6.17,2s-4.1-.06-6.17,2c-1.79,1.79-2,6.17-2,6.17s-.2-4.33-2-6.17c-1.45-1.49-6.17-2-6.17-2s4.36-.35,6.17-2c1.63-1.48,2-6.17,2-6.17S832,217.43,834.09,219.21Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M1136.67,159.66c1.81,1.55,6,2,6,2s-4-.06-6,2c-1.75,1.75-2,11.15-2,11.15s-.19-9.35-2-11.15c-1.43-1.45-6-2-6-2s4.25-.35,6-2c1.58-1.44,2-12.06,2-12.06S1134.64,157.93,1136.67,159.66Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M482.41,157.12c1.94,1.67,6.51,2.12,6.51,2.12s-4.33-.06-6.51,2.12c-1.89,1.89-2.12,6.51-2.12,6.51s-.21-4.56-2.12-6.51c-1.54-1.57-6.51-2.12-6.51-2.12s4.59-.37,6.51-2.12c1.71-1.56,2.12-6.51,2.12-6.51S480.21,155.25,482.41,157.12Z\"\n        />\n        <path\n          fill=\"#d35bab\"\n          d=\"M24.94,36.75c2.84,2.42,9.48,3.08,9.48,3.08s-6.3-.09-9.48,3.09c-2.75,2.75-3.08,17.51-3.08,17.51s-.31-14.68-3.08-17.51c-2.24-2.29-9.48-3.09-9.48-3.09s6.69-.54,9.48-3.08c2.49-2.28,3.08-19,3.08-19S21.75,34,24.94,36.75Z\"\n        />\n      </g>\n      <g id=\"stars-twinkle\">\n        <Twinkles d=\"M300.17,85.94c3.37,2.89,11.28,3.67,11.28,3.67s-7.5-.1-11.28,3.67c-3.28,3.28-3.67,20.85-3.67,20.85s-.37-17.47-3.67-20.85c-2.67-2.71-11.29-3.67-11.29-3.67s8-.64,11.29-3.67c3-2.7,3.67-22.56,3.67-22.56S296.36,82.69,300.17,85.94Z\" />\n        <TwinklesDelay\n          fill=\"#ce5d9e\"\n          d=\"M971.51,236.58C976.44,240.79,988,242,988,242s-11-.15-16.49,5.36c-4.79,4.79-5.37,30.48-5.37,30.48s-.53-25.54-5.37-30.48c-3.89-4-16.49-5.36-16.49-5.36s11.64-.95,16.49-5.37c4.34-4,5.37-33,5.37-33S965.94,231.82,971.51,236.58Z\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import tourAlert from 'sentry-images/spot/discover-tour-alert.svg';\nimport tourExplore from 'sentry-images/spot/discover-tour-explore.svg';\nimport tourFilter from 'sentry-images/spot/discover-tour-filter.svg';\nimport tourGroup from 'sentry-images/spot/discover-tour-group.svg';\n\nimport Banner from 'sentry/components/banner';\nimport Button from 'sentry/components/button';\nimport FeatureTourModal, {\n  TourImage,\n  TourStep,\n  TourText,\n} from 'sentry/components/modals/featureTourModal';\nimport {t} from 'sentry/locale';\nimport {Organization} from 'sentry/types';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport theme from 'sentry/utils/theme';\nimport useMedia from 'sentry/utils/useMedia';\n\nimport BackgroundSpace from './backgroundSpace';\n\nconst docsUrl = 'https://docs.sentry.io/product/discover-queries/';\n\nconst docsLink = (\n  <Button external href={docsUrl}>\n    {t('View Docs')}\n  </Button>\n);\n\nconst TOUR_STEPS: TourStep[] = [\n  {\n    title: t('Explore Data over Time'),\n    image: <TourImage src={tourExplore} />,\n    body: (\n      <TourText>\n        {t(\n          'Analyze and visualize all of your data over time to find answers to your most complex problems.'\n        )}\n      </TourText>\n    ),\n    actions: docsLink,\n  },\n  {\n    title: t('Filter on Event Attributes.'),\n    image: <TourImage src={tourFilter} />,\n    body: (\n      <TourText>\n        {t(\n          'Drill down on data by any custom tag or field to reduce noise and hone in on specific areas.'\n        )}\n      </TourText>\n    ),\n    actions: docsLink,\n  },\n  {\n    title: t('Group Data by Tags'),\n    image: <TourImage src={tourGroup} />,\n    body: (\n      <TourText>\n        {t(\n          'Go beyond Issues and create custom groupings to investigate events from a different lens.'\n        )}\n      </TourText>\n    ),\n    actions: docsLink,\n  },\n  {\n    title: t('Save, Share and Alert'),\n    image: <TourImage src={tourAlert} />,\n    body: (\n      <TourText>\n        {t('Send insights to your team and set alerts to monitor any future spikes.')}\n      </TourText>\n    ),\n  },\n];\n\ntype Props = {\n  organization: Organization;\n  resultsUrl: string;\n};\n\nfunction DiscoverBanner({organization, resultsUrl}: Props) {\n  function onAdvance(step: number, duration: number) {\n    trackAnalyticsEvent({\n      eventKey: 'discover_v2.tour.advance',\n      eventName: 'Discoverv2: Tour Advance',\n      organization_id: parseInt(organization.id, 10),\n      step,\n      duration,\n    });\n  }\n  function onCloseModal(step: number, duration: number) {\n    trackAnalyticsEvent({\n      eventKey: 'discover_v2.tour.close',\n      eventName: 'Discoverv2: Tour Close',\n      organization_id: parseInt(organization.id, 10),\n      step,\n      duration,\n    });\n  }\n\n  const isSmallBanner = useMedia(`(max-width: ${theme.breakpoints.medium})`);\n\n  return (\n    <Banner\n      title={t('Discover Trends')}\n      subtitle={t(\n        'Customize and save queries by search conditions, event fields, and tags'\n      )}\n      backgroundComponent={<BackgroundSpace />}\n      dismissKey=\"discover\"\n    >\n      <Button\n        size={isSmallBanner ? 'xsmall' : undefined}\n        translucentBorder\n        to={resultsUrl}\n        onClick={() => {\n          trackAnalyticsEvent({\n            eventKey: 'discover_v2.build_new_query',\n            eventName: 'Discoverv2: Build a new Discover Query',\n            organization_id: parseInt(organization.id, 10),\n          });\n        }}\n      >\n        {t('Build a new query')}\n      </Button>\n      <FeatureTourModal\n        steps={TOUR_STEPS}\n        doneText={t('View all Events')}\n        doneUrl={resultsUrl}\n        onAdvance={onAdvance}\n        onCloseModal={onCloseModal}\n      >\n        {({showModal}) => (\n          <Button\n            size={isSmallBanner ? 'xsmall' : undefined}\n            translucentBorder\n            onClick={() => {\n              trackAnalyticsEvent({\n                eventKey: 'discover_v2.tour.start',\n                eventName: 'Discoverv2: Tour Start',\n                organization_id: parseInt(organization.id, 10),\n              });\n              showModal();\n            }}\n          >\n            {t('Get a Tour')}\n          </Button>\n        )}\n      </FeatureTourModal>\n    </Banner>\n  );\n}\n\nexport default DiscoverBanner;\n","import styled from '@emotion/styled';\n\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport theme from 'sentry/utils/theme';\n\nconst defaultProps = {\n  isLoading: false,\n  isReloading: false,\n  maskBackgroundColor: theme.white,\n};\n\ntype DefaultProps = Readonly<typeof defaultProps>;\n\ntype Props = {\n  children?: React.ReactNode;\n  className?: string;\n} & DefaultProps;\n\ntype MaskProps = {\n  isReloading: boolean;\n  maskBackgroundColor: string;\n};\n\nexport default function LoadingContainer(props: Props) {\n  const {className, children, isReloading, isLoading, maskBackgroundColor} = props;\n  const isLoadingOrReloading = isLoading || isReloading;\n\n  return (\n    <Container className={className}>\n      {isLoadingOrReloading && (\n        <div>\n          <LoadingMask\n            isReloading={isReloading}\n            maskBackgroundColor={maskBackgroundColor}\n          />\n          <Indicator />\n        </div>\n      )}\n      {children}\n    </Container>\n  );\n}\n\nLoadingContainer.defaultProps = defaultProps;\n\nconst Container = styled('div')`\n  position: relative;\n`;\n\nconst LoadingMask = styled('div')<MaskProps>`\n  position: absolute;\n  z-index: 1;\n  background-color: ${p => p.maskBackgroundColor};\n  width: 100%;\n  height: 100%;\n  opacity: ${p => (p.isReloading ? '0.6' : '1')};\n`;\n\nconst Indicator = styled(LoadingIndicator)`\n  position: absolute;\n  z-index: 3;\n  width: 100%;\n`;\n","import {Component} from 'react';\nimport {withTheme} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\nimport isEqual from 'lodash/isEqual';\n\nimport {Client} from 'sentry/api';\nimport {AreaChart, AreaChartProps} from 'sentry/components/charts/areaChart';\nimport {BarChart, BarChartProps} from 'sentry/components/charts/barChart';\nimport EventsGeoRequest from 'sentry/components/charts/eventsGeoRequest';\nimport EventsRequest from 'sentry/components/charts/eventsRequest';\nimport {LineChart} from 'sentry/components/charts/lineChart';\nimport {getInterval, processTableResults} from 'sentry/components/charts/utils';\nimport {WorldMapChart} from 'sentry/components/charts/worldMapChart';\nimport LoadingContainer from 'sentry/components/loading/loadingContainer';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {IconWarning} from 'sentry/icons';\nimport {Organization} from 'sentry/types';\nimport {Series} from 'sentry/types/echarts';\nimport {getUtcToLocalDateObject} from 'sentry/utils/dates';\nimport {axisLabelFormatter} from 'sentry/utils/discover/charts';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {PlotType} from 'sentry/utils/discover/fields';\nimport {DisplayModes, TOP_N} from 'sentry/utils/discover/types';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {Theme} from 'sentry/utils/theme';\nimport withApi from 'sentry/utils/withApi';\n\ntype Props = {\n  api: Client;\n  eventView: EventView;\n  location: Location;\n  organization: Organization;\n  theme: Theme;\n  referrer?: string;\n  yAxis?: string[];\n};\n\nclass MiniGraph extends Component<Props> {\n  shouldComponentUpdate(nextProps) {\n    // We pay for the cost of the deep comparison here since it is cheaper\n    // than the cost for rendering the graph, which can take ~200ms to ~300ms to\n    // render.\n\n    return !isEqual(this.getRefreshProps(this.props), this.getRefreshProps(nextProps));\n  }\n\n  getRefreshProps(props: Props) {\n    // get props that are relevant to the API payload for the graph\n\n    const {organization, location, eventView, yAxis} = props;\n\n    const apiPayload = eventView.getEventsAPIPayload(location);\n\n    const query = apiPayload.query;\n    const start = apiPayload.start ? getUtcToLocalDateObject(apiPayload.start) : null;\n    const end = apiPayload.end ? getUtcToLocalDateObject(apiPayload.end) : null;\n    const period: string | undefined = apiPayload.statsPeriod as any;\n\n    const display = eventView.getDisplayMode();\n    const isTopEvents =\n      display === DisplayModes.TOP5 || display === DisplayModes.DAILYTOP5;\n    const isDaily = display === DisplayModes.DAILYTOP5 || display === DisplayModes.DAILY;\n\n    const field = isTopEvents ? apiPayload.field : undefined;\n    const topEvents = isTopEvents ? TOP_N : undefined;\n    const orderby = isTopEvents ? decodeScalar(apiPayload.sort) : undefined;\n    const intervalFidelity = display === 'bar' ? 'low' : 'high';\n    const interval = isDaily ? '1d' : getInterval({start, end, period}, intervalFidelity);\n\n    return {\n      organization,\n      apiPayload,\n      query,\n      start,\n      end,\n      period,\n      interval,\n      project: eventView.project,\n      environment: eventView.environment,\n      yAxis: yAxis ?? eventView.getYAxis(),\n      field,\n      topEvents,\n      orderby,\n      showDaily: isDaily,\n      expired: eventView.expired,\n      name: eventView.name,\n      display,\n    };\n  }\n\n  getChartType({\n    showDaily,\n  }: {\n    showDaily: boolean;\n    timeseriesData: Series[];\n    yAxis: string;\n  }): PlotType {\n    if (showDaily) {\n      return 'bar';\n    }\n    return 'area';\n  }\n\n  getChartComponent(\n    chartType: PlotType\n  ): React.ComponentType<BarChartProps> | React.ComponentType<AreaChartProps> {\n    switch (chartType) {\n      case 'bar':\n        return BarChart;\n      case 'line':\n        return LineChart;\n      case 'area':\n        return AreaChart;\n      default:\n        throw new Error(`Unknown multi plot type for ${chartType}`);\n    }\n  }\n\n  render() {\n    const {theme, api, referrer} = this.props;\n    const {\n      query,\n      start,\n      end,\n      period,\n      interval,\n      organization,\n      project,\n      environment,\n      yAxis,\n      field,\n      topEvents,\n      orderby,\n      showDaily,\n      expired,\n      name,\n      display,\n    } = this.getRefreshProps(this.props);\n\n    if (display === DisplayModes.WORLDMAP) {\n      return (\n        <EventsGeoRequest\n          api={api}\n          organization={organization}\n          yAxis={yAxis}\n          query={query}\n          orderby={orderby}\n          projects={project as number[]}\n          period={period}\n          start={start}\n          end={end}\n          environments={environment as string[]}\n          referrer={referrer}\n        >\n          {({errored, loading, tableData}) => {\n            if (errored) {\n              return (\n                <StyledGraphContainer>\n                  <IconWarning color=\"gray300\" size=\"md\" />\n                </StyledGraphContainer>\n              );\n            }\n            if (loading) {\n              return (\n                <StyledGraphContainer>\n                  <LoadingIndicator mini />\n                </StyledGraphContainer>\n              );\n            }\n            const {data, title} = processTableResults(tableData);\n            const chartOptions = {\n              height: 100,\n              series: [\n                {\n                  seriesName: title,\n                  data,\n                },\n              ],\n              fromDiscoverQueryList: true,\n            };\n\n            return <WorldMapChart {...chartOptions} />;\n          }}\n        </EventsGeoRequest>\n      );\n    }\n    return (\n      <EventsRequest\n        organization={organization}\n        api={api}\n        query={query}\n        start={start}\n        end={end}\n        period={period}\n        interval={interval}\n        project={project as number[]}\n        environment={environment as string[]}\n        includePrevious={false}\n        yAxis={yAxis}\n        field={field}\n        topEvents={topEvents}\n        orderby={orderby}\n        expired={expired}\n        name={name}\n        referrer={referrer}\n        hideError\n        partial\n      >\n        {({loading, timeseriesData, results, errored, errorMessage}) => {\n          if (errored) {\n            return (\n              <StyledGraphContainer>\n                <IconWarning color=\"gray300\" size=\"md\" />\n                <StyledErrorMessage>{errorMessage}</StyledErrorMessage>\n              </StyledGraphContainer>\n            );\n          }\n          if (loading) {\n            return (\n              <StyledGraphContainer>\n                <LoadingIndicator mini />\n              </StyledGraphContainer>\n            );\n          }\n\n          const allSeries = timeseriesData ?? results ?? [];\n          const chartType =\n            display === 'bar'\n              ? display\n              : this.getChartType({\n                  showDaily,\n                  yAxis: Array.isArray(yAxis) ? yAxis[0] : yAxis,\n                  timeseriesData: allSeries,\n                });\n          const data = allSeries.map(series => ({\n            ...series,\n            lineStyle: {\n              opacity: chartType === 'line' ? 1 : 0,\n            },\n            smooth: true,\n          }));\n\n          const hasOther = topEvents && topEvents + 1 === allSeries.length;\n          const chartColors = allSeries.length\n            ? [...theme.charts.getColorPalette(allSeries.length - 2 - (hasOther ? 1 : 0))]\n            : undefined;\n          if (chartColors && chartColors.length && hasOther) {\n            chartColors.push(theme.chartOther);\n          }\n          const chartOptions = {\n            colors: chartColors,\n            height: 150,\n            series: [...data],\n            xAxis: {\n              show: false,\n              axisPointer: {\n                show: false,\n              },\n            },\n            yAxis: {\n              show: true,\n              axisLine: {\n                show: false,\n              },\n              axisLabel: {\n                color: theme.chartLabel,\n                fontFamily: theme.text.family,\n                fontSize: 12,\n                formatter: (value: number) =>\n                  axisLabelFormatter(\n                    value,\n                    Array.isArray(yAxis) ? yAxis[0] : yAxis,\n                    true\n                  ),\n                inside: true,\n                showMinLabel: false,\n                showMaxLabel: false,\n              },\n              splitNumber: 3,\n              splitLine: {\n                show: false,\n              },\n              zlevel: theme.zIndex.header,\n            },\n            tooltip: {\n              show: false,\n            },\n            toolBox: {\n              show: false,\n            },\n            grid: {\n              left: 0,\n              top: 0,\n              right: 0,\n              bottom: 0,\n              containLabel: false,\n            },\n            stacked:\n              (typeof topEvents === 'number' && topEvents > 0) ||\n              (Array.isArray(yAxis) && yAxis.length > 1),\n          };\n\n          const ChartComponent = this.getChartComponent(chartType);\n          return <ChartComponent {...chartOptions} />;\n        }}\n      </EventsRequest>\n    );\n  }\n}\n\nconst StyledGraphContainer = styled(props => (\n  <LoadingContainer {...props} maskBackgroundColor=\"transparent\" />\n))`\n  height: 150px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledErrorMessage = styled('div')`\n  color: ${p => p.theme.gray300};\n  margin-left: 4px;\n`;\n\nexport default withApi(withTheme(MiniGraph));\n","import {PureComponent} from 'react';\nimport styled from '@emotion/styled';\n\nimport ActivityAvatar from 'sentry/components/activity/item/avatar';\nimport Card from 'sentry/components/card';\nimport ErrorBoundary from 'sentry/components/errorBoundary';\nimport Link from 'sentry/components/links/link';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {User} from 'sentry/types';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\n\ntype Props = {\n  renderGraph: () => React.ReactNode;\n  to: object;\n  createdBy?: User | undefined;\n  dateStatus?: React.ReactNode;\n  onEventClick?: () => void;\n  queryDetail?: string;\n  renderContextMenu?: () => React.ReactNode;\n  subtitle?: string;\n  title?: string;\n};\n\nclass QueryCard extends PureComponent<Props> {\n  handleClick = () => {\n    const {onEventClick} = this.props;\n    callIfFunction(onEventClick);\n  };\n\n  render() {\n    const {\n      title,\n      subtitle,\n      queryDetail,\n      renderContextMenu,\n      renderGraph,\n      createdBy,\n      dateStatus,\n    } = this.props;\n\n    return (\n      <Link data-test-id={`card-${title}`} onClick={this.handleClick} to={this.props.to}>\n        <StyledQueryCard interactive>\n          <QueryCardHeader>\n            <QueryCardContent>\n              <QueryTitle>{title}</QueryTitle>\n              <QueryDetail>{queryDetail}</QueryDetail>\n            </QueryCardContent>\n            <AvatarWrapper>\n              {createdBy ? (\n                <ActivityAvatar type=\"user\" user={createdBy} size={34} />\n              ) : (\n                <ActivityAvatar type=\"system\" size={34} />\n              )}\n            </AvatarWrapper>\n          </QueryCardHeader>\n          <QueryCardBody>\n            <StyledErrorBoundary mini>{renderGraph()}</StyledErrorBoundary>\n          </QueryCardBody>\n          <QueryCardFooter>\n            <DateSelected>\n              {subtitle}\n              {dateStatus ? (\n                <DateStatus>\n                  {t('Edited')} {dateStatus}\n                </DateStatus>\n              ) : null}\n            </DateSelected>\n            {renderContextMenu && renderContextMenu()}\n          </QueryCardFooter>\n        </StyledQueryCard>\n      </Link>\n    );\n  }\n}\n\nconst AvatarWrapper = styled('span')`\n  border: 3px solid ${p => p.theme.border};\n  border-radius: 50%;\n  height: min-content;\n`;\n\nconst QueryCardContent = styled('div')`\n  flex-grow: 1;\n  overflow: hidden;\n  margin-right: ${space(1)};\n`;\n\nconst StyledQueryCard = styled(Card)`\n  justify-content: space-between;\n  height: 100%;\n  &:focus,\n  &:hover {\n    top: -1px;\n  }\n`;\n\nconst QueryCardHeader = styled('div')`\n  display: flex;\n  padding: ${space(1.5)} ${space(2)};\n`;\n\nconst QueryTitle = styled('div')`\n  ${p => p.theme.text.cardTitle};\n  color: ${p => p.theme.headingColor};\n  ${p => p.theme.overflowEllipsis};\n  font-weight: initial;\n`;\n\nconst QueryDetail = styled('div')`\n  font-family: ${p => p.theme.text.familyMono};\n  font-size: ${p => p.theme.fontSizeSmall};\n  color: ${p => p.theme.gray300};\n  line-height: 1.5;\n  ${p => p.theme.overflowEllipsis};\n`;\n\nconst QueryCardBody = styled('div')`\n  background: ${p => p.theme.backgroundSecondary};\n  max-height: 150px;\n  height: 100%;\n  overflow: hidden;\n`;\n\nconst QueryCardFooter = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: ${space(1)} ${space(2)};\n`;\n\nconst DateSelected = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  display: grid;\n  grid-column-gap: ${space(1)};\n  ${p => p.theme.overflowEllipsis};\n  color: ${p => p.theme.textColor};\n`;\n\nconst DateStatus = styled('span')`\n  color: ${p => p.theme.subText};\n  padding-left: ${space(1)};\n`;\n\nconst StyledErrorBoundary = styled(ErrorBoundary)`\n  margin-bottom: 100px;\n`;\n\nexport default QueryCard;\n","import {Component, Fragment} from 'react';\nimport {browserHistory, InjectedRouter} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location, Query} from 'history';\nimport moment from 'moment';\n\nimport {resetPageFilters} from 'sentry/actionCreators/pageFilters';\nimport {Client} from 'sentry/api';\nimport Feature from 'sentry/components/acl/feature';\nimport Button from 'sentry/components/button';\nimport DropdownMenuControlV2 from 'sentry/components/dropdownMenuControlV2';\nimport {MenuItemProps} from 'sentry/components/dropdownMenuItemV2';\nimport EmptyStateWarning from 'sentry/components/emptyStateWarning';\nimport Pagination from 'sentry/components/pagination';\nimport TimeSince from 'sentry/components/timeSince';\nimport {IconEllipsis} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, SavedQuery} from 'sentry/types';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport EventView from 'sentry/utils/discover/eventView';\nimport parseLinkHeader from 'sentry/utils/parseLinkHeader';\nimport {decodeList} from 'sentry/utils/queryString';\nimport withApi from 'sentry/utils/withApi';\n\nimport {handleCreateQuery, handleDeleteQuery} from './savedQuery/utils';\nimport MiniGraph from './miniGraph';\nimport QueryCard from './querycard';\nimport {getPrebuiltQueries, handleAddQueryToDashboard} from './utils';\n\ntype Props = {\n  api: Client;\n  location: Location;\n  onQueryChange: () => void;\n  organization: Organization;\n  pageLinks: string;\n  renderPrebuilt: boolean;\n  router: InjectedRouter;\n  savedQueries: SavedQuery[];\n  savedQuerySearchQuery: string;\n};\n\nclass QueryList extends Component<Props> {\n  componentDidMount() {\n    /**\n     * We need to reset global selection here because the saved queries can define their own projects\n     * in the query. This can lead to mismatched queries for the project\n     */\n    resetPageFilters();\n  }\n\n  handleDeleteQuery = (eventView: EventView) => {\n    const {api, organization, onQueryChange, location, savedQueries} = this.props;\n\n    handleDeleteQuery(api, organization, eventView).then(() => {\n      if (savedQueries.length === 1 && location.query.cursor) {\n        browserHistory.push({\n          pathname: location.pathname,\n          query: {...location.query, cursor: undefined},\n        });\n      } else {\n        onQueryChange();\n      }\n    });\n  };\n\n  handleDuplicateQuery = (eventView: EventView, yAxis: string[]) => {\n    const {api, location, organization, onQueryChange} = this.props;\n\n    eventView = eventView.clone();\n    eventView.name = `${eventView.name} copy`;\n\n    handleCreateQuery(api, organization, eventView, yAxis).then(() => {\n      onQueryChange();\n      browserHistory.push({\n        pathname: location.pathname,\n        query: {},\n      });\n    });\n  };\n\n  renderQueries() {\n    const {pageLinks, renderPrebuilt} = this.props;\n    const links = parseLinkHeader(pageLinks || '');\n    let cards: React.ReactNode[] = [];\n\n    // If we're on the first page (no-previous page exists)\n    // include the pre-built queries.\n    if (renderPrebuilt && (!links.previous || links.previous.results === false)) {\n      cards = cards.concat(this.renderPrebuiltQueries());\n    }\n    cards = cards.concat(this.renderSavedQueries());\n\n    if (cards.filter(x => x).length === 0) {\n      return (\n        <StyledEmptyStateWarning>\n          <p>{t('No saved queries match that filter')}</p>\n        </StyledEmptyStateWarning>\n      );\n    }\n\n    return cards;\n  }\n\n  renderDropdownMenu(items: MenuItemProps[]) {\n    return (\n      <DropdownMenuControlV2\n        items={items}\n        trigger={({props: triggerProps, ref: triggerRef}) => (\n          <DropdownTrigger\n            ref={triggerRef}\n            {...triggerProps}\n            aria-label={t('Query actions')}\n            size=\"xsmall\"\n            borderless\n            onClick={e => {\n              e.stopPropagation();\n              e.preventDefault();\n\n              triggerProps.onClick?.(e);\n            }}\n            icon={<IconEllipsis direction=\"down\" size=\"sm\" />}\n            data-test-id=\"menu-trigger\"\n          />\n        )}\n        placement=\"bottom right\"\n        offset={4}\n      />\n    );\n  }\n\n  renderPrebuiltQueries() {\n    const {location, organization, savedQuerySearchQuery, router} = this.props;\n    const views = getPrebuiltQueries(organization);\n\n    const hasSearchQuery =\n      typeof savedQuerySearchQuery === 'string' && savedQuerySearchQuery.length > 0;\n    const needleSearch = hasSearchQuery ? savedQuerySearchQuery.toLowerCase() : '';\n\n    const list = views.map((view, index) => {\n      const eventView = EventView.fromNewQueryWithLocation(view, location);\n\n      // if a search is performed on the list of queries, we filter\n      // on the pre-built queries\n      if (\n        hasSearchQuery &&\n        eventView.name &&\n        !eventView.name.toLowerCase().includes(needleSearch)\n      ) {\n        return null;\n      }\n\n      const recentTimeline = t('Last ') + eventView.statsPeriod;\n      const customTimeline =\n        moment(eventView.start).format('MMM D, YYYY h:mm A') +\n        ' - ' +\n        moment(eventView.end).format('MMM D, YYYY h:mm A');\n\n      const to = eventView.getResultsViewUrlTarget(organization.slug);\n\n      const menuItems = [\n        {\n          key: 'add-to-dashboard',\n          label: t('Add to Dashboard'),\n          onAction: () =>\n            handleAddQueryToDashboard({\n              eventView,\n              query: view,\n              organization,\n              yAxis: view?.yAxis,\n              router,\n            }),\n        },\n      ];\n\n      return (\n        <QueryCard\n          key={`${index}-${eventView.name}`}\n          to={to}\n          title={eventView.name}\n          subtitle={eventView.statsPeriod ? recentTimeline : customTimeline}\n          queryDetail={eventView.query}\n          createdBy={eventView.createdBy}\n          renderGraph={() => (\n            <MiniGraph\n              location={location}\n              eventView={eventView}\n              organization={organization}\n              referrer=\"api.discover.homepage.prebuilt\"\n            />\n          )}\n          onEventClick={() => {\n            trackAnalyticsEvent({\n              eventKey: 'discover_v2.prebuilt_query_click',\n              eventName: 'Discoverv2: Click a pre-built query',\n              organization_id: parseInt(this.props.organization.id, 10),\n              query_name: eventView.name,\n            });\n          }}\n          renderContextMenu={() => (\n            <Feature organization={organization} features={['dashboards-edit']}>\n              {({hasFeature}) => {\n                return hasFeature && this.renderDropdownMenu(menuItems);\n              }}\n            </Feature>\n          )}\n        />\n      );\n    });\n\n    return list;\n  }\n\n  renderSavedQueries() {\n    const {savedQueries, location, organization, router} = this.props;\n\n    if (!savedQueries || !Array.isArray(savedQueries) || savedQueries.length === 0) {\n      return [];\n    }\n\n    return savedQueries.map((savedQuery, index) => {\n      const eventView = EventView.fromSavedQuery(savedQuery);\n      const recentTimeline = t('Last ') + eventView.statsPeriod;\n      const customTimeline =\n        moment(eventView.start).format('MMM D, YYYY h:mm A') +\n        ' - ' +\n        moment(eventView.end).format('MMM D, YYYY h:mm A');\n\n      const to = eventView.getResultsViewShortUrlTarget(organization.slug);\n      const dateStatus = <TimeSince date={savedQuery.dateUpdated} />;\n      const referrer = `api.discover.${eventView.getDisplayMode()}-chart`;\n\n      const menuItems = (canAddToDashboard: boolean): MenuItemProps[] => [\n        ...(canAddToDashboard\n          ? [\n              {\n                key: 'add-to-dashboard',\n                label: t('Add to Dashboard'),\n                onAction: () =>\n                  handleAddQueryToDashboard({\n                    eventView,\n                    query: savedQuery,\n                    organization,\n                    yAxis: savedQuery?.yAxis ?? eventView.yAxis,\n                    router,\n                  }),\n              },\n            ]\n          : []),\n        {\n          key: 'duplicate',\n          label: t('Duplicate Query'),\n          onAction: () =>\n            this.handleDuplicateQuery(eventView, decodeList(savedQuery.yAxis)),\n        },\n        {\n          key: 'delete',\n          label: t('Delete Query'),\n          priority: 'danger',\n          onAction: () => this.handleDeleteQuery(eventView),\n        },\n      ];\n\n      return (\n        <QueryCard\n          key={`${index}-${eventView.id}`}\n          to={to}\n          title={eventView.name}\n          subtitle={eventView.statsPeriod ? recentTimeline : customTimeline}\n          queryDetail={eventView.query}\n          createdBy={eventView.createdBy}\n          dateStatus={dateStatus}\n          onEventClick={() => {\n            trackAnalyticsEvent({\n              eventKey: 'discover_v2.saved_query_click',\n              eventName: 'Discoverv2: Click a saved query',\n              organization_id: parseInt(this.props.organization.id, 10),\n            });\n          }}\n          renderGraph={() => (\n            <MiniGraph\n              location={location}\n              eventView={eventView}\n              organization={organization}\n              referrer={referrer}\n              yAxis={\n                savedQuery.yAxis && savedQuery.yAxis.length\n                  ? savedQuery.yAxis\n                  : ['count()']\n              }\n            />\n          )}\n          renderContextMenu={() => (\n            <Feature organization={organization} features={['dashboards-edit']}>\n              {({hasFeature}) => this.renderDropdownMenu(menuItems(hasFeature))}\n            </Feature>\n          )}\n        />\n      );\n    });\n  }\n\n  render() {\n    const {pageLinks} = this.props;\n    return (\n      <Fragment>\n        <QueryGrid>{this.renderQueries()}</QueryGrid>\n        <PaginationRow\n          pageLinks={pageLinks}\n          onCursor={(cursor, path, query, direction) => {\n            const offset = Number(cursor?.split(':')?.[1] ?? 0);\n\n            const newQuery: Query & {cursor?: string} = {...query, cursor};\n            const isPrevious = direction === -1;\n\n            if (offset <= 0 && isPrevious) {\n              delete newQuery.cursor;\n            }\n\n            browserHistory.push({\n              pathname: path,\n              query: newQuery,\n            });\n          }}\n        />\n      </Fragment>\n    );\n  }\n}\n\nconst PaginationRow = styled(Pagination)`\n  margin-bottom: 20px;\n`;\n\nconst QueryGrid = styled('div')`\n  display: grid;\n  grid-template-columns: minmax(100px, 1fr);\n  gap: ${space(2)};\n\n  @media (min-width: ${p => p.theme.breakpoints.medium}) {\n    grid-template-columns: repeat(2, minmax(100px, 1fr));\n  }\n\n  @media (min-width: ${p => p.theme.breakpoints.large}) {\n    grid-template-columns: repeat(3, minmax(100px, 1fr));\n  }\n`;\n\nconst DropdownTrigger = styled(Button)`\n  transform: translateX(${space(1)});\n`;\n\nconst StyledEmptyStateWarning = styled(EmptyStateWarning)`\n  grid-column: 1 / 4;\n`;\n\nexport default withApi(QueryList);\n","import {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport isEqual from 'lodash/isEqual';\nimport pick from 'lodash/pick';\nimport {stringify} from 'query-string';\n\nimport Feature from 'sentry/components/acl/feature';\nimport Alert from 'sentry/components/alert';\nimport GuideAnchor from 'sentry/components/assistant/guideAnchor';\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport DropdownControl, {DropdownItem} from 'sentry/components/dropdownControl';\nimport {Title} from 'sentry/components/layouts/thirds';\nimport NoProjectMessage from 'sentry/components/noProjectMessage';\nimport SearchBar from 'sentry/components/searchBar';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport Switch from 'sentry/components/switchButton';\nimport {t} from 'sentry/locale';\nimport {PageContent} from 'sentry/styles/organization';\nimport space from 'sentry/styles/space';\nimport {Organization, SavedQuery, SelectValue} from 'sentry/types';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nimport Banner from './banner';\nimport {DEFAULT_EVENT_VIEW} from './data';\nimport QueryList from './queryList';\nimport {getPrebuiltQueries, setRenderPrebuilt, shouldRenderPrebuilt} from './utils';\n\nconst SORT_OPTIONS: SelectValue<string>[] = [\n  {label: t('My Queries'), value: 'myqueries'},\n  {label: t('Recently Edited'), value: '-dateUpdated'},\n  {label: t('Query Name (A-Z)'), value: 'name'},\n  {label: t('Date Created (Newest)'), value: '-dateCreated'},\n  {label: t('Date Created (Oldest)'), value: 'dateCreated'},\n  {label: t('Most Outdated'), value: 'dateUpdated'},\n  {label: t('Most Popular'), value: 'mostPopular'},\n  {label: t('Recently Viewed'), value: 'recentlyViewed'},\n];\n\ntype Props = {\n  organization: Organization;\n} & RouteComponentProps<{}, {}> &\n  AsyncComponent['props'];\n\ntype State = {\n  savedQueries: SavedQuery[] | null;\n  savedQueriesPageLinks: string;\n} & AsyncComponent['state'];\n\nclass DiscoverLanding extends AsyncComponent<Props, State> {\n  state: State = {\n    // AsyncComponent state\n    loading: true,\n    reloading: false,\n    error: false,\n    errors: {},\n\n    // local component state\n    renderPrebuilt: shouldRenderPrebuilt(),\n    savedQueries: null,\n    savedQueriesPageLinks: '',\n  };\n\n  shouldReload = true;\n\n  getSavedQuerySearchQuery(): string {\n    const {location} = this.props;\n\n    return decodeScalar(location.query.query, '').trim();\n  }\n\n  getActiveSort() {\n    const {location} = this.props;\n\n    const urlSort = decodeScalar(location.query.sort, 'myqueries');\n    return SORT_OPTIONS.find(item => item.value === urlSort) || SORT_OPTIONS[0];\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {organization, location} = this.props;\n\n    const views = getPrebuiltQueries(organization);\n    const searchQuery = this.getSavedQuerySearchQuery();\n\n    const cursor = decodeScalar(location.query.cursor);\n    let perPage = 9;\n\n    const canRenderPrebuilt = this.state\n      ? this.state.renderPrebuilt\n      : shouldRenderPrebuilt();\n\n    if (!cursor && canRenderPrebuilt) {\n      // invariant: we're on the first page\n\n      if (searchQuery && searchQuery.length > 0) {\n        const needleSearch = searchQuery.toLowerCase();\n\n        const numOfPrebuiltQueries = views.reduce((sum, view) => {\n          const eventView = EventView.fromNewQueryWithLocation(view, location);\n\n          // if a search is performed on the list of queries, we filter\n          // on the pre-built queries\n          if (eventView.name && eventView.name.toLowerCase().includes(needleSearch)) {\n            return sum + 1;\n          }\n\n          return sum;\n        }, 0);\n\n        perPage = Math.max(1, perPage - numOfPrebuiltQueries);\n      } else {\n        perPage = Math.max(1, perPage - views.length);\n      }\n    }\n\n    const queryParams: Props['location']['query'] = {\n      cursor,\n      query: `version:2 name:\"${searchQuery}\"`,\n      per_page: perPage.toString(),\n      sortBy: this.getActiveSort().value,\n    };\n    if (!cursor) {\n      delete queryParams.cursor;\n    }\n\n    return [\n      [\n        'savedQueries',\n        `/organizations/${organization.slug}/discover/saved/`,\n        {\n          query: queryParams,\n        },\n      ],\n    ];\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const PAYLOAD_KEYS = ['sort', 'cursor', 'query'] as const;\n\n    const payloadKeysChanged = !isEqual(\n      pick(prevProps.location.query, PAYLOAD_KEYS),\n      pick(this.props.location.query, PAYLOAD_KEYS)\n    );\n\n    // if any of the query strings relevant for the payload has changed,\n    // we re-fetch data\n    if (payloadKeysChanged) {\n      this.fetchData();\n    }\n  }\n\n  handleQueryChange = () => {\n    this.fetchData({reloading: true});\n  };\n\n  handleSearchQuery = (searchQuery: string) => {\n    const {location} = this.props;\n    browserHistory.push({\n      pathname: location.pathname,\n      query: {\n        ...location.query,\n        cursor: undefined,\n        query: String(searchQuery).trim() || undefined,\n      },\n    });\n  };\n\n  handleSortChange = (value: string) => {\n    const {location} = this.props;\n    trackAnalyticsEvent({\n      eventKey: 'discover_v2.change_sort',\n      eventName: 'Discoverv2: Sort By Changed',\n      organization_id: parseInt(this.props.organization.id, 10),\n      sort: value,\n    });\n    browserHistory.push({\n      pathname: location.pathname,\n      query: {\n        ...location.query,\n        cursor: undefined,\n        sort: value,\n      },\n    });\n  };\n\n  renderBanner() {\n    const {location, organization} = this.props;\n    const eventView = EventView.fromNewQueryWithLocation(DEFAULT_EVENT_VIEW, location);\n    const to = eventView.getResultsViewUrlTarget(organization.slug);\n    const resultsUrl = `${to.pathname}?${stringify(to.query)}`;\n\n    return <Banner organization={organization} resultsUrl={resultsUrl} />;\n  }\n\n  renderActions() {\n    const activeSort = this.getActiveSort();\n    const {renderPrebuilt, savedQueries} = this.state;\n\n    return (\n      <StyledActions>\n        <StyledSearchBar\n          defaultQuery=\"\"\n          query={this.getSavedQuerySearchQuery()}\n          placeholder={t('Search saved queries')}\n          onSearch={this.handleSearchQuery}\n        />\n        <PrebuiltSwitch>\n          <SwitchLabel>Show Prebuilt</SwitchLabel>\n          <Switch\n            isActive={renderPrebuilt}\n            isDisabled={renderPrebuilt && (savedQueries ?? []).length === 0}\n            size=\"lg\"\n            toggle={this.togglePrebuilt}\n          />\n        </PrebuiltSwitch>\n        <DropdownControl buttonProps={{prefix: t('Sort By')}} label={activeSort.label}>\n          {SORT_OPTIONS.map(({label, value}) => (\n            <DropdownItem\n              key={value}\n              onSelect={this.handleSortChange}\n              eventKey={value}\n              isActive={value === activeSort.value}\n            >\n              {label}\n            </DropdownItem>\n          ))}\n        </DropdownControl>\n      </StyledActions>\n    );\n  }\n\n  togglePrebuilt = () => {\n    const {renderPrebuilt} = this.state;\n\n    this.setState({renderPrebuilt: !renderPrebuilt}, () => {\n      setRenderPrebuilt(!renderPrebuilt);\n      this.fetchData({reloading: true});\n    });\n  };\n\n  renderNoAccess() {\n    return (\n      <PageContent>\n        <Alert type=\"warning\">{t(\"You don't have access to this feature\")}</Alert>\n      </PageContent>\n    );\n  }\n\n  renderBody() {\n    const {location, organization, router} = this.props;\n    const {savedQueries, savedQueriesPageLinks, renderPrebuilt} = this.state;\n\n    return (\n      <QueryList\n        pageLinks={savedQueriesPageLinks}\n        savedQueries={savedQueries ?? []}\n        savedQuerySearchQuery={this.getSavedQuerySearchQuery()}\n        renderPrebuilt={renderPrebuilt}\n        location={location}\n        organization={organization}\n        onQueryChange={this.handleQueryChange}\n        router={router}\n      />\n    );\n  }\n\n  render() {\n    const {location, organization} = this.props;\n    const eventView = EventView.fromNewQueryWithLocation(DEFAULT_EVENT_VIEW, location);\n    const to = eventView.getResultsViewUrlTarget(organization.slug);\n\n    return (\n      <Feature\n        organization={organization}\n        features={['discover-query']}\n        renderDisabled={this.renderNoAccess}\n      >\n        <SentryDocumentTitle title={t('Discover')} orgSlug={organization.slug}>\n          <StyledPageContent>\n            <NoProjectMessage organization={organization}>\n              <PageContent>\n                <StyledPageHeader>\n                  <Title>\n                    <GuideAnchor target=\"discover_landing_header\">\n                      {t('Discover')}\n                    </GuideAnchor>\n                  </Title>\n                  <StyledButton\n                    data-test-id=\"build-new-query\"\n                    to={to}\n                    priority=\"primary\"\n                    onClick={() => {\n                      trackAnalyticsEvent({\n                        eventKey: 'discover_v2.build_new_query',\n                        eventName: 'Discoverv2: Build a new Discover Query',\n                        organization_id: parseInt(this.props.organization.id, 10),\n                      });\n                    }}\n                  >\n                    {t('Build a new query')}\n                  </StyledButton>\n                </StyledPageHeader>\n                {this.renderBanner()}\n                {this.renderActions()}\n                {this.renderComponent()}\n              </PageContent>\n            </NoProjectMessage>\n          </StyledPageContent>\n        </SentryDocumentTitle>\n      </Feature>\n    );\n  }\n}\n\nconst StyledPageContent = styled(PageContent)`\n  padding: 0;\n`;\n\nconst PrebuiltSwitch = styled('div')`\n  display: flex;\n`;\n\nconst SwitchLabel = styled('div')`\n  padding-right: 8px;\n`;\n\nconst StyledPageHeader = styled('div')`\n  display: flex;\n  align-items: flex-end;\n  font-size: ${p => p.theme.headerFontSize};\n  color: ${p => p.theme.textColor};\n  justify-content: space-between;\n  margin-bottom: ${space(2)};\n`;\n\nconst StyledSearchBar = styled(SearchBar)`\n  flex-grow: 1;\n`;\n\nconst StyledActions = styled('div')`\n  display: grid;\n  gap: ${space(2)};\n  grid-template-columns: auto max-content min-content;\n  align-items: center;\n  margin-bottom: ${space(2)};\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    grid-template-columns: auto;\n  }\n`;\n\nconst StyledButton = styled(Button)`\n  white-space: nowrap;\n`;\n\nexport default withOrganization(DiscoverLanding);\nexport {DiscoverLanding};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util.js';\n;\n\nvar RoamController =\n/** @class */\nfunction (_super) {\n  __extends(RoamController, _super);\n\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n\n    _this._zr = zr; // Avoid two roamController bind the same handler\n\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice: only enable needed types. For example, if 'zoom'\n     * is not needed, 'zoom' should not be enabled, otherwise\n     * default mousewheel behaviour (scroll page) will be disabled.\n     */\n\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n\n      if (controlType == null) {\n        controlType = true;\n      }\n\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n\n    return _this;\n  }\n\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY; // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    } // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n\n\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n\n  return RoamController;\n}(Eventful);\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e); // TODO should not have type issue.\n\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\n\nexport default RoamController;","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var baseIteratee = require('./_baseIteratee'),\n    negate = require('./negate'),\n    pickBy = require('./pickBy');\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nmodule.exports = omitBy;\n"],"names":["doEventsRequest","api","organization","project","environment","team","period","start","end","interval","comparisonDelta","includePrevious","query","yAxis","field","topEvents","orderby","partial","withoutZerofill","referrer","queryBatching","generatePathname","queryExtras","excludeOther","userModified","pathname","slug","shouldDoublePeriod","canIncludePreviousPeriod","queryObject","Object","fromEntries","entries","undefined","user_modified","includes","filter","value","getPeriod","batchRequest","requestPromise","fetchTagFacets","orgSlug","queryOption","pick","values","PERFORMANCE_URL_PARAM","fetchTotalCount","then","res","count","ActivityAvatar","className","type","user","size","SystemAvatar","StyledIconSentry","width","height","shape","p","theme","textColor","background","IconSentry","AreaChart","series","stacked","colors","props","map","i","seriesName","data","otherSeriesProps","LineSeries","AreaSeries","stack","name","lineStyle","color","opacity","areaStyle","animation","animationThreshold","animationDuration","VisualMap","visualMap","LineChart","seriesOptions","dataArray","options","LoadingPanel","_height","defaultProps","WorldMapChart","fromDiscover","fromDiscoverQueryList","useTheme","state","setState","useState","countryToCodeMap","codeToCountryMap","useEffect","unmounted","async","countryCodesMap","world","Promise","all","default","worldMap","echarts","country","loadWorldMap","processedSeries","roam","emphasis","label","show","MapSeries","nameMap","aspectScale","zoom","center","itemStyle","areaColor","gray200","borderColor","backgroundSecondary","pink300","silent","maxValue","max","backgroundColor","left","right","min","inRange","purple200","purple300","text","textStyle","calculable","xAxis","tooltip","formatter","format","marker","Array","isArray","isNaN","formattedValue","toLocaleString","join","borderRadius","tooltipFormatter","defined","aggregateOutputType","formatPercentage","getDuration","toString","axisLabelFormatter","abbreviation","formatAbbreviatedNumber","axisDuration","WEEK","toFixed","t","DAY","HOUR","MINUTE","SECOND","QueryError","constructor","errorMessage","originalError","this","message","getOriginalError","_GenericDiscoverQuery","Component","isLoading","tableFetchID","error","tableData","pageLinks","prevProps","thisAPIPayload","getPayload","otherAPIPayload","isAPIPayloadSimilar","limit","route","cursor","parseError","detail","responseJSON","beforeFetch","afterFetch","didFetch","eventView","setError","isValid","url","Symbol","apiPayload","clear","resp","doDiscoverQuery","prevState","getResponseHeader","err","_parseError","componentDidMount","fetchData","componentDidUpdate","refetchCondition","_shouldRefetchData","eventViewValidation","shouldRefetchExternal","shouldRefetchData","noPagination","location","payload","getRequestPayload","getEventsAPIPayload","per_page","queryUserModified","decodeScalar","assign","render","childrenProps","children","GenericDiscoverQuery","organizationSlug","useContext","OrganizationContext","performanceEventView","PerformanceEventViewContext","Error","_props","params","method","includeAllArgs","DEFAULT_STATS_PERIOD","statsPeriod","periodNumber","periodLength","match","parseInt","formattedStart","getUtcDateString","formattedEnd","diff","moment","previousPeriodStart","subtract","PerformanceEventViewProvider","_usePerformanceEventView","createDefinedContext","strict","Context","createContext","displayName","Provider","context","twinkles","keyframes","hover","Twinkles","TwinklesDelay","Planet","BackgroundSpace","xmlns","xmlnsXlink","viewBox","preserveAspectRatio","id","x1","y1","x2","y2","gradientUnits","offset","stopColor","xlinkHref","cx","cy","fx","fy","r","gradientTransform","stopOpacity","fill","d","docsLink","external","href","TOUR_STEPS","title","image","src","tourExplore","body","actions","DiscoverBanner","resultsUrl","isSmallBanner","useMedia","subtitle","backgroundComponent","dismissKey","translucentBorder","to","onClick","trackAnalyticsEvent","eventKey","eventName","organization_id","steps","doneText","doneUrl","onAdvance","step","duration","onCloseModal","showModal","isReloading","maskBackgroundColor","LoadingContainer","isLoadingOrReloading","Container","LoadingMask","Indicator","LoadingIndicator","MiniGraph","shouldComponentUpdate","nextProps","isEqual","getRefreshProps","getUtcToLocalDateObject","display","getDisplayMode","isTopEvents","DisplayModes","isDaily","TOP_N","sort","intervalFidelity","getInterval","getYAxis","showDaily","expired","getChartType","getChartComponent","chartType","BarChart","projects","environments","errored","loading","StyledGraphContainer","mini","processTableResults","chartOptions","hideError","timeseriesData","results","StyledErrorMessage","allSeries","smooth","hasOther","length","chartColors","charts","getColorPalette","push","chartOther","axisPointer","axisLine","axisLabel","chartLabel","fontFamily","family","fontSize","inside","showMinLabel","showMaxLabel","splitNumber","splitLine","zlevel","zIndex","header","toolBox","grid","top","bottom","containLabel","ChartComponent","gray300","withApi","withTheme","QueryCard","PureComponent","onEventClick","callIfFunction","queryDetail","renderContextMenu","renderGraph","createdBy","dateStatus","handleClick","StyledQueryCard","interactive","QueryCardHeader","QueryCardContent","QueryTitle","QueryDetail","AvatarWrapper","QueryCardBody","StyledErrorBoundary","QueryCardFooter","DateSelected","DateStatus","border","space","Card","cardTitle","headingColor","overflowEllipsis","familyMono","fontSizeSmall","subText","ErrorBoundary","QueryList","onQueryChange","savedQueries","handleDeleteQuery","browserHistory","clone","handleCreateQuery","resetPageFilters","renderQueries","renderPrebuilt","links","parseLinkHeader","cards","previous","concat","renderPrebuiltQueries","renderSavedQueries","x","StyledEmptyStateWarning","renderDropdownMenu","items","trigger","triggerProps","ref","triggerRef","DropdownTrigger","borderless","e","stopPropagation","preventDefault","icon","direction","placement","savedQuerySearchQuery","router","views","getPrebuiltQueries","hasSearchQuery","needleSearch","toLowerCase","view","index","EventView","recentTimeline","customTimeline","getResultsViewUrlTarget","menuItems","key","onAction","handleAddQueryToDashboard","query_name","features","hasFeature","savedQuery","getResultsViewShortUrlTarget","date","dateUpdated","canAddToDashboard","handleDuplicateQuery","decodeList","priority","Fragment","QueryGrid","PaginationRow","onCursor","path","Number","split","newQuery","Pagination","breakpoints","medium","large","Button","EmptyStateWarning","SORT_OPTIONS","DiscoverLanding","AsyncComponent","reloading","errors","shouldRenderPrebuilt","savedQueriesPageLinks","searchQuery","String","trim","setRenderPrebuilt","getSavedQuerySearchQuery","getActiveSort","urlSort","find","item","getEndpoints","perPage","canRenderPrebuilt","numOfPrebuiltQueries","reduce","sum","Math","queryParams","sortBy","PAYLOAD_KEYS","renderBanner","DEFAULT_EVENT_VIEW","stringify","renderActions","activeSort","StyledActions","StyledSearchBar","defaultQuery","placeholder","onSearch","handleSearchQuery","PrebuiltSwitch","SwitchLabel","isActive","isDisabled","toggle","togglePrebuilt","buttonProps","prefix","onSelect","handleSortChange","renderNoAccess","renderBody","handleQueryChange","renderDisabled","StyledPageContent","StyledPageHeader","target","StyledButton","renderComponent","PageContent","headerFontSize","SearchBar","small","withOrganization","checkPointerAndTrigger","controller","behaviorToCheck","contollerEvent","pointerChecker","originX","originY","event","isAvailableBehavior","bind","settings","setting","isString","_super","RoamController","zr","_this","call","_zr","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","opt","disable","_opt","defaults","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","on","off","prototype","isDragging","_dragging","isPinching","_pinching","setPointerChecker","dispose","draggable","offsetX","y","offsetY","_x","_y","gestureEvent","oldX","oldY","dx","dy","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","abs","factor","scale","absDelta","scrollDelta","pinchScale","pinchX","pinchY","module","exports","predicate","TypeError","args","arguments","apply","baseIteratee","negate","pickBy","object"],"sourceRoot":""}