{"version":3,"file":"chunks/app_components_charts_utils_tsx-app_utils_discover_fieldRenderers_tsx-app_utils_withPageFilte-bf3b38.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/actionCreators/guides.tsx","webpack:///./app/actions/pageFiltersActions.tsx","webpack:///./app/components/actions/menuHeader.tsx","webpack:///./app/components/assistant/guideAnchor.tsx","webpack:///./app/components/autoSelectText.tsx","webpack:///./app/components/charts/utils.tsx","webpack:///./app/components/checkboxFancy/checkboxFancy.tsx","webpack:///./app/components/count.tsx","webpack:///./app/components/dateTime.tsx","webpack:///./app/components/duration.tsx","webpack:///./app/components/gridEditable/styles.tsx","webpack:///./app/components/gridEditable/index.tsx","webpack:///./app/components/menuItem.tsx","webpack:///./app/components/organizations/pageFilters/parse.tsx","webpack:///./app/components/performance/teamKeyTransaction.tsx","webpack:///./app/components/performance/teamKeyTransactionsManager.tsx","webpack:///./app/actionCreators/performance.tsx","webpack:///./app/components/performance/waterfall/constants.tsx","webpack:///./app/components/performance/waterfall/rowBar.tsx","webpack:///./app/components/performance/waterfall/utils.tsx","webpack:///./app/components/scoreBar.tsx","webpack:///./app/components/shortId.tsx","webpack:///./app/components/userMisery.tsx","webpack:///./app/components/version.tsx","webpack:///./app/stores/guideStore.tsx","webpack:///./app/components/assistant/getGuidesContent.tsx","webpack:///./app/utils/isEqualWithDates.tsx","webpack:///./app/stores/pageFiltersStore.tsx","webpack:///./app/types/utils.tsx","webpack:///./app/utils/dates.tsx","webpack:///./app/utils/discover/arrayValue.tsx","webpack:///./app/utils/discover/teamKeyTransactionField.tsx","webpack:///./app/utils/discover/fieldRenderers.tsx","webpack:///./app/utils/discover/fields.tsx","webpack:///./app/utils/discover/styles.tsx","webpack:///./app/utils/performance/constants.tsx","webpack:///./app/utils/tokenizeSearch.tsx","webpack:///./app/utils/usePageFilters.tsx","webpack:///./app/utils/withPageFilters.tsx","webpack:///./app/utils/metrics/fields.tsx","webpack:///./app/views/dashboardsV2/widgetBuilder/releaseWidget/fields.tsx","webpack:///./app/views/eventsV2/table/types.tsx","webpack:///./app/views/eventsV2/utils.tsx","webpack:///./app/views/performance/transactionSummary/filter.tsx","webpack:///./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"],"sourcesContent":["import * as Sentry from '@sentry/react';\n\nimport {Client} from 'sentry/api';\nimport ConfigStore from 'sentry/stores/configStore';\nimport GuideStore from 'sentry/stores/guideStore';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\n\nconst api = new Client();\n\nexport async function fetchGuides() {\n  try {\n    const data = await api.requestPromise('/assistant/');\n    GuideStore.fetchSucceeded(data);\n  } catch (error) {\n    Sentry.captureException(error);\n  }\n}\n\nexport function registerAnchor(target: string) {\n  GuideStore.registerAnchor(target);\n}\n\nexport function unregisterAnchor(target: string) {\n  GuideStore.unregisterAnchor(target);\n}\n\nexport function nextStep() {\n  GuideStore.nextStep();\n}\n\nexport function setForceHide(forceHide: boolean) {\n  GuideStore.setForceHide(forceHide);\n}\n\nexport function toStep(step: number) {\n  GuideStore.toStep(step);\n}\n\nexport function closeGuide(dismissed?: boolean) {\n  GuideStore.closeGuide(dismissed);\n}\n\nexport function dismissGuide(guide: string, step: number, orgId: string | null) {\n  recordDismiss(guide, step, orgId);\n  closeGuide(true);\n}\n\nexport function recordFinish(guide: string, orgId: string | null) {\n  api.request('/assistant/', {\n    method: 'PUT',\n    data: {\n      guide,\n      status: 'viewed',\n    },\n  });\n\n  const user = ConfigStore.get('user');\n  if (!user) {\n    return;\n  }\n\n  const data = {\n    eventKey: 'assistant.guide_finished',\n    eventName: 'Assistant Guide Finished',\n    guide,\n    organization_id: orgId,\n    user_id: parseInt(user.id, 10),\n  };\n  trackAnalyticsEvent(data);\n}\n\nexport function recordDismiss(guide: string, step: number, orgId: string | null) {\n  api.request('/assistant/', {\n    method: 'PUT',\n    data: {\n      guide,\n      status: 'dismissed',\n    },\n  });\n\n  const user = ConfigStore.get('user');\n  if (!user) {\n    return;\n  }\n\n  const data = {\n    eventKey: 'assistant.guide_dismissed',\n    eventName: 'Assistant Guide Dismissed',\n    guide,\n    step,\n    organization_id: orgId,\n    user_id: parseInt(user.id, 10),\n  };\n  trackAnalyticsEvent(data);\n}\n","import {createActions} from 'reflux';\n\nconst PageFiltersActions = createActions([\n  'reset',\n  'initializeUrlState',\n  'updateProjects',\n  'updateDateTime',\n  'updateEnvironments',\n  'updateDesyncedFilters',\n  'pin',\n]);\n\nexport default PageFiltersActions;\n","import styled from '@emotion/styled';\n\nimport MenuItem from 'sentry/components/menuItem';\nimport space from 'sentry/styles/space';\n\nconst MenuHeader = styled(MenuItem)`\n  text-transform: uppercase;\n  font-weight: 600;\n  color: ${p => p.theme.gray400};\n  border-bottom: 1px solid ${p => p.theme.innerBorder};\n  padding: ${space(1)};\n`;\n\nMenuHeader.defaultProps = {\n  header: true,\n};\n\nexport default MenuHeader;\n","import {Component, createRef, Fragment} from 'react';\nimport styled from '@emotion/styled';\nimport * as Sentry from '@sentry/react';\nimport {Query} from 'history';\n\nimport {\n  closeGuide,\n  dismissGuide,\n  nextStep,\n  recordFinish,\n  registerAnchor,\n  unregisterAnchor,\n} from 'sentry/actionCreators/guides';\nimport {Guide} from 'sentry/components/assistant/types';\nimport Button from 'sentry/components/button';\nimport {Body as HovercardBody, Hovercard} from 'sentry/components/hovercard';\nimport {t, tct} from 'sentry/locale';\nimport GuideStore, {GuideStoreState} from 'sentry/stores/guideStore';\nimport space from 'sentry/styles/space';\nimport theme from 'sentry/utils/theme';\n\ntype Props = {\n  target: string;\n  /**\n   * Hovercard renders the container\n   */\n  containerClassName?: string;\n  offset?: string;\n  /**\n   * Trigger when the guide is completed (all steps have been clicked through)\n   */\n  onFinish?: (e: React.MouseEvent) => void;\n  /**\n   * Triggered when any step is completed (including the last step)\n   */\n  onStepComplete?: (e: React.MouseEvent) => void;\n  position?: React.ComponentProps<typeof Hovercard>['position'];\n  to?: {\n    pathname: string;\n    query: Query;\n  };\n};\n\ntype State = {\n  active: boolean;\n  orgId: string | null;\n  step: number;\n  currentGuide?: Guide;\n};\n\nclass BaseGuideAnchor extends Component<Props, State> {\n  state: State = {\n    active: false,\n    step: 0,\n    orgId: null,\n  };\n\n  componentDidMount() {\n    const {target} = this.props;\n    registerAnchor(target);\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (this.containerElement.current && !prevState.active && this.state.active) {\n      try {\n        const {top} = this.containerElement.current.getBoundingClientRect();\n        const scrollTop = window.pageYOffset;\n        const centerElement = top + scrollTop - window.innerHeight / 2;\n        window.scrollTo({top: centerElement});\n      } catch (err) {\n        Sentry.captureException(err);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const {target} = this.props;\n    unregisterAnchor(target);\n    this.unsubscribe();\n  }\n\n  unsubscribe = GuideStore.listen(\n    (data: GuideStoreState) => this.onGuideStateChange(data),\n    undefined\n  );\n\n  containerElement = createRef<HTMLSpanElement>();\n\n  onGuideStateChange(data: GuideStoreState) {\n    const active =\n      data.currentGuide?.steps[data.currentStep]?.target === this.props.target &&\n      !data.forceHide;\n\n    this.setState({\n      active,\n      currentGuide: data.currentGuide ?? undefined,\n      step: data.currentStep,\n      orgId: data.orgId,\n    });\n  }\n\n  /**\n   * Terminology:\n   *\n   *  - A guide can be FINISHED by clicking one of the buttons in the last step\n   *  - A guide can be DISMISSED by x-ing out of it at any step except the last (where there is no x)\n   *  - In both cases we consider it CLOSED\n   */\n  handleFinish = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    this.props.onStepComplete?.(e);\n    this.props.onFinish?.(e);\n\n    const {currentGuide, orgId} = this.state;\n    if (currentGuide) {\n      recordFinish(currentGuide.guide, orgId);\n    }\n    closeGuide();\n  };\n\n  handleNextStep = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    this.props.onStepComplete?.(e);\n    nextStep();\n  };\n\n  handleDismiss = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    const {currentGuide, step, orgId} = this.state;\n    if (currentGuide) {\n      dismissGuide(currentGuide.guide, step, orgId);\n    }\n  };\n\n  getHovercardBody() {\n    const {to} = this.props;\n    const {currentGuide, step} = this.state;\n    if (!currentGuide) {\n      return null;\n    }\n\n    const totalStepCount = currentGuide.steps.length;\n    const currentStepCount = step + 1;\n    const currentStep = currentGuide.steps[step];\n    const lastStep = currentStepCount === totalStepCount;\n    const hasManySteps = totalStepCount > 1;\n\n    // to clear `#assistant` from the url\n    const href = window.location.hash === '#assistant' ? '#' : '';\n\n    const dismissButton = (\n      <DismissButton\n        size=\"small\"\n        translucentBorder\n        href={href}\n        onClick={this.handleDismiss}\n        priority=\"link\"\n      >\n        {currentStep.dismissText || t('Dismiss')}\n      </DismissButton>\n    );\n\n    return (\n      <GuideContainer data-test-id=\"guide-container\">\n        <GuideContent>\n          {currentStep.title && <GuideTitle>{currentStep.title}</GuideTitle>}\n          <GuideDescription>{currentStep.description}</GuideDescription>\n        </GuideContent>\n        <GuideAction>\n          <div>\n            {lastStep ? (\n              <Fragment>\n                <StyledButton\n                  size=\"small\"\n                  translucentBorder\n                  to={to}\n                  onClick={this.handleFinish}\n                >\n                  {currentStep.nextText ||\n                    (hasManySteps ? t('Enough Already') : t('Got It'))}\n                </StyledButton>\n                {currentStep.hasNextGuide && dismissButton}\n              </Fragment>\n            ) : (\n              <Fragment>\n                <StyledButton\n                  size=\"small\"\n                  translucentBorder\n                  onClick={this.handleNextStep}\n                  to={to}\n                >\n                  {currentStep.nextText || t('Next')}\n                </StyledButton>\n                {!currentStep.cantDismiss && dismissButton}\n              </Fragment>\n            )}\n          </div>\n\n          {hasManySteps && (\n            <StepCount>\n              {tct('[currentStepCount] of [totalStepCount]', {\n                currentStepCount,\n                totalStepCount,\n              })}\n            </StepCount>\n          )}\n        </GuideAction>\n      </GuideContainer>\n    );\n  }\n\n  render() {\n    const {children, position, offset, containerClassName} = this.props;\n    const {active} = this.state;\n\n    if (!active) {\n      return children ? children : null;\n    }\n\n    return (\n      <StyledHovercard\n        show\n        body={this.getHovercardBody()}\n        tipColor={theme.purple300}\n        position={position}\n        offset={offset}\n        containerClassName={containerClassName}\n      >\n        <span ref={this.containerElement}>{children}</span>\n      </StyledHovercard>\n    );\n  }\n}\n\n/**\n * Wraps the GuideAnchor so we don't have to render it if it's disabled\n * Using a class so we automatically have children as a typed prop\n */\ntype WrapperProps = Props & {\n  children?: React.ReactNode;\n  disabled?: boolean;\n};\n\n/**\n * A GuideAnchor puts an informative hovercard around an element. Guide anchors\n * register with the GuideStore, which uses registrations from one or more\n * anchors on the page to determine which guides can be shown on the page.\n */\nfunction GuideAnchor({disabled, children, ...rest}: WrapperProps) {\n  if (disabled) {\n    return <Fragment>{children}</Fragment>;\n  }\n  return <BaseGuideAnchor {...rest}>{children}</BaseGuideAnchor>;\n}\n\nexport default GuideAnchor;\n\nconst GuideContainer = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(2)};\n  text-align: center;\n  line-height: 1.5;\n  background-color: ${p => p.theme.purple300};\n  border-color: ${p => p.theme.purple300};\n  color: ${p => p.theme.white};\n`;\n\nconst GuideContent = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(1)};\n\n  a {\n    color: ${p => p.theme.white};\n    text-decoration: underline;\n  }\n`;\n\nconst GuideTitle = styled('div')`\n  font-weight: bold;\n  font-size: ${p => p.theme.fontSizeExtraLarge};\n`;\n\nconst GuideDescription = styled('div')`\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst GuideAction = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(1)};\n`;\n\nconst StyledButton = styled(Button)`\n  font-size: ${p => p.theme.fontSizeMedium};\n  min-width: 40%;\n`;\n\nconst DismissButton = styled(StyledButton)`\n  margin-left: ${space(1)};\n\n  &:hover,\n  &:focus,\n  &:active {\n    color: ${p => p.theme.white};\n  }\n  color: ${p => p.theme.white};\n`;\n\nconst StepCount = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: bold;\n  text-transform: uppercase;\n`;\n\nconst StyledHovercard = styled(Hovercard)`\n  ${HovercardBody} {\n    background-color: ${theme.purple300};\n    margin: -1px;\n    border-radius: ${theme.borderRadius};\n    width: 300px;\n  }\n`;\n","import {forwardRef, useImperativeHandle, useRef} from 'react';\nimport classNames from 'classnames';\n\nimport {selectText} from 'sentry/utils/selectText';\n\ntype Props = {\n  children: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n};\n\ntype AutoSelectHandle = {\n  selectText: () => void;\n};\n\nconst AutoSelectText: React.ForwardRefRenderFunction<AutoSelectHandle, Props> = (\n  {children, className, ...props},\n  forwardedRef\n) => {\n  const element = useRef<HTMLSpanElement>(null);\n\n  // We need to expose a selectText method to parent components\n  // and need an imperitive ref handle.\n  useImperativeHandle(forwardedRef, () => ({\n    selectText: () => handleClick(),\n  }));\n\n  function handleClick() {\n    if (!element.current) {\n      return;\n    }\n    selectText(element.current);\n  }\n\n  // use an inner span here for the selection as otherwise the selectText\n  // function will create a range that includes the entire part of the\n  // div (including the div itself) which causes newlines to be selected\n  // in chrome.\n  return (\n    <div\n      {...props}\n      onClick={handleClick}\n      className={classNames('auto-select-text', className)}\n    >\n      <span ref={element}>{children}</span>\n    </div>\n  );\n};\n\nexport default forwardRef(AutoSelectText);\n","import type {LegendComponentOption} from 'echarts';\nimport type {Location} from 'history';\nimport moment from 'moment';\n\nimport {DEFAULT_STATS_PERIOD} from 'sentry/constants';\nimport {EventsStats, MultiSeriesEventsStats, PageFilters} from 'sentry/types';\nimport {defined, escape} from 'sentry/utils';\nimport {parsePeriodToHours} from 'sentry/utils/dates';\nimport type {TableDataWithTitle} from 'sentry/utils/discover/discoverQuery';\nimport {decodeList} from 'sentry/utils/queryString';\n\nconst DEFAULT_TRUNCATE_LENGTH = 80;\n\n// In minutes\nexport const SIXTY_DAYS = 86400;\nexport const THIRTY_DAYS = 43200;\nexport const TWO_WEEKS = 20160;\nexport const ONE_WEEK = 10080;\nexport const TWENTY_FOUR_HOURS = 1440;\nexport const SIX_HOURS = 360;\nexport const ONE_HOUR = 60;\n\n/**\n * If there are more releases than this number we hide \"Releases\" series by default\n */\nexport const RELEASE_LINES_THRESHOLD = 50;\n\nexport type DateTimeObject = Partial<PageFilters['datetime']>;\n\nexport function truncationFormatter(\n  value: string,\n  truncate: number | boolean | undefined\n): string {\n  if (!truncate) {\n    return escape(value);\n  }\n  const truncationLength =\n    truncate && typeof truncate === 'number' ? truncate : DEFAULT_TRUNCATE_LENGTH;\n  const truncated =\n    value.length > truncationLength ? value.substring(0, truncationLength) + '…' : value;\n  return escape(truncated);\n}\n\n/**\n * Use a shorter interval if the time difference is <= 24 hours.\n */\nexport function useShortInterval(datetimeObj: DateTimeObject): boolean {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  return diffInMinutes <= TWENTY_FOUR_HOURS;\n}\n\nexport type Fidelity = 'high' | 'medium' | 'low';\n\nexport function getInterval(datetimeObj: DateTimeObject, fidelity: Fidelity = 'medium') {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  if (diffInMinutes >= SIXTY_DAYS) {\n    // Greater than or equal to 60 days\n    if (fidelity === 'high') {\n      return '4h';\n    }\n    if (fidelity === 'medium') {\n      return '1d';\n    }\n    return '2d';\n  }\n\n  if (diffInMinutes >= THIRTY_DAYS) {\n    // Greater than or equal to 30 days\n    if (fidelity === 'high') {\n      return '1h';\n    }\n    if (fidelity === 'medium') {\n      return '4h';\n    }\n    return '1d';\n  }\n\n  if (diffInMinutes >= TWO_WEEKS) {\n    if (fidelity === 'high') {\n      return '30m';\n    }\n    if (fidelity === 'medium') {\n      return '1h';\n    }\n    return '12h';\n  }\n\n  if (diffInMinutes > TWENTY_FOUR_HOURS) {\n    // Greater than 24 hours\n    if (fidelity === 'high') {\n      return '30m';\n    }\n    if (fidelity === 'medium') {\n      return '1h';\n    }\n    return '6h';\n  }\n\n  if (diffInMinutes > ONE_HOUR) {\n    // Between 1 hour and 24 hours\n    if (fidelity === 'high') {\n      return '5m';\n    }\n    if (fidelity === 'medium') {\n      return '15m';\n    }\n    return '1h';\n  }\n\n  // Less than or equal to 1 hour\n  if (fidelity === 'high') {\n    return '1m';\n  }\n  if (fidelity === 'medium') {\n    return '5m';\n  }\n  return '10m';\n}\n\n/**\n * Duplicate of getInterval, except that we do not support <1h granularity\n * Used by OrgStatsV2 API\n */\nexport function getSeriesApiInterval(datetimeObj: DateTimeObject) {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  if (diffInMinutes >= SIXTY_DAYS) {\n    // Greater than or equal to 60 days\n    return '1d';\n  }\n\n  if (diffInMinutes >= THIRTY_DAYS) {\n    // Greater than or equal to 30 days\n    return '4h';\n  }\n\n  return '1h';\n}\n\nexport function getDiffInMinutes(datetimeObj: DateTimeObject): number {\n  const {period, start, end} = datetimeObj;\n\n  if (start && end) {\n    return moment(end).diff(start, 'minutes');\n  }\n\n  return (\n    parsePeriodToHours(typeof period === 'string' ? period : DEFAULT_STATS_PERIOD) * 60\n  );\n}\n\n// Max period (in hours) before we can no long include previous period\nconst MAX_PERIOD_HOURS_INCLUDE_PREVIOUS = 45 * 24;\n\nexport function canIncludePreviousPeriod(\n  includePrevious: boolean | undefined,\n  period: string | null | undefined\n) {\n  if (!includePrevious) {\n    return false;\n  }\n\n  if (period && parsePeriodToHours(period) > MAX_PERIOD_HOURS_INCLUDE_PREVIOUS) {\n    return false;\n  }\n\n  // otherwise true\n  return !!includePrevious;\n}\n\nexport function shouldFetchPreviousPeriod({\n  includePrevious = true,\n  period,\n  start,\n  end,\n}: {\n  includePrevious?: boolean;\n} & Pick<DateTimeObject, 'start' | 'end' | 'period'>) {\n  return !start && !end && canIncludePreviousPeriod(includePrevious, period);\n}\n\n/**\n * Generates a series selection based on the query parameters defined by the location.\n */\nexport function getSeriesSelection(\n  location: Location\n): LegendComponentOption['selected'] {\n  const unselectedSeries = decodeList(location?.query.unselectedSeries);\n  return unselectedSeries.reduce((selection, series) => {\n    selection[series] = false;\n    return selection;\n  }, {});\n}\n\nfunction isSingleSeriesStats(\n  data: MultiSeriesEventsStats | EventsStats\n): data is EventsStats {\n  return (\n    (defined(data.data) || defined(data.totals)) &&\n    defined(data.start) &&\n    defined(data.end)\n  );\n}\n\nexport function isMultiSeriesStats(\n  data: MultiSeriesEventsStats | EventsStats | null | undefined,\n  isTopN?: boolean\n): data is MultiSeriesEventsStats {\n  return (\n    defined(data) &&\n    ((data.data === undefined && data.totals === undefined) ||\n      (defined(isTopN) && isTopN && defined(data) && !!!isSingleSeriesStats(data))) // the isSingleSeriesStats check is for topN queries returning null data\n  );\n}\n\n// If dimension is a number convert it to pixels, otherwise use dimension\n// without transform\nexport const getDimensionValue = (dimension?: number | string | null) => {\n  if (typeof dimension === 'number') {\n    return `${dimension}px`;\n  }\n\n  if (dimension === null) {\n    return undefined;\n  }\n\n  return dimension;\n};\n\nconst RGB_LIGHTEN_VALUE = 30;\nexport const lightenHexToRgb = (colors: string[]) =>\n  colors.map(hex => {\n    const rgb = [\n      Math.min(parseInt(hex.slice(1, 3), 16) + RGB_LIGHTEN_VALUE, 255),\n      Math.min(parseInt(hex.slice(3, 5), 16) + RGB_LIGHTEN_VALUE, 255),\n      Math.min(parseInt(hex.slice(5, 7), 16) + RGB_LIGHTEN_VALUE, 255),\n    ];\n    return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  });\n\nconst DEFAULT_GEO_DATA = {\n  title: '',\n  data: [],\n};\nexport const processTableResults = (tableResults?: TableDataWithTitle[]) => {\n  if (!tableResults || !tableResults.length) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  const tableResult = tableResults[0];\n\n  const {data, meta} = tableResult;\n\n  if (!data || !data.length || !meta) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  const preAggregate = Object.keys(meta).find(column => {\n    return column !== 'geo.country_code';\n  });\n\n  if (!preAggregate) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  return {\n    title: tableResult.title ?? '',\n    data: data.map(row => {\n      return {\n        name: row['geo.country_code'] as string,\n        value: row[preAggregate] as number,\n      };\n    }),\n  };\n};\n\nexport const getPreviousSeriesName = (seriesName: string) => {\n  return `previous ${seriesName}`;\n};\n","import {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport {IconCheckmark, IconSubtract} from 'sentry/icons';\nimport {Theme} from 'sentry/utils/theme';\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  isChecked?: boolean;\n  isDisabled?: boolean;\n  isIndeterminate?: boolean;\n  size?: string;\n}\n\nconst disabledStyles = (p: Props & {theme: Theme}) =>\n  p.isDisabled &&\n  css`\n    background: ${p.isChecked || p.isIndeterminate\n      ? p.theme.gray200\n      : p.theme.backgroundSecondary};\n    border-color: ${p.theme.border};\n  `;\n\nconst hoverStyles = (p: Props & {theme: Theme}) =>\n  !p.isDisabled &&\n  css`\n    border: 2px solid\n      ${p.isChecked || p.isIndeterminate ? p.theme.active : p.theme.textColor};\n  `;\n\nconst CheckboxFancy = styled(\n  ({isDisabled, isChecked, isIndeterminate, size: _size, ...props}: Props) => (\n    <div\n      data-test-id=\"checkbox-fancy\"\n      role=\"checkbox\"\n      aria-disabled={isDisabled}\n      aria-checked={isIndeterminate ? 'mixed' : isChecked}\n      {...props}\n    >\n      {isIndeterminate && <IconSubtract size=\"70%\" color=\"white\" />}\n      {!isIndeterminate && isChecked && <IconCheckmark size=\"70%\" color=\"white\" />}\n    </div>\n  )\n)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.05) inset;\n  width: ${p => p.size};\n  height: ${p => p.size};\n  border-radius: 5px;\n  background: ${p => (p.isChecked || p.isIndeterminate ? p.theme.active : 'transparent')};\n  border: 2px solid\n    ${p => (p.isChecked || p.isIndeterminate ? p.theme.active : p.theme.gray300)};\n  cursor: ${p => (p.isDisabled ? 'not-allowed' : 'pointer')};\n  ${p => (!p.isChecked || !p.isIndeterminate) && 'transition: 500ms border ease-out'};\n\n  &:hover {\n    ${hoverStyles}\n  }\n\n  ${disabledStyles}\n`;\n\nCheckboxFancy.defaultProps = {\n  size: '16px',\n  isChecked: false,\n  isIndeterminate: false,\n};\n\nexport default CheckboxFancy;\n","import {formatAbbreviatedNumber} from 'sentry/utils/formatters';\n\ntype Props = {\n  value: string | number;\n  className?: string;\n};\n\nfunction Count({value, className}: Props) {\n  return (\n    <span className={className} title={value?.toLocaleString()}>\n      {formatAbbreviatedNumber(value)}\n    </span>\n  );\n}\n\nexport default Count;\n","import moment from 'moment';\nimport momentTimezone from 'moment-timezone';\n\nimport ConfigStore from 'sentry/stores/configStore';\n\ninterface Props extends React.HTMLAttributes<HTMLTimeElement> {\n  date: moment.MomentInput | momentTimezone.MomentInput;\n  dateOnly?: boolean;\n  format?: string;\n  seconds?: boolean;\n  shortDate?: boolean;\n  timeAndDate?: boolean;\n  timeOnly?: boolean;\n  utc?: boolean;\n}\n\nfunction DateTime({\n  format,\n  date,\n  utc,\n  shortDate,\n  dateOnly,\n  timeOnly,\n  timeAndDate,\n  seconds = true,\n  ...props\n}: Props) {\n  function getFormat({clock24Hours}: {clock24Hours: boolean}): string {\n    if (format) {\n      return format;\n    }\n\n    // October 26, 2017\n    if (dateOnly) {\n      return 'LL';\n    }\n\n    // Oct 26, 11:30 AM\n    if (timeAndDate) {\n      if (clock24Hours) {\n        return 'MMM DD, HH:mm';\n      }\n\n      return 'MMM DD, LT';\n    }\n\n    // 4:57 PM\n    if (timeOnly) {\n      if (clock24Hours) {\n        return 'HH:mm';\n      }\n\n      return 'LT';\n    }\n\n    if (shortDate) {\n      return 'MM/DD/YYYY';\n    }\n\n    if (clock24Hours) {\n      if (seconds) {\n        // Oct 26, 2017 11:30:30\n        return 'MMM D, YYYY HH:mm:ss';\n      }\n\n      // Oct 26, 2017 11:30\n      return 'MMM D, YYYY HH:mm';\n    }\n\n    // Oct 26, 2017 11:30:30 AM\n    if (seconds) {\n      return 'll LTS z';\n    }\n\n    // Default is Oct 26, 2017 11:30 AM\n    return 'lll';\n  }\n\n  const user = ConfigStore.get('user');\n  const options = user?.options;\n  const formatString = getFormat(options);\n\n  return (\n    <time {...props}>\n      {utc\n        ? moment.utc(date as moment.MomentInput).format(formatString)\n        : momentTimezone.tz(date, options?.timezone ?? '').format(formatString)}\n    </time>\n  );\n}\n\nexport default DateTime;\n","import {getDuration, getExactDuration} from 'sentry/utils/formatters';\n\ninterface Props extends React.HTMLAttributes<HTMLSpanElement> {\n  seconds: number;\n  abbreviation?: boolean;\n  exact?: boolean;\n  fixedDigits?: number;\n}\n\nconst Duration = ({seconds, fixedDigits, abbreviation, exact, ...props}: Props) => (\n  <span {...props}>\n    {exact\n      ? getExactDuration(seconds, abbreviation)\n      : getDuration(seconds, fixedDigits, abbreviation)}\n  </span>\n);\n\nexport default Duration;\n","import styled from '@emotion/styled';\n\nimport {Panel, PanelBody} from 'sentry/components/panels';\nimport space from 'sentry/styles/space';\n\nexport const GRID_HEAD_ROW_HEIGHT = 45;\nexport const GRID_BODY_ROW_HEIGHT = 40;\nexport const GRID_STATUS_MESSAGE_HEIGHT = GRID_BODY_ROW_HEIGHT * 4;\n\n/**\n * Local z-index stacking context\n * https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context\n */\n// Parent context is Panel\nconst Z_INDEX_PANEL = 1;\nconst Z_INDEX_GRID_STATUS = -1;\nconst Z_INDEX_GRID = 5;\n\n// Parent context is GridHeadCell\nconst Z_INDEX_GRID_RESIZER = 1;\n\nexport const Header = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${space(1)};\n`;\n\nexport const HeaderTitle = styled('h4')`\n  margin: 0;\n  font-size: ${p => p.theme.fontSizeMedium};\n  color: ${p => p.theme.subText};\n`;\n\nexport const HeaderButtonContainer = styled('div')`\n  display: grid;\n  gap: ${space(1)};\n  grid-auto-flow: column;\n  grid-auto-columns: auto;\n  justify-items: end;\n\n  /* Hovercard anchor element when features are disabled. */\n  & > span {\n    display: flex;\n    flex-direction: row;\n  }\n`;\n\nexport const Body = styled(({children, ...props}) => (\n  <Panel {...props}>\n    <PanelBody>{children}</PanelBody>\n  </Panel>\n))`\n  overflow: hidden;\n  z-index: ${Z_INDEX_PANEL};\n`;\n\n/**\n * Grid is the parent element for the tableResizable component.\n *\n * On newer browsers, it will use CSS Grids to implement its layout.\n *\n * However, it is based on <table>, which has a distinction between header/body\n * HTML elements, which allows CSS selectors to its full potential. This has\n * the added advantage that older browsers will still have a chance of\n * displaying the data correctly (but this is untested).\n *\n * <thead>, <tbody>, <tr> are ignored by CSS Grid.\n * The entire layout is determined by the usage of <th> and <td>.\n */\nexport const Grid = styled('table')`\n  position: inherit;\n  display: grid;\n\n  /* Overwritten by GridEditable.setGridTemplateColumns */\n  grid-template-columns: repeat(auto-fill, minmax(50px, auto));\n\n  box-sizing: border-box;\n  border-collapse: collapse;\n  margin: 0;\n\n  z-index: ${Z_INDEX_GRID};\n  overflow-x: auto;\n`;\n\nexport const GridRow = styled('tr')`\n  display: contents;\n\n  &:last-child,\n  &:last-child > td:first-child,\n  &:last-child > td:last-child {\n    border-bottom-left-radius: ${p => p.theme.borderRadius};\n    border-bottom-right-radius: ${p => p.theme.borderRadius};\n  }\n`;\n\n/**\n * GridHead is the collection of elements that builds the header section of the\n * Grid. As the entirety of the add/remove/resize actions are performed on the\n * header, most of the elements behave different for each stage.\n */\nexport const GridHead = styled('thead')`\n  display: contents;\n`;\n\nexport const GridHeadCell = styled('th')<{isFirst: boolean}>`\n  /* By default, a grid item cannot be smaller than the size of its content.\n     We override this by setting min-width to be 0. */\n  position: relative; /* Used by GridResizer */\n  height: ${GRID_HEAD_ROW_HEIGHT}px;\n  display: flex;\n  align-items: center;\n  min-width: 24px;\n  padding: 0 ${space(2)};\n\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  background-color: ${p => p.theme.backgroundSecondary};\n  color: ${p => p.theme.subText};\n\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: 600;\n  text-transform: uppercase;\n  user-select: none;\n\n  a,\n  div,\n  span {\n    line-height: 1.1;\n    color: inherit;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n\n  &:first-child {\n    border-top-left-radius: ${p => p.theme.borderRadius};\n  }\n\n  &:last-child {\n    border-top-right-radius: ${p => p.theme.borderRadius};\n    border-right: none;\n  }\n\n  &:hover {\n    border-left-color: ${p => (p.isFirst ? 'transparent' : p.theme.border)};\n    border-right-color: ${p => p.theme.border};\n  }\n`;\n\n/**\n * Create spacing/padding similar to GridHeadCellWrapper but\n * without interactive aspects.\n */\nexport const GridHeadCellStatic = styled('th')`\n  height: ${GRID_HEAD_ROW_HEIGHT}px;\n  display: flex;\n  align-items: center;\n  padding: 0 ${space(2)};\n  background-color: ${p => p.theme.backgroundSecondary};\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: 600;\n  line-height: 1;\n  text-transform: uppercase;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n\n  &:first-child {\n    border-top-left-radius: ${p => p.theme.borderRadius};\n    padding: ${space(1)} 0 ${space(1)} ${space(3)};\n  }\n`;\n\n/**\n * GridBody are the collection of elements that contains and display the data\n * of the Grid. They are rather simple.\n */\nexport const GridBody = styled('tbody')`\n  display: contents;\n\n  > tr:first-child td {\n    border-top: 1px solid ${p => p.theme.border};\n  }\n`;\nexport const GridBodyCell = styled('td')`\n  /* By default, a grid item cannot be smaller than the size of its content.\n     We override this by setting min-width to be 0. */\n  min-width: 0;\n  /* Locking in the height makes calculation for resizer to be easier.\n     min-height is used to allow a cell to expand and this is used to display\n     feedback during empty/error state */\n  min-height: ${GRID_BODY_ROW_HEIGHT}px;\n  padding: ${space(1)} ${space(2)};\n\n  background-color: ${p => p.theme.background};\n  border-top: 1px solid ${p => p.theme.innerBorder};\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:first-child {\n    padding: ${space(1)} 0 ${space(1)} ${space(3)};\n  }\n\n  &:last-child {\n    border-right: none;\n    padding: ${space(1)} ${space(2)};\n  }\n`;\n\nconst GridStatusWrapper = styled(GridBodyCell)`\n  grid-column: 1 / -1;\n  width: 100%;\n  height: ${GRID_STATUS_MESSAGE_HEIGHT}px;\n  background-color: transparent;\n`;\nconst GridStatusFloat = styled('div')`\n  position: absolute;\n  top: 45px;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${GRID_STATUS_MESSAGE_HEIGHT}px;\n\n  z-index: ${Z_INDEX_GRID_STATUS};\n  background: ${p => p.theme.background};\n`;\nexport const GridBodyCellStatus = props => (\n  <GridStatusWrapper>\n    <GridStatusFloat>{props.children}</GridStatusFloat>\n  </GridStatusWrapper>\n);\n\n/**\n * We have a fat GridResizer and we use the ::after pseudo-element to draw\n * a thin 1px border.\n *\n * The right most cell does not have a resizer as resizing from that side does strange things.\n */\nexport const GridResizer = styled('div')<{dataRows: number}>`\n  position: absolute;\n  top: 0px;\n  right: -6px;\n  width: 11px;\n\n  height: ${p => {\n    const numOfRows = p.dataRows;\n    let height = GRID_HEAD_ROW_HEIGHT + numOfRows * GRID_BODY_ROW_HEIGHT;\n\n    if (numOfRows >= 1) {\n      // account for border-bottom height\n      height += numOfRows;\n    }\n\n    return height;\n  }}px;\n\n  padding-left: 5px;\n  padding-right: 5px;\n\n  cursor: col-resize;\n  z-index: ${Z_INDEX_GRID_RESIZER};\n\n  /**\n   * This element allows us to have a fat GridResizer that is easy to hover and\n   * drag, but still draws an appealing thin line for the border\n   */\n  &::after {\n    content: ' ';\n    display: block;\n    width: 100%; /* Equivalent to 1px */\n    height: 100%;\n  }\n\n  &:hover::after {\n    background-color: ${p => p.theme.gray200};\n  }\n\n  /**\n   * Ensure that this rule is after :hover, otherwise it will flicker when\n   * the GridResizer is dragged\n   */\n  &:active::after,\n  &:focus::after {\n    background-color: ${p => p.theme.purple300};\n  }\n\n  /**\n   * This element gives the resize handle a more visible knob to grab\n   */\n  &:hover::before {\n    position: absolute;\n    top: 0;\n    left: 2px;\n    content: ' ';\n    display: block;\n    width: 7px;\n    height: ${GRID_HEAD_ROW_HEIGHT}px;\n    background-color: ${p => p.theme.purple300};\n    opacity: 0.4;\n  }\n`;\n","import {Component, createRef, Fragment, Profiler} from 'react';\nimport {Location} from 'history';\n\nimport EmptyStateWarning from 'sentry/components/emptyStateWarning';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {IconWarning} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {onRenderCallback} from 'sentry/utils/performanceForSentry';\n\nimport {\n  Body,\n  Grid,\n  GridBody,\n  GridBodyCell,\n  GridBodyCellStatus,\n  GridHead,\n  GridHeadCell,\n  GridHeadCellStatic,\n  GridResizer,\n  GridRow,\n  Header,\n  HeaderButtonContainer,\n  HeaderTitle,\n} from './styles';\n\n// Auto layout width.\nexport const COL_WIDTH_UNDEFINED = -1;\n\n// Set to 90 as the edit/trash icons need this much space.\nexport const COL_WIDTH_MINIMUM = 90;\n\n// For GridEditable, there are 2 generic types for the component, T and K\n//\n// - T is an element/object that represents the data to be displayed\n// - K is a key of T/\n//   - columnKey should have the same set of values as K\n\ntype ObjectKey = React.ReactText;\n\nexport type GridColumn<K = ObjectKey> = {\n  key: K;\n  width?: number;\n};\n\nexport type GridColumnHeader<K = ObjectKey> = GridColumn<K> & {\n  name: string;\n};\n\nexport type GridColumnOrder<K = ObjectKey> = GridColumnHeader<K>;\n\nexport type GridColumnSortBy<K = ObjectKey> = GridColumn<K> & {\n  order: 'desc' | 'asc';\n};\n\n/**\n * Store state at the start of \"resize\" action\n */\nexport type ColResizeMetadata = {\n  columnIndex: number; // Column being resized\n  columnWidth: number; // Column width at start of resizing\n  cursorX: number; // X-coordinate of cursor on window\n};\n\ntype GridEditableProps<DataRow, ColumnKey> = {\n  columnOrder: GridColumnOrder<ColumnKey>[];\n  columnSortBy: GridColumnSortBy<ColumnKey>[];\n  data: DataRow[];\n\n  /**\n   * GridEditable allows the parent component to determine how to display the\n   * data within it. Note that this is optional.\n   */\n  grid: {\n    onResizeColumn?: (\n      columnIndex: number,\n      nextColumn: GridColumnOrder<ColumnKey>\n    ) => void;\n    prependColumnWidths?: string[];\n    renderBodyCell?: (\n      column: GridColumnOrder<ColumnKey>,\n      dataRow: DataRow,\n      rowIndex: number,\n      columnIndex: number\n    ) => React.ReactNode;\n    renderHeadCell?: (\n      column: GridColumnOrder<ColumnKey>,\n      columnIndex: number\n    ) => React.ReactNode;\n    renderPrependColumns?: (\n      isHeader: boolean,\n      dataRow?: DataRow,\n      rowIndex?: number\n    ) => React.ReactNode[];\n  };\n  location: Location;\n  error?: React.ReactNode | null;\n  /**\n   * Inject a set of buttons into the top of the grid table.\n   * The controlling component is responsible for handling any actions\n   * in these buttons and updating props to the GridEditable instance.\n   */\n  headerButtons?: () => React.ReactNode;\n  isLoading?: boolean;\n\n  /**\n   * GridEditable (mostly) do not maintain any internal state and relies on the\n   * parent component to tell it how/what to render and will mutate the view\n   * based on this 3 main props.\n   *\n   * - `columnOrder` determines the columns to show, from left to right\n   * - `columnSortBy` is not used at the moment, however it might be better to\n   *   move sorting into Grid for performance\n   */\n  title?: string;\n};\n\ntype GridEditableState = {\n  numColumn: number;\n};\n\nclass GridEditable<\n  DataRow extends {[key: string]: any},\n  ColumnKey extends ObjectKey\n> extends Component<GridEditableProps<DataRow, ColumnKey>, GridEditableState> {\n  // Static methods do not allow the use of generics bounded to the parent class\n  // For more info: https://github.com/microsoft/TypeScript/issues/14600\n  static getDerivedStateFromProps(\n    props: Readonly<GridEditableProps<Object, keyof Object>>,\n    prevState: GridEditableState\n  ): GridEditableState {\n    return {\n      ...prevState,\n      numColumn: props.columnOrder.length,\n    };\n  }\n\n  state: GridEditableState = {\n    numColumn: 0,\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.redrawGridColumn);\n    this.setGridTemplateColumns(this.props.columnOrder);\n  }\n\n  componentDidUpdate() {\n    // Redraw columns whenever new props are received\n    this.setGridTemplateColumns(this.props.columnOrder);\n  }\n\n  componentWillUnmount() {\n    this.clearWindowLifecycleEvents();\n    window.removeEventListener('resize', this.redrawGridColumn);\n  }\n\n  private refGrid = createRef<HTMLTableElement>();\n  private resizeMetadata?: ColResizeMetadata;\n  private resizeWindowLifecycleEvents: {\n    [eventName: string]: any[];\n  } = {\n    mousemove: [],\n    mouseup: [],\n  };\n\n  clearWindowLifecycleEvents() {\n    Object.keys(this.resizeWindowLifecycleEvents).forEach(e => {\n      this.resizeWindowLifecycleEvents[e].forEach(c => window.removeEventListener(e, c));\n      this.resizeWindowLifecycleEvents[e] = [];\n    });\n  }\n\n  onResetColumnSize = (e: React.MouseEvent, i: number) => {\n    e.stopPropagation();\n\n    const nextColumnOrder = [...this.props.columnOrder];\n    nextColumnOrder[i] = {\n      ...nextColumnOrder[i],\n      width: COL_WIDTH_UNDEFINED,\n    };\n    this.setGridTemplateColumns(nextColumnOrder);\n\n    const onResizeColumn = this.props.grid.onResizeColumn;\n    if (onResizeColumn) {\n      onResizeColumn(i, {\n        ...nextColumnOrder[i],\n        width: COL_WIDTH_UNDEFINED,\n      });\n    }\n  };\n\n  onResizeMouseDown = (e: React.MouseEvent, i: number = -1) => {\n    e.stopPropagation();\n\n    // Block right-click and other funky stuff\n    if (i === -1 || e.type === 'contextmenu') {\n      return;\n    }\n\n    // <GridResizer> is nested 1 level down from <GridHeadCell>\n    const cell = e.currentTarget!.parentElement;\n    if (!cell) {\n      return;\n    }\n\n    // HACK: Do not put into state to prevent re-rendering of component\n    this.resizeMetadata = {\n      columnIndex: i,\n      columnWidth: cell.offsetWidth,\n      cursorX: e.clientX,\n    };\n\n    window.addEventListener('mousemove', this.onResizeMouseMove);\n    this.resizeWindowLifecycleEvents.mousemove.push(this.onResizeMouseMove);\n\n    window.addEventListener('mouseup', this.onResizeMouseUp);\n    this.resizeWindowLifecycleEvents.mouseup.push(this.onResizeMouseUp);\n  };\n\n  onResizeMouseUp = (e: MouseEvent) => {\n    const metadata = this.resizeMetadata;\n    const onResizeColumn = this.props.grid.onResizeColumn;\n\n    if (metadata && onResizeColumn) {\n      const {columnOrder} = this.props;\n      const widthChange = e.clientX - metadata.cursorX;\n\n      onResizeColumn(metadata.columnIndex, {\n        ...columnOrder[metadata.columnIndex],\n        width: metadata.columnWidth + widthChange,\n      });\n    }\n\n    this.resizeMetadata = undefined;\n    this.clearWindowLifecycleEvents();\n  };\n\n  onResizeMouseMove = (e: MouseEvent) => {\n    const {resizeMetadata} = this;\n    if (!resizeMetadata) {\n      return;\n    }\n\n    window.requestAnimationFrame(() => this.resizeGridColumn(e, resizeMetadata));\n  };\n\n  resizeGridColumn(e: MouseEvent, metadata: ColResizeMetadata) {\n    const grid = this.refGrid.current;\n    if (!grid) {\n      return;\n    }\n\n    const widthChange = e.clientX - metadata.cursorX;\n\n    const nextColumnOrder = [...this.props.columnOrder];\n    nextColumnOrder[metadata.columnIndex] = {\n      ...nextColumnOrder[metadata.columnIndex],\n      width: Math.max(metadata.columnWidth + widthChange, 0),\n    };\n\n    this.setGridTemplateColumns(nextColumnOrder);\n  }\n\n  /**\n   * Recalculate the dimensions of Grid and Columns and redraws them\n   */\n  redrawGridColumn = () => {\n    this.setGridTemplateColumns(this.props.columnOrder);\n  };\n\n  /**\n   * Set the CSS for Grid Column\n   */\n  setGridTemplateColumns(columnOrder: GridColumnOrder[]) {\n    const grid = this.refGrid.current;\n    if (!grid) {\n      return;\n    }\n\n    const prependColumns = this.props.grid.prependColumnWidths || [];\n    const prepend = prependColumns.join(' ');\n    const widths = columnOrder.map((item, index) => {\n      if (item.width === COL_WIDTH_UNDEFINED) {\n        return `minmax(${COL_WIDTH_MINIMUM}px, auto)`;\n      }\n      if (typeof item.width === 'number' && item.width > COL_WIDTH_MINIMUM) {\n        if (index === columnOrder.length - 1) {\n          return `minmax(${item.width}px, auto)`;\n        }\n        return `${item.width}px`;\n      }\n      if (index === columnOrder.length - 1) {\n        return `minmax(${COL_WIDTH_MINIMUM}px, auto)`;\n      }\n      return `${COL_WIDTH_MINIMUM}px`;\n    });\n\n    // The last column has no resizer and should always be a flexible column\n    // to prevent underflows.\n\n    grid.style.gridTemplateColumns = `${prepend} ${widths.join(' ')}`;\n  }\n\n  renderGridHead() {\n    const {error, isLoading, columnOrder, grid, data} = this.props;\n\n    // Ensure that the last column cannot be removed\n    const numColumn = columnOrder.length;\n\n    const prependColumns = grid.renderPrependColumns\n      ? grid.renderPrependColumns(true)\n      : [];\n    return (\n      <GridRow>\n        {prependColumns &&\n          prependColumns.map((item, i) => (\n            <GridHeadCellStatic key={`prepend-${i}`}>{item}</GridHeadCellStatic>\n          ))}\n        {\n          /* Note that this.onResizeMouseDown assumes GridResizer is nested\n            1 levels under GridHeadCell */\n          columnOrder.map((column, i) => (\n            <GridHeadCell key={`${i}.${column.key}`} isFirst={i === 0}>\n              {grid.renderHeadCell ? grid.renderHeadCell(column, i) : column.name}\n              {i !== numColumn - 1 && (\n                <GridResizer\n                  dataRows={!error && !isLoading && data ? data.length : 0}\n                  onMouseDown={e => this.onResizeMouseDown(e, i)}\n                  onDoubleClick={e => this.onResetColumnSize(e, i)}\n                  onContextMenu={this.onResizeMouseDown}\n                />\n              )}\n            </GridHeadCell>\n          ))\n        }\n      </GridRow>\n    );\n  }\n\n  renderGridBody() {\n    const {data, error, isLoading} = this.props;\n\n    if (error) {\n      return this.renderError();\n    }\n\n    if (isLoading) {\n      return this.renderLoading();\n    }\n\n    if (!data || data.length === 0) {\n      return this.renderEmptyData();\n    }\n\n    return data.map(this.renderGridBodyRow);\n  }\n\n  renderGridBodyRow = (dataRow: DataRow, row: number) => {\n    const {columnOrder, grid} = this.props;\n    const prependColumns = grid.renderPrependColumns\n      ? grid.renderPrependColumns(false, dataRow, row)\n      : [];\n\n    return (\n      <GridRow key={row}>\n        {prependColumns &&\n          prependColumns.map((item, i) => (\n            <GridBodyCell key={`prepend-${i}`}>{item}</GridBodyCell>\n          ))}\n        {columnOrder.map((col, i) => (\n          <GridBodyCell key={`${col.key}${i}`}>\n            {grid.renderBodyCell\n              ? grid.renderBodyCell(col, dataRow, row, i)\n              : dataRow[col.key]}\n          </GridBodyCell>\n        ))}\n      </GridRow>\n    );\n  };\n\n  renderError() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <IconWarning color=\"gray300\" size=\"lg\" />\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <LoadingIndicator />\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  renderEmptyData() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <EmptyStateWarning>\n            <p>{t('No results found for your query')}</p>\n          </EmptyStateWarning>\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  render() {\n    const {title, headerButtons} = this.props;\n    const showHeader = title || headerButtons;\n    return (\n      <Fragment>\n        <Profiler id=\"GridEditable\" onRender={onRenderCallback}>\n          {showHeader && (\n            <Header>\n              {title && <HeaderTitle>{title}</HeaderTitle>}\n              {headerButtons && (\n                <HeaderButtonContainer>{headerButtons()}</HeaderButtonContainer>\n              )}\n            </Header>\n          )}\n          <Body>\n            <Grid data-test-id=\"grid-editable\" ref={this.refGrid}>\n              <GridHead>{this.renderGridHead()}</GridHead>\n              <GridBody>{this.renderGridBody()}</GridBody>\n            </Grid>\n          </Body>\n        </Profiler>\n      </Fragment>\n    );\n  }\n}\n\nexport default GridEditable;\n","import styled from '@emotion/styled';\nimport omit from 'lodash/omit';\n\nimport Link, {LinkProps} from 'sentry/components/links/link';\nimport space from 'sentry/styles/space';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {Theme} from 'sentry/utils/theme';\n\ntype MenuItemProps = {\n  /**\n   * Enable to allow default event on click\n   */\n  allowDefaultEvent?: boolean;\n  'aria-label'?: string;\n  className?: string;\n  /**\n   * Is the item disabled?\n   */\n  disabled?: boolean;\n  /**\n   * Should this item act as a divider\n   */\n  divider?: boolean;\n  /**\n   * Provided to the onSelect callback when this item is selected\n   */\n  eventKey?: any;\n  /**\n   * Should this item act as a header\n   */\n  header?: boolean;\n  /**\n   * A server rendered URL.\n   */\n  href?: string;\n  /**\n   * Renders an icon next to the item\n   */\n  icon?: React.ReactNode;\n  /**\n   * Is the item actively seleted?\n   */\n  isActive?: boolean;\n  /**\n   * Enable to provide custom button/contents via children\n   */\n  noAnchor?: boolean;\n  /**\n   * Triggered when the item is clicked\n   */\n  onSelect?: (eventKey: any) => void;\n  /**\n   * Enable to stop event propagation on click\n   */\n  stopPropagation?: boolean;\n  /**\n   * The title/tooltipe of the item\n   */\n  title?: string;\n\n  /**\n   * A router target destination\n   */\n  to?: LinkProps['to'];\n\n  /**\n   * Renders a bottom border (excludes the last item)\n   */\n  withBorder?: boolean;\n};\n\ninterface Props\n  extends MenuItemProps,\n    Omit<React.HTMLAttributes<HTMLLIElement>, 'onSelect'> {}\n\nconst MenuItem = ({\n  header,\n  icon,\n  divider,\n  isActive,\n  noAnchor,\n  className,\n  children,\n  ...props\n}: Props) => {\n  const {\n    to,\n    href,\n    title,\n    withBorder,\n    disabled,\n    onSelect,\n    eventKey,\n    allowDefaultEvent,\n    stopPropagation,\n  } = props;\n\n  const handleClick = (e: React.MouseEvent): void => {\n    if (disabled) {\n      return;\n    }\n    if (onSelect) {\n      if (allowDefaultEvent !== true) {\n        e.preventDefault();\n      }\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      callIfFunction(onSelect, eventKey);\n    }\n  };\n\n  const renderAnchor = (): React.ReactNode => {\n    const linkProps = {\n      onClick: handleClick,\n      tabIndex: -1,\n      isActive,\n      disabled,\n      withBorder,\n    };\n\n    if (to) {\n      return (\n        <MenuLink to={to} {...linkProps} title={title} data-test-id=\"menu-item\">\n          {icon && <MenuIcon>{icon}</MenuIcon>}\n          {children}\n        </MenuLink>\n      );\n    }\n\n    if (href) {\n      return (\n        <MenuAnchor {...linkProps} href={href} data-test-id=\"menu-item\">\n          {icon && <MenuIcon>{icon}</MenuIcon>}\n          {children}\n        </MenuAnchor>\n      );\n    }\n\n    return (\n      <MenuTarget role=\"button\" {...linkProps} title={title} data-test-id=\"menu-item\">\n        {icon && <MenuIcon>{icon}</MenuIcon>}\n        {children}\n      </MenuTarget>\n    );\n  };\n\n  let renderChildren: React.ReactNode | null = null;\n  if (noAnchor) {\n    renderChildren = children;\n  } else if (header) {\n    renderChildren = children;\n  } else if (!divider) {\n    renderChildren = renderAnchor();\n  }\n\n  return (\n    <MenuListItem\n      className={className}\n      role=\"presentation\"\n      isActive={isActive}\n      divider={divider}\n      noAnchor={noAnchor}\n      header={header}\n      {...omit(props, ['href', 'title', 'onSelect', 'eventKey', 'to', 'as'])}\n    >\n      {renderChildren}\n    </MenuListItem>\n  );\n};\n\ninterface MenuListItemProps extends React.HTMLAttributes<HTMLLIElement> {\n  disabled?: boolean;\n  divider?: boolean;\n  header?: boolean;\n  isActive?: boolean;\n  noAnchor?: boolean;\n  withBorder?: boolean;\n}\n\nfunction getListItemStyles(props: MenuListItemProps & {theme: Theme}) {\n  const common = `\n    display: block;\n    padding: ${space(0.5)} ${space(2)};\n    &:focus {\n      outline: none;\n    }\n  `;\n\n  if (props.disabled) {\n    return `\n      ${common}\n      color: ${props.theme.disabled};\n      background: transparent;\n      cursor: not-allowed;\n    `;\n  }\n\n  if (props.isActive) {\n    return `\n      ${common}\n      color: ${props.theme.white};\n      background: ${props.theme.active};\n\n      &:hover {\n        background: ${props.theme.activeHover};\n      }\n    `;\n  }\n\n  return `\n    ${common}\n\n    &:hover {\n      background: ${props.theme.hover};\n    }\n  `;\n}\n\nfunction getChildStyles(props: MenuListItemProps & {theme: Theme}) {\n  if (!props.noAnchor) {\n    return '';\n  }\n\n  return `\n    & a {\n      ${getListItemStyles(props)}\n    }\n  `;\n}\n\nconst shouldForwardProp = (p: PropertyKey) =>\n  typeof p === 'string' && ['isActive', 'disabled', 'withBorder'].includes(p) === false;\n\nconst MenuAnchor = styled('a', {shouldForwardProp})<MenuListItemProps>`\n  ${getListItemStyles}\n`;\n\nconst MenuListItem = styled('li')<MenuListItemProps>`\n  display: block;\n\n  ${p =>\n    p.withBorder &&\n    `\n    border-bottom: 1px solid ${p.theme.innerBorder};\n\n    &:last-child {\n      border-bottom: none;\n    }\n  `};\n  ${p =>\n    p.divider &&\n    `\n    height: 1px;\n    margin: ${space(0.5)} 0;\n    overflow: hidden;\n    background-color: ${p.theme.innerBorder};\n  `}\n  ${p =>\n    p.header &&\n    `\n    padding: ${space(0.25)} ${space(0.5)};\n    font-size: ${p.theme.fontSizeSmall};\n    line-height: 1.4;\n    color: ${p.theme.gray300};\n  `}\n\n  ${getChildStyles}\n`;\n\nconst MenuTarget = styled('span')<MenuListItemProps>`\n  ${getListItemStyles}\n  display: flex;\n  align-items: center;\n`;\n\nconst MenuIcon = styled('div')`\n  display: flex;\n  align-items: center;\n  margin-right: ${space(1)};\n`;\n\nconst MenuLink = styled(Link, {shouldForwardProp})<MenuListItemProps>`\n  ${getListItemStyles}\n`;\n\nexport default MenuItem;\n","import {Location} from 'history';\nimport moment from 'moment';\n\nimport {DEFAULT_STATS_PERIOD} from 'sentry/constants';\nimport {DATE_TIME_KEYS, URL_PARAM} from 'sentry/constants/pageFilters';\nimport {IntervalPeriod, PageFilters} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport {getUtcToLocalDateObject} from 'sentry/utils/dates';\n\nimport {PageFiltersState} from './types';\n\nexport type StatsPeriodType = 'h' | 'd' | 's' | 'm' | 'w';\n\ntype SingleParamValue = string | undefined | null;\ntype ParamValue = string[] | SingleParamValue;\n\nconst STATS_PERIOD_PATTERN = '^(\\\\d+)([hdmsw])?$';\n\n/**\n * Parses a stats period into `period` and `periodLength`\n */\nexport function parseStatsPeriod(input: string | IntervalPeriod) {\n  const result = input.match(STATS_PERIOD_PATTERN);\n\n  if (!result) {\n    return undefined;\n  }\n\n  const period = result[1];\n\n  // default to seconds. this behaviour is based on src/sentry/utils/dates.py\n  const periodLength = result[2] || 's';\n\n  return {period, periodLength};\n}\n\n/**\n * Normalizes a stats period string\n */\nfunction coerceStatsPeriod(input: string) {\n  const result = parseStatsPeriod(input);\n\n  return result ? `${result.period}${result.periodLength}` : undefined;\n}\n\n/**\n * Normalizes a string or string[] into a standard stats period string.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getStatsPeriodValue(maybe: ParamValue) {\n  if (Array.isArray(maybe)) {\n    const result = maybe.find(coerceStatsPeriod);\n\n    return result ? coerceStatsPeriod(result) : undefined;\n  }\n\n  if (typeof maybe === 'string') {\n    return coerceStatsPeriod(maybe);\n  }\n\n  return undefined;\n}\n\n/**\n * We normalize potential datetime strings into the form that would be valid if\n * it was to be parsed by datetime.strptime using the format\n * %Y-%m-%dT%H:%M:%S.%f\n *\n * This format was transformed to the form that moment.js understands using [0]\n *\n * [0]: https://gist.github.com/asafge/0b13c5066d06ae9a4446\n */\nfunction normalizeDateTimeString(input: Date | SingleParamValue) {\n  if (!input) {\n    return undefined;\n  }\n\n  const parsed = moment.utc(input);\n\n  if (!parsed.isValid()) {\n    return undefined;\n  }\n\n  return parsed.format('YYYY-MM-DDTHH:mm:ss.SSS');\n}\n\n/**\n * Normalizes a string or string[] into the date time string.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getDateTimeString(maybe: Date | ParamValue) {\n  const result = Array.isArray(maybe)\n    ? maybe.find(needle => moment.utc(needle).isValid())\n    : maybe;\n\n  return normalizeDateTimeString(result);\n}\n\n/**\n * Normalize a UTC parameter\n */\nfunction parseUtcValue(utc: boolean | SingleParamValue) {\n  if (!defined(utc)) {\n    return undefined;\n  }\n\n  return utc === true || utc === 'true' ? 'true' : 'false';\n}\n\n/**\n * Normalizes a string or string[] into the UTC parameter.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getUtcValue(maybe: boolean | ParamValue) {\n  const result = Array.isArray(maybe)\n    ? maybe.find(needle => !!parseUtcValue(needle))\n    : maybe;\n\n  return parseUtcValue(result);\n}\n\n/**\n * Normalizes a string or string[] into the project list parameter\n */\nfunction getProject(maybe: ParamValue) {\n  if (!defined(maybe)) {\n    return undefined;\n  }\n\n  if (Array.isArray(maybe)) {\n    return maybe.map(p => parseInt(p, 10));\n  }\n\n  const projectFromQueryIdInt = parseInt(maybe, 10);\n  return isNaN(projectFromQueryIdInt) ? [] : [projectFromQueryIdInt];\n}\n\n/*\n * Normalizes a string or string[] into the environment list parameter\n */\nfunction getEnvironment(maybe: ParamValue) {\n  if (!defined(maybe)) {\n    return undefined;\n  }\n\n  if (Array.isArray(maybe)) {\n    return maybe;\n  }\n\n  return [maybe];\n}\n\ntype InputParams = {\n  [others: string]: any;\n  end?: ParamValue | Date;\n  pageEnd?: ParamValue | Date;\n  pageStart?: ParamValue | Date;\n\n  pageStatsPeriod?: ParamValue;\n  pageUtc?: ParamValue | boolean;\n  period?: ParamValue;\n  start?: ParamValue | Date;\n  statsPeriod?: ParamValue;\n\n  utc?: ParamValue | boolean;\n};\n\ntype ParsedParams = {\n  [others: string]: Location['query'][string];\n  end?: string;\n  start?: string;\n  statsPeriod?: string | null;\n  utc?: string;\n};\n\ntype DateTimeNormalizeOptions = {\n  /**\n   * Parse absolute date time (`start` / `end`) from the input parameters. When\n   * set to false the start and end will always be `null`.\n   *\n   * @default true\n   */\n  allowAbsoluteDatetime?: boolean;\n  /**\n   * The page specific version of allowAbsolutePageDatetime\n   *\n   * @default false\n   */\n  allowAbsolutePageDatetime?: boolean;\n  /**\n   * When set to true allows the statsPeriod to result as `null`.\n   *\n   * @default false\n   */\n  allowEmptyPeriod?: boolean;\n  /**\n   * Include this default statsPeriod in the resulting parsed parameters when\n   * no stats period is provided (or if it is an invalid stats period)\n   */\n  defaultStatsPeriod?: string | null;\n};\n\n/**\n * Normalizes the DateTime components of the page filters.\n *\n * NOTE: This has some additional functionality for handling `page*` filters\n *       that will override the standard `start`/`end`/`statsPeriod` filters.\n *\n * NOTE: This does *NOT* normalize the `project` or `environment` components of\n *       the page filter parameters. See `getStateFromQuery` for normalization\n *       of the project and environment parameters.\n */\nexport function normalizeDateTimeParams(\n  params: InputParams,\n  options: DateTimeNormalizeOptions = {}\n): ParsedParams {\n  const {\n    allowEmptyPeriod = false,\n    allowAbsoluteDatetime = true,\n    allowAbsolutePageDatetime = false,\n    defaultStatsPeriod = DEFAULT_STATS_PERIOD,\n  } = options;\n\n  const {\n    pageStatsPeriod,\n    pageStart,\n    pageEnd,\n    pageUtc,\n    start,\n    end,\n    period,\n    statsPeriod,\n    utc,\n    ...otherParams\n  } = params;\n\n  // `statsPeriod` takes precedence for now. `period` is legacy.\n  let coercedPeriod =\n    getStatsPeriodValue(pageStatsPeriod) ||\n    getStatsPeriodValue(statsPeriod) ||\n    getStatsPeriodValue(period) ||\n    null;\n\n  const dateTimeStart = allowAbsoluteDatetime\n    ? allowAbsolutePageDatetime\n      ? getDateTimeString(pageStart) ?? getDateTimeString(start)\n      : getDateTimeString(start)\n    : null;\n  const dateTimeEnd = allowAbsoluteDatetime\n    ? allowAbsolutePageDatetime\n      ? getDateTimeString(pageEnd) ?? getDateTimeString(end)\n      : getDateTimeString(end)\n    : null;\n\n  if ((!dateTimeStart || !dateTimeEnd) && !coercedPeriod && !allowEmptyPeriod) {\n    coercedPeriod = defaultStatsPeriod;\n  }\n\n  const object = {\n    statsPeriod: coercedPeriod,\n    start: coercedPeriod ? null : dateTimeStart ?? null,\n    end: coercedPeriod ? null : dateTimeEnd ?? null,\n    // coerce utc into a string (it can be both: a string representation from\n    // router, or a boolean from time range picker)\n    utc: getUtcValue(pageUtc ?? utc),\n    ...otherParams,\n  };\n\n  // Filter null values\n  const paramEntries = Object.entries(object).filter(([_, value]) => defined(value));\n\n  return Object.fromEntries(paramEntries);\n}\n\n/**\n * Parses and normalizes all page filter relevant parameters from a location\n * query.\n *\n * This includes the following operations\n *\n *  - Normalizes `project` and `environment` into a consistent list object.\n *  - Normalizes date time filter parameters (using normalizeDateTimeParams).\n *  - Parses `start` and `end` into Date objects.\n */\nexport function getStateFromQuery(\n  query: Location['query'],\n  normalizeOptions: DateTimeNormalizeOptions = {}\n) {\n  const {allowAbsoluteDatetime} = normalizeOptions;\n\n  const project = getProject(query[URL_PARAM.PROJECT]) ?? null;\n  const environment = getEnvironment(query[URL_PARAM.ENVIRONMENT]) ?? null;\n\n  const dateTimeParams = normalizeDateTimeParams(query, normalizeOptions);\n\n  const hasAbsolute =\n    allowAbsoluteDatetime && !!dateTimeParams.start && !!dateTimeParams.end;\n\n  const start = hasAbsolute ? getUtcToLocalDateObject(dateTimeParams.start) : null;\n  const end = hasAbsolute ? getUtcToLocalDateObject(dateTimeParams.end) : null;\n  const period = dateTimeParams.statsPeriod;\n  const utc = dateTimeParams.utc;\n\n  const state: PageFiltersState = {\n    project,\n    environment,\n    period: period || null,\n    start: start || null,\n    end: end || null,\n    utc: typeof utc !== 'undefined' ? utc === 'true' : null,\n  };\n\n  return state;\n}\n\n/**\n * Extract the datetime component from the page filter state object\n */\nexport function getDatetimeFromState(state: PageFiltersState) {\n  return Object.fromEntries(\n    Object.entries(state).filter(([key]) => DATE_TIME_KEYS.includes(key))\n  ) as PageFilters['datetime'];\n}\n","import {Component, Fragment} from 'react';\nimport {createPortal} from 'react-dom';\nimport {Manager, Popper, Reference} from 'react-popper';\nimport styled from '@emotion/styled';\n\nimport MenuHeader from 'sentry/components/actions/menuHeader';\nimport CheckboxFancy from 'sentry/components/checkboxFancy/checkboxFancy';\nimport {GetActorPropsFn} from 'sentry/components/dropdownMenu';\nimport MenuItem from 'sentry/components/menuItem';\nimport {TeamSelection} from 'sentry/components/performance/teamKeyTransactionsManager';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project, Team} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {MAX_TEAM_KEY_TRANSACTIONS} from 'sentry/utils/performance/constants';\n\nexport type TitleProps = Partial<ReturnType<GetActorPropsFn>> & {\n  isOpen: boolean;\n  keyedTeams: Team[] | null;\n  disabled?: boolean;\n  initialValue?: number;\n};\n\ntype Props = {\n  counts: Map<string, number> | null;\n  error: string | null;\n  handleToggleKeyTransaction: (selection: TeamSelection) => void;\n  isLoading: boolean;\n  keyedTeams: Set<string> | null;\n  organization: Organization;\n  project: Project;\n  teams: Team[];\n  title: React.ComponentClass<TitleProps>;\n  transactionName: string;\n  initialValue?: number;\n};\n\ntype State = {\n  isOpen: boolean;\n};\n\nclass TeamKeyTransaction extends Component<Props, State> {\n  state: State = {\n    isOpen: false,\n  };\n\n  componentDidUpdate(_props: Props, prevState: State) {\n    if (this.state.isOpen && prevState.isOpen === false) {\n      document.addEventListener('click', this.handleClickOutside, true);\n    }\n    if (this.state.isOpen === false && prevState.isOpen) {\n      document.removeEventListener('click', this.handleClickOutside, true);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleClickOutside, true);\n  }\n\n  private menuEl: Element | null = null;\n\n  handleClickOutside = (event: MouseEvent) => {\n    if (!this.menuEl) {\n      return;\n    }\n    if (!(event.target instanceof Element)) {\n      return;\n    }\n    if (this.menuEl.contains(event.target)) {\n      return;\n    }\n    this.setState({isOpen: false});\n  };\n\n  toggleOpen = () => {\n    this.setState(({isOpen}) => ({isOpen: !isOpen}));\n  };\n\n  toggleSelection = (enabled: boolean, selection: TeamSelection) => () => {\n    const {handleToggleKeyTransaction, organization} = this.props;\n    const {action} = selection;\n    trackAdvancedAnalyticsEvent('performance_views.team_key_transaction.set', {\n      organization,\n      action,\n    });\n\n    return enabled ? handleToggleKeyTransaction(selection) : undefined;\n  };\n\n  partitionTeams(counts: Map<string, number>, keyedTeams: Set<string>) {\n    const {teams, project} = this.props;\n\n    const enabledTeams: Team[] = [];\n    const disabledTeams: Team[] = [];\n    const noAccessTeams: Team[] = [];\n\n    const projectTeams = new Set(project.teams.map(({id}) => id));\n    for (const team of teams) {\n      if (!projectTeams.has(team.id)) {\n        noAccessTeams.push(team);\n      } else if (\n        keyedTeams.has(team.id) ||\n        (counts.get(team.id) ?? 0) < MAX_TEAM_KEY_TRANSACTIONS\n      ) {\n        enabledTeams.push(team);\n      } else {\n        disabledTeams.push(team);\n      }\n    }\n\n    return {\n      enabledTeams,\n      disabledTeams,\n      noAccessTeams,\n    };\n  }\n\n  renderMenuContent(counts: Map<string, number>, keyedTeams: Set<string>) {\n    const {teams, project, transactionName} = this.props;\n\n    const {enabledTeams, disabledTeams, noAccessTeams} = this.partitionTeams(\n      counts,\n      keyedTeams\n    );\n\n    const isMyTeamsEnabled = enabledTeams.length > 0;\n    const myTeamsHandler = this.toggleSelection(isMyTeamsEnabled, {\n      action: enabledTeams.length === keyedTeams.size ? 'unkey' : 'key',\n      teamIds: enabledTeams.map(({id}) => id),\n      project,\n      transactionName,\n    });\n\n    const hasTeamsWithAccess = enabledTeams.length + disabledTeams.length > 0;\n\n    return (\n      <DropdownContent>\n        {hasTeamsWithAccess && (\n          <Fragment>\n            <DropdownMenuHeader first>\n              {t('My Teams with Access')}\n              <ActionItem>\n                <CheckboxFancy\n                  isDisabled={!isMyTeamsEnabled}\n                  isChecked={teams.length === keyedTeams.size}\n                  isIndeterminate={teams.length > keyedTeams.size && keyedTeams.size > 0}\n                  onClick={myTeamsHandler}\n                />\n              </ActionItem>\n            </DropdownMenuHeader>\n            {enabledTeams.map(team => (\n              <TeamKeyTransactionItem\n                key={team.slug}\n                team={team}\n                isKeyed={keyedTeams.has(team.id)}\n                disabled={false}\n                onSelect={this.toggleSelection(true, {\n                  action: keyedTeams.has(team.id) ? 'unkey' : 'key',\n                  teamIds: [team.id],\n                  project,\n                  transactionName,\n                })}\n              />\n            ))}\n            {disabledTeams.map(team => (\n              <TeamKeyTransactionItem\n                key={team.slug}\n                team={team}\n                isKeyed={keyedTeams.has(team.id)}\n                disabled\n                onSelect={this.toggleSelection(true, {\n                  action: keyedTeams.has(team.id) ? 'unkey' : 'key',\n                  teamIds: [team.id],\n                  project,\n                  transactionName,\n                })}\n              />\n            ))}\n          </Fragment>\n        )}\n        {noAccessTeams.length > 0 && (\n          <Fragment>\n            <DropdownMenuHeader first={!hasTeamsWithAccess}>\n              {t('My Teams without Access')}\n            </DropdownMenuHeader>\n            {noAccessTeams.map(team => (\n              <TeamKeyTransactionItem key={team.slug} team={team} disabled />\n            ))}\n          </Fragment>\n        )}\n      </DropdownContent>\n    );\n  }\n\n  renderMenu(): React.ReactPortal | null {\n    const {isLoading, counts, keyedTeams} = this.props;\n\n    if (isLoading || !defined(counts) || !defined(keyedTeams)) {\n      return null;\n    }\n\n    const modifiers = [\n      {\n        name: 'hide',\n        enabled: false,\n      },\n      {\n        name: 'preventOverflow',\n        enabled: true,\n        options: {padding: 10},\n      },\n    ];\n\n    return createPortal(\n      <Popper placement=\"top\" modifiers={modifiers}>\n        {({ref: popperRef, style, placement}) => (\n          <DropdownWrapper\n            ref={ref => {\n              (popperRef as Function)(ref);\n              this.menuEl = ref;\n            }}\n            style={style}\n            data-placement={placement}\n          >\n            {this.renderMenuContent(counts, keyedTeams)}\n          </DropdownWrapper>\n        )}\n      </Popper>,\n      document.body\n    );\n  }\n\n  render() {\n    const {isLoading, error, title: Title, keyedTeams, initialValue, teams} = this.props;\n    const {isOpen} = this.state;\n\n    const menu: React.ReactPortal | null = isOpen ? this.renderMenu() : null;\n\n    return (\n      <Manager>\n        <Reference>\n          {({ref}) => (\n            <StarWrapper ref={ref}>\n              <Title\n                isOpen={isOpen}\n                disabled={isLoading || Boolean(error)}\n                keyedTeams={\n                  keyedTeams ? teams.filter(({id}) => keyedTeams.has(id)) : null\n                }\n                initialValue={initialValue}\n                onClick={this.toggleOpen}\n              />\n            </StarWrapper>\n          )}\n        </Reference>\n        {menu}\n      </Manager>\n    );\n  }\n}\n\ntype ItemProps = {\n  disabled: boolean;\n  team: Team;\n  isKeyed?: boolean;\n  onSelect?: () => void;\n};\n\nfunction TeamKeyTransactionItem({team, isKeyed, disabled, onSelect}: ItemProps) {\n  return (\n    <DropdownMenuItem\n      key={team.slug}\n      disabled={disabled}\n      onSelect={onSelect}\n      stopPropagation\n    >\n      <MenuItemContent>\n        {team.slug}\n        <ActionItem>\n          {!defined(isKeyed) ? null : disabled ? (\n            t('Max %s', MAX_TEAM_KEY_TRANSACTIONS)\n          ) : (\n            <CheckboxFancy isChecked={isKeyed} />\n          )}\n        </ActionItem>\n      </MenuItemContent>\n    </DropdownMenuItem>\n  );\n}\n\nconst StarWrapper = styled('div')`\n  display: flex;\n\n  /* Fixes Star when it’s filled and is wrapped around Tooltip */\n  & > span {\n    display: flex;\n  }\n`;\n\nconst DropdownWrapper = styled('div')`\n  /* Adapted from the dropdown-menu class */\n  border: none;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(52, 60, 69, 0.2), 0 1px 3px rgba(70, 82, 98, 0.25);\n  background-clip: padding-box;\n  background-color: ${p => p.theme.background};\n  width: 220px;\n  overflow: visible;\n  z-index: ${p => p.theme.zIndex.tooltip};\n\n  &:before,\n  &:after {\n    width: 0;\n    height: 0;\n    content: '';\n    display: block;\n    position: absolute;\n    right: auto;\n  }\n\n  &:before {\n    border-left: 9px solid transparent;\n    border-right: 9px solid transparent;\n    left: calc(50% - 9px);\n    z-index: -2;\n  }\n\n  &:after {\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    left: calc(50% - 8px);\n    z-index: -1;\n  }\n\n  &[data-placement*='bottom'] {\n    margin-top: 9px;\n\n    &:before {\n      border-bottom: 9px solid ${p => p.theme.border};\n      top: -9px;\n    }\n\n    &:after {\n      border-bottom: 8px solid ${p => p.theme.background};\n      top: -8px;\n    }\n  }\n\n  &[data-placement*='top'] {\n    margin-bottom: 9px;\n\n    &:before {\n      border-top: 9px solid ${p => p.theme.border};\n      bottom: -9px;\n    }\n\n    &:after {\n      border-top: 8px solid ${p => p.theme.background};\n      bottom: -8px;\n    }\n  }\n`;\n\nconst DropdownContent = styled('div')`\n  max-height: 250px;\n  pointer-events: auto;\n  overflow-y: auto;\n`;\n\nconst DropdownMenuHeader = styled(MenuHeader)<{first?: boolean}>`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: ${space(1)} ${space(2)};\n\n  background: ${p => p.theme.backgroundSecondary};\n  ${p => p.first && 'border-radius: 2px'};\n`;\n\nconst DropdownMenuItem = styled(MenuItem)`\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${p => p.theme.innerBorder};\n  }\n`;\n\nconst MenuItemContent = styled('div')`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n`;\n\nconst ActionItem = styled('span')`\n  min-width: ${space(2)};\n  margin-left: ${space(1)};\n`;\n\nexport default TeamKeyTransaction;\n","import {Component, createContext} from 'react';\nimport isEqual from 'lodash/isEqual';\n\nimport {\n  fetchTeamKeyTransactions,\n  TeamKeyTransactions,\n  toggleKeyTransaction,\n} from 'sentry/actionCreators/performance';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport {Organization, Project, Team} from 'sentry/types';\nimport withApi from 'sentry/utils/withApi';\n\nexport type TeamSelection = {\n  action: 'key' | 'unkey';\n  project: Project;\n  teamIds: string[];\n  transactionName: string;\n};\n\nexport type TeamKeyTransactionManagerChildrenProps = {\n  counts: Map<string, number> | null;\n  error: string | null;\n  getKeyedTeams: (project: string, transactionName: string) => Set<string> | null;\n  handleToggleKeyTransaction: (selection: TeamSelection) => void;\n  isLoading: boolean;\n  teams: Team[];\n};\n\nconst TeamKeyTransactionsManagerContext =\n  createContext<TeamKeyTransactionManagerChildrenProps>({\n    teams: [],\n    isLoading: false,\n    error: null,\n    counts: null,\n    getKeyedTeams: () => null,\n    handleToggleKeyTransaction: () => {},\n  });\n\ntype Props = {\n  api: Client;\n  children: React.ReactNode;\n  organization: Organization;\n  selectedTeams: string[];\n  teams: Team[];\n  selectedProjects?: string[];\n};\n\ntype State = Omit<\n  TeamKeyTransactionManagerChildrenProps,\n  'teams' | 'counts' | 'getKeyedTeams' | 'handleToggleKeyTransaction'\n> & {\n  keyFetchID: symbol | null;\n  teamKeyTransactions: TeamKeyTransactions;\n};\n\nclass UnwrappedProvider extends Component<Props> {\n  state: State = {\n    keyFetchID: null,\n    isLoading: true,\n    error: null,\n    teamKeyTransactions: [],\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const orgSlugChanged = prevProps.organization.slug !== this.props.organization.slug;\n    const selectedTeamsChanged = !isEqual(\n      prevProps.selectedTeams,\n      this.props.selectedTeams\n    );\n    const selectedProjectsChanged = !isEqual(\n      prevProps.selectedProjects,\n      this.props.selectedProjects\n    );\n\n    if (orgSlugChanged || selectedTeamsChanged || selectedProjectsChanged) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    const {api, organization, selectedTeams, selectedProjects} = this.props;\n    const keyFetchID = Symbol('keyFetchID');\n    this.setState({isLoading: true, keyFetchID});\n\n    let teamKeyTransactions: TeamKeyTransactions = [];\n    let error: string | null = null;\n\n    try {\n      teamKeyTransactions = await fetchTeamKeyTransactions(\n        api,\n        organization.slug,\n        selectedTeams,\n        selectedProjects\n      );\n    } catch (err) {\n      error = err.responseJSON?.detail ?? t('Error fetching team key transactions');\n    }\n\n    this.setState({\n      isLoading: false,\n      keyFetchID: undefined,\n      error,\n      teamKeyTransactions,\n    });\n  }\n\n  getCounts() {\n    const {teamKeyTransactions} = this.state;\n\n    const counts: Map<string, number> = new Map();\n\n    teamKeyTransactions.forEach(({team, count}) => {\n      counts.set(team, count);\n    });\n\n    return counts;\n  }\n\n  getKeyedTeams = (projectId: string, transactionName: string) => {\n    const {teamKeyTransactions} = this.state;\n\n    const keyedTeams: Set<string> = new Set();\n\n    teamKeyTransactions.forEach(({team, keyed}) => {\n      const isKeyedByTeam = keyed.find(\n        keyedTeam =>\n          keyedTeam.project_id === projectId && keyedTeam.transaction === transactionName\n      );\n      if (isKeyedByTeam) {\n        keyedTeams.add(team);\n      }\n    });\n\n    return keyedTeams;\n  };\n\n  handleToggleKeyTransaction = async (selection: TeamSelection) => {\n    const {api, organization} = this.props;\n    const {teamKeyTransactions} = this.state;\n    const {action, project, transactionName, teamIds} = selection;\n    const isKeyTransaction = action === 'unkey';\n\n    const teamIdSet = new Set(teamIds);\n\n    const newTeamKeyTransactions = teamKeyTransactions.map(({team, count, keyed}) => {\n      if (!teamIdSet.has(team)) {\n        return {team, count, keyed};\n      }\n\n      if (isKeyTransaction) {\n        return {\n          team,\n          count: count - 1,\n          keyed: keyed.filter(\n            keyTransaction =>\n              keyTransaction.project_id !== project.id ||\n              keyTransaction.transaction !== transactionName\n          ),\n        };\n      }\n      return {\n        team,\n        count: count + 1,\n        keyed: [\n          ...keyed,\n          {\n            project_id: project.id,\n            transaction: transactionName,\n          },\n        ],\n      };\n    });\n\n    try {\n      await toggleKeyTransaction(\n        api,\n        isKeyTransaction,\n        organization.slug,\n        [project.id],\n        transactionName,\n        teamIds\n      );\n      this.setState({teamKeyTransactions: newTeamKeyTransactions});\n    } catch (err) {\n      this.setState({\n        error: err.responseJSON?.detail ?? null,\n      });\n    }\n  };\n\n  render() {\n    const {teams} = this.props;\n    const {isLoading, error} = this.state;\n\n    const childrenProps: TeamKeyTransactionManagerChildrenProps = {\n      teams,\n      isLoading,\n      error,\n      counts: this.getCounts(),\n      getKeyedTeams: this.getKeyedTeams,\n      handleToggleKeyTransaction: this.handleToggleKeyTransaction,\n    };\n\n    return (\n      <TeamKeyTransactionsManagerContext.Provider value={childrenProps}>\n        {this.props.children}\n      </TeamKeyTransactionsManagerContext.Provider>\n    );\n  }\n}\n\nexport const Provider = withApi(UnwrappedProvider);\n\nexport const Consumer = TeamKeyTransactionsManagerContext.Consumer;\n","import {\n  addErrorMessage,\n  addLoadingMessage,\n  clearIndicators,\n} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport parseLinkHeader from 'sentry/utils/parseLinkHeader';\n\ntype KeyTransaction = {\n  project_id: string;\n  transaction: string;\n};\n\ntype TeamKeyTransaction = {\n  count: number;\n  keyed: KeyTransaction[];\n  team: string;\n};\n\nexport type TeamKeyTransactions = TeamKeyTransaction[];\n\nexport async function fetchTeamKeyTransactions(\n  api: Client,\n  orgSlug: string,\n  teams: string[],\n  projects?: string[]\n): Promise<TeamKeyTransaction[]> {\n  const url = `/organizations/${orgSlug}/key-transactions-list/`;\n\n  const datas: TeamKeyTransactions[] = [];\n  let cursor: string | undefined = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    try {\n      const payload = {cursor, team: teams, project: projects};\n      if (!payload.cursor) {\n        delete payload.cursor;\n      }\n      if (!payload.project?.length) {\n        delete payload.project;\n      }\n\n      const [data, , resp] = await api.requestPromise(url, {\n        method: 'GET',\n        includeAllArgs: true,\n        query: payload,\n      });\n\n      datas.push(data);\n\n      const pageLinks = resp?.getResponseHeader('Link');\n      if (pageLinks) {\n        const paginationObject = parseLinkHeader(pageLinks);\n        hasMore = paginationObject?.next?.results ?? false;\n        cursor = paginationObject.next?.cursor;\n      } else {\n        hasMore = false;\n      }\n    } catch (err) {\n      addErrorMessage(\n        err.responseJSON?.detail ?? t('Error fetching team key transactions')\n      );\n      throw err;\n    }\n  }\n\n  return datas.flat();\n}\n\nexport function toggleKeyTransaction(\n  api: Client,\n  isKeyTransaction: boolean,\n  orgId: string,\n  projects: string[],\n  transactionName: string,\n  teamIds?: string[] // TODO(txiao): make this required\n): Promise<undefined> {\n  addLoadingMessage(t('Saving changes\\u2026'));\n\n  const promise: Promise<undefined> = api.requestPromise(\n    `/organizations/${orgId}/key-transactions/`,\n    {\n      method: isKeyTransaction ? 'DELETE' : 'POST',\n      query: {\n        project: projects.map(id => String(id)),\n      },\n      data: {\n        transaction: transactionName,\n        team: teamIds,\n      },\n    }\n  );\n\n  promise.then(clearIndicators);\n\n  promise.catch(response => {\n    const responseJSON = response?.responseJSON;\n    const errorDetails = responseJSON?.detail ?? responseJSON?.non_field_errors;\n\n    if (Array.isArray(errorDetails) && errorDetails.length && errorDetails[0]) {\n      addErrorMessage(errorDetails[0]);\n    } else {\n      addErrorMessage(errorDetails ?? t('Unable to update key transaction'));\n    }\n  });\n\n  return promise;\n}\n","export const ROW_HEIGHT = 24;\nexport const ROW_PADDING = 4;\n","import styled from '@emotion/styled';\n\nimport {ROW_HEIGHT, ROW_PADDING} from 'sentry/components/performance/waterfall/constants';\nimport {DurationDisplay} from 'sentry/components/performance/waterfall/types';\nimport {\n  getDurationPillAlignment,\n  getHatchPattern,\n} from 'sentry/components/performance/waterfall/utils';\n\nexport const RowRectangle = styled('div')<{spanBarHatch: boolean}>`\n  position: absolute;\n  height: ${ROW_HEIGHT - 2 * ROW_PADDING}px;\n  left: 0;\n  min-width: 1px;\n  user-select: none;\n  transition: border-color 0.15s ease-in-out;\n  ${p => getHatchPattern(p, '#dedae3', '#f4f2f7')}\n`;\n\nexport const DurationPill = styled('div')<{\n  durationDisplay: DurationDisplay;\n  showDetail: boolean;\n  spanBarHatch: boolean;\n}>`\n  position: absolute;\n  top: 50%;\n  display: flex;\n  align-items: center;\n  transform: translateY(-50%);\n  white-space: nowrap;\n  font-size: ${p => p.theme.fontSizeExtraSmall};\n  color: ${p => (p.showDetail === true ? p.theme.gray200 : p.theme.gray300)};\n  font-variant-numeric: tabular-nums;\n  line-height: 1;\n\n  ${getDurationPillAlignment}\n\n  @media (max-width: ${p => p.theme.breakpoints.medium}) {\n    font-size: 10px;\n  }\n`;\n","import {DurationDisplay} from 'sentry/components/performance/waterfall/types';\nimport CHART_PALETTE from 'sentry/constants/chartPalette';\nimport space from 'sentry/styles/space';\nimport {Theme} from 'sentry/utils/theme';\n\nexport const getBackgroundColor = ({\n  showStriping,\n  showDetail,\n  theme,\n}: {\n  theme: Theme;\n  showDetail?: boolean;\n  showStriping?: boolean;\n}) => {\n  if (showDetail) {\n    return theme.textColor;\n  }\n\n  if (showStriping) {\n    return theme.backgroundSecondary;\n  }\n\n  return theme.background;\n};\n\ntype HatchProps = {\n  spanBarHatch: boolean;\n};\n\nexport function getHatchPattern(\n  {spanBarHatch}: HatchProps,\n  primary: string,\n  alternate: string\n) {\n  if (spanBarHatch === true) {\n    return `\n      background-image: linear-gradient(135deg,\n        ${alternate},\n        ${alternate} 2.5px,\n        ${primary} 2.5px,\n        ${primary} 5px,\n        ${alternate} 6px,\n        ${alternate} 8px,\n        ${primary} 8px,\n        ${primary} 11px,\n        ${alternate} 11px,\n        ${alternate} 14px,\n        ${primary} 14px,\n        ${primary} 16.5px,\n        ${alternate} 16.5px,\n        ${alternate} 19px,\n        ${primary} 20px\n      );\n      background-size: 16px 16px;\n    `;\n  }\n\n  return null;\n}\n\nexport const getDurationPillAlignment = ({\n  durationDisplay,\n  theme,\n  spanBarHatch,\n}: {\n  durationDisplay: DurationDisplay;\n  spanBarHatch: boolean;\n  theme: Theme;\n}) => {\n  switch (durationDisplay) {\n    case 'left':\n      return `right: calc(100% + ${space(0.5)});`;\n    case 'right':\n      return `left: calc(100% + ${space(0.75)});`;\n    default:\n      return `\n        right: ${space(0.75)};\n        color: ${spanBarHatch === true ? theme.gray300 : theme.white};\n      `;\n  }\n};\n\nexport const getToggleTheme = ({\n  theme,\n  isExpanded,\n  disabled,\n  errored,\n  isSpanGroupToggler,\n}: {\n  disabled: boolean;\n  errored: boolean;\n  isExpanded: boolean;\n  theme: Theme;\n  isSpanGroupToggler?: boolean;\n}) => {\n  const buttonTheme = isExpanded ? theme.button.default : theme.button.primary;\n  const errorTheme = theme.button.danger;\n\n  const background = errored\n    ? isExpanded\n      ? buttonTheme.background\n      : errorTheme.background\n    : buttonTheme.background;\n  const border = errored ? errorTheme.background : buttonTheme.border;\n  const color = errored\n    ? isExpanded\n      ? errorTheme.background\n      : buttonTheme.color\n    : buttonTheme.color;\n\n  if (isSpanGroupToggler) {\n    return `\n    background: ${theme.blue300};\n    border: 1px solid ${theme.button.default.border};\n    color: ${color};\n    cursor: pointer;\n  `;\n  }\n\n  if (disabled) {\n    return `\n    background: ${background};\n    border: 1px solid ${border};\n    color: ${color};\n    cursor: default;\n  `;\n  }\n\n  return `\n    background: ${background};\n    border: 1px solid ${border};\n    color: ${color};\n  `;\n};\n\nexport const getDurationDisplay = ({\n  width,\n  left,\n}: {\n  left: undefined | number;\n  width: undefined | number;\n}): DurationDisplay => {\n  const spaceNeeded = 0.3;\n\n  if (left === undefined || width === undefined) {\n    return 'inset';\n  }\n  if (left + width < 1 - spaceNeeded) {\n    return 'right';\n  }\n  if (left > spaceNeeded) {\n    return 'left';\n  }\n  return 'inset';\n};\n\nexport const getHumanDuration = (duration: number): string => {\n  // note: duration is assumed to be in seconds\n  const durationMS = duration * 1000;\n  return `${durationMS.toLocaleString(undefined, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  })}ms`;\n};\n\nexport const toPercent = (value: number) => `${(value * 100).toFixed(3)}%`;\n\ntype Rect = {\n  height: number;\n  width: number;\n  // x and y are left/top coords respectively\n  x: number;\n  y: number;\n};\n\n// get position of element relative to top/left of document\nexport const getOffsetOfElement = (element: Element) => {\n  // left and top are relative to viewport\n  const {left, top} = element.getBoundingClientRect();\n\n  // get values that the document is currently scrolled by\n  const scrollLeft = window.pageXOffset;\n  const scrollTop = window.pageYOffset;\n\n  return {x: left + scrollLeft, y: top + scrollTop};\n};\n\nexport const rectOfContent = (element: Element): Rect => {\n  const {x, y} = getOffsetOfElement(element);\n\n  // offsets for the border and any scrollbars (clientLeft and clientTop),\n  // and if the element was scrolled (scrollLeft and scrollTop)\n  //\n  // NOTE: clientLeft and clientTop does not account for any margins nor padding\n  const contentOffsetLeft = element.clientLeft - element.scrollLeft;\n  const contentOffsetTop = element.clientTop - element.scrollTop;\n\n  return {\n    x: x + contentOffsetLeft,\n    y: y + contentOffsetTop,\n    width: element.scrollWidth,\n    height: element.scrollHeight,\n  };\n};\n\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n};\n\nconst getLetterIndex = (letter: string): number => {\n  const index = 'abcdefghijklmnopqrstuvwxyz'.indexOf(letter) || 0;\n  return index === -1 ? 0 : index;\n};\n\nconst colorsAsArray = Object.keys(CHART_PALETTE).map(key => CHART_PALETTE[17][key]);\n\nexport const barColors = {\n  default: CHART_PALETTE[17][4],\n  transaction: CHART_PALETTE[17][8],\n  http: CHART_PALETTE[17][10],\n  db: CHART_PALETTE[17][17],\n};\n\nexport const pickBarColor = (input: string | undefined): string => {\n  // We pick the color for span bars using the first three letters of the op name.\n  // That way colors stay consistent between transactions.\n\n  if (!input || input.length < 3) {\n    return CHART_PALETTE[17][4];\n  }\n\n  if (barColors[input]) {\n    return barColors[input];\n  }\n\n  const letterIndex1 = getLetterIndex(input.slice(0, 1));\n  const letterIndex2 = getLetterIndex(input.slice(1, 2));\n  const letterIndex3 = getLetterIndex(input.slice(2, 3));\n  const letterIndex4 = getLetterIndex(input.slice(3, 4));\n\n  return colorsAsArray[\n    (letterIndex1 + letterIndex2 + letterIndex3 + letterIndex4) % colorsAsArray.length\n  ];\n};\n","import styled from '@emotion/styled';\n\nimport theme from 'sentry/utils/theme';\n\ntype Props = {\n  score: number;\n  className?: string;\n  palette?: Readonly<string[]>;\n  paletteClassNames?: string[];\n  radius?: number;\n  size?: number;\n  thickness?: number;\n  vertical?: boolean;\n};\n\nconst BaseScoreBar = ({\n  score,\n  className,\n  vertical,\n  size = 40,\n  thickness = 4,\n  radius = 3,\n  palette = theme.similarity.colors,\n}: Props) => {\n  const maxScore = palette.length;\n\n  // Make sure score is between 0 and maxScore\n  const scoreInBounds = score >= maxScore ? maxScore : score <= 0 ? 0 : score;\n  // Make sure paletteIndex is 0 based\n  const paletteIndex = scoreInBounds - 1;\n\n  // Size of bar, depends on orientation, although we could just apply a transformation via css\n  const barProps = {\n    vertical,\n    thickness,\n    size,\n    radius,\n  };\n\n  return (\n    <div className={className}>\n      {[...Array(scoreInBounds)].map((_j, i) => (\n        <Bar {...barProps} key={i} color={palette[paletteIndex]} />\n      ))}\n      {[...Array(maxScore - scoreInBounds)].map((_j, i) => (\n        <Bar key={`empty-${i}`} {...barProps} empty />\n      ))}\n    </div>\n  );\n};\n\nconst ScoreBar = styled(BaseScoreBar)`\n  display: flex;\n\n  ${p =>\n    p.vertical\n      ? `flex-direction: column-reverse;\n    justify-content: flex-end;`\n      : 'min-width: 80px;'};\n`;\n\ntype BarProps = {\n  radius: number;\n  size: number;\n  thickness: number;\n  color?: string;\n  empty?: boolean;\n  vertical?: boolean;\n};\n\nconst Bar = styled('div')<BarProps>`\n  border-radius: ${p => p.radius}px;\n  margin: 2px;\n  ${p => p.empty && `background-color: ${p.theme.similarity.empty};`};\n  ${p => p.color && `background-color: ${p.color};`};\n\n  width: ${p => (!p.vertical ? p.thickness : p.size)}px;\n  height: ${p => (!p.vertical ? p.size : p.thickness)}px;\n`;\n\nexport default ScoreBar;\n","import styled from '@emotion/styled';\n\nimport AutoSelectText from 'sentry/components/autoSelectText';\nimport Link, {LinkProps} from 'sentry/components/links/link';\n\ninterface Props {\n  shortId: string;\n  avatar?: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  /**\n   * A router target destination\n   */\n  to?: LinkProps['to'];\n}\n\nfunction ShortId({shortId, avatar, onClick, to, className}: Props) {\n  if (!shortId) {\n    return null;\n  }\n\n  return (\n    <StyledShortId onClick={onClick} className={className}>\n      {avatar}\n      {to ? (\n        <Link to={to}>{shortId}</Link>\n      ) : (\n        <StyledAutoSelectText>{shortId}</StyledAutoSelectText>\n      )}\n    </StyledShortId>\n  );\n}\n\nconst StyledShortId = styled('div')`\n  font-family: ${p => p.theme.text.familyMono};\n  display: grid;\n  grid-auto-flow: column;\n  gap: 0.5em;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst StyledAutoSelectText = styled(AutoSelectText)`\n  min-width: 0;\n\n  a & {\n    color: ${p => p.theme.linkColor};\n  }\n`;\n\nexport default ShortId;\n","import ScoreBar from 'sentry/components/scoreBar';\nimport Tooltip from 'sentry/components/tooltip';\nimport CHART_PALETTE from 'sentry/constants/chartPalette';\nimport {tct} from 'sentry/locale';\nimport {defined} from 'sentry/utils';\n\ntype Props = {\n  barHeight: number;\n  bars: number;\n  miserableUsers: number | undefined;\n  miseryLimit: number | undefined;\n  totalUsers: number | undefined;\n  userMisery: number;\n};\n\nfunction UserMisery(props: Props) {\n  const {bars, barHeight, userMisery, miseryLimit, totalUsers, miserableUsers} = props;\n  // User Misery will always be > 0 because of the maximum a posteriori estimate\n  // and below 5% will always be an overestimation of the actual proportion\n  // of miserable to total unique users. We are going to visualize it as\n  // 0 User Misery while still preserving the actual value for sorting purposes.\n  const adjustedMisery = userMisery > 0.05 ? userMisery : 0;\n\n  const palette = new Array(bars).fill([CHART_PALETTE[0][0]]);\n  const score = Math.round(adjustedMisery * palette.length);\n\n  let title: React.ReactNode;\n  if (defined(miserableUsers) && defined(totalUsers) && defined(miseryLimit)) {\n    title = tct(\n      '[miserableUsers] out of [totalUsers] unique users waited more than [duration]ms (4x the response time threshold)',\n      {\n        miserableUsers,\n        totalUsers,\n        duration: 4 * miseryLimit,\n      }\n    );\n  } else if (defined(miseryLimit)) {\n    title = tct(\n      'User Misery score is [userMisery], representing users who waited more than [duration]ms (4x the response time threshold)',\n      {\n        duration: 4 * miseryLimit,\n        userMisery: userMisery.toFixed(3),\n      }\n    );\n  } else {\n    title = tct('User Misery score is [userMisery].', {\n      userMisery: userMisery.toFixed(3),\n    });\n  }\n  return (\n    <Tooltip title={title} containerDisplayMode=\"block\">\n      <ScoreBar size={barHeight} score={score} palette={palette} radius={0} />\n    </Tooltip>\n  );\n}\n\nexport default UserMisery;\n","import {withRouter, WithRouterProps} from 'react-router';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport Clipboard from 'sentry/components/clipboard';\nimport GlobalSelectionLink from 'sentry/components/globalSelectionLink';\nimport Link from 'sentry/components/links/link';\nimport Tooltip from 'sentry/components/tooltip';\nimport {IconCopy} from 'sentry/icons';\nimport space from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {formatVersion} from 'sentry/utils/formatters';\nimport theme from 'sentry/utils/theme';\nimport withOrganization from 'sentry/utils/withOrganization';\n\ntype Props = {\n  /**\n   *  Organization injected by withOrganization HOC\n   */\n  organization: Organization;\n  /**\n   * Raw version (canonical release identifier)\n   */\n  version: string;\n  /**\n   * Should the version be a link to the release page\n   */\n  anchor?: boolean;\n  className?: string;\n  /**\n   * Should link to release page preserve user's page filter values\n   */\n  preservePageFilters?: boolean;\n  /**\n   * Will add project ID to the linked url (can be overridden by preservePageFilters).\n   * If not provided and user does not have global-views enabled, it will try to take it from current url query.\n   */\n  projectId?: string;\n  /**\n   * Should there be a tooltip with raw version on hover\n   */\n  tooltipRawVersion?: boolean;\n  /**\n   * Ellipsis on overflow\n   */\n  truncate?: boolean;\n  /**\n   * Should we also show package name\n   */\n  withPackage?: boolean;\n};\n\nconst Version = ({\n  version,\n  organization,\n  anchor = true,\n  preservePageFilters,\n  tooltipRawVersion,\n  withPackage,\n  projectId,\n  truncate,\n  className,\n  location,\n}: WithRouterProps & Props) => {\n  const versionToDisplay = formatVersion(version, withPackage);\n\n  let releaseDetailProjectId: null | undefined | string | string[];\n  if (projectId) {\n    // we can override preservePageFilters's project id\n    releaseDetailProjectId = projectId;\n  } else if (!organization?.features.includes('global-views')) {\n    // we need this for users without global-views, otherwise they might get `This release may not be in your selected project`\n    releaseDetailProjectId = location?.query.project;\n  }\n\n  const renderVersion = () => {\n    if (anchor && organization?.slug) {\n      const props = {\n        to: {\n          pathname: `/organizations/${organization?.slug}/releases/${encodeURIComponent(\n            version\n          )}/`,\n          query: releaseDetailProjectId ? {project: releaseDetailProjectId} : undefined,\n        },\n        className,\n      };\n      if (preservePageFilters) {\n        return (\n          <GlobalSelectionLink {...props}>\n            <VersionText truncate={truncate}>{versionToDisplay}</VersionText>\n          </GlobalSelectionLink>\n        );\n      }\n      return (\n        <Link {...props}>\n          <VersionText truncate={truncate}>{versionToDisplay}</VersionText>\n        </Link>\n      );\n    }\n\n    return (\n      <VersionText className={className} truncate={truncate}>\n        {versionToDisplay}\n      </VersionText>\n    );\n  };\n\n  const renderTooltipContent = () => (\n    <TooltipContent\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <TooltipVersionWrapper>{version}</TooltipVersionWrapper>\n\n      <Clipboard value={version}>\n        <TooltipClipboardIconWrapper>\n          <IconCopy size=\"xs\" />\n        </TooltipClipboardIconWrapper>\n      </Clipboard>\n    </TooltipContent>\n  );\n\n  const getOverlayStyle = () => {\n    // if the version name is not a hash (sha1 or sha265) and we are not on\n    // mobile, allow tooltip to be as wide as 500px\n    if (/(^[a-f0-9]{40}$)|(^[a-f0-9]{64}$)/.test(version)) {\n      return undefined;\n    }\n\n    return css`\n      @media (min-width: ${theme.breakpoints.small}) {\n        max-width: 500px;\n      }\n    `;\n  };\n\n  return (\n    <Tooltip\n      title={renderTooltipContent()}\n      disabled={!tooltipRawVersion}\n      isHoverable\n      containerDisplayMode={truncate ? 'block' : 'inline-block'}\n      overlayStyle={getOverlayStyle()}\n    >\n      {renderVersion()}\n    </Tooltip>\n  );\n};\n\n// TODO(matej): try to wrap version with this when truncate prop is true (in separate PR)\n// const VersionWrapper = styled('div')`\n//   ${p => p.theme.overflowEllipsis};\n//   max-width: 100%;\n//   width: auto;\n//   display: inline-block;\n// `;\n\nconst VersionText = styled('span')<{truncate?: boolean}>`\n  ${p =>\n    p.truncate &&\n    `max-width: 100%;\n    display: block;\n  overflow: hidden;\n  font-variant-numeric: tabular-nums;\n  text-overflow: ellipsis;\n  white-space: nowrap;`}\n`;\n\nconst TooltipContent = styled('span')`\n  display: flex;\n  align-items: center;\n`;\n\nconst TooltipVersionWrapper = styled('span')`\n  ${p => p.theme.overflowEllipsis}\n`;\n\nconst TooltipClipboardIconWrapper = styled('span')`\n  margin-left: ${space(0.5)};\n  position: relative;\n  bottom: -${space(0.25)};\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\ntype PropsWithoutOrg = Omit<Props, 'organization'>;\n\nexport default withOrganization(\n  withRouter(Version)\n) as React.ComponentClass<PropsWithoutOrg>;\n","import {browserHistory} from 'react-router';\nimport {createStore, StoreDefinition} from 'reflux';\n\nimport OrganizationsActions from 'sentry/actions/organizationsActions';\nimport getGuidesContent from 'sentry/components/assistant/getGuidesContent';\nimport {Guide, GuidesContent, GuidesServerData} from 'sentry/components/assistant/types';\nimport {IS_ACCEPTANCE_TEST} from 'sentry/constants';\nimport ConfigStore from 'sentry/stores/configStore';\nimport HookStore from 'sentry/stores/hookStore';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport {\n  cleanupActiveRefluxSubscriptions,\n  makeSafeRefluxStore,\n} from 'sentry/utils/makeSafeRefluxStore';\n\nfunction guidePrioritySort(a: Guide, b: Guide) {\n  const a_priority = a.priority ?? Number.MAX_SAFE_INTEGER;\n  const b_priority = b.priority ?? Number.MAX_SAFE_INTEGER;\n  if (a_priority === b_priority) {\n    return a.guide.localeCompare(b.guide);\n  }\n  // lower number takes priority\n  return a_priority - b_priority;\n}\n\nexport type GuideStoreState = {\n  /**\n   * Anchors that are currently mounted\n   */\n  anchors: Set<string>;\n  /**\n   * The current guide\n   */\n  currentGuide: Guide | null;\n  /**\n   * Current step of the current guide\n   */\n  currentStep: number;\n  /**\n   * Hides guides that normally would be shown\n   */\n  forceHide: boolean;\n  /**\n   * We force show a guide if the URL contains #assistant\n   */\n  forceShow: boolean;\n  /**\n   * All tooltip guides\n   */\n  guides: Guide[];\n  /**\n   * Current organization id\n   */\n  orgId: string | null;\n  /**\n   * Current organization slug\n   */\n  orgSlug: string | null;\n  /**\n   * The previously shown guide\n   */\n  prevGuide: Guide | null;\n};\n\nconst defaultState: GuideStoreState = {\n  forceHide: false,\n  guides: [],\n  anchors: new Set(),\n  currentGuide: null,\n  currentStep: 0,\n  orgId: null,\n  orgSlug: null,\n  forceShow: false,\n  prevGuide: null,\n};\n\ninterface GuideStoreDefinition extends StoreDefinition {\n  browserHistoryListener: null | (() => void);\n\n  closeGuide(dismissed?: boolean): void;\n  fetchSucceeded(data: GuidesServerData): void;\n  nextStep(): void;\n  recordCue(guide: string): void;\n  registerAnchor(target: string): void;\n  setForceHide(forceHide: boolean): void;\n  state: GuideStoreState;\n  toStep(step: number): void;\n  unregisterAnchor(target: string): void;\n  updatePrevGuide(nextGuide: Guide | null): void;\n}\n\nconst storeConfig: GuideStoreDefinition = {\n  state: defaultState,\n  unsubscribeListeners: [],\n  browserHistoryListener: null,\n\n  init() {\n    this.state = defaultState;\n\n    this.unsubscribeListeners.push(\n      this.listenTo(OrganizationsActions.setActive, this.onSetActiveOrganization)\n    );\n\n    window.addEventListener('load', this.onURLChange, false);\n    this.browserHistoryListener = browserHistory.listen(() => this.onURLChange());\n  },\n\n  teardown() {\n    cleanupActiveRefluxSubscriptions(this.unsubscribeListeners);\n    window.removeEventListener('load', this.onURLChange);\n\n    if (this.browserHistoryListener) {\n      this.browserHistoryListener();\n    }\n  },\n\n  onURLChange() {\n    this.state.forceShow = window.location.hash === '#assistant';\n    this.updateCurrentGuide();\n  },\n\n  onSetActiveOrganization(data) {\n    this.state.orgId = data ? data.id : null;\n    this.state.orgSlug = data ? data.slug : null;\n    this.updateCurrentGuide();\n  },\n\n  fetchSucceeded(data) {\n    // It's possible we can get empty responses (seems to be Firefox specific)\n    // Do nothing if `data` is empty\n    // also, temporarily check data is in the correct format from the updated\n    // assistant endpoint\n    if (!data || !Array.isArray(data)) {\n      return;\n    }\n\n    const guidesContent: GuidesContent = getGuidesContent(this.state.orgSlug);\n    // map server guide state (i.e. seen status) with guide content\n    const guides = guidesContent.reduce((acc: Guide[], content) => {\n      const serverGuide = data.find(guide => guide.guide === content.guide);\n      serverGuide &&\n        acc.push({\n          ...content,\n          ...serverGuide,\n        });\n      return acc;\n    }, []);\n\n    this.state.guides = guides;\n    this.updateCurrentGuide();\n  },\n\n  closeGuide(dismissed?: boolean) {\n    const {currentGuide, guides} = this.state;\n    // update the current guide seen to true or all guides\n    // if markOthersAsSeen is true and the user is dismissing\n    guides\n      .filter(\n        guide =>\n          guide.guide === currentGuide?.guide ||\n          (currentGuide?.markOthersAsSeen && dismissed)\n      )\n      .forEach(guide => (guide.seen = true));\n    this.state.forceShow = false;\n    this.updateCurrentGuide();\n  },\n\n  nextStep() {\n    this.state.currentStep += 1;\n    this.trigger(this.state);\n  },\n\n  toStep(step: number) {\n    this.state.currentStep = step;\n    this.trigger(this.state);\n  },\n\n  registerAnchor(target) {\n    this.state.anchors.add(target);\n    this.updateCurrentGuide();\n  },\n\n  unregisterAnchor(target) {\n    this.state.anchors.delete(target);\n    this.updateCurrentGuide();\n  },\n\n  setForceHide(forceHide) {\n    this.state.forceHide = forceHide;\n    this.trigger(this.state);\n  },\n\n  recordCue(guide) {\n    const user = ConfigStore.get('user');\n    if (!user) {\n      return;\n    }\n\n    const data = {\n      guide,\n      eventKey: 'assistant.guide_cued',\n      eventName: 'Assistant Guide Cued',\n      organization_id: this.state.orgId,\n      user_id: parseInt(user.id, 10),\n    };\n    trackAnalyticsEvent(data);\n  },\n\n  updatePrevGuide(nextGuide) {\n    const {prevGuide} = this.state;\n    if (!nextGuide) {\n      return;\n    }\n\n    if (!prevGuide || prevGuide.guide !== nextGuide.guide) {\n      this.recordCue(nextGuide.guide);\n      this.state.prevGuide = nextGuide;\n    }\n  },\n\n  /**\n   * Logic to determine if a guide is shown:\n   *\n   *  - If any required target is missing, don't show the guide\n   *  - If the URL ends with #assistant, show the guide\n   *  - If the user has already seen the guide, don't show the guide\n   *  - Otherwise show the guide\n   */\n  updateCurrentGuide(dismissed?: boolean) {\n    const {anchors, guides, forceShow} = this.state;\n\n    let guideOptions = guides\n      .sort(guidePrioritySort)\n      .filter(guide => guide.requiredTargets.every(target => anchors.has(target)));\n\n    const user = ConfigStore.get('user');\n    const assistantThreshold = new Date(2019, 6, 1);\n    const userDateJoined = new Date(user?.dateJoined);\n\n    if (!forceShow) {\n      guideOptions = guideOptions.filter(({seen, dateThreshold}) => {\n        if (seen) {\n          return false;\n        }\n        if (user?.isSuperuser && !IS_ACCEPTANCE_TEST) {\n          return true;\n        }\n        if (dateThreshold) {\n          // Show the guide to users who've joined before the date threshold\n          return userDateJoined < dateThreshold;\n        }\n        return userDateJoined > assistantThreshold;\n      });\n    }\n\n    // Remove steps that are missing anchors, unless the anchor is included in\n    // the expectedTargets and will appear at the step.\n    const nextGuide =\n      guideOptions.length > 0\n        ? {\n            ...guideOptions[0],\n            steps: guideOptions[0].steps.filter(\n              step =>\n                anchors.has(step.target) ||\n                guideOptions[0]?.expectedTargets?.includes(step.target)\n            ),\n          }\n        : null;\n\n    this.updatePrevGuide(nextGuide);\n    this.state.currentStep =\n      this.state.currentGuide &&\n      nextGuide &&\n      this.state.currentGuide.guide === nextGuide.guide\n        ? this.state.currentStep\n        : 0;\n    this.state.currentGuide = nextGuide;\n    this.trigger(this.state);\n    HookStore.get('callback:on-guide-update').map(cb => cb(nextGuide, {dismissed}));\n  },\n};\n\nconst GuideStore = createStore(makeSafeRefluxStore(storeConfig));\nexport default GuideStore;\n","import {GuidesContent} from 'sentry/components/assistant/types';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport Link from 'sentry/components/links/link';\nimport {t, tct} from 'sentry/locale';\nimport ConfigStore from 'sentry/stores/configStore';\n\nexport default function getGuidesContent(orgSlug: string | null): GuidesContent {\n  if (ConfigStore.get('demoMode')) {\n    return getDemoModeGuides();\n  }\n  return [\n    {\n      guide: 'issue',\n      requiredTargets: ['issue_number', 'exception'],\n      steps: [\n        {\n          title: t('Identify Your Issues'),\n          target: 'issue_number',\n          description: tct(\n            `You have Issues. That's fine. Use the Issue number in your commit message,\n                and we'll automatically resolve the Issue when your code is deployed. [link:Learn more]`,\n            {link: <ExternalLink href=\"https://docs.sentry.io/product/releases/\" />}\n          ),\n        },\n        {\n          title: t('Annoy the Right People'),\n          target: 'owners',\n          description: tct(\n            `Notification overload makes it tempting to hurl your phone into the ocean.\n                Define who is responsible for what, so alerts reach the right people and your\n                devices stay on dry land. [link:Learn more]`,\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/error-monitoring/issue-owners/\" />\n              ),\n            }\n          ),\n        },\n        {\n          title: t('Narrow Down Suspects'),\n          target: 'exception',\n          description: t(\n            `We've got stack trace. See the exact sequence of function calls leading to the error\n                in question, no detective skills necessary.`\n          ),\n        },\n        {\n          title: t('Retrace Your Steps'),\n          target: 'breadcrumbs',\n          description: t(\n            `Not sure how you got here? Sentry automatically captures breadcrumbs for events in web\n                frameworks to lead you straight to your error.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'issue_stream',\n      requiredTargets: ['issue_stream'],\n      steps: [\n        {\n          title: t('Issues'),\n          target: 'issue_stream',\n          description: tct(\n            `Sentry automatically groups similar events together into an issue. Similarity is\n            determined by stack trace and other factors. [link:Learn more].`,\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/platform-redirect/?next=/data-management/event-grouping/\" />\n              ),\n            }\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'alerts_write_owner',\n      requiredTargets: ['alerts_write_owner'],\n      steps: [\n        {\n          target: 'alerts_write_owner',\n          description: tct(\n            `Today only admins in your organization can create alert rules but we recommend [link:allowing members to create alerts], too.`,\n            {\n              link: <Link to={orgSlug ? `/settings/${orgSlug}` : `/settings`} />,\n            }\n          ),\n          nextText: t(`Allow`),\n          hasNextGuide: true,\n        },\n      ],\n    },\n    {\n      guide: 'trace_view',\n      requiredTargets: ['trace_view_guide_row', 'trace_view_guide_row_details'],\n      steps: [\n        {\n          title: t('Event Breakdown'),\n          target: 'trace_view_guide_breakdown',\n          description: t(\n            `The event breakdown shows you the breakdown of event types within a trace.`\n          ),\n        },\n        {\n          title: t('Transactions'),\n          target: 'trace_view_guide_row',\n          description: t(\n            `You can quickly see all the transactions in a trace alongside the project, transaction duration, and any related errors.`\n          ),\n        },\n        {\n          title: t('Transactions Details'),\n          target: 'trace_view_guide_row_details',\n          description: t(`Click on any transaction to see more details.`),\n        },\n      ],\n    },\n    {\n      guide: 'span_op_breakdowns_and_tag_explorer',\n      requiredTargets: ['span_op_breakdowns_filter'],\n      steps: [\n        {\n          title: t('Filter by Span Operation'),\n          target: 'span_op_breakdowns_filter',\n          description: t(\n            'You can now filter these transaction events based on http, db, browser or resource operation.'\n          ),\n        },\n        {\n          title: t('Suspect Tags'),\n          target: 'tag_explorer',\n          description: tct(\n            \"See which tags often correspond to slower transactions. You'll want to investigate these more. [link:Learn more]\",\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/performance/transaction-summary/#suspect-tags\" />\n              ),\n            }\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'project_transaction_threshold',\n      requiredTargets: ['project_transaction_threshold'],\n      steps: [\n        {\n          title: t('Project Thresholds'),\n          target: 'project_transaction_threshold',\n          description: t(\n            'Gauge performance using different metrics for each project. Set response time thresholds, per project, for the Apdex and User Misery Scores in each project’s Performance settings.'\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'project_transaction_threshold_override',\n      requiredTargets: ['project_transaction_threshold_override'],\n      steps: [\n        {\n          title: t('Response Time Thresholds'),\n          target: 'project_transaction_threshold_override',\n          description: t(\n            'Use this menu to adjust each transaction’s satisfactory response time threshold, which can vary across transactions. These thresholds are used to calculate Apdex and User Misery, metrics that indicate how satisfied and miserable users are, respectively.'\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'semver',\n      requiredTargets: ['releases_search'],\n      dateThreshold: new Date('2021-05-01'),\n      steps: [\n        {\n          title: t('Filter by Semver'),\n          target: 'releases_search',\n          description: tct(\n            'You can now filter releases by semver. For example: release.version:>14.0 [br] [link:View the docs]',\n            {\n              br: <br />,\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/releases/usage/sorting-filtering/#filtering-releases\" />\n              ),\n            }\n          ),\n          nextText: t('Leave me alone'),\n        },\n      ],\n    },\n    {\n      guide: 'new_page_filters',\n      requiredTargets: ['new_page_filter_button'],\n      expectedTargets: ['new_page_filter_pin'],\n      dateThreshold: new Date('2022-04-05'),\n      steps: [\n        {\n          title: t('Selection filters here now!'),\n          target: 'new_page_filter_button',\n          description: t(\n            \"Selection filters were at the top of the page. Now they're here. Because this is what's getting filtered. Obvi.\"\n          ),\n          nextText: t('Sounds Good'),\n        },\n        {\n          title: t('Pin your filters'),\n          target: 'new_page_filter_pin',\n          description: t(\n            \"Want to keep the same filters between searches and sessions? Click this button. Don't want to? Don't click this button.\"\n          ),\n          nextText: t('Got It'),\n        },\n      ],\n    },\n  ];\n}\n\nfunction getDemoModeGuides(): GuidesContent {\n  return [\n    {\n      guide: 'sidebar',\n      requiredTargets: ['projects', 'issues'],\n      priority: 1, // lower number means higher priority\n      markOthersAsSeen: true,\n      steps: [\n        {\n          title: t('Projects'),\n          target: 'projects',\n          description: t(\n            `Create a project for any type of application you want to monitor.`\n          ),\n        },\n        {\n          title: t('Issues'),\n          target: 'issues',\n          description: t(\n            `Here's a list of what's broken with your application. And everything you need to know to fix it.`\n          ),\n        },\n        {\n          title: t('Performance'),\n          target: 'performance',\n          description: t(\n            `See slow faster. Trace slow-loading pages back to their API calls as well as surface all related errors.`\n          ),\n        },\n        {\n          title: t('Releases'),\n          target: 'releases',\n          description: t(\n            `Track the health of every release, see differences between releases from crash analytics to adoption rates.`\n          ),\n        },\n        {\n          title: t('Discover'),\n          target: 'discover',\n          description: t(\n            `Query and unlock insights into the health of your entire system and get answers to critical business questions all in one place.`\n          ),\n          nextText: t(`Got it`),\n        },\n      ],\n    },\n    {\n      guide: 'issue_stream_v2',\n      requiredTargets: ['issue_stream_title'],\n      steps: [\n        {\n          title: t('Issue'),\n          target: 'issue_stream_title',\n          description: t(\n            `Click here to get a full error report down to the line of code that caused the error.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'issue_v2',\n      requiredTargets: ['issue_details', 'exception'],\n      steps: [\n        {\n          title: t('Details'),\n          target: 'issue_details',\n          description: t(`See the who, what, and where of every error right at the top`),\n        },\n        {\n          title: t('Exception'),\n          target: 'exception',\n          description: t(\n            `Source code right in the stack trace, so you don’t need to find it yourself.`\n          ),\n        },\n        {\n          title: t('Tags'),\n          target: 'tags',\n          description: t(\n            `Tags help you quickly access related events and view the tag distribution for a set of events.`\n          ),\n        },\n        {\n          title: t('Breadcrumbs'),\n          target: 'breadcrumbs',\n          description: t(\n            `Check out the play by play of what your user experienced till they encountered the exception.`\n          ),\n        },\n        {\n          title: t('Discover'),\n          target: 'open_in_discover',\n          description: t(\n            `Uncover trends with Discover — analyze errors by URL, geography, device, browser, etc.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'releases',\n      requiredTargets: ['release_version'],\n      steps: [\n        {\n          title: t('Release'),\n          target: 'release_version',\n          description: t(\n            `Click here to easily identify new issues, regressions, and track the health of every release.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'release_details',\n      requiredTargets: ['release_chart'],\n      steps: [\n        {\n          title: t('Chart'),\n          target: 'release_chart',\n          description: t(`Click and drag to zoom in on a specific section of the chart.`),\n        },\n        {\n          title: t('Discover'),\n          target: 'release_issues_open_in_discover',\n          description: t(`Analyze these errors by URL, geography, device, browser, etc.`),\n        },\n        {\n          title: t('Discover'),\n          target: 'release_transactions_open_in_discover',\n          description: t(\n            `Analyze these performance issues by URL, geography, device, browser, etc.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'discover_landing',\n      requiredTargets: ['discover_landing_header'],\n      steps: [\n        {\n          title: t('Discover'),\n          target: 'discover_landing_header',\n          description: t(\n            `Click into any of the queries below to identify trends in event data.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'discover_event_view',\n      requiredTargets: ['create_alert_from_discover'],\n      steps: [\n        {\n          title: t('Create Alert'),\n          target: 'create_alert_from_discover',\n          description: t(\n            `Create an alert based on this query to get notified when an event exceeds user-defined thresholds.`\n          ),\n        },\n        {\n          title: t('Columns'),\n          target: 'columns_header_button',\n          description: t(\n            `There's a whole lot more to... _discover_. View all the query conditions.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'transaction_details',\n      requiredTargets: ['span_tree'],\n      steps: [\n        {\n          title: t('Span Tree'),\n          target: 'span_tree',\n          description: t(\n            `Expand the spans to see span details from start date, end date to the operation.`\n          ),\n        },\n        {\n          title: t('Breadcrumbs'),\n          target: 'breadcrumbs',\n          description: t(\n            `Check out the play by play of what your user experienced till they encountered the performance issue.`\n          ),\n        },\n      ],\n    },\n  ];\n}\n","import isDate from 'lodash/isDate';\nimport isEqualWith from 'lodash/isEqualWith';\n\n// `lodash.isEqual` does not compare date objects\nfunction dateComparator(value: any, other: any): boolean | undefined {\n  if (isDate(value) && isDate(other)) {\n    return +value === +other;\n  }\n\n  // Loose checking\n  if (!value && !other) {\n    return true;\n  }\n\n  // returning undefined will use default comparator\n  return undefined;\n}\n\nexport const isEqualWithDates = (a: any, b: any) => isEqualWith(a, b, dateComparator);\n","import isEqual from 'lodash/isEqual';\nimport {createStore} from 'reflux';\n\nimport PageFiltersActions from 'sentry/actions/pageFiltersActions';\nimport {getDefaultSelection} from 'sentry/components/organizations/pageFilters/utils';\nimport {PageFilters, PinnedPageFilter} from 'sentry/types';\nimport {isEqualWithDates} from 'sentry/utils/isEqualWithDates';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\n\nimport {CommonStoreDefinition} from './types';\n\ninterface CommonState {\n  /**\n   * The set of page filters which have been pinned but do not match the current\n   * URL state.\n   */\n  desyncedFilters: Set<PinnedPageFilter>;\n  /**\n   * The set of page filters which are currently pinned\n   */\n  pinnedFilters: Set<PinnedPageFilter>;\n  /**\n   * The current page filter selection\n   */\n  selection: PageFilters;\n}\n\n/**\n * External state\n */\ninterface State extends CommonState {\n  /**\n   * Are page filters ready?\n   */\n  isReady: boolean;\n}\n\ninterface InternalDefinition extends CommonState {\n  /**\n   * Have we initalized page filters?\n   */\n  hasInitialState: boolean;\n}\n\ninterface PageFiltersStoreDefinition\n  extends InternalDefinition,\n    CommonStoreDefinition<State> {\n  init(): void;\n  onInitializeUrlState(newSelection: PageFilters, pinned: Set<PinnedPageFilter>): void;\n  onReset(): void;\n  pin(filter: PinnedPageFilter, pin: boolean): void;\n  reset(selection?: PageFilters): void;\n  updateDateTime(datetime: PageFilters['datetime']): void;\n  updateDesyncedFilters(filters: Set<PinnedPageFilter>): void;\n  updateEnvironments(environments: string[]): void;\n  updateProjects(projects: PageFilters['projects'], environments: null | string[]): void;\n}\n\nconst storeConfig: PageFiltersStoreDefinition = {\n  selection: getDefaultSelection(),\n  pinnedFilters: new Set(),\n  desyncedFilters: new Set(),\n  hasInitialState: false,\n  unsubscribeListeners: [],\n\n  init() {\n    this.reset(this.selection);\n\n    this.unsubscribeListeners.push(this.listenTo(PageFiltersActions.reset, this.onReset));\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.initializeUrlState, this.onInitializeUrlState)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateProjects, this.updateProjects)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateDateTime, this.updateDateTime)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateEnvironments, this.updateEnvironments)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateDesyncedFilters, this.updateDesyncedFilters)\n    );\n    this.unsubscribeListeners.push(this.listenTo(PageFiltersActions.pin, this.pin));\n  },\n\n  reset(selection) {\n    this._isReady = false;\n    this.selection = selection || getDefaultSelection();\n    this.pinnedFilters = new Set();\n  },\n\n  /**\n   * Initializes the page filters store data\n   */\n  onInitializeUrlState(newSelection, pinned) {\n    this._isReady = true;\n\n    this.selection = newSelection;\n    this.pinnedFilters = pinned;\n    this.trigger(this.getState());\n  },\n\n  getState() {\n    return {\n      selection: this.selection,\n      pinnedFilters: this.pinnedFilters,\n      desyncedFilters: this.desyncedFilters,\n      isReady: this._isReady,\n    };\n  },\n\n  onReset() {\n    this.reset();\n    this.trigger(this.getState());\n  },\n\n  updateDesyncedFilters(filters: Set<PinnedPageFilter>) {\n    this.desyncedFilters = filters;\n    this.trigger(this.getState());\n  },\n\n  updateProjects(projects = [], environments = null) {\n    if (isEqual(this.selection.projects, projects)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      projects,\n      environments: environments === null ? this.selection.environments : environments,\n    };\n    this.trigger(this.getState());\n  },\n\n  updateDateTime(datetime) {\n    if (isEqualWithDates(this.selection.datetime, datetime)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      datetime,\n    };\n    this.trigger(this.getState());\n  },\n\n  updateEnvironments(environments) {\n    if (isEqual(this.selection.environments, environments)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      environments: environments ?? [],\n    };\n    this.trigger(this.getState());\n  },\n\n  pin(filter, pin) {\n    if (pin) {\n      this.pinnedFilters.add(filter);\n    } else {\n      this.pinnedFilters.delete(filter);\n    }\n\n    this.trigger(this.getState());\n  },\n};\n\nconst PageFiltersStore = createStore(makeSafeRefluxStore(storeConfig));\n\nexport default PageFiltersStore;\n","import type {Organization, SharedViewOrganization} from './organization';\n\n// from:\n// - https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions\n// - https://www.typescriptlang.org/play/#example/assertion-functions\n\n// This declares a function which asserts that the expression called\n// value is true:\n// eslint-disable-next-line prettier/prettier\nexport function assert(_value: unknown): asserts _value {}\n\n// This declares a function which asserts that the expression called\n// value is of type Type:\n// eslint-disable-next-line prettier/prettier\nexport function assertType<Type>(_value: unknown): asserts _value is Type {}\n\nexport function isNotSharedOrganization(\n  maybe: Organization | SharedViewOrganization\n): maybe is Organization {\n  return typeof (maybe as Organization).id !== 'undefined';\n}\n\nexport type DeepPartial<T> = T extends object\n  ? {\n      [P in keyof T]?: DeepPartial<T[P]>;\n    }\n  : T;\n","import moment from 'moment';\n\nimport {parseStatsPeriod} from 'sentry/components/organizations/pageFilters/parse';\nimport ConfigStore from 'sentry/stores/configStore';\nimport {DateString} from 'sentry/types';\n\n// TODO(billy): Move to TimeRangeSelector specific utils\nexport const DEFAULT_DAY_START_TIME = '00:00:00';\nexport const DEFAULT_DAY_END_TIME = '23:59:59';\nconst DATE_FORMAT_NO_TIMEZONE = 'YYYY/MM/DD HH:mm:ss';\n\nfunction getParser(local: boolean = false): typeof moment | typeof moment.utc {\n  return local ? moment : moment.utc;\n}\n\n/**\n * Checks if string is valid time. Only accepts 24 hour format.\n *\n * Chrome's time input will (at least for US locale), allow you to input 12\n * hour format with AM/PM but the raw value is in 24 hour.\n *\n * Safari does not do any validation so you could get a value of > 24 hours\n */\nexport function isValidTime(str: string): boolean {\n  return moment(str, 'HH:mm', true).isValid();\n}\n\n/**\n * Given a date object, format in datetime in UTC\n * given: Tue Oct 09 2018 00:00:00 GMT-0700 (Pacific Daylight Time)\n * returns: \"2018-10-09T07:00:00.000\"\n */\nexport function getUtcDateString(dateObj: moment.MomentInput): string {\n  return moment.utc(dateObj).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS);\n}\n\nexport function getFormattedDate(\n  dateObj: moment.MomentInput,\n  format: string,\n  {local}: {local?: boolean} = {}\n): string {\n  return getParser(local)(dateObj).format(format);\n}\n\n/**\n * Returns user timezone from their account preferences\n */\nexport function getUserTimezone(): string {\n  return ConfigStore.get('user')?.options?.timezone;\n}\n\n/**\n * Given a UTC date, return a Date object in local time\n */\nexport function getUtcToLocalDateObject(date: moment.MomentInput): Date {\n  return moment.utc(date).local().toDate();\n}\n\n/**\n * Sets time (hours + minutes) of the current date object\n *\n * @param {String} timeStr Time in 24hr format (HH:mm)\n */\nexport function setDateToTime(\n  dateObj: string | Date,\n  timeStr: string,\n  {local}: {local?: boolean} = {}\n): Date {\n  const [hours, minutes, seconds] = timeStr.split(':').map(t => parseInt(t, 10));\n\n  const date = new Date(+dateObj);\n\n  if (local) {\n    date.setHours(hours, minutes);\n  } else {\n    date.setUTCHours(hours, minutes);\n  }\n\n  if (typeof seconds !== 'undefined') {\n    date.setSeconds(seconds);\n  }\n\n  return date;\n}\n\n/**\n * Given a UTC timestamp, return a system date object with the same date\n * e.g. given: system is -0700 (PST),\n * 1/1/2001 @ 22:00 UTC, return:  1/1/2001 @ 22:00 -0700 (PST)\n */\nexport function getUtcToSystem(dateObj: moment.MomentInput): Date {\n  // This is required because if your system timezone !== user configured timezone\n  // then there will be a mismatch of dates with `react-date-picker`\n  //\n  // We purposely strip the timezone when formatting from the utc timezone\n  return new Date(moment.utc(dateObj).format(DATE_FORMAT_NO_TIMEZONE));\n}\n\n/**\n * Given a timestamp, format to user preference timezone, and strip timezone to\n * return a system date object with the same date\n *\n * e.g. given: system is -0700 (PST) and user preference is -0400 (EST),\n * 1/1/2001 @ 22:00 UTC --> 1/1/2001 @ 18:00 -0400 (EST) -->\n * return:  1/1/2001 @ 18:00 -0700 (PST)\n */\nexport function getLocalToSystem(dateObj: moment.MomentInput): Date {\n  // This is required because if your system timezone !== user configured timezone\n  // then there will be a mismatch of dates with `react-date-picker`\n  //\n  // We purposely strip the timezone when formatting from the utc timezone\n  return new Date(moment(dateObj).format(DATE_FORMAT_NO_TIMEZONE));\n}\n\n// Get the beginning of day (e.g. midnight)\nexport function getStartOfDay(date: moment.MomentInput): Date {\n  return moment(date)\n    .startOf('day')\n    .startOf('hour')\n    .startOf('minute')\n    .startOf('second')\n    .local()\n    .toDate();\n}\n\n// Get tomorrow at midnight so that default endtime\n// is inclusive of today\nexport function getEndOfDay(date: moment.MomentInput): Date {\n  return moment(date)\n    .add(1, 'day')\n    .startOf('hour')\n    .startOf('minute')\n    .startOf('second')\n    .subtract(1, 'second')\n    .local()\n    .toDate();\n}\n\nexport function getPeriodAgo(\n  period: moment.unitOfTime.DurationConstructor,\n  unit: number\n): moment.Moment {\n  return moment().local().subtract(unit, period);\n}\n\n// Get the start of the day (midnight) for a period ago\n//\n// e.g. 2 weeks ago at midnight\nexport function getStartOfPeriodAgo(\n  period: moment.unitOfTime.DurationConstructor,\n  unit: number\n): Date {\n  return getStartOfDay(getPeriodAgo(period, unit));\n}\n\n/**\n * Convert an interval string into a number of seconds.\n * This allows us to create end timestamps from starting ones\n * enabling us to find events in narrow windows.\n *\n * @param {String} interval The interval to convert.\n * @return {Integer}\n */\nexport function intervalToMilliseconds(interval: string): number {\n  const pattern = /^(\\d+)(d|h|m)$/;\n  const matches = pattern.exec(interval);\n  if (!matches) {\n    return 0;\n  }\n  const [, value, unit] = matches;\n  const multipliers = {\n    d: 60 * 60 * 24,\n    h: 60 * 60,\n    m: 60,\n  };\n  return parseInt(value, 10) * multipliers[unit] * 1000;\n}\n\n/**\n * This parses our period shorthand strings (e.g. <int><unit>)\n * and converts it into hours\n */\nexport function parsePeriodToHours(str: string): number {\n  const result = parseStatsPeriod(str);\n\n  if (!result) {\n    return -1;\n  }\n\n  const {period, periodLength} = result;\n\n  const periodNumber = parseInt(period, 10);\n\n  switch (periodLength) {\n    case 's':\n      return periodNumber / (60 * 60);\n    case 'm':\n      return periodNumber / 60;\n    case 'h':\n      return periodNumber;\n    case 'd':\n      return periodNumber * 24;\n    case 'w':\n      return periodNumber * 24 * 7;\n    default:\n      return -1;\n  }\n}\n\nexport function statsPeriodToDays(\n  statsPeriod?: string | null,\n  start?: DateString,\n  end?: DateString\n) {\n  if (statsPeriod && statsPeriod.endsWith('d')) {\n    return parseInt(statsPeriod.slice(0, -1), 10);\n  }\n  if (statsPeriod && statsPeriod.endsWith('h')) {\n    return parseInt(statsPeriod.slice(0, -1), 10) / 24;\n  }\n  if (start && end) {\n    return (new Date(end).getTime() - new Date(start).getTime()) / (24 * 60 * 60 * 1000);\n  }\n  return 0;\n}\n\nexport function shouldUse24Hours() {\n  return ConfigStore.get('user')?.options?.clock24Hours;\n}\n\nexport function getTimeFormat({displaySeconds = false}: {displaySeconds?: boolean} = {}) {\n  if (shouldUse24Hours()) {\n    return displaySeconds ? 'HH:mm:ss' : 'HH:mm';\n  }\n\n  return displaySeconds ? 'LTS' : 'LT';\n}\n\nexport function getInternalDate(date: string | Date, utc?: boolean | null) {\n  if (utc) {\n    return getUtcToSystem(date);\n  }\n  return new Date(\n    moment.tz(moment.utc(date), getUserTimezone()).format('YYYY/MM/DD HH:mm:ss')\n  );\n}\n\n/**\n * Strips timezone from local date, creates a new moment date object with timezone\n * returns the moment as a Date object\n */\nexport function getDateWithTimezoneInUtc(date?: Date, utc?: boolean | null) {\n  return moment\n    .tz(\n      moment(date).local().format('YYYY-MM-DD HH:mm:ss'),\n      utc ? 'UTC' : getUserTimezone()\n    )\n    .utc()\n    .toDate();\n}\n","import {Component} from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\n\nimport {nullableValue} from './fieldRenderers';\n\ntype Props = {\n  value: string[];\n};\ntype State = {\n  expanded: boolean;\n};\n\nclass ArrayValue extends Component<Props, State> {\n  state: State = {\n    expanded: false,\n  };\n  handleToggle = () => {\n    this.setState(prevState => ({\n      expanded: !prevState.expanded,\n    }));\n  };\n\n  render() {\n    const {expanded} = this.state;\n    const {value} = this.props;\n    return (\n      <ArrayContainer expanded={expanded}>\n        {expanded &&\n          value\n            .slice(0, value.length - 1)\n            .map((item, i) => (\n              <ArrayItem key={`${i}:${item}`}>{nullableValue(item)}</ArrayItem>\n            ))}\n        <ArrayItem>{nullableValue(value.slice(-1)[0])}</ArrayItem>\n        {value.length > 1 ? (\n          <ButtonContainer>\n            <button onClick={this.handleToggle}>\n              {expanded ? t('[collapse]') : t('[+%s more]', value.length - 1)}\n            </button>\n          </ButtonContainer>\n        ) : null}\n      </ArrayContainer>\n    );\n  }\n}\n\nconst ArrayContainer = styled('div')<{expanded: boolean}>`\n  display: flex;\n  flex-direction: ${p => (p.expanded ? 'column' : 'row')};\n\n  & button {\n    background: none;\n    border: 0;\n    outline: none;\n    padding: 0;\n    cursor: pointer;\n    color: ${p => p.theme.blue300};\n    margin-left: ${space(0.5)};\n  }\n`;\n\nconst ArrayItem = styled('span')`\n  flex-shrink: 1;\n  display: block;\n\n  ${p => p.theme.overflowEllipsis};\n  width: unset;\n`;\n\nconst ButtonContainer = styled('div')`\n  white-space: nowrap;\n`;\n\nexport default ArrayValue;\n","import {Component} from 'react';\n\nimport Button from 'sentry/components/button';\nimport TeamKeyTransaction, {\n  TitleProps,\n} from 'sentry/components/performance/teamKeyTransaction';\nimport * as TeamKeyTransactionManager from 'sentry/components/performance/teamKeyTransactionsManager';\nimport Tooltip from 'sentry/components/tooltip';\nimport {IconStar} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {Organization, Project} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport withProjects from 'sentry/utils/withProjects';\n\nclass TitleStar extends Component<TitleProps> {\n  render() {\n    const {isOpen, keyedTeams, initialValue, ...props} = this.props;\n    const keyedTeamsCount = keyedTeams?.length ?? initialValue ?? 0;\n    const star = (\n      <IconStar\n        color={keyedTeamsCount ? 'yellow300' : 'gray200'}\n        isSolid={keyedTeamsCount > 0}\n        data-test-id=\"team-key-transaction-column\"\n      />\n    );\n    const button = (\n      <Button\n        {...props}\n        icon={star}\n        borderless\n        size=\"zero\"\n        aria-label={t('Toggle star for team')}\n      />\n    );\n\n    if (!isOpen && keyedTeams?.length) {\n      const teamSlugs = keyedTeams.map(({slug}) => slug).join(', ');\n      return <Tooltip title={teamSlugs}>{button}</Tooltip>;\n    }\n    return button;\n  }\n}\n\ntype BaseProps = {\n  isKeyTransaction: boolean;\n  organization: Organization;\n};\n\ntype Props = BaseProps &\n  TeamKeyTransactionManager.TeamKeyTransactionManagerChildrenProps & {\n    project: Project;\n    transactionName: string;\n  };\n\nfunction TeamKeyTransactionField({\n  isKeyTransaction,\n  counts,\n  getKeyedTeams,\n  project,\n  transactionName,\n  ...props\n}: Props) {\n  const keyedTeams = getKeyedTeams(project.id, transactionName);\n\n  return (\n    <TeamKeyTransaction\n      counts={counts}\n      keyedTeams={keyedTeams}\n      title={TitleStar}\n      project={project}\n      transactionName={transactionName}\n      initialValue={Number(isKeyTransaction)}\n      {...props}\n    />\n  );\n}\n\ntype WrapperProps = BaseProps & {\n  projectSlug: string | undefined;\n  projects: Project[];\n  transactionName: string | undefined;\n};\n\nfunction TeamKeyTransactionFieldWrapper({\n  isKeyTransaction,\n  projects,\n  projectSlug,\n  transactionName,\n  ...props\n}: WrapperProps) {\n  const project = projects.find(proj => proj.slug === projectSlug);\n\n  // All these fields need to be defined in order to toggle a team key\n  // transaction. Since they are not defined, just render a plain star\n  // with no interactions.\n  if (!defined(project) || !defined(transactionName)) {\n    return (\n      <TitleStar\n        isOpen={false}\n        disabled\n        keyedTeams={null}\n        initialValue={Number(isKeyTransaction)}\n      />\n    );\n  }\n\n  return (\n    <TeamKeyTransactionManager.Consumer>\n      {results => (\n        <TeamKeyTransactionField\n          isKeyTransaction={isKeyTransaction}\n          project={project}\n          transactionName={transactionName}\n          {...props}\n          {...results}\n        />\n      )}\n    </TeamKeyTransactionManager.Consumer>\n  );\n}\n\nexport default withProjects(TeamKeyTransactionFieldWrapper);\n","import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\nimport partial from 'lodash/partial';\n\nimport Count from 'sentry/components/count';\nimport Duration from 'sentry/components/duration';\nimport ProjectBadge from 'sentry/components/idBadge/projectBadge';\nimport UserBadge from 'sentry/components/idBadge/userBadge';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport {RowRectangle} from 'sentry/components/performance/waterfall/rowBar';\nimport {pickBarColor, toPercent} from 'sentry/components/performance/waterfall/utils';\nimport Tooltip from 'sentry/components/tooltip';\nimport UserMisery from 'sentry/components/userMisery';\nimport Version from 'sentry/components/version';\nimport {t} from 'sentry/locale';\nimport {AvatarProject, Organization, Project} from 'sentry/types';\nimport {defined, isUrl} from 'sentry/utils';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport EventView, {EventData, MetaType} from 'sentry/utils/discover/eventView';\nimport {\n  AGGREGATIONS,\n  getAggregateAlias,\n  getSpanOperationName,\n  isEquation,\n  isRelativeSpanOperationBreakdownField,\n  SPAN_OP_BREAKDOWN_FIELDS,\n  SPAN_OP_RELATIVE_BREAKDOWN_FIELD,\n} from 'sentry/utils/discover/fields';\nimport {getShortEventId} from 'sentry/utils/events';\nimport {formatFloat, formatPercentage} from 'sentry/utils/formatters';\nimport getDynamicText from 'sentry/utils/getDynamicText';\nimport Projects from 'sentry/utils/projects';\nimport {\n  filterToLocationQuery,\n  SpanOperationBreakdownFilter,\n  stringToFilter,\n} from 'sentry/views/performance/transactionSummary/filter';\n\nimport ArrayValue from './arrayValue';\nimport {\n  BarContainer,\n  Container,\n  FieldDateTime,\n  FieldShortId,\n  FlexContainer,\n  NumberContainer,\n  OverflowLink,\n  UserIcon,\n  VersionContainer,\n} from './styles';\nimport TeamKeyTransactionField from './teamKeyTransactionField';\n\n/**\n * Types, functions and definitions for rendering fields in discover results.\n */\nexport type RenderFunctionBaggage = {\n  location: Location;\n  organization: Organization;\n  eventView?: EventView;\n};\n\ntype FieldFormatterRenderFunction = (field: string, data: EventData) => React.ReactNode;\n\ntype FieldFormatterRenderFunctionPartial = (\n  data: EventData,\n  baggage: RenderFunctionBaggage\n) => React.ReactNode;\n\ntype FieldFormatter = {\n  isSortable: boolean;\n  renderFunc: FieldFormatterRenderFunction;\n};\n\ntype FieldFormatters = {\n  array: FieldFormatter;\n  boolean: FieldFormatter;\n  date: FieldFormatter;\n  duration: FieldFormatter;\n  integer: FieldFormatter;\n  number: FieldFormatter;\n  percentage: FieldFormatter;\n  string: FieldFormatter;\n};\n\nexport type FieldTypes = keyof FieldFormatters;\n\nconst EmptyValueContainer = styled('span')`\n  color: ${p => p.theme.gray300};\n`;\nconst emptyValue = <EmptyValueContainer>{t('(no value)')}</EmptyValueContainer>;\nconst emptyStringValue = <EmptyValueContainer>{t('(empty string)')}</EmptyValueContainer>;\n\nexport function nullableValue(value: string | null): string | React.ReactElement {\n  switch (value) {\n    case null:\n      return emptyValue;\n    case '':\n      return emptyStringValue;\n    default:\n      return value;\n  }\n}\n\n/**\n * A mapping of field types to their rendering function.\n * This mapping is used when a field is not defined in SPECIAL_FIELDS\n * and the field is not being coerced to a link.\n *\n * This mapping should match the output sentry.utils.snuba:get_json_type\n */\nexport const FIELD_FORMATTERS: FieldFormatters = {\n  boolean: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      const value = data[field] ? t('true') : t('false');\n      return <Container>{value}</Container>;\n    },\n  },\n  date: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <Container>\n        {data[field]\n          ? getDynamicText({\n              value: <FieldDateTime date={data[field]} />,\n              fixed: 'timestamp',\n            })\n          : emptyValue}\n      </Container>\n    ),\n  },\n  duration: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? (\n          <Duration seconds={data[field] / 1000} fixedDigits={2} abbreviation />\n        ) : (\n          emptyValue\n        )}\n      </NumberContainer>\n    ),\n  },\n  integer: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? <Count value={data[field]} /> : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  number: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? formatFloat(data[field], 4) : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  percentage: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? formatPercentage(data[field]) : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  string: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      // Some fields have long arrays in them, only show the tail of the data.\n      const value = Array.isArray(data[field])\n        ? data[field].slice(-1)\n        : defined(data[field])\n        ? data[field]\n        : emptyValue;\n      if (isUrl(value)) {\n        return (\n          <Container>\n            <ExternalLink href={value} data-test-id=\"group-tag-url\">\n              {value}\n            </ExternalLink>\n          </Container>\n        );\n      }\n      return <Container>{nullableValue(value)}</Container>;\n    },\n  },\n  array: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      const value = Array.isArray(data[field]) ? data[field] : [data[field]];\n      return <ArrayValue value={value} />;\n    },\n  },\n};\n\ntype SpecialFieldRenderFunc = (\n  data: EventData,\n  baggage: RenderFunctionBaggage\n) => React.ReactNode;\n\ntype SpecialField = {\n  renderFunc: SpecialFieldRenderFunc;\n  sortField: string | null;\n};\n\ntype SpecialFields = {\n  'count_unique(user)': SpecialField;\n  'error.handled': SpecialField;\n  id: SpecialField;\n  issue: SpecialField;\n  'issue.id': SpecialField;\n  project: SpecialField;\n  release: SpecialField;\n  team_key_transaction: SpecialField;\n  'timestamp.to_day': SpecialField;\n  'timestamp.to_hour': SpecialField;\n  trace: SpecialField;\n  'trend_percentage()': SpecialField;\n  user: SpecialField;\n  'user.display': SpecialField;\n};\n\n/**\n * \"Special fields\" either do not map 1:1 to an single column in the event database,\n * or they require custom UI formatting that can't be handled by the datatype formatters.\n */\nconst SPECIAL_FIELDS: SpecialFields = {\n  id: {\n    sortField: 'id',\n    renderFunc: data => {\n      const id: string | unknown = data?.id;\n      if (typeof id !== 'string') {\n        return null;\n      }\n\n      return <Container>{getShortEventId(id)}</Container>;\n    },\n  },\n  trace: {\n    sortField: 'trace',\n    renderFunc: data => {\n      const id: string | unknown = data?.trace;\n      if (typeof id !== 'string') {\n        return null;\n      }\n\n      return <Container>{getShortEventId(id)}</Container>;\n    },\n  },\n  'issue.id': {\n    sortField: 'issue.id',\n    renderFunc: (data, {organization}) => {\n      const target = {\n        pathname: `/organizations/${organization.slug}/issues/${data['issue.id']}/`,\n      };\n\n      return (\n        <Container>\n          <OverflowLink to={target} aria-label={data['issue.id']}>\n            {data['issue.id']}\n          </OverflowLink>\n        </Container>\n      );\n    },\n  },\n  issue: {\n    sortField: null,\n    renderFunc: (data, {organization}) => {\n      const issueID = data['issue.id'];\n\n      if (!issueID) {\n        return (\n          <Container>\n            <FieldShortId shortId={`${data.issue}`} />\n          </Container>\n        );\n      }\n\n      const target = {\n        pathname: `/organizations/${organization.slug}/issues/${issueID}/`,\n      };\n\n      return (\n        <Container>\n          <OverflowLink to={target} aria-label={issueID}>\n            <FieldShortId shortId={`${data.issue}`} />\n          </OverflowLink>\n        </Container>\n      );\n    },\n  },\n  project: {\n    sortField: 'project',\n    renderFunc: (data, {organization}) => {\n      let slugs: string[] | undefined = undefined;\n      let projectIds: number[] | undefined = undefined;\n      if (typeof data.project === 'number') {\n        projectIds = [data.project];\n      } else {\n        slugs = [data.project];\n      }\n      return (\n        <Container>\n          <Projects orgId={organization.slug} slugs={slugs} projectIds={projectIds}>\n            {({projects}) => {\n              let project: Project | AvatarProject | undefined;\n              if (typeof data.project === 'number') {\n                project = projects.find(p => p.id === data.project.toString());\n              } else {\n                project = projects.find(p => p.slug === data.project);\n              }\n              return (\n                <ProjectBadge\n                  project={project ? project : {slug: data.project}}\n                  avatarSize={16}\n                />\n              );\n            }}\n          </Projects>\n        </Container>\n      );\n    },\n  },\n  user: {\n    sortField: 'user',\n    renderFunc: data => {\n      if (data.user) {\n        const [key, value] = data.user.split(':');\n        const userObj = {\n          id: '',\n          name: '',\n          email: '',\n          username: '',\n          ip_address: '',\n        };\n        userObj[key] = value;\n\n        const badge = <UserBadge user={userObj} hideEmail avatarSize={16} />;\n        return <Container>{badge}</Container>;\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  'user.display': {\n    sortField: 'user.display',\n    renderFunc: data => {\n      if (data['user.display']) {\n        const userObj = {\n          id: '',\n          name: data['user.display'],\n          email: '',\n          username: '',\n          ip_address: '',\n        };\n\n        const badge = <UserBadge user={userObj} hideEmail avatarSize={16} />;\n        return <Container>{badge}</Container>;\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  'count_unique(user)': {\n    sortField: 'count_unique(user)',\n    renderFunc: data => {\n      const count = data.count_unique_user ?? data['count_unique(user)'];\n      if (typeof count === 'number') {\n        return (\n          <FlexContainer>\n            <NumberContainer>\n              <Count value={count} />\n            </NumberContainer>\n            <UserIcon size=\"20\" />\n          </FlexContainer>\n        );\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  release: {\n    sortField: 'release',\n    renderFunc: data =>\n      data.release ? (\n        <VersionContainer>\n          <Version version={data.release} anchor={false} tooltipRawVersion truncate />\n        </VersionContainer>\n      ) : (\n        <Container>{emptyValue}</Container>\n      ),\n  },\n  'error.handled': {\n    sortField: 'error.handled',\n    renderFunc: data => {\n      const values = data['error.handled'];\n      // Transactions will have null, and default events have no handled attributes.\n      if (values === null || values?.length === 0) {\n        return <Container>{emptyValue}</Container>;\n      }\n      const value = Array.isArray(values) ? values : [values];\n      return (\n        <Container>\n          {value.every(v => [1, null].includes(v)) ? 'true' : 'false'}\n        </Container>\n      );\n    },\n  },\n  team_key_transaction: {\n    sortField: null,\n    renderFunc: (data, {organization}) => (\n      <Container>\n        <TeamKeyTransactionField\n          isKeyTransaction={(data.team_key_transaction ?? 0) !== 0}\n          organization={organization}\n          projectSlug={data.project}\n          transactionName={data.transaction}\n        />\n      </Container>\n    ),\n  },\n  'trend_percentage()': {\n    sortField: 'trend_percentage()',\n    renderFunc: data => (\n      <NumberContainer>\n        {typeof data.trend_percentage === 'number'\n          ? formatPercentage(data.trend_percentage - 1)\n          : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  'timestamp.to_hour': {\n    sortField: 'timestamp.to_hour',\n    renderFunc: data => (\n      <Container>\n        {getDynamicText({\n          value: <FieldDateTime date={data['timestamp.to_hour']} format=\"lll z\" />,\n          fixed: 'timestamp.to_hour',\n        })}\n      </Container>\n    ),\n  },\n  'timestamp.to_day': {\n    sortField: 'timestamp.to_day',\n    renderFunc: data => (\n      <Container>\n        {getDynamicText({\n          value: <FieldDateTime date={data['timestamp.to_day']} dateOnly utc />,\n          fixed: 'timestamp.to_day',\n        })}\n      </Container>\n    ),\n  },\n};\n\ntype SpecialFunctionFieldRenderer = (\n  fieldName: string\n) => (data: EventData, baggage: RenderFunctionBaggage) => React.ReactNode;\n\ntype SpecialFunctions = {\n  user_misery: SpecialFunctionFieldRenderer;\n};\n\n/**\n * \"Special functions\" are functions whose values either do not map 1:1 to a single column,\n * or they require custom UI formatting that can't be handled by the datatype formatters.\n */\nconst SPECIAL_FUNCTIONS: SpecialFunctions = {\n  user_misery: fieldName => data => {\n    const userMiseryField = fieldName;\n\n    if (!(userMiseryField in data)) {\n      return <NumberContainer>{emptyValue}</NumberContainer>;\n    }\n\n    const userMisery = data[userMiseryField];\n    if (userMisery === null || isNaN(userMisery)) {\n      return <NumberContainer>{emptyValue}</NumberContainer>;\n    }\n\n    const projectThresholdConfig = 'project_threshold_config';\n    let countMiserableUserField: string = '';\n\n    let miseryLimit: number | undefined = parseInt(\n      userMiseryField.split('_').pop() || '',\n      10\n    );\n    if (isNaN(miseryLimit)) {\n      countMiserableUserField = 'count_miserable_user';\n      if (projectThresholdConfig in data) {\n        miseryLimit = data[projectThresholdConfig][1];\n      } else {\n        miseryLimit = undefined;\n      }\n    } else {\n      countMiserableUserField = `count_miserable_user_${miseryLimit}`;\n    }\n\n    const uniqueUsers = data.count_unique_user;\n\n    let miserableUsers: number | undefined;\n\n    if (countMiserableUserField in data) {\n      const countMiserableMiseryLimit = parseInt(\n        countMiserableUserField.split('_').pop() || '',\n        10\n      );\n      miserableUsers =\n        countMiserableMiseryLimit === miseryLimit ||\n        (isNaN(countMiserableMiseryLimit) && projectThresholdConfig)\n          ? data[countMiserableUserField]\n          : undefined;\n    }\n\n    return (\n      <BarContainer>\n        <UserMisery\n          bars={10}\n          barHeight={20}\n          miseryLimit={miseryLimit}\n          totalUsers={uniqueUsers}\n          userMisery={userMisery}\n          miserableUsers={miserableUsers}\n        />\n      </BarContainer>\n    );\n  },\n};\n\n/**\n * Get the sort field name for a given field if it is special or fallback\n * to the generic type formatter.\n */\nexport function getSortField(\n  field: string,\n  tableMeta: MetaType | undefined\n): string | null {\n  if (SPECIAL_FIELDS.hasOwnProperty(field)) {\n    return SPECIAL_FIELDS[field as keyof typeof SPECIAL_FIELDS].sortField;\n  }\n\n  if (!tableMeta) {\n    return field;\n  }\n\n  if (isEquation(field)) {\n    return field;\n  }\n\n  for (const alias in AGGREGATIONS) {\n    if (field.startsWith(alias)) {\n      return AGGREGATIONS[alias].isSortable ? field : null;\n    }\n  }\n\n  const fieldType = tableMeta[field];\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return FIELD_FORMATTERS[fieldType as keyof typeof FIELD_FORMATTERS].isSortable\n      ? field\n      : null;\n  }\n\n  return null;\n}\n\nconst isDurationValue = (data: EventData, field: string): boolean => {\n  return field in data && typeof data[field] === 'number';\n};\n\nconst spanOperationRelativeBreakdownRenderer = (\n  data: EventData,\n  {location, organization, eventView}: RenderFunctionBaggage\n): React.ReactNode => {\n  const sumOfSpanTime = SPAN_OP_BREAKDOWN_FIELDS.reduce(\n    (prev, curr) => (isDurationValue(data, curr) ? prev + data[curr] : prev),\n    0\n  );\n  const cumulativeSpanOpBreakdown = Math.max(sumOfSpanTime, data['transaction.duration']);\n\n  if (\n    SPAN_OP_BREAKDOWN_FIELDS.every(field => !isDurationValue(data, field)) ||\n    cumulativeSpanOpBreakdown === 0\n  ) {\n    return FIELD_FORMATTERS.duration.renderFunc(SPAN_OP_RELATIVE_BREAKDOWN_FIELD, data);\n  }\n\n  let otherPercentage = 1;\n  let orderedSpanOpsBreakdownFields;\n  const sortingOnField = eventView?.sorts?.[0]?.field;\n  if (sortingOnField && SPAN_OP_BREAKDOWN_FIELDS.includes(sortingOnField)) {\n    orderedSpanOpsBreakdownFields = [\n      sortingOnField,\n      ...SPAN_OP_BREAKDOWN_FIELDS.filter(op => op !== sortingOnField),\n    ];\n  } else {\n    orderedSpanOpsBreakdownFields = SPAN_OP_BREAKDOWN_FIELDS;\n  }\n  return (\n    <RelativeOpsBreakdown>\n      {orderedSpanOpsBreakdownFields.map(field => {\n        if (!isDurationValue(data, field)) {\n          return null;\n        }\n\n        const operationName = getSpanOperationName(field) ?? 'op';\n        const spanOpDuration: number = data[field];\n        const widthPercentage = spanOpDuration / cumulativeSpanOpBreakdown;\n        otherPercentage = otherPercentage - widthPercentage;\n        if (widthPercentage === 0) {\n          return null;\n        }\n        return (\n          <div key={operationName} style={{width: toPercent(widthPercentage || 0)}}>\n            <Tooltip\n              title={\n                <div>\n                  <div>{operationName}</div>\n                  <div>\n                    <Duration\n                      seconds={spanOpDuration / 1000}\n                      fixedDigits={2}\n                      abbreviation\n                    />\n                  </div>\n                </div>\n              }\n              containerDisplayMode=\"block\"\n            >\n              <RectangleRelativeOpsBreakdown\n                spanBarHatch={false}\n                style={{\n                  backgroundColor: pickBarColor(operationName),\n                  cursor: 'pointer',\n                }}\n                onClick={event => {\n                  event.stopPropagation();\n                  const filter = stringToFilter(operationName);\n                  if (filter === SpanOperationBreakdownFilter.None) {\n                    return;\n                  }\n                  trackAnalyticsEvent({\n                    eventName: 'Performance Views: Select Relative Breakdown',\n                    eventKey: 'performance_views.relative_breakdown.selection',\n                    organization_id: parseInt(organization.id, 10),\n                    action: filter as string,\n                  });\n                  browserHistory.push({\n                    pathname: location.pathname,\n                    query: {\n                      ...location.query,\n                      ...filterToLocationQuery(filter),\n                    },\n                  });\n                }}\n              />\n            </Tooltip>\n          </div>\n        );\n      })}\n      <div key=\"other\" style={{width: toPercent(otherPercentage || 0)}}>\n        <Tooltip title={<div>{t('Other')}</div>} containerDisplayMode=\"block\">\n          <OtherRelativeOpsBreakdown spanBarHatch={false} />\n        </Tooltip>\n      </div>\n    </RelativeOpsBreakdown>\n  );\n};\n\nconst RelativeOpsBreakdown = styled('div')`\n  position: relative;\n  display: flex;\n`;\n\nconst RectangleRelativeOpsBreakdown = styled(RowRectangle)`\n  position: relative;\n  width: 100%;\n`;\n\nconst OtherRelativeOpsBreakdown = styled(RectangleRelativeOpsBreakdown)`\n  background-color: ${p => p.theme.gray100};\n`;\n\n/**\n * Get the field renderer for the named field and metadata\n *\n * @param {String} field name\n * @param {object} metadata mapping.\n * @param {boolean} isAlias convert the name with getAggregateAlias\n * @returns {Function}\n */\nexport function getFieldRenderer(\n  field: string,\n  meta: MetaType,\n  isAlias: boolean = true\n): FieldFormatterRenderFunctionPartial {\n  if (SPECIAL_FIELDS.hasOwnProperty(field)) {\n    return SPECIAL_FIELDS[field].renderFunc;\n  }\n\n  if (isRelativeSpanOperationBreakdownField(field)) {\n    return spanOperationRelativeBreakdownRenderer;\n  }\n\n  const fieldName = isAlias ? getAggregateAlias(field) : field;\n  const fieldType = meta[fieldName];\n\n  for (const alias in SPECIAL_FUNCTIONS) {\n    if (fieldName.startsWith(alias)) {\n      return SPECIAL_FUNCTIONS[alias](fieldName);\n    }\n  }\n\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return partial(FIELD_FORMATTERS[fieldType].renderFunc, fieldName);\n  }\n  return partial(FIELD_FORMATTERS.string.renderFunc, fieldName);\n}\n\ntype FieldTypeFormatterRenderFunctionPartial = (data: EventData) => React.ReactNode;\n\n/**\n * Get the field renderer for the named field only based on its type from the given\n * metadata.\n *\n * @param {String} field name\n * @param {object} metadata mapping.\n * @param {boolean} isAlias convert the name with getAggregateAlias\n * @returns {Function}\n */\nexport function getFieldFormatter(\n  field: string,\n  meta: MetaType,\n  isAlias: boolean = true\n): FieldTypeFormatterRenderFunctionPartial {\n  const fieldName = isAlias ? getAggregateAlias(field) : field;\n  const fieldType = meta[fieldName];\n\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return partial(FIELD_FORMATTERS[fieldType].renderFunc, fieldName);\n  }\n  return partial(FIELD_FORMATTERS.string.renderFunc, fieldName);\n}\n","import isEqual from 'lodash/isEqual';\n\nimport {RELEASE_ADOPTION_STAGES} from 'sentry/constants';\nimport {t} from 'sentry/locale';\nimport {MetricsType, Organization, SelectValue} from 'sentry/types';\nimport {assert} from 'sentry/types/utils';\nimport {\n  SESSIONS_FIELDS,\n  SESSIONS_OPERATIONS,\n} from 'sentry/views/dashboardsV2/widgetBuilder/releaseWidget/fields';\n\nexport type Sort = {\n  field: string;\n  kind: 'asc' | 'desc';\n};\n\n// Contains the URL field value & the related table column width.\n// Can be parsed into a Column using explodeField()\nexport type Field = {\n  field: string;\n  // When an alias is defined for a field, it will be shown as a column name in the table visualization.\n  alias?: string;\n  width?: number;\n};\n\nexport type ColumnType =\n  | 'boolean'\n  | 'date'\n  | 'duration'\n  | 'integer'\n  | 'number'\n  | 'percentage'\n  | 'string';\n\nexport type ColumnValueType = ColumnType | 'never'; // Matches to nothing\n\nexport type ParsedFunction = {\n  arguments: string[];\n  name: string;\n};\n\ntype ValidateColumnValueFunction = ({name: string, dataType: ColumnType}) => boolean;\n\nexport type ValidateColumnTypes =\n  | ColumnType[]\n  | MetricsType[]\n  | ValidateColumnValueFunction;\n\nexport type AggregateParameter =\n  | {\n      columnTypes: Readonly<ValidateColumnTypes>;\n      kind: 'column';\n      required: boolean;\n      defaultValue?: string;\n    }\n  | {\n      dataType: ColumnType;\n      kind: 'value';\n      required: boolean;\n      defaultValue?: string;\n      placeholder?: string;\n    }\n  | {\n      dataType: string;\n      kind: 'dropdown';\n      options: SelectValue<string>[];\n      required: boolean;\n      defaultValue?: string;\n      placeholder?: string;\n    };\n\nexport type AggregationRefinement = string | undefined;\n\n// The parsed result of a Field.\n// Functions and Fields are handled as subtypes to enable other\n// code to work more simply.\n// This type can be converted into a Field.field using generateFieldAsString()\n// When an alias is defined for a field, it will be shown as a column name in the table visualization.\nexport type QueryFieldValue =\n  | {\n      field: string;\n      kind: 'field';\n      alias?: string;\n    }\n  | {\n      field: string;\n      kind: 'calculatedField';\n      alias?: string;\n    }\n  | {\n      field: string;\n      kind: 'equation';\n      alias?: string;\n    }\n  | {\n      function: [AggregationKey, string, AggregationRefinement, AggregationRefinement];\n      kind: 'function';\n      alias?: string;\n    };\n\n// Column is just an alias of a Query value\nexport type Column = QueryFieldValue;\n\nexport type Alignments = 'left' | 'right';\n\nconst CONDITIONS_ARGUMENTS: SelectValue<string>[] = [\n  {\n    label: 'is equal to',\n    value: 'equals',\n  },\n  {\n    label: 'is not equal to',\n    value: 'notEquals',\n  },\n  {\n    label: 'is less than',\n    value: 'less',\n  },\n  {\n    label: 'is greater than',\n    value: 'greater',\n  },\n  {\n    label: 'is less than or equal to',\n    value: 'lessOrEquals',\n  },\n  {\n    label: 'is greater than or equal to',\n    value: 'greaterOrEquals',\n  },\n];\n\n// Refer to src/sentry/search/events/fields.py\n// Try to keep functions logically sorted, ie. all the count functions are grouped together\nexport const AGGREGATIONS = {\n  count: {\n    parameters: [],\n    documentation: t('number of events'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  count_unique: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string', 'integer', 'number', 'duration', 'date', 'boolean'],\n        defaultValue: 'user',\n        required: true,\n      },\n    ],\n    documentation: t('unique number of events'),\n    outputType: 'integer',\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  count_miserable: {\n    getFieldOverrides({parameter}: DefaultValueInputs) {\n      if (parameter.kind === 'column') {\n        return {defaultValue: 'user'};\n      }\n      return {\n        defaultValue: parameter.defaultValue,\n      };\n    },\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateAllowedColumns(['user']),\n        defaultValue: 'user',\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    documentation: t('miserable number of events'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  count_if: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateDenyListColumns(\n          ['string', 'duration'],\n          ['id', 'issue', 'user.display']\n        ),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n      {\n        kind: 'dropdown',\n        options: CONDITIONS_ARGUMENTS,\n        dataType: 'string',\n        defaultValue: CONDITIONS_ARGUMENTS[0].value,\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'string',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    documentation: t('conditional number of events'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  eps: {\n    parameters: [],\n    documentation: t('events per second'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  epm: {\n    parameters: [],\n    documentation: t('events per minute'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  failure_count: {\n    parameters: [],\n    documentation: t('number of failed events'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  min: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate([\n          'integer',\n          'number',\n          'duration',\n          'date',\n          'percentage',\n        ]),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    documentation: t('minimum'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  max: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate([\n          'integer',\n          'number',\n          'duration',\n          'date',\n          'percentage',\n        ]),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    documentation: t('maximum'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  sum: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        required: true,\n        defaultValue: 'transaction.duration',\n      },\n    ],\n    documentation: t('total value'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  any: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string', 'integer', 'number', 'duration', 'date', 'boolean'],\n        required: true,\n        defaultValue: 'transaction.duration',\n      },\n    ],\n    documentation: t('pick any value'),\n    outputType: null,\n    isSortable: true,\n  },\n  p50: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    documentation: t('median'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  p75: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    documentation: t('75th percentile'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  p95: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    documentation: t('95th percentile'),\n    outputType: null,\n    type: [],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  p99: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    documentation: t('99th percentile'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  p100: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    documentation: t('maximum'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  percentile: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '0.5',\n        required: true,\n      },\n    ],\n    documentation: t('arbitrary percentile'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  avg: {\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    documentation: t('average'),\n    outputType: null,\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  apdex: {\n    parameters: [\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    documentation: t('performance score, higher is better'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  user_misery: {\n    parameters: [\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    documentation: t('ratio of miserable users'),\n    outputType: 'number',\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  failure_rate: {\n    parameters: [],\n    documentation: t('failure_count()/count()'),\n    outputType: 'percentage',\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  last_seen: {\n    parameters: [],\n    documentation: t('largest timestamp'),\n    outputType: 'date',\n    isSortable: true,\n  },\n} as const;\n\n// TPM and TPS are aliases that are only used in Performance\nexport const ALIASES = {\n  tpm: 'epm',\n  tps: 'eps',\n};\n\nassert(AGGREGATIONS as Readonly<{[key in keyof typeof AGGREGATIONS]: Aggregation}>);\n\nexport type AggregationKey = keyof typeof AGGREGATIONS | keyof typeof ALIASES | '';\n\nexport type AggregationOutputType = Extract<\n  ColumnType,\n  'number' | 'integer' | 'date' | 'duration' | 'percentage' | 'string'\n>;\n\nexport type PlotType = 'bar' | 'line' | 'area';\n\ntype DefaultValueInputs = {\n  parameter: AggregateParameter;\n};\n\nexport type Aggregation = {\n  /**\n   * Can this function be used in a sort result\n   */\n  isSortable: boolean;\n  /**\n   * The output type. Null means to inherit from the field.\n   */\n  outputType: AggregationOutputType | null;\n  /**\n   * List of parameters for the function.\n   */\n  parameters: Readonly<AggregateParameter[]>;\n  getFieldOverrides?: (\n    data: DefaultValueInputs\n  ) => Partial<Omit<AggregateParameter, 'kind'>>;\n  /**\n   * How this function should be plotted when shown in a multiseries result (top5)\n   * Optional because some functions cannot be plotted (strings/dates)\n   */\n  multiPlotType?: PlotType;\n};\n\nenum FieldKey {\n  CULPRIT = 'culprit',\n  DEVICE_ARCH = 'device.arch',\n  DEVICE_BATTERY_LEVEL = 'device.battery_level',\n  DEVICE_BRAND = 'device.brand',\n  DEVICE_CHARGING = 'device.charging',\n  DEVICE_FAMILY = 'device.family',\n  DEVICE_LOCALE = 'device.locale',\n  DEVICE_NAME = 'device.name',\n  DEVICE_ONLINE = 'device.online',\n  DEVICE_ORIENTATION = 'device.orientation',\n  DEVICE_SIMULATOR = 'device.simulator',\n  DEVICE_UUID = 'device.uuid',\n  DIST = 'dist',\n  ENVIRONMENT = 'environment',\n  ERROR_HANDLED = 'error.handled',\n  ERROR_UNHANDLED = 'error.unhandled',\n  ERROR_MECHANISM = 'error.mechanism',\n  ERROR_TYPE = 'error.type',\n  ERROR_VALUE = 'error.value',\n  EVENT_TYPE = 'event.type',\n  GEO_CITY = 'geo.city',\n  GEO_COUNTRY_CODE = 'geo.country_code',\n  GEO_REGION = 'geo.region',\n  HTTP_METHOD = 'http.method',\n  HTTP_REFERER = 'http.referer',\n  HTTP_URL = 'http.url',\n  ID = 'id',\n  ISSUE = 'issue',\n  LEVEL = 'level',\n  LOCATION = 'location',\n  MESSAGE = 'message',\n  OS_BUILD = 'os.build',\n  OS_KERNEL_VERSION = 'os.kernel_version',\n  PLATFORM_NAME = 'platform.name',\n  PROJECT = 'project',\n  RELEASE = 'release',\n  SDK_NAME = 'sdk.name',\n  SDK_VERSION = 'sdk.version',\n  STACK_ABS_PATH = 'stack.abs_path',\n  STACK_COLNO = 'stack.colno',\n  STACK_FILENAME = 'stack.filename',\n  STACK_FUNCTION = 'stack.function',\n  STACK_IN_APP = 'stack.in_app',\n  STACK_LINENO = 'stack.lineno',\n  STACK_MODULE = 'stack.module',\n  STACK_PACKAGE = 'stack.package',\n  STACK_STACK_LEVEL = 'stack.stack_level',\n  TIMESTAMP = 'timestamp',\n  TIMESTAMP_TO_HOUR = 'timestamp.to_hour',\n  TIMESTAMP_TO_DAY = 'timestamp.to_day',\n  TITLE = 'title',\n  TRACE = 'trace',\n  TRACE_PARENT_SPAN = 'trace.parent_span',\n  TRACE_SPAN = 'trace.span',\n  TRANSACTION = 'transaction',\n  TRANSACTION_DURATION = 'transaction.duration',\n  TRANSACTION_OP = 'transaction.op',\n  TRANSACTION_STATUS = 'transaction.status',\n  USER = 'user',\n  USER_EMAIL = 'user.email',\n  USER_ID = 'user.id',\n  USER_IP = 'user.ip',\n  USER_USERNAME = 'user.username',\n  USER_DISPLAY = 'user.display',\n}\n\n/**\n * Refer to src/sentry/snuba/events.py, search for Columns\n */\nexport const FIELDS: Readonly<Record<FieldKey, ColumnType>> = {\n  [FieldKey.ID]: 'string',\n  // issue.id and project.id are omitted on purpose.\n  // Customers should use `issue` and `project` instead.\n  [FieldKey.TIMESTAMP]: 'date',\n  // time is omitted on purpose.\n  // Customers should use `timestamp` or `timestamp.to_hour`.\n  [FieldKey.TIMESTAMP_TO_HOUR]: 'date',\n  [FieldKey.TIMESTAMP_TO_DAY]: 'date',\n\n  [FieldKey.CULPRIT]: 'string',\n  [FieldKey.LOCATION]: 'string',\n  [FieldKey.MESSAGE]: 'string',\n  [FieldKey.PLATFORM_NAME]: 'string',\n  [FieldKey.ENVIRONMENT]: 'string',\n  [FieldKey.RELEASE]: 'string',\n  [FieldKey.DIST]: 'string',\n  [FieldKey.TITLE]: 'string',\n  [FieldKey.EVENT_TYPE]: 'string',\n  // tags.key and tags.value are omitted on purpose as well.\n\n  [FieldKey.TRANSACTION]: 'string',\n  [FieldKey.USER]: 'string',\n  [FieldKey.USER_ID]: 'string',\n  [FieldKey.USER_EMAIL]: 'string',\n  [FieldKey.USER_USERNAME]: 'string',\n  [FieldKey.USER_IP]: 'string',\n  [FieldKey.SDK_NAME]: 'string',\n  [FieldKey.SDK_VERSION]: 'string',\n  [FieldKey.HTTP_METHOD]: 'string',\n  [FieldKey.HTTP_REFERER]: 'string',\n  [FieldKey.HTTP_URL]: 'string',\n  [FieldKey.OS_BUILD]: 'string',\n  [FieldKey.OS_KERNEL_VERSION]: 'string',\n  [FieldKey.DEVICE_NAME]: 'string',\n  [FieldKey.DEVICE_BRAND]: 'string',\n  [FieldKey.DEVICE_LOCALE]: 'string',\n  [FieldKey.DEVICE_UUID]: 'string',\n  [FieldKey.DEVICE_ARCH]: 'string',\n  [FieldKey.DEVICE_FAMILY]: 'string',\n  [FieldKey.DEVICE_BATTERY_LEVEL]: 'number',\n  [FieldKey.DEVICE_ORIENTATION]: 'string',\n  [FieldKey.DEVICE_SIMULATOR]: 'boolean',\n  [FieldKey.DEVICE_ONLINE]: 'boolean',\n  [FieldKey.DEVICE_CHARGING]: 'boolean',\n  [FieldKey.GEO_COUNTRY_CODE]: 'string',\n  [FieldKey.GEO_REGION]: 'string',\n  [FieldKey.GEO_CITY]: 'string',\n  [FieldKey.ERROR_TYPE]: 'string',\n  [FieldKey.ERROR_VALUE]: 'string',\n  [FieldKey.ERROR_MECHANISM]: 'string',\n  [FieldKey.ERROR_HANDLED]: 'boolean',\n  [FieldKey.ERROR_UNHANDLED]: 'boolean',\n  [FieldKey.LEVEL]: 'string',\n  [FieldKey.STACK_ABS_PATH]: 'string',\n  [FieldKey.STACK_FILENAME]: 'string',\n  [FieldKey.STACK_PACKAGE]: 'string',\n  [FieldKey.STACK_MODULE]: 'string',\n  [FieldKey.STACK_FUNCTION]: 'string',\n  [FieldKey.STACK_IN_APP]: 'boolean',\n  [FieldKey.STACK_COLNO]: 'number',\n  [FieldKey.STACK_LINENO]: 'number',\n  [FieldKey.STACK_STACK_LEVEL]: 'number',\n  // contexts.key and contexts.value omitted on purpose.\n\n  // Transaction event fields.\n  [FieldKey.TRANSACTION_DURATION]: 'duration',\n  [FieldKey.TRANSACTION_OP]: 'string',\n  [FieldKey.TRANSACTION_STATUS]: 'string',\n\n  [FieldKey.TRACE]: 'string',\n  [FieldKey.TRACE_SPAN]: 'string',\n  [FieldKey.TRACE_PARENT_SPAN]: 'string',\n\n  // Field alises defined in src/sentry/api/event_search.py\n  [FieldKey.PROJECT]: 'string',\n  [FieldKey.ISSUE]: 'string',\n  [FieldKey.USER_DISPLAY]: 'string',\n};\n\nexport const DEPRECATED_FIELDS: string[] = [FieldKey.CULPRIT];\n\nexport type FieldTag = {\n  key: FieldKey;\n  name: FieldKey;\n};\n\nexport const FIELD_TAGS = Object.freeze(\n  Object.fromEntries(Object.keys(FIELDS).map(item => [item, {key: item, name: item}]))\n);\n\nexport const SEMVER_TAGS = {\n  'release.version': {\n    key: 'release.version',\n    name: 'release.version',\n  },\n  'release.build': {\n    key: 'release.build',\n    name: 'release.build',\n  },\n  'release.package': {\n    key: 'release.package',\n    name: 'release.package',\n  },\n  'release.stage': {\n    key: 'release.stage',\n    name: 'release.stage',\n    predefined: true,\n    values: RELEASE_ADOPTION_STAGES,\n  },\n};\n\n/**\n * Some tag keys should never be formatted as `tag[...]`\n * when used as a filter because they are predefined.\n */\nconst EXCLUDED_TAG_KEYS = new Set(['release']);\n\nexport function formatTagKey(key: string): string {\n  // Some tags may be normalized from context, but not all of them are.\n  // This supports a user making a custom tag with the same name as one\n  // that comes from context as all of these are also tags.\n  if (key in FIELD_TAGS && !EXCLUDED_TAG_KEYS.has(key)) {\n    return `tags[${key}]`;\n  }\n  return key;\n}\n\n// Allows for a less strict field key definition in cases we are returning custom strings as fields\nexport type LooseFieldKey = FieldKey | string | '';\n\nexport enum WebVital {\n  FP = 'measurements.fp',\n  FCP = 'measurements.fcp',\n  LCP = 'measurements.lcp',\n  FID = 'measurements.fid',\n  CLS = 'measurements.cls',\n  TTFB = 'measurements.ttfb',\n  RequestTime = 'measurements.ttfb.requesttime',\n}\n\nexport enum MobileVital {\n  AppStartCold = 'measurements.app_start_cold',\n  AppStartWarm = 'measurements.app_start_warm',\n  FramesTotal = 'measurements.frames_total',\n  FramesSlow = 'measurements.frames_slow',\n  FramesFrozen = 'measurements.frames_frozen',\n  FramesSlowRate = 'measurements.frames_slow_rate',\n  FramesFrozenRate = 'measurements.frames_frozen_rate',\n  StallCount = 'measurements.stall_count',\n  StallTotalTime = 'measurements.stall_total_time',\n  StallLongestTime = 'measurements.stall_longest_time',\n  StallPercentage = 'measurements.stall_percentage',\n}\n\nexport type MeasurementType = 'duration' | 'number' | 'integer' | 'percentage';\n\nconst MEASUREMENTS: Readonly<Record<WebVital | MobileVital, MeasurementType>> = {\n  [WebVital.FP]: 'duration',\n  [WebVital.FCP]: 'duration',\n  [WebVital.LCP]: 'duration',\n  [WebVital.FID]: 'duration',\n  [WebVital.CLS]: 'number',\n  [WebVital.TTFB]: 'duration',\n  [WebVital.RequestTime]: 'duration',\n  [MobileVital.AppStartCold]: 'duration',\n  [MobileVital.AppStartWarm]: 'duration',\n  [MobileVital.FramesTotal]: 'integer',\n  [MobileVital.FramesSlow]: 'integer',\n  [MobileVital.FramesFrozen]: 'integer',\n  [MobileVital.FramesSlowRate]: 'percentage',\n  [MobileVital.FramesFrozenRate]: 'percentage',\n  [MobileVital.StallCount]: 'integer',\n  [MobileVital.StallTotalTime]: 'duration',\n  [MobileVital.StallLongestTime]: 'duration',\n  [MobileVital.StallPercentage]: 'percentage',\n};\n\nexport function isSpanOperationBreakdownField(field: string) {\n  return field.startsWith('spans.');\n}\n\nexport const SPAN_OP_RELATIVE_BREAKDOWN_FIELD = 'span_ops_breakdown.relative';\n\nexport function isRelativeSpanOperationBreakdownField(field: string) {\n  return field === SPAN_OP_RELATIVE_BREAKDOWN_FIELD;\n}\n\nexport const SPAN_OP_BREAKDOWN_FIELDS = [\n  'spans.http',\n  'spans.db',\n  'spans.browser',\n  'spans.resource',\n];\n\n// This list contains fields/functions that are available with performance-view feature.\nexport const TRACING_FIELDS = [\n  'avg',\n  'sum',\n  'transaction.duration',\n  'transaction.op',\n  'transaction.status',\n  'p50',\n  'p75',\n  'p95',\n  'p99',\n  'p100',\n  'percentile',\n  'failure_rate',\n  'apdex',\n  'count_miserable',\n  'user_misery',\n  'eps',\n  'epm',\n  'team_key_transaction',\n  ...Object.keys(MEASUREMENTS),\n  ...SPAN_OP_BREAKDOWN_FIELDS,\n  SPAN_OP_RELATIVE_BREAKDOWN_FIELD,\n];\n\nexport const MEASUREMENT_PATTERN = /^measurements\\.([a-zA-Z0-9-_.]+)$/;\nexport const SPAN_OP_BREAKDOWN_PATTERN = /^spans\\.([a-zA-Z0-9-_.]+)$/;\n\nexport function isMeasurement(field: string): boolean {\n  const results = field.match(MEASUREMENT_PATTERN);\n  return !!results;\n}\n\nexport function measurementType(field: string): MeasurementType {\n  if (MEASUREMENTS.hasOwnProperty(field)) {\n    return MEASUREMENTS[field];\n  }\n  return 'number';\n}\n\nexport function getMeasurementSlug(field: string): string | null {\n  const results = field.match(MEASUREMENT_PATTERN);\n  if (results && results.length >= 2) {\n    return results[1];\n  }\n  return null;\n}\n\nconst AGGREGATE_PATTERN = /^(\\w+)\\((.*)?\\)$/;\n// Identical to AGGREGATE_PATTERN, but without the $ for newline, or ^ for start of line\nconst AGGREGATE_BASE = /(\\w+)\\((.*)?\\)/g;\n\nexport function getAggregateArg(field: string): string | null {\n  // only returns the first argument if field is an aggregate\n  const result = parseFunction(field);\n\n  if (result && result.arguments.length > 0) {\n    return result.arguments[0];\n  }\n\n  return null;\n}\n\nexport function parseFunction(field: string): ParsedFunction | null {\n  const results = field.match(AGGREGATE_PATTERN);\n  if (results && results.length === 3) {\n    return {\n      name: results[1],\n      arguments: parseArguments(results[1], results[2]),\n    };\n  }\n\n  return null;\n}\n\nexport function parseArguments(functionText: string, columnText: string): string[] {\n  // Some functions take a quoted string for their arguments that may contain commas\n  // This function attempts to be identical with the similarly named parse_arguments\n  // found in src/sentry/search/events/fields.py\n  if (\n    (functionText !== 'to_other' &&\n      functionText !== 'count_if' &&\n      functionText !== 'spans_histogram') ||\n    columnText.length === 0\n  ) {\n    return columnText ? columnText.split(',').map(result => result.trim()) : [];\n  }\n\n  const args: string[] = [];\n\n  let quoted = false;\n  let escaped = false;\n\n  let i: number = 0;\n  let j: number = 0;\n\n  while (j < columnText.length) {\n    if (i === j && columnText[j] === '\"') {\n      // when we see a quote at the beginning of\n      // an argument, then this is a quoted string\n      quoted = true;\n    } else if (i === j && columnText[j] === ' ') {\n      // argument has leading spaces, skip over them\n      i += 1;\n    } else if (quoted && !escaped && columnText[j] === '\\\\') {\n      // when we see a slash inside a quoted string,\n      // the next character is an escape character\n      escaped = true;\n    } else if (quoted && !escaped && columnText[j] === '\"') {\n      // when we see a non-escaped quote while inside\n      // of a quoted string, we should end it\n      quoted = false;\n    } else if (quoted && escaped) {\n      // when we are inside a quoted string and have\n      // begun an escape character, we should end it\n      escaped = false;\n    } else if (quoted && columnText[j] === ',') {\n      // when we are inside a quoted string and see\n      // a comma, it should not be considered an\n      // argument separator\n    } else if (columnText[j] === ',') {\n      // when we see a comma outside of a quoted string\n      // it is an argument separator\n      args.push(columnText.substring(i, j).trim());\n      i = j + 1;\n    }\n    j += 1;\n  }\n\n  if (i !== j) {\n    // add in the last argument if any\n    args.push(columnText.substring(i).trim());\n  }\n\n  return args;\n}\n\n// `|` is an invalid field character, so it is used to determine whether a field is an equation or not\nexport const EQUATION_PREFIX = 'equation|';\nconst EQUATION_ALIAS_PATTERN = /^equation\\[(\\d+)\\]$/;\nexport const CALCULATED_FIELD_PREFIX = 'calculated|';\n\nexport function isEquation(field: string): boolean {\n  return field.startsWith(EQUATION_PREFIX);\n}\n\nexport function isEquationAlias(field: string): boolean {\n  return EQUATION_ALIAS_PATTERN.test(field);\n}\n\nexport function maybeEquationAlias(field: string): boolean {\n  return field.includes(EQUATION_PREFIX);\n}\n\nexport function stripEquationPrefix(field: string): string {\n  return field.replace(EQUATION_PREFIX, '');\n}\n\nexport function getEquationAliasIndex(field: string): number {\n  const results = field.match(EQUATION_ALIAS_PATTERN);\n\n  if (results && results.length === 2) {\n    return parseInt(results[1], 10);\n  }\n  return -1;\n}\n\nexport function getEquation(field: string): string {\n  return field.slice(EQUATION_PREFIX.length);\n}\n\nexport function isAggregateEquation(field: string): boolean {\n  const results = field.match(AGGREGATE_BASE);\n\n  return isEquation(field) && results !== null && results.length > 0;\n}\n\nexport function isLegalEquationColumn(column: Column): boolean {\n  // Any isn't allowed in arithmetic\n  if (column.kind === 'function' && column.function[0] === 'any') {\n    return false;\n  }\n\n  const columnType = getColumnType(column);\n  return columnType === 'number' || columnType === 'integer' || columnType === 'duration';\n}\n\nexport function generateAggregateFields(\n  organization: Organization,\n  eventFields: readonly Field[] | Field[],\n  excludeFields: readonly string[] = []\n): Field[] {\n  const functions = Object.keys(AGGREGATIONS);\n  const fields = Object.values(eventFields).map(field => field.field);\n  functions.forEach(func => {\n    const parameters = AGGREGATIONS[func].parameters.map(param => {\n      const overrides = AGGREGATIONS[func].getFieldOverrides;\n      if (typeof overrides === 'undefined') {\n        return param;\n      }\n      return {\n        ...param,\n        ...overrides({parameter: param, organization}),\n      };\n    });\n\n    if (parameters.every(param => typeof param.defaultValue !== 'undefined')) {\n      const newField = `${func}(${parameters\n        .map(param => param.defaultValue)\n        .join(',')})`;\n      if (fields.indexOf(newField) === -1 && excludeFields.indexOf(newField) === -1) {\n        fields.push(newField);\n      }\n    }\n  });\n  return fields.map(field => ({field})) as Field[];\n}\n\nexport function isDerivedMetric(field: string): boolean {\n  return field.startsWith(CALCULATED_FIELD_PREFIX);\n}\n\nexport function stripDerivedMetricsPrefix(field: string): string {\n  return field.replace(CALCULATED_FIELD_PREFIX, '');\n}\n\nexport function explodeFieldString(field: string, alias?: string): Column {\n  if (isEquation(field)) {\n    return {kind: 'equation', field: getEquation(field), alias};\n  }\n\n  if (isDerivedMetric(field)) {\n    return {kind: 'calculatedField', field: stripDerivedMetricsPrefix(field), alias};\n  }\n\n  const results = parseFunction(field);\n\n  if (results) {\n    return {\n      kind: 'function',\n      function: [\n        results.name as AggregationKey,\n        results.arguments[0] ?? '',\n        results.arguments[1] as AggregationRefinement,\n        results.arguments[2] as AggregationRefinement,\n      ],\n      alias,\n    };\n  }\n\n  return {kind: 'field', field, alias};\n}\n\nexport function generateFieldAsString(value: QueryFieldValue): string {\n  if (value.kind === 'field') {\n    return value.field;\n  }\n\n  if (value.kind === 'calculatedField') {\n    return `${CALCULATED_FIELD_PREFIX}${value.field}`;\n  }\n\n  if (value.kind === 'equation') {\n    return `${EQUATION_PREFIX}${value.field}`;\n  }\n\n  const aggregation = value.function[0];\n  const parameters = value.function.slice(1).filter(i => i);\n  return `${aggregation}(${parameters.join(',')})`;\n}\n\nexport function explodeField(field: Field): Column {\n  return explodeFieldString(field.field, field.alias);\n}\n\n/**\n * Get the alias that the API results will have for a given aggregate function name\n */\nexport function getAggregateAlias(field: string): string {\n  const result = parseFunction(field);\n\n  if (!result) {\n    return field;\n  }\n\n  let alias = result.name;\n\n  if (result.arguments.length > 0) {\n    alias += '_' + result.arguments.join('_');\n  }\n\n  return alias.replace(/[^\\w]/g, '_').replace(/^_+/g, '').replace(/_+$/, '');\n}\n\n/**\n * Check if a field name looks like an aggregate function or known aggregate alias.\n */\nexport function isAggregateField(field: string): boolean {\n  return parseFunction(field) !== null;\n}\n\nexport function isAggregateFieldOrEquation(field: string): boolean {\n  return isAggregateField(field) || isAggregateEquation(field) || isNumericMetrics(field);\n}\n\n/**\n * Temporary hardcoded hack to enable testing derived metrics.\n * Can be removed after we get rid of getAggregateFields\n */\nexport function isNumericMetrics(field: string): boolean {\n  return [\n    'session.crash_free_rate',\n    'session.crashed',\n    'session.errored_preaggregated',\n    'session.errored_set',\n    'session.init',\n  ].includes(field);\n}\n\nexport const FIELDS_DOCS: Readonly<Record<string, string>> = {\n  has: t('check field exists'),\n  'release.version': t('semantic version'),\n  'release.stage': t('adoption stage'),\n  'release.package': t('semantic package'),\n  'release.build': t('semantic build number'),\n  [FieldKey.CULPRIT]: t('deprecated'),\n  [FieldKey.DEVICE_ARCH]: t('cpu architecture'),\n  [FieldKey.DEVICE_FAMILY]: t('common part of name'),\n  [FieldKey.DEVICE_BATTERY_LEVEL]: t('0-100 of level'),\n  [FieldKey.DEVICE_BRAND]: t('brand of device'),\n  [FieldKey.DEVICE_CHARGING]: t('True or False'),\n  [FieldKey.DEVICE_LOCALE]: t('deprecated'),\n  [FieldKey.DEVICE_NAME]: t('details of device'),\n  [FieldKey.DEVICE_ONLINE]: t('True or False'),\n  [FieldKey.DEVICE_ORIENTATION]: t('portrait or landscape'),\n  [FieldKey.DEVICE_SIMULATOR]: t('True or False'),\n  [FieldKey.DEVICE_UUID]: t('uuid'),\n  [FieldKey.DIST]: t('build or variant'),\n  [FieldKey.ENVIRONMENT]: t('deployment name'),\n  [FieldKey.ERROR_HANDLED]: t('True or False'),\n  [FieldKey.ERROR_MECHANISM]: t('created error'),\n  [FieldKey.ERROR_TYPE]: t('exception type'),\n  [FieldKey.ERROR_UNHANDLED]: t('True or False'),\n  [FieldKey.ERROR_VALUE]: t('error value'),\n  [FieldKey.EVENT_TYPE]: t('type of event'),\n  [FieldKey.GEO_CITY]: t('full name'),\n  [FieldKey.GEO_COUNTRY_CODE]: t('ISO 3166-1'),\n  [FieldKey.GEO_REGION]: t('full name'),\n  [FieldKey.HTTP_METHOD]: t('method of request'),\n  [FieldKey.HTTP_REFERER]: t('referer of request'),\n  [FieldKey.HTTP_URL]: t('url of request'),\n  [FieldKey.ID]: t('event identifier'),\n  [FieldKey.ISSUE]: t('issue short id'),\n  [FieldKey.LEVEL]: t('string'),\n  [FieldKey.LOCATION]: t('where error happened'),\n  [FieldKey.MESSAGE]: t('title or name'),\n  [FieldKey.OS_BUILD]: t('internal build revision'),\n  [FieldKey.OS_KERNEL_VERSION]: t('kernel string'),\n  [FieldKey.PLATFORM_NAME]: t('name of platform'),\n  [FieldKey.PROJECT]: t('project name'),\n  [FieldKey.RELEASE]: t('code version'),\n  [FieldKey.SDK_NAME]: t('sentry sdk name'),\n  [FieldKey.SDK_VERSION]: t('sentry sdk version'),\n  [FieldKey.STACK_ABS_PATH]: t('absolute path'),\n  [FieldKey.STACK_COLNO]: t('column number'),\n  [FieldKey.STACK_FILENAME]: t('source file'),\n  [FieldKey.STACK_FUNCTION]: t('function called'),\n  [FieldKey.STACK_IN_APP]: t('True or False'),\n  [FieldKey.STACK_LINENO]: t('line number'),\n  [FieldKey.STACK_MODULE]: t('platform specific'),\n  [FieldKey.STACK_PACKAGE]: t('package of frame'),\n  [FieldKey.STACK_STACK_LEVEL]: t('number'),\n  [FieldKey.TIMESTAMP]: t('time event occurred'),\n  [FieldKey.TIMESTAMP_TO_DAY]: t('rounded timestamp'),\n  [FieldKey.TIMESTAMP_TO_HOUR]: t('rounded timestamp'),\n  [FieldKey.TITLE]: t('title or name'),\n  [FieldKey.TRACE]: t('uuid'),\n  [FieldKey.TRACE_PARENT_SPAN]: t('span for parent trace'),\n  [FieldKey.TRACE_SPAN]: t('span for trace'),\n  [FieldKey.TRANSACTION]: t('transaction name'),\n  [FieldKey.TRANSACTION_DURATION]: t('duration'),\n  [FieldKey.TRANSACTION_OP]: t('short code'),\n  [FieldKey.TRANSACTION_STATUS]: t('final status'),\n  [FieldKey.USER]: t('unparsed user field'),\n  [FieldKey.USER_DISPLAY]: t('email>username>id>ip'),\n  [FieldKey.USER_EMAIL]: t('email'),\n  [FieldKey.USER_ID]: t('identifier'),\n  [FieldKey.USER_IP]: t('ip address'),\n  [FieldKey.USER_USERNAME]: t('username'),\n  [MobileVital.AppStartCold]: t('first launch duration'),\n  [MobileVital.AppStartWarm]: t('subsequent launch duration'),\n  [MobileVital.FramesFrozenRate]: t('frames_frozen/frames_total'),\n  [MobileVital.FramesFrozen]: t('framse slower than 700ms'),\n  [MobileVital.FramesSlowRate]: t('frames_slow/frames_total'),\n  [MobileVital.FramesSlow]: t('frames slower than 16ms'),\n  [MobileVital.FramesTotal]: t('number of frames'),\n  [MobileVital.StallCount]: t('stalled event loops'),\n  [MobileVital.StallLongestTime]: t('largest stalled event loop'),\n  [MobileVital.StallPercentage]: t('stall_total_time/duration'),\n  [MobileVital.StallTotalTime]: t('duration of stall'),\n  [WebVital.CLS]: t('cumulative layout shift'),\n  [WebVital.FCP]: t('first contentful paint'),\n  [WebVital.FID]: t('first input delay'),\n  [WebVital.FP]: t('first paint'),\n  [WebVital.LCP]: t('largest contentful paint'),\n  [WebVital.RequestTime]: t('time until response start'),\n  [WebVital.TTFB]: t('time to first byte'),\n};\nexport function getFieldDoc(field: string): React.ReactNode {\n  if (FIELDS_DOCS.hasOwnProperty(field)) {\n    return FIELDS_DOCS[field];\n  }\n  const parsed = parseFunction(field);\n  if (parsed && AGGREGATIONS.hasOwnProperty(parsed.name)) {\n    return AGGREGATIONS[parsed.name].documentation;\n  }\n  return '';\n}\n\nexport function getAggregateFields(fields: string[]): string[] {\n  return fields.filter(\n    field =>\n      isAggregateField(field) || isAggregateEquation(field) || isNumericMetrics(field)\n  );\n}\n\nexport function getColumnsAndAggregates(fields: string[]): {\n  aggregates: string[];\n  columns: string[];\n} {\n  const aggregates = getAggregateFields(fields);\n  const columns = fields.filter(field => !!!aggregates.includes(field));\n  return {columns, aggregates};\n}\n\nexport function getColumnsAndAggregatesAsStrings(fields: QueryFieldValue[]): {\n  aggregates: string[];\n  columns: string[];\n  fieldAliases: string[];\n} {\n  // TODO(dam): distinguish between metrics, derived metrics and tags\n  const aggregateFields: string[] = [];\n  const nonAggregateFields: string[] = [];\n  const fieldAliases: string[] = [];\n\n  for (const field of fields) {\n    const fieldString = generateFieldAsString(field);\n    if (field.kind === 'function' || field.kind === 'calculatedField') {\n      aggregateFields.push(fieldString);\n    } else if (field.kind === 'equation') {\n      if (isAggregateEquation(fieldString)) {\n        aggregateFields.push(fieldString);\n      } else {\n        nonAggregateFields.push(fieldString);\n      }\n    } else {\n      nonAggregateFields.push(fieldString);\n    }\n\n    fieldAliases.push(field.alias ?? '');\n  }\n\n  return {aggregates: aggregateFields, columns: nonAggregateFields, fieldAliases};\n}\n\n/**\n * Convert a function string into type it will output.\n * This is useful when you need to format values in tooltips,\n * or in series markers.\n */\nexport function aggregateOutputType(field: string): AggregationOutputType {\n  const result = parseFunction(field);\n  if (!result) {\n    return 'number';\n  }\n  const outputType = aggregateFunctionOutputType(result.name, result.arguments[0]);\n  if (outputType === null) {\n    return 'number';\n  }\n  return outputType;\n}\n\n/**\n * Converts a function string and its first argument into its output type.\n * - If the function has a fixed output type, that will be the result.\n * - If the function does not define an output type, the output type will be equal to\n *   the type of its first argument.\n * - If the function has an optional first argument, and it was not defined, make sure\n *   to use the default argument as the first argument.\n * - If the type could not be determined, return null.\n */\nexport function aggregateFunctionOutputType(\n  funcName: string,\n  firstArg: string | undefined\n): AggregationOutputType | null {\n  const aggregate =\n    AGGREGATIONS[ALIASES[funcName] || funcName] ?? SESSIONS_OPERATIONS[funcName];\n\n  // Attempt to use the function's outputType.\n  if (aggregate?.outputType) {\n    return aggregate.outputType;\n  }\n\n  // If the first argument is undefined and it is not required,\n  // then we attempt to get the default value.\n  if (!firstArg && aggregate?.parameters?.[0]) {\n    if (aggregate.parameters[0].required === false) {\n      firstArg = aggregate.parameters[0].defaultValue;\n    }\n  }\n\n  if (firstArg && SESSIONS_FIELDS.hasOwnProperty(firstArg)) {\n    return SESSIONS_FIELDS[firstArg].type as AggregationOutputType;\n  }\n\n  // If the function is an inherit type it will have a field as\n  // the first parameter and we can use that to get the type.\n  if (firstArg && FIELDS.hasOwnProperty(firstArg)) {\n    return FIELDS[firstArg];\n  }\n\n  if (firstArg && isMeasurement(firstArg)) {\n    return measurementType(firstArg);\n  }\n\n  if (firstArg && isSpanOperationBreakdownField(firstArg)) {\n    return 'duration';\n  }\n\n  return null;\n}\n\n/**\n * Get the multi-series chart type for an aggregate function.\n */\nexport function aggregateMultiPlotType(field: string): PlotType {\n  if (isEquation(field)) {\n    return 'line';\n  }\n  const result = parseFunction(field);\n  // Handle invalid data.\n  if (!result) {\n    return 'area';\n  }\n  if (!AGGREGATIONS.hasOwnProperty(result.name)) {\n    return 'area';\n  }\n  return AGGREGATIONS[result.name].multiPlotType;\n}\n\nfunction validateForNumericAggregate(\n  validColumnTypes: ColumnType[]\n): ValidateColumnValueFunction {\n  return function ({name, dataType}: {dataType: ColumnType; name: string}): boolean {\n    // these built-in columns cannot be applied to numeric aggregates such as percentile(...)\n    if (\n      [\n        FieldKey.DEVICE_BATTERY_LEVEL,\n        FieldKey.STACK_COLNO,\n        FieldKey.STACK_LINENO,\n        FieldKey.STACK_STACK_LEVEL,\n      ].includes(name as FieldKey)\n    ) {\n      return false;\n    }\n\n    return validColumnTypes.includes(dataType);\n  };\n}\n\nfunction validateDenyListColumns(\n  validColumnTypes: ColumnType[],\n  deniedColumns: string[]\n): ValidateColumnValueFunction {\n  return function ({name, dataType}: {dataType: ColumnType; name: string}): boolean {\n    return validColumnTypes.includes(dataType) && !deniedColumns.includes(name);\n  };\n}\n\nfunction validateAllowedColumns(validColumns: string[]): ValidateColumnValueFunction {\n  return function ({name}): boolean {\n    return validColumns.includes(name);\n  };\n}\n\nconst alignedTypes: ColumnValueType[] = ['number', 'duration', 'integer', 'percentage'];\n\nexport function fieldAlignment(\n  columnName: string,\n  columnType?: undefined | ColumnValueType,\n  metadata?: Record<string, ColumnValueType>\n): Alignments {\n  let align: Alignments = 'left';\n  if (columnType) {\n    align = alignedTypes.includes(columnType) ? 'right' : 'left';\n  }\n  if (columnType === undefined || columnType === 'never') {\n    // fallback to align the column based on the table metadata\n    const maybeType = metadata ? metadata[getAggregateAlias(columnName)] : undefined;\n\n    if (maybeType !== undefined && alignedTypes.includes(maybeType)) {\n      align = 'right';\n    }\n  }\n  return align;\n}\n\n/**\n * Match on types that are legal to show on a timeseries chart.\n */\nexport function isLegalYAxisType(match: ColumnType | MetricsType) {\n  return ['number', 'integer', 'duration', 'percentage'].includes(match);\n}\n\nexport function getSpanOperationName(field: string): string | null {\n  const results = field.match(SPAN_OP_BREAKDOWN_PATTERN);\n  if (results && results.length >= 2) {\n    return results[1];\n  }\n  return null;\n}\n\nexport function getColumnType(column: Column): ColumnType {\n  if (column.kind === 'function') {\n    const outputType = aggregateFunctionOutputType(\n      column.function[0],\n      column.function[1]\n    );\n    if (outputType !== null) {\n      return outputType;\n    }\n  } else if (column.kind === 'field') {\n    if (FIELDS.hasOwnProperty(column.field)) {\n      return FIELDS[column.field];\n    }\n    if (isMeasurement(column.field)) {\n      return measurementType(column.field);\n    }\n    if (isSpanOperationBreakdownField(column.field)) {\n      return 'duration';\n    }\n  }\n  return 'string';\n}\n\nexport function hasDuplicate(columnList: Column[], column: Column): boolean {\n  if (column.kind !== 'function' && column.kind !== 'field') {\n    return false;\n  }\n  return columnList.filter(newColumn => isEqual(newColumn, column)).length > 1;\n}\n","import styled from '@emotion/styled';\n\nimport DateTime from 'sentry/components/dateTime';\nimport Link from 'sentry/components/links/link';\nimport ShortId from 'sentry/components/shortId';\nimport {IconUser} from 'sentry/icons/iconUser';\nimport space from 'sentry/styles/space';\n\n// Styled components used to render discover result sets.\n\nexport const Container = styled('div')`\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const VersionContainer = styled('div')`\n  display: flex;\n`;\n\nexport const NumberContainer = styled('div')`\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const FieldDateTime = styled(DateTime)`\n  color: ${p => p.theme.gray300};\n  font-variant-numeric: tabular-nums;\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const OverflowLink = styled(Link)`\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const FieldShortId = styled(ShortId)`\n  justify-content: flex-start;\n  display: block;\n`;\n\nexport const BarContainer = styled('div')`\n  max-width: 80px;\n  margin-left: auto;\n`;\n\nexport const FlexContainer = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  width: 100%;\n`;\n\nexport const UserIcon = styled(IconUser)`\n  margin-left: ${space(1)};\n  color: ${p => p.theme.gray400};\n`;\n\nexport const ActorContainer = styled('div')`\n  display: flex;\n  justify-content: center;\n  :hover {\n    cursor: default;\n  }\n`;\n","import {URL_PARAM} from 'sentry/constants/pageFilters';\n\nexport const MAX_TEAM_KEY_TRANSACTIONS = 100;\n\nexport const PERFORMANCE_URL_PARAM = ['team', ...Object.values(URL_PARAM)];\n","import {escapeDoubleQuotes} from 'sentry/utils';\n\nexport enum TokenType {\n  OPERATOR,\n  FILTER,\n  FREE_TEXT,\n}\n\nexport type Token = {\n  type: TokenType;\n  value: string;\n  key?: string;\n};\n\nfunction isOp(t: Token) {\n  return t.type === TokenType.OPERATOR;\n}\n\nfunction isBooleanOp(value: string) {\n  return ['OR', 'AND'].includes(value.toUpperCase());\n}\n\nfunction isParen(token: Token, character: '(' | ')') {\n  return (\n    token !== undefined &&\n    isOp(token) &&\n    ['(', ')'].includes(token.value) &&\n    token.value === character\n  );\n}\n\n// TODO(epurkhiser): This is legacy from before the existence of\n// searchSyntax/parser. We should absolutely replace the internals of this API\n// with `parseSearch`.\n\nexport class MutableSearch {\n  tokens: Token[];\n\n  /**\n   * Creates a MutableSearch from a string query\n   */\n  constructor(query: string);\n  /**\n   * Creates a mutable search query from a list of query parts\n   */\n  constructor(queries: string[]);\n  constructor(tokensOrQuery: string[] | string) {\n    const strTokens = Array.isArray(tokensOrQuery)\n      ? tokensOrQuery\n      : splitSearchIntoTokens(tokensOrQuery);\n\n    this.tokens = [];\n\n    for (let token of strTokens) {\n      let tokenState = TokenType.FREE_TEXT;\n\n      if (isBooleanOp(token)) {\n        this.addOp(token.toUpperCase());\n        continue;\n      }\n\n      if (token.startsWith('(')) {\n        const parenMatch = token.match(/^\\(+/g);\n        if (parenMatch) {\n          parenMatch[0].split('').map(paren => this.addOp(paren));\n          token = token.replace(/^\\(+/g, '');\n        }\n      }\n\n      // Traverse the token and check if it's a filter condition or free text\n      for (let i = 0, len = token.length; i < len; i++) {\n        const char = token[i];\n\n        if (i === 0 && (char === '\"' || char === ':')) {\n          break;\n        }\n\n        // We may have entered a filter condition\n        if (char === ':') {\n          const nextChar = token[i + 1] || '';\n          if ([':', ' '].includes(nextChar)) {\n            tokenState = TokenType.FREE_TEXT;\n          } else {\n            tokenState = TokenType.FILTER;\n          }\n          break;\n        }\n      }\n\n      let trailingParen = '';\n      if (token.endsWith(')') && !token.includes('(')) {\n        const parenMatch = token.match(/\\)+$/g);\n        if (parenMatch) {\n          trailingParen = parenMatch[0];\n          token = token.replace(/\\)+$/g, '');\n        }\n      }\n\n      if (tokenState === TokenType.FREE_TEXT && token.length) {\n        this.addFreeText(token);\n      } else if (tokenState === TokenType.FILTER) {\n        this.addStringFilter(token, false);\n      }\n\n      if (trailingParen !== '') {\n        trailingParen.split('').map(paren => this.addOp(paren));\n      }\n    }\n  }\n\n  formatString() {\n    const formattedTokens: string[] = [];\n    for (const token of this.tokens) {\n      switch (token.type) {\n        case TokenType.FILTER:\n          if (token.value === '' || token.value === null) {\n            formattedTokens.push(`${token.key}:\"\"`);\n          } else if (/[\\s\\(\\)\\\\\"]/g.test(token.value)) {\n            formattedTokens.push(`${token.key}:\"${escapeDoubleQuotes(token.value)}\"`);\n          } else {\n            formattedTokens.push(`${token.key}:${token.value}`);\n          }\n          break;\n        case TokenType.FREE_TEXT:\n          if (/[\\s\\(\\)\\\\\"]/g.test(token.value)) {\n            formattedTokens.push(`\"${escapeDoubleQuotes(token.value)}\"`);\n          } else {\n            formattedTokens.push(token.value);\n          }\n          break;\n        default:\n          formattedTokens.push(token.value);\n      }\n    }\n    return formattedTokens.join(' ').trim();\n  }\n\n  addStringFilter(filter: string, shouldEscape = true) {\n    const [key, value] = parseFilter(filter);\n    this.addFilterValues(key, [value], shouldEscape);\n    return this;\n  }\n\n  addFilterValues(key: string, values: string[], shouldEscape = true) {\n    for (const value of values) {\n      // Filter values that we insert through the UI can contain special characters\n      // that need to escaped. User entered filters should not be escaped.\n      const escaped = shouldEscape ? escapeFilterValue(value) : value;\n      const token: Token = {type: TokenType.FILTER, key, value: escaped};\n      this.tokens.push(token);\n    }\n    return this;\n  }\n\n  setFilterValues(key: string, values: string[], shouldEscape = true) {\n    this.removeFilter(key);\n    this.addFilterValues(key, values, shouldEscape);\n    return this;\n  }\n\n  get filters() {\n    type Filters = Record<string, string[]>;\n\n    const reducer = (acc: Filters, token: Token) => ({\n      ...acc,\n      [token.key!]: [...(acc[token.key!] ?? []), token.value],\n    });\n\n    return this.tokens\n      .filter(t => t.type === TokenType.FILTER)\n      .reduce<Filters>(reducer, {});\n  }\n\n  getFilterValues(key: string) {\n    return this.filters[key] ?? [];\n  }\n\n  getFilterKeys() {\n    return Object.keys(this.filters);\n  }\n\n  hasFilter(key: string): boolean {\n    return this.getFilterValues(key).length > 0;\n  }\n\n  removeFilter(key: string) {\n    this.tokens = this.tokens.filter(token => token.key !== key);\n\n    // Now the really complicated part: removing parens that only have one element in them.\n    // Since parens are themselves tokens, this gets tricky. In summary, loop through the\n    // tokens until we find the innermost open paren. Then forward search through the rest of the tokens\n    // to see if that open paren corresponds to a closed paren with one or fewer items inside.\n    // If it does, delete those parens, and loop again until there are no more parens to delete.\n    let parensToDelete: number[] = [];\n    const cleanParens = (_, idx: number) => !parensToDelete.includes(idx);\n    do {\n      if (parensToDelete.length) {\n        this.tokens = this.tokens.filter(cleanParens);\n      }\n      parensToDelete = [];\n\n      for (let i = 0; i < this.tokens.length; i++) {\n        const token = this.tokens[i];\n        if (!isOp(token) || token.value !== '(') {\n          continue;\n        }\n\n        let alreadySeen = false;\n        for (let j = i + 1; j < this.tokens.length; j++) {\n          const nextToken = this.tokens[j];\n          if (isOp(nextToken) && nextToken.value === '(') {\n            // Continue down to the nested parens. We can skip i forward since we know\n            // everything between i and j is NOT an open paren.\n            i = j - 1;\n            break;\n          } else if (!isOp(nextToken)) {\n            if (alreadySeen) {\n              // This has more than one term, no need to delete\n              break;\n            }\n            alreadySeen = true;\n          } else if (isOp(nextToken) && nextToken.value === ')') {\n            // We found another paren with zero or one terms inside. Delete the pair.\n            parensToDelete = [i, j];\n            break;\n          }\n        }\n\n        if (parensToDelete.length > 0) {\n          break;\n        }\n      }\n    } while (parensToDelete.length > 0);\n\n    // Now that all erroneous parens are removed we need to remove dangling OR/AND operators.\n    // I originally removed all the dangling properties in a single loop, but that meant that\n    // cases like `a OR OR b` would remove both operators, when only one should be removed. So\n    // instead, we loop until we find an operator to remove, then go back to the start and loop\n    // again.\n    let toRemove = -1;\n    do {\n      if (toRemove >= 0) {\n        this.tokens.splice(toRemove, 1);\n        toRemove = -1;\n      }\n\n      for (let i = 0; i < this.tokens.length; i++) {\n        const token = this.tokens[i];\n        const prev = this.tokens[i - 1];\n        const next = this.tokens[i + 1];\n        if (isOp(token) && isBooleanOp(token.value)) {\n          if (prev === undefined || isOp(prev) || next === undefined || isOp(next)) {\n            // Want to avoid removing `(term) OR (term)`\n            if (isParen(prev, ')') && isParen(next, '(')) {\n              continue;\n            }\n            toRemove = i;\n            break;\n          }\n        }\n      }\n    } while (toRemove >= 0);\n\n    return this;\n  }\n\n  removeFilterValue(key: string, value: string) {\n    const values = this.getFilterValues(key);\n    if (Array.isArray(values) && values.length) {\n      this.setFilterValues(\n        key,\n        values.filter(item => item !== value)\n      );\n    }\n  }\n\n  addFreeText(value: string) {\n    const token: Token = {type: TokenType.FREE_TEXT, value: formatQuery(value)};\n    this.tokens.push(token);\n    return this;\n  }\n\n  addOp(value: string) {\n    const token: Token = {type: TokenType.OPERATOR, value};\n    this.tokens.push(token);\n    return this;\n  }\n\n  get freeText(): string[] {\n    return this.tokens.filter(t => t.type === TokenType.FREE_TEXT).map(t => t.value);\n  }\n\n  set freeText(values: string[]) {\n    this.tokens = this.tokens.filter(t => t.type !== TokenType.FREE_TEXT);\n    for (const v of values) {\n      this.addFreeText(v);\n    }\n  }\n\n  copy() {\n    const q = new MutableSearch([]);\n    q.tokens = [...this.tokens];\n    return q;\n  }\n\n  isEmpty() {\n    return this.tokens.length === 0;\n  }\n}\n\n/**\n * Splits search strings into tokens for parsing by tokenizeSearch.\n *\n * Should stay in sync with src.sentry.search.utils:split_query_into_tokens\n */\nfunction splitSearchIntoTokens(query: string) {\n  const queryChars = Array.from(query);\n  const tokens: string[] = [];\n\n  let token = '';\n  let endOfPrevWord = '';\n  let quoteType = '';\n  let quoteEnclosed = false;\n\n  for (let idx = 0; idx < queryChars.length; idx++) {\n    const char = queryChars[idx];\n    const nextChar = queryChars.length - 1 > idx ? queryChars[idx + 1] : null;\n    token += char;\n\n    if (nextChar !== null && !isSpace(char) && isSpace(nextChar)) {\n      endOfPrevWord = char;\n    }\n\n    if (isSpace(char) && !quoteEnclosed && endOfPrevWord !== ':' && !isSpace(token)) {\n      tokens.push(token.trim());\n      token = '';\n    }\n\n    if ([\"'\", '\"'].includes(char) && (!quoteEnclosed || quoteType === char)) {\n      quoteEnclosed = !quoteEnclosed;\n      if (quoteEnclosed) {\n        quoteType = char;\n      }\n    }\n\n    if (quoteEnclosed && char === '\\\\' && nextChar === quoteType) {\n      token += nextChar;\n      idx++;\n    }\n  }\n\n  const trimmedToken = token.trim();\n  if (trimmedToken !== '') {\n    tokens.push(trimmedToken);\n  }\n\n  return tokens;\n}\n\n/**\n * Checks if the string is only spaces\n */\nfunction isSpace(s: string) {\n  return s.trim() === '';\n}\n\n/**\n * Splits a filter on ':' and removes enclosing quotes if present, and returns\n * both sides of the split as strings.\n */\nfunction parseFilter(filter: string) {\n  const idx = filter.indexOf(':');\n  const key = removeSurroundingQuotes(filter.slice(0, idx));\n  const value = removeSurroundingQuotes(filter.slice(idx + 1));\n\n  return [key, value];\n}\n\nfunction removeSurroundingQuotes(text: string) {\n  const length = text.length;\n  if (length <= 1) {\n    return text;\n  }\n\n  let left = 0;\n  for (; left <= length / 2; left++) {\n    if (text.charAt(left) !== '\"') {\n      break;\n    }\n  }\n\n  let right = length - 1;\n  for (; right >= length / 2; right--) {\n    if (text.charAt(right) !== '\"' || text.charAt(right - 1) === '\\\\') {\n      break;\n    }\n  }\n\n  return text.slice(left, right + 1);\n}\n\n/**\n * Strips enclosing quotes and parens from a query, if present.\n */\nfunction formatQuery(query: string) {\n  return query.replace(/^[\"\\(]+|[\"\\)]+$/g, '');\n}\n\n/**\n * Some characters have special meaning in a filter value. So when they are\n * directly added as a value, we have to escape them to mean the literal.\n */\nexport function escapeFilterValue(value: string) {\n  // TODO(txiao): The types here are definitely wrong.\n  // Need to dig deeper to see where exactly it's wrong.\n  //\n  // astericks (*) is used for wildcard searches\n  return typeof value === 'string' ? value.replace(/([\\*])/g, '\\\\$1') : value;\n}\n","import PageFiltersStore from 'sentry/stores/pageFiltersStore';\nimport {useLegacyStore} from 'sentry/stores/useLegacyStore';\n\n/**\n * Custom hook that returns the state of page filters\n */\nfunction usePageFilters() {\n  return useLegacyStore(PageFiltersStore);\n}\n\nexport default usePageFilters;\n","import {PageFilters} from 'sentry/types';\nimport getDisplayName from 'sentry/utils/getDisplayName';\n\nimport usePageFilters from './usePageFilters';\n\ntype InjectedPageFiltersProps = {\n  isGlobalSelectionReady?: boolean;\n  selection?: PageFilters;\n};\n\n/**\n * Higher order component that uses PageFiltersStore and provides the active\n * project\n */\nfunction withPageFilters<P extends InjectedPageFiltersProps>(\n  WrappedComponent: React.ComponentType<P>\n) {\n  type Props = Omit<P, keyof InjectedPageFiltersProps> & InjectedPageFiltersProps;\n\n  const WithPageFilters: React.FC<Props> = props => {\n    const {selection, isReady: isGlobalSelectionReady} = usePageFilters();\n\n    const selectionProps = {\n      selection,\n      isGlobalSelectionReady,\n    };\n\n    return <WrappedComponent {...selectionProps} {...(props as P)} />;\n  };\n\n  const displayName = getDisplayName(WrappedComponent);\n  WithPageFilters.displayName = `withPageFilters(${displayName})`;\n\n  return WithPageFilters;\n}\n\nexport default withPageFilters;\n","import {MetricsOperation, MetricsType} from 'sentry/types';\n\nimport {ColumnType} from '../discover/fields';\n\nexport enum SessionMetric {\n  SESSION = 'sentry.sessions.session',\n  SESSION_DURATION = 'sentry.sessions.session.duration',\n  SESSION_ERROR = 'sentry.sessions.session.error',\n  SESSION_CRASH_FREE_RATE = 'session.crash_free_rate',\n  USER_CRASH_FREE_RATE = 'session.crash_free_user_rate',\n  SESSION_CRASH_RATE = 'session.crash_rate',\n  USER_CRASH_RATE = 'session.crash_user_rate',\n  USER = 'sentry.sessions.user',\n  SESSION_HEALTHY = 'session.healthy',\n  USER_HEALTHY = 'session.healthy_user',\n  SESSION_ABNORMAL = 'session.abnormal',\n  USER_ABNORMAL = 'session.abnormal_user',\n  SESSION_CRASHED = 'session.crashed',\n  USER_CRASHED = 'session.crashed_user',\n  SESSION_ERRORED = 'session.errored',\n  USER_ERRORED = 'session.errored_user',\n}\n\nexport enum TransactionMetric {\n  MEASUREMENTS_FP = 'sentry.transactions.measurements.fp',\n  MEASUREMENTS_FCP = 'sentry.transactions.measurements.fcp',\n  MEASUREMENTS_LCP = 'sentry.transactions.measurements.lcp',\n  MEASUREMENTS_FID = 'sentry.transactions.measurements.fid',\n  MEASUREMENTS_CLS = 'sentry.transactions.measurements.cls',\n  MEASUREMENTS_TTFB = 'sentry.transactions.measurements.ttfb',\n  MEASUREMENTS_TTFB_REQUESTTIME = 'sentry.transactions.measurements.ttfb.requesttime',\n  MEASUREMENTS_APP_START_COLD = 'sentry.transactions.measurements.app_start_cold',\n  MEASUREMENTS_APP_START_WARM = 'sentry.transactions.measurements.app_start_warm',\n  MEASUREMENTS_FRAMES_TOTAL = 'sentry.transactions.measurements.frames_total',\n  MEASUREMENTS_FRAMES_SLOW = 'sentry.transactions.measurements.frames_slow',\n  MEASUREMENTS_FRAMES_FROZEN = 'sentry.transactions.measurements.frames_frozen',\n  MEASUREMENTS_FRAMES_SLOW_RATE = 'sentry.transactions.measurements.frames_slow_rate',\n  MEASUREMENTS_FRAMES_FROZEN_RATE = 'sentry.transactions.measurements.frames_frozen_rate',\n  MEASUREMENTS_STALL_COUNT = 'sentry.transactions.measurements.stall_count',\n  MEASUREMENTS_STALL_TOTAL_TIME = 'sentry.transactions.measurements.stall_total_time',\n  MEASUREMENTS_STALL_LONGEST_TIME = 'sentry.transactions.measurements.stall_longest_time',\n  MEASUREMENTS_STALL_PERCENTAGE = 'sentry.transactions.measurements.stall_percentage',\n  TRANSACTION_DURATION = 'sentry.transactions.transaction.duration',\n  USER = 'sentry.transactions.user',\n  TRANSACTION = 'transaction',\n}\n\nexport const METRIC_TO_COLUMN_TYPE: Readonly<\n  Record<SessionMetric | TransactionMetric, ColumnType>\n> = {\n  // Session metrics\n  [SessionMetric.USER]: 'integer',\n  [SessionMetric.SESSION_ERROR]: 'integer',\n  [SessionMetric.SESSION_DURATION]: 'duration',\n  [SessionMetric.SESSION]: 'integer',\n  [SessionMetric.SESSION_CRASH_FREE_RATE]: 'percentage',\n  [SessionMetric.USER_CRASH_FREE_RATE]: 'percentage',\n  [SessionMetric.SESSION_CRASH_RATE]: 'percentage',\n  [SessionMetric.USER_CRASH_RATE]: 'percentage',\n  [SessionMetric.SESSION_HEALTHY]: 'integer',\n  [SessionMetric.USER_HEALTHY]: 'integer',\n  [SessionMetric.SESSION_ABNORMAL]: 'integer',\n  [SessionMetric.USER_ABNORMAL]: 'integer',\n  [SessionMetric.SESSION_CRASHED]: 'integer',\n  [SessionMetric.USER_CRASHED]: 'integer',\n  [SessionMetric.SESSION_ERRORED]: 'integer',\n  [SessionMetric.USER_ERRORED]: 'integer',\n\n  // Transaction metrics\n  [TransactionMetric.USER]: 'integer',\n  [TransactionMetric.TRANSACTION]: 'string',\n  [TransactionMetric.TRANSACTION_DURATION]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FCP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_LCP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FID]: 'duration',\n  [TransactionMetric.MEASUREMENTS_CLS]: 'number',\n  [TransactionMetric.MEASUREMENTS_TTFB]: 'duration',\n  [TransactionMetric.MEASUREMENTS_TTFB_REQUESTTIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_APP_START_COLD]: 'duration',\n  [TransactionMetric.MEASUREMENTS_APP_START_WARM]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FRAMES_TOTAL]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_SLOW]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_FROZEN]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_SLOW_RATE]: 'percentage',\n  [TransactionMetric.MEASUREMENTS_FRAMES_FROZEN_RATE]: 'percentage',\n  [TransactionMetric.MEASUREMENTS_STALL_COUNT]: 'integer',\n  [TransactionMetric.MEASUREMENTS_STALL_TOTAL_TIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_STALL_LONGEST_TIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_STALL_PERCENTAGE]: 'percentage',\n};\n\nexport const METRICS_OPERATIONS: Readonly<\n  Record<\n    MetricsOperation,\n    {defaultValue: SessionMetric | TransactionMetric; metricsTypes: MetricsType[]}\n  >\n> = {\n  sum: {\n    metricsTypes: ['counter'],\n    defaultValue: SessionMetric.SESSION,\n  },\n  count_unique: {\n    metricsTypes: ['set'],\n    defaultValue: SessionMetric.USER,\n  },\n  avg: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  count: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  max: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p50: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p75: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p95: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p99: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n};\n","import invert from 'lodash/invert';\n\nimport {\n  SelectValue,\n  SessionAggregationColumn,\n  SessionField,\n  SessionsMeta,\n  SessionsOperation,\n  SessionStatus,\n} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport {SessionMetric} from 'sentry/utils/metrics/fields';\nimport {FieldValue, FieldValueKind} from 'sentry/views/eventsV2/table/types';\n\nexport const DERIVED_STATUS_METRICS_PATTERN =\n  /count_(abnormal|errored|crashed|healthy)\\((user|session)\\)/;\n\nexport enum DerivedStatusFields {\n  HEALTHY_SESSIONS = 'count_healthy(session)',\n  HEALTHY_USERS = 'count_healthy(user)',\n  ABNORMAL_SESSIONS = 'count_abnormal(session)',\n  ABNORMAL_USERS = 'count_abnormal(user)',\n  CRASHED_SESSIONS = 'count_crashed(session)',\n  CRASHED_USERS = 'count_crashed(user)',\n  ERRORED_SESSIONS = 'count_errored(session)',\n  ERRORED_USERS = 'count_errored(user)',\n}\n\nexport const FIELD_TO_METRICS_EXPRESSION = {\n  'count_healthy(session)': SessionMetric.SESSION_HEALTHY,\n  'count_healthy(user)': SessionMetric.USER_HEALTHY,\n  'count_abnormal(session)': SessionMetric.SESSION_ABNORMAL,\n  'count_abnormal(user)': SessionMetric.USER_ABNORMAL,\n  'count_crashed(session)': SessionMetric.SESSION_CRASHED,\n  'count_crashed(user)': SessionMetric.USER_CRASHED,\n  'count_errored(session)': SessionMetric.SESSION_ERRORED,\n  'count_errored(user)': SessionMetric.USER_ERRORED,\n  'count_unique(user)': `count_unique(${SessionMetric.USER})`,\n  'sum(session)': `sum(${SessionMetric.SESSION})`,\n  'crash_free_rate(session)': SessionMetric.SESSION_CRASH_FREE_RATE,\n  'crash_free_rate(user)': SessionMetric.USER_CRASH_FREE_RATE,\n  'crash_rate(session)': SessionMetric.SESSION_CRASH_RATE,\n  'crash_rate(user)': SessionMetric.USER_CRASH_RATE,\n  'avg(session.duration)': `avg(${SessionMetric.SESSION_DURATION})`,\n  'max(session.duration)': `max(${SessionMetric.SESSION_DURATION})`,\n  'p50(session.duration)': `p50(${SessionMetric.SESSION_DURATION})`,\n  'p75(session.duration)': `p75(${SessionMetric.SESSION_DURATION})`,\n  'p95(session.duration)': `p95(${SessionMetric.SESSION_DURATION})`,\n  'p99(session.duration)': `p99(${SessionMetric.SESSION_DURATION})`,\n  project: 'project_id',\n};\n\nexport const METRICS_EXPRESSION_TO_FIELD = invert(FIELD_TO_METRICS_EXPRESSION);\n\nexport const DISABLED_SORT = [\n  'count_errored(session)',\n  'count_errored(user)',\n  'count_healthy(session)',\n  'count_healthy(user)',\n  'session.status',\n];\n\nexport const TAG_SORT_DENY_LIST = ['project', 'environment'];\n\nexport const SESSIONS_FIELDS: Readonly<Partial<Record<SessionField, SessionsMeta>>> = {\n  [SessionField.SESSION]: {\n    name: 'session',\n    operations: [\n      'sum',\n      'crash_rate',\n      'crash_free_rate',\n      'count_healthy',\n      'count_abnormal',\n      'count_crashed',\n      'count_errored',\n    ],\n    type: 'integer',\n  },\n  [SessionField.USER]: {\n    name: 'user',\n    operations: [\n      'count_unique',\n      'crash_rate',\n      'crash_free_rate',\n      'count_healthy',\n      'count_abnormal',\n      'count_crashed',\n      'count_errored',\n    ],\n    type: 'string',\n  },\n  [SessionField.SESSION_DURATION]: {\n    name: 'session.duration',\n    operations: ['avg', 'p50', 'p75', 'p95', 'p99', 'max'],\n    type: 'duration',\n  },\n};\n\nexport const SESSIONS_OPERATIONS: Readonly<\n  Record<SessionsOperation, SessionAggregationColumn>\n> = {\n  sum: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_unique: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string'],\n        defaultValue: SessionField.USER,\n        required: true,\n      },\n    ],\n  },\n  count_healthy: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_abnormal: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_crashed: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_errored: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  crash_rate: {\n    outputType: 'percentage',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  crash_free_rate: {\n    outputType: 'percentage',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  avg: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  max: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p50: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p75: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p95: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p99: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n};\n\nexport const SESSIONS_TAGS = ['environment', 'project', 'release', 'session.status'];\nexport const SESSIONS_FILTER_TAGS = ['environment', 'project', 'release'];\nexport const SESSION_STATUSES = Object.values(SessionStatus);\n\nexport function generateReleaseWidgetFieldOptions(\n  fields: SessionsMeta[] = Object.values(SESSIONS_FIELDS),\n  tagKeys?: string[]\n) {\n  const fieldOptions: Record<string, SelectValue<FieldValue>> = {};\n\n  const operations = new Set<SessionsOperation>();\n  const knownOperations = Object.keys(SESSIONS_OPERATIONS);\n\n  fields\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .forEach(field => {\n      field.operations.forEach(operation => operations.add(operation));\n\n      fieldOptions[`field:${field.name}`] = {\n        label: field.name,\n        value: {\n          kind: FieldValueKind.METRICS,\n          meta: {\n            name: field.name,\n            dataType: field.type,\n          },\n        },\n      };\n    });\n\n  Array.from(operations)\n    .filter(operation => knownOperations.includes(operation))\n    .sort((a, b) => a.localeCompare(b))\n    .forEach(operation => {\n      fieldOptions[`function:${operation}`] = {\n        label: `${operation}(${'\\u2026'})`,\n        value: {\n          kind: FieldValueKind.FUNCTION,\n          meta: {\n            name: operation,\n            parameters: SESSIONS_OPERATIONS[operation].parameters.map(param => param),\n          },\n        },\n      };\n    });\n\n  if (defined(tagKeys)) {\n    // Expose environment. session.status, project etc. as fields.\n    tagKeys\n      .sort((a, b) => a.localeCompare(b))\n      .forEach(tag => {\n        fieldOptions[`field:${tag}`] = {\n          label: tag,\n          value: {\n            kind: FieldValueKind.FIELD,\n            meta: {name: tag, dataType: 'string'},\n          },\n        };\n      });\n  }\n\n  return fieldOptions;\n}\n","import {GridColumnOrder, GridColumnSortBy} from 'sentry/components/gridEditable';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport {\n  AggregateParameter,\n  Column,\n  ColumnType,\n  ColumnValueType,\n} from 'sentry/utils/discover/fields';\n\n/**\n * It is assumed that `aggregation` and `field` have the same ColumnValueType\n */\nexport type TableColumn<K> = GridColumnOrder<K> & {\n  // key: K                     From GridColumn\n  // name: string               From GridColumnHeader\n  column: Readonly<Column>;\n  isSortable: boolean;\n\n  type: ColumnValueType;\n  width?: number;\n  // isPrimary: boolean         From GridColumnHeader\n};\n\nexport type TableColumnSort<K> = GridColumnSortBy<K>;\n\nexport type TableState = {\n  columnOrder: TableColumn<keyof TableDataRow>[];\n  columnSortBy: TableColumnSort<keyof TableDataRow>[];\n};\n\nexport enum FieldValueKind {\n  TAG = 'tag',\n  MEASUREMENT = 'measurement',\n  BREAKDOWN = 'breakdown',\n  FIELD = 'field',\n  FUNCTION = 'function',\n  EQUATION = 'equation',\n  METRICS = 'metric',\n  NUMERIC_METRICS = 'numeric_metric',\n}\n\nexport type FieldValueColumns =\n  | {\n      kind: FieldValueKind.TAG;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n        // Set to true for tag values we invent at runtime.\n        unknown?: boolean;\n      };\n    }\n  | {\n      kind: FieldValueKind.MEASUREMENT;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.BREAKDOWN;\n      meta: {\n        dataType: 'duration';\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.FIELD;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.METRICS;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.NUMERIC_METRICS;\n      meta: {\n        dataType: 'numeric';\n        name: string;\n      };\n    };\n\n// Payload of select options in the column editor.\n// The first column contains a union of tags, fields and functions,\n// and we need ways to disambiguate them.\nexport type FieldValue =\n  | FieldValueColumns\n  | {\n      kind: FieldValueKind.FUNCTION;\n      meta: {\n        name: string;\n        parameters: AggregateParameter[];\n      };\n    }\n  | {\n      kind: FieldValueKind.EQUATION;\n      meta: {\n        name: string;\n      };\n    };\n","import {browserHistory, InjectedRouter} from 'react-router';\nimport {urlEncode} from '@sentry/utils';\nimport {Location, Query} from 'history';\nimport * as Papa from 'papaparse';\n\nimport {\n  openAddDashboardWidgetModal,\n  openAddToDashboardModal,\n} from 'sentry/actionCreators/modal';\nimport {COL_WIDTH_UNDEFINED} from 'sentry/components/gridEditable';\nimport {URL_PARAM} from 'sentry/constants/pageFilters';\nimport {t} from 'sentry/locale';\nimport {NewQuery, Organization, OrganizationSummary, SelectValue} from 'sentry/types';\nimport {Event} from 'sentry/types/event';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {getUtcDateString} from 'sentry/utils/dates';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {\n  aggregateFunctionOutputType,\n  Aggregation,\n  AGGREGATIONS,\n  Column,\n  ColumnType,\n  explodeFieldString,\n  Field,\n  FIELDS,\n  getAggregateAlias,\n  getColumnsAndAggregates,\n  getEquation,\n  isAggregateEquation,\n  isEquation,\n  isMeasurement,\n  isSpanOperationBreakdownField,\n  measurementType,\n  TRACING_FIELDS,\n} from 'sentry/utils/discover/fields';\nimport {DisplayModes, TOP_N} from 'sentry/utils/discover/types';\nimport {getTitle} from 'sentry/utils/events';\nimport localStorage from 'sentry/utils/localStorage';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\n\nimport {DashboardWidgetSource, DisplayType, WidgetQuery} from '../dashboardsV2/types';\n\nimport {displayModeToDisplayType} from './savedQuery/utils';\nimport {FieldValue, FieldValueKind, TableColumn} from './table/types';\nimport {ALL_VIEWS, TRANSACTION_VIEWS, WEB_VITALS_VIEWS} from './data';\n\nexport type QueryWithColumnState =\n  | Query\n  | {\n      field: string | string[] | null | undefined;\n      sort: string | string[] | null | undefined;\n    };\n\nconst TEMPLATE_TABLE_COLUMN: TableColumn<string> = {\n  key: '',\n  name: '',\n\n  type: 'never',\n  isSortable: false,\n\n  column: Object.freeze({kind: 'field', field: ''}),\n  width: COL_WIDTH_UNDEFINED,\n};\n\n// TODO(mark) these types are coupled to the gridEditable component types and\n// I'd prefer the types to be more general purpose but that will require a second pass.\nexport function decodeColumnOrder(\n  fields: Readonly<Field[]>,\n  useFullEquationAsKey?: boolean\n): TableColumn<string>[] {\n  let equations = 0;\n  return fields.map((f: Field) => {\n    const column: TableColumn<string> = {...TEMPLATE_TABLE_COLUMN};\n\n    const col = explodeFieldString(f.field, f.alias);\n    const columnName = f.field;\n    if (isEquation(f.field)) {\n      column.key = useFullEquationAsKey ? f.field : `equation[${equations}]`;\n      column.name = getEquation(columnName);\n      equations += 1;\n    } else {\n      column.key = columnName;\n      column.name = columnName;\n    }\n    column.width = f.width || COL_WIDTH_UNDEFINED;\n\n    if (col.kind === 'function') {\n      // Aggregations can have a strict outputType or they can inherit from their field.\n      // Otherwise use the FIELDS data to infer types.\n      const outputType = aggregateFunctionOutputType(col.function[0], col.function[1]);\n      if (outputType !== null) {\n        column.type = outputType;\n      }\n      const aggregate = AGGREGATIONS[col.function[0]];\n      column.isSortable = aggregate && aggregate.isSortable;\n    } else if (col.kind === 'field') {\n      if (FIELDS.hasOwnProperty(col.field)) {\n        column.type = FIELDS[col.field];\n      } else if (isMeasurement(col.field)) {\n        column.type = measurementType(col.field);\n      } else if (isSpanOperationBreakdownField(col.field)) {\n        column.type = 'duration';\n      }\n    }\n    column.column = col;\n\n    return column;\n  });\n}\n\nexport function pushEventViewToLocation(props: {\n  location: Location;\n  nextEventView: EventView;\n  extraQuery?: Query;\n}) {\n  const {location, nextEventView} = props;\n  const extraQuery = props.extraQuery || {};\n  const queryStringObject = nextEventView.generateQueryStringObject();\n\n  browserHistory.push({\n    ...location,\n    query: {\n      ...extraQuery,\n      ...queryStringObject,\n    },\n  });\n}\n\nexport function generateTitle({\n  eventView,\n  event,\n  organization,\n}: {\n  eventView: EventView;\n  event?: Event;\n  organization?: Organization;\n}) {\n  const titles = [t('Discover')];\n\n  const eventViewName = eventView.name;\n  if (typeof eventViewName === 'string' && String(eventViewName).trim().length > 0) {\n    titles.push(String(eventViewName).trim());\n  }\n\n  const eventTitle = event ? getTitle(event, organization?.features).title : undefined;\n\n  if (eventTitle) {\n    titles.push(eventTitle);\n  }\n\n  titles.reverse();\n\n  return titles.join(' - ');\n}\n\nexport function getPrebuiltQueries(organization: Organization) {\n  const views = [...ALL_VIEWS];\n  if (organization.features.includes('performance-view')) {\n    // insert transactions queries at index 2\n    views.splice(2, 0, ...TRANSACTION_VIEWS);\n    views.push(...WEB_VITALS_VIEWS);\n  }\n\n  return views;\n}\n\nfunction disableMacros(value: string | null | boolean | number) {\n  const unsafeCharacterRegex = /^[\\=\\+\\-\\@]/;\n\n  if (typeof value === 'string' && `${value}`.match(unsafeCharacterRegex)) {\n    return `'${value}`;\n  }\n\n  return value;\n}\n\nexport function downloadAsCsv(tableData, columnOrder, filename) {\n  const {data} = tableData;\n  const headings = columnOrder.map(column => column.name);\n\n  const csvContent = Papa.unparse({\n    fields: headings,\n    data: data.map(row =>\n      headings.map(col => {\n        col = getAggregateAlias(col);\n        return disableMacros(row[col]);\n      })\n    ),\n  });\n\n  // Need to also manually replace # since encodeURI skips them\n  const encodedDataUrl = `data:text/csv;charset=utf8,${encodeURIComponent(csvContent)}`;\n\n  // Create a download link then click it, this is so we can get a filename\n  const link = document.createElement('a');\n  const now = new Date();\n  link.setAttribute('href', encodedDataUrl);\n  link.setAttribute('download', `${filename} ${getUtcDateString(now)}.csv`);\n  link.click();\n  link.remove();\n\n  // Make testing easier\n  return encodedDataUrl;\n}\n\nconst ALIASED_AGGREGATES_COLUMN = {\n  last_seen: 'timestamp',\n  failure_count: 'transaction.status',\n};\n\n/**\n * Convert an aggregate into the resulting column from a drilldown action.\n * The result is null if the drilldown results in the aggregate being removed.\n */\nfunction drilldownAggregate(\n  func: Extract<Column, {kind: 'function'}>\n): Extract<Column, {kind: 'field'}> | null {\n  const key = func.function[0];\n  const aggregation = AGGREGATIONS[key];\n  let column = func.function[1];\n\n  if (ALIASED_AGGREGATES_COLUMN.hasOwnProperty(key)) {\n    // Some aggregates are just shortcuts to other aggregates with\n    // predefined arguments so we can directly map them to the result.\n    column = ALIASED_AGGREGATES_COLUMN[key];\n  } else if (aggregation?.parameters?.[0]) {\n    const parameter = aggregation.parameters[0];\n    if (parameter.kind !== 'column') {\n      // The aggregation does not accept a column as a parameter,\n      // so we clear the column.\n      column = '';\n    } else if (!column && parameter.required === false) {\n      // The parameter was not given for a non-required parameter,\n      // so we fall back to the default.\n      column = parameter.defaultValue;\n    }\n  } else {\n    // The aggregation does not exist or does not have any parameters,\n    // so we clear the column.\n    column = '';\n  }\n  return column ? {kind: 'field', field: column} : null;\n}\n\n/**\n * Convert an aggregated query into one that does not have aggregates.\n * Will also apply additions conditions defined in `additionalConditions`\n * and generate conditions based on the `dataRow` parameter and the current fields\n * in the `eventView`.\n */\nexport function getExpandedResults(\n  eventView: EventView,\n  additionalConditions: Record<string, string>,\n  dataRow?: TableDataRow | Event\n): EventView {\n  const fieldSet = new Set();\n  // Expand any functions in the resulting column, and dedupe the result.\n  // Mark any column as null to remove it.\n  const expandedColumns: (Column | null)[] = eventView.fields.map((field: Field) => {\n    const exploded = explodeFieldString(field.field, field.alias);\n    const column = exploded.kind === 'function' ? drilldownAggregate(exploded) : exploded;\n\n    if (\n      // if expanding the function failed\n      column === null ||\n      // the new column is already present\n      fieldSet.has(column.field) ||\n      // Skip aggregate equations, their functions will already be added so we just want to remove it\n      isAggregateEquation(field.field)\n    ) {\n      return null;\n    }\n\n    fieldSet.add(column.field);\n\n    return column;\n  });\n\n  // id should be default column when expanded results in no columns; but only if\n  // the Discover query's columns is non-empty.\n  // This typically occurs in Discover drilldowns.\n  if (fieldSet.size === 0 && expandedColumns.length) {\n    expandedColumns[0] = {kind: 'field', field: 'id'};\n  }\n\n  // update the columns according the the expansion above\n  const nextView = expandedColumns.reduceRight(\n    (newView, column, index) =>\n      column === null\n        ? newView.withDeletedColumn(index, undefined)\n        : newView.withUpdatedColumn(index, column, undefined),\n    eventView.clone()\n  );\n\n  nextView.query = generateExpandedConditions(nextView, additionalConditions, dataRow);\n  return nextView;\n}\n\n/**\n * Create additional conditions based on the fields in an EventView\n * and a datarow/event\n */\nfunction generateAdditionalConditions(\n  eventView: EventView,\n  dataRow?: TableDataRow | Event\n): Record<string, string | string[]> {\n  const specialKeys = Object.values(URL_PARAM);\n  const conditions: Record<string, string | string[]> = {};\n\n  if (!dataRow) {\n    return conditions;\n  }\n\n  eventView.fields.forEach((field: Field) => {\n    const column = explodeFieldString(field.field, field.alias);\n\n    // Skip aggregate fields\n    if (column.kind === 'function') {\n      return;\n    }\n\n    const dataKey = getAggregateAlias(field.field);\n    // Append the current field as a condition if it exists in the dataRow\n    // Or is a simple key in the event. More complex deeply nested fields are\n    // more challenging to get at as their location in the structure does not\n    // match their name.\n    if (dataRow.hasOwnProperty(dataKey)) {\n      let value = dataRow[dataKey];\n\n      if (Array.isArray(value)) {\n        if (value.length > 1) {\n          conditions[column.field] = value;\n          return;\n        }\n        // An array with only one value is equivalent to the value itself.\n        value = value[0];\n      }\n\n      // if the value will be quoted, then do not trim it as the whitespaces\n      // may be important to the query and should not be trimmed\n      const shouldQuote =\n        value === null || value === undefined\n          ? false\n          : /[\\s\\(\\)\\\\\"]/g.test(String(value).trim());\n      const nextValue =\n        value === null || value === undefined\n          ? ''\n          : shouldQuote\n          ? String(value)\n          : String(value).trim();\n\n      if (isMeasurement(column.field) && !nextValue) {\n        // Do not add measurement conditions if nextValue is falsey.\n        // It's expected that nextValue is a numeric value.\n        return;\n      }\n\n      switch (column.field) {\n        case 'timestamp':\n          // normalize the \"timestamp\" field to ensure the payload works\n          conditions[column.field] = getUtcDateString(nextValue);\n          break;\n        default:\n          conditions[column.field] = nextValue;\n      }\n    }\n\n    // If we have an event, check tags as well.\n    if (dataRow.tags && Array.isArray(dataRow.tags)) {\n      const tagIndex = dataRow.tags.findIndex(item => item.key === dataKey);\n      if (tagIndex > -1) {\n        const key = specialKeys.includes(column.field)\n          ? `tags[${column.field}]`\n          : column.field;\n\n        const tagValue = dataRow.tags[tagIndex].value;\n        conditions[key] = tagValue;\n      }\n    }\n  });\n  return conditions;\n}\n\nfunction generateExpandedConditions(\n  eventView: EventView,\n  additionalConditions: Record<string, string>,\n  dataRow?: TableDataRow | Event\n): string {\n  const parsedQuery = new MutableSearch(eventView.query);\n\n  // Remove any aggregates from the search conditions.\n  // otherwise, it'll lead to an invalid query result.\n  for (const key in parsedQuery.filters) {\n    const column = explodeFieldString(key);\n    if (column.kind === 'function') {\n      parsedQuery.removeFilter(key);\n    }\n  }\n\n  const conditions: Record<string, string | string[]> = Object.assign(\n    {},\n    additionalConditions,\n    generateAdditionalConditions(eventView, dataRow)\n  );\n\n  // Add additional conditions provided and generated.\n  for (const key in conditions) {\n    const value = conditions[key];\n\n    if (Array.isArray(value)) {\n      parsedQuery.setFilterValues(key, value);\n      continue;\n    }\n\n    if (key === 'project.id') {\n      eventView.project = [...eventView.project, parseInt(value, 10)];\n      continue;\n    }\n    if (key === 'environment') {\n      if (!eventView.environment.includes(value)) {\n        eventView.environment = [...eventView.environment, value];\n      }\n      continue;\n    }\n    const column = explodeFieldString(key);\n    // Skip aggregates as they will be invalid.\n    if (column.kind === 'function') {\n      continue;\n    }\n\n    parsedQuery.setFilterValues(key, [value]);\n  }\n\n  return parsedQuery.formatString();\n}\n\ntype FieldGeneratorOpts = {\n  organization: OrganizationSummary;\n  aggregations?: Record<string, Aggregation>;\n  fields?: Record<string, ColumnType>;\n  measurementKeys?: string[] | null;\n  spanOperationBreakdownKeys?: string[];\n  tagKeys?: string[] | null;\n};\n\nexport function generateFieldOptions({\n  organization,\n  tagKeys,\n  measurementKeys,\n  spanOperationBreakdownKeys,\n  aggregations = AGGREGATIONS,\n  fields = FIELDS,\n}: FieldGeneratorOpts) {\n  let fieldKeys = Object.keys(fields).sort();\n  let functions = Object.keys(aggregations);\n\n  // Strip tracing features if the org doesn't have access.\n  if (!organization.features.includes('performance-view')) {\n    fieldKeys = fieldKeys.filter(item => !TRACING_FIELDS.includes(item));\n    functions = functions.filter(item => !TRACING_FIELDS.includes(item));\n  }\n  const fieldOptions: Record<string, SelectValue<FieldValue>> = {};\n\n  // Index items by prefixed keys as custom tags can overlap both fields and\n  // function names. Having a mapping makes finding the value objects easier\n  // later as well.\n  functions.forEach(func => {\n    const ellipsis = aggregations[func].parameters.length ? '\\u2026' : '';\n    const parameters = aggregations[func].parameters.map(param => {\n      const overrides = AGGREGATIONS[func].getFieldOverrides;\n      if (typeof overrides === 'undefined') {\n        return param;\n      }\n      return {\n        ...param,\n        ...overrides({parameter: param}),\n      };\n    });\n\n    fieldOptions[`function:${func}`] = {\n      label: `${func}(${ellipsis})`,\n      value: {\n        kind: FieldValueKind.FUNCTION,\n        meta: {\n          name: func,\n          parameters,\n        },\n      },\n    };\n  });\n\n  fieldKeys.forEach(field => {\n    fieldOptions[`field:${field}`] = {\n      label: field,\n      value: {\n        kind: FieldValueKind.FIELD,\n        meta: {\n          name: field,\n          dataType: fields[field],\n        },\n      },\n    };\n  });\n\n  if (measurementKeys !== undefined && measurementKeys !== null) {\n    measurementKeys.sort();\n    measurementKeys.forEach(measurement => {\n      fieldOptions[`measurement:${measurement}`] = {\n        label: measurement,\n        value: {\n          kind: FieldValueKind.MEASUREMENT,\n          meta: {name: measurement, dataType: measurementType(measurement)},\n        },\n      };\n    });\n  }\n\n  if (Array.isArray(spanOperationBreakdownKeys)) {\n    spanOperationBreakdownKeys.sort();\n    spanOperationBreakdownKeys.forEach(breakdownField => {\n      fieldOptions[`span_op_breakdown:${breakdownField}`] = {\n        label: breakdownField,\n        value: {\n          kind: FieldValueKind.BREAKDOWN,\n          meta: {name: breakdownField, dataType: 'duration'},\n        },\n      };\n    });\n  }\n\n  if (tagKeys !== undefined && tagKeys !== null) {\n    tagKeys.sort();\n    tagKeys.forEach(tag => {\n      const tagValue =\n        fields.hasOwnProperty(tag) || AGGREGATIONS.hasOwnProperty(tag)\n          ? `tags[${tag}]`\n          : tag;\n      fieldOptions[`tag:${tag}`] = {\n        label: tag,\n        value: {\n          kind: FieldValueKind.TAG,\n          meta: {name: tagValue, dataType: 'string'},\n        },\n      };\n    });\n  }\n\n  return fieldOptions;\n}\n\nconst RENDER_PREBUILT_KEY = 'discover-render-prebuilt';\n\nexport function shouldRenderPrebuilt(): boolean {\n  const shouldRender = localStorage.getItem(RENDER_PREBUILT_KEY);\n  return shouldRender === 'true' || shouldRender === null;\n}\n\nexport function setRenderPrebuilt(value: boolean) {\n  localStorage.setItem(RENDER_PREBUILT_KEY, value ? 'true' : 'false');\n}\n\nexport function eventViewToWidgetQuery({\n  eventView,\n  yAxis,\n  displayType,\n  widgetBuilderNewDesign,\n}: {\n  displayType: DisplayType;\n  eventView: EventView;\n  widgetBuilderNewDesign?: boolean;\n  yAxis?: string | string[];\n}) {\n  const fields = eventView.fields.map(({field}) => field);\n  const {columns, aggregates} = getColumnsAndAggregates(fields);\n  const sort = eventView.sorts[0];\n  const queryYAxis = typeof yAxis === 'string' ? [yAxis] : yAxis ?? ['count()'];\n  let orderby = '';\n  // The orderby should only be set to sort.field if it is a Top N query\n  // since the query uses all of the fields, or if the ordering is used in the y-axis\n  if (sort && displayType !== DisplayType.WORLD_MAP) {\n    let orderbyFunction = '';\n    const aggregateFields = [...queryYAxis, ...aggregates];\n    for (let i = 0; i < aggregateFields.length; i++) {\n      if (sort.field === getAggregateAlias(aggregateFields[i])) {\n        orderbyFunction = aggregateFields[i];\n        break;\n      }\n    }\n\n    const bareOrderby = orderbyFunction === '' ? sort.field : orderbyFunction;\n    if (displayType === DisplayType.TOP_N || bareOrderby) {\n      orderby = `${sort.kind === 'desc' ? '-' : ''}${bareOrderby}`;\n    }\n  }\n  let newAggregates = aggregates;\n\n  if (widgetBuilderNewDesign && displayType !== DisplayType.TABLE) {\n    newAggregates = queryYAxis;\n  } else if (!widgetBuilderNewDesign) {\n    newAggregates = [\n      ...(displayType === DisplayType.TOP_N ? aggregates : []),\n      ...queryYAxis,\n    ];\n  }\n\n  const widgetQuery: WidgetQuery = {\n    name: '',\n    aggregates: newAggregates,\n    columns: [...(displayType === DisplayType.TOP_N ? columns : [])],\n    fields: [...(displayType === DisplayType.TOP_N ? fields : []), ...queryYAxis],\n    conditions: eventView.query,\n    orderby,\n  };\n  return widgetQuery;\n}\n\nexport function handleAddQueryToDashboard({\n  eventView,\n  location,\n  query,\n  organization,\n  router,\n  yAxis,\n}: {\n  eventView: EventView;\n  organization: Organization;\n  router: InjectedRouter;\n  location?: Location;\n  query?: NewQuery;\n  yAxis?: string | string[];\n}) {\n  const displayType = displayModeToDisplayType(eventView.display as DisplayModes);\n  const defaultTableFields = eventView.fields.map(({field}) => field);\n  const defaultWidgetQuery = eventViewToWidgetQuery({\n    eventView,\n    displayType,\n    yAxis,\n    widgetBuilderNewDesign: organization.features.includes(\n      'new-widget-builder-experience-design'\n    ),\n  });\n\n  if (organization.features.includes('new-widget-builder-experience-design')) {\n    const {query: widgetAsQueryParams} = constructAddQueryToDashboardLink({\n      eventView,\n      query,\n      organization,\n      yAxis,\n      location,\n    });\n    openAddToDashboardModal({\n      organization,\n      selection: {\n        projects: eventView.project,\n        environments: eventView.environment,\n        datetime: {\n          start: eventView.start,\n          end: eventView.end,\n          period: eventView.statsPeriod,\n          utc: eventView.utc,\n        },\n      },\n      widget: {\n        title: query?.name ?? eventView.name,\n        displayType:\n          organization.features.includes('new-widget-builder-experience-design') &&\n          displayType === DisplayType.TOP_N\n            ? DisplayType.AREA\n            : displayType,\n        queries: [\n          {\n            ...defaultWidgetQuery,\n            aggregates: [...(typeof yAxis === 'string' ? [yAxis] : yAxis ?? ['count()'])],\n          },\n        ],\n        interval: eventView.interval,\n        limit:\n          organization.features.includes('new-widget-builder-experience-design') &&\n          displayType === DisplayType.TOP_N\n            ? Number(eventView.topEvents) || TOP_N\n            : undefined,\n      },\n      router,\n      widgetAsQueryParams,\n    });\n    return;\n  }\n\n  openAddDashboardWidgetModal({\n    organization,\n    start: eventView.start,\n    end: eventView.end,\n    statsPeriod: eventView.statsPeriod,\n    source: DashboardWidgetSource.DISCOVERV2,\n    defaultWidgetQuery,\n    defaultTableColumns: defaultTableFields,\n    defaultTitle:\n      query?.name ?? (eventView.name !== 'All Events' ? eventView.name : undefined),\n    displayType,\n  });\n  trackAdvancedAnalyticsEvent('discover_views.add_to_dashboard.modal_open', {\n    organization,\n    saved_query: !!query,\n  });\n}\n\nexport function constructAddQueryToDashboardLink({\n  eventView,\n  query,\n  organization,\n  yAxis,\n  location,\n}: {\n  eventView: EventView;\n  organization: Organization;\n  location?: Location;\n  query?: NewQuery;\n  yAxis?: string | string[];\n}) {\n  const displayType = displayModeToDisplayType(eventView.display as DisplayModes);\n  const defaultTableFields = eventView.fields.map(({field}) => field);\n  const defaultWidgetQuery = eventViewToWidgetQuery({\n    eventView,\n    displayType,\n    yAxis,\n    widgetBuilderNewDesign: organization.features.includes(\n      'new-widget-builder-experience-design'\n    ),\n  });\n  const defaultTitle =\n    query?.name ?? (eventView.name !== 'All Events' ? eventView.name : undefined);\n\n  return {\n    pathname: `/organizations/${organization.slug}/dashboards/new/widget/new/`,\n    query: {\n      ...location?.query,\n      source: DashboardWidgetSource.DISCOVERV2,\n      start: eventView.start,\n      end: eventView.end,\n      statsPeriod: eventView.statsPeriod,\n      defaultWidgetQuery: urlEncode(defaultWidgetQuery),\n      defaultTableColumns: defaultTableFields,\n      defaultTitle,\n      displayType:\n        organization.features.includes('new-widget-builder-experience-design') &&\n        displayType === DisplayType.TOP_N\n          ? DisplayType.AREA\n          : displayType,\n      limit:\n        organization.features.includes('new-widget-builder-experience-design') &&\n        displayType === DisplayType.TOP_N\n          ? Number(eventView.topEvents) || TOP_N\n          : undefined,\n    },\n  };\n}\n","import styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport GuideAnchor from 'sentry/components/assistant/guideAnchor';\nimport CompactSelect from 'sentry/components/forms/compactSelect';\nimport {pickBarColor} from 'sentry/components/performance/waterfall/utils';\nimport {IconFilter} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {OrganizationSummary} from 'sentry/types';\nimport {decodeScalar} from 'sentry/utils/queryString';\n\nimport {decodeHistogramZoom} from './transactionOverview/latencyChart/utils';\n\n// Make sure to update other instances like trends column fields, discover field types.\nexport enum SpanOperationBreakdownFilter {\n  None = 'none',\n  Http = 'http',\n  Db = 'db',\n  Browser = 'browser',\n  Resource = 'resource',\n}\n\nexport const SPAN_OPERATION_BREAKDOWN_FILTER_TO_FIELD: Partial<\n  Record<SpanOperationBreakdownFilter, string>\n> = {\n  [SpanOperationBreakdownFilter.Http]: 'spans.http',\n  [SpanOperationBreakdownFilter.Db]: 'spans.db',\n  [SpanOperationBreakdownFilter.Browser]: 'spans.browser',\n  [SpanOperationBreakdownFilter.Resource]: 'spans.resource',\n};\n\nconst OPTIONS: SpanOperationBreakdownFilter[] = [\n  SpanOperationBreakdownFilter.Http,\n  SpanOperationBreakdownFilter.Db,\n  SpanOperationBreakdownFilter.Browser,\n  SpanOperationBreakdownFilter.Resource,\n];\n\nexport const spanOperationBreakdownSingleColumns = OPTIONS.map(o => `spans.${o}`);\n\ntype Props = {\n  currentFilter: SpanOperationBreakdownFilter;\n  onChangeFilter: (newFilter: SpanOperationBreakdownFilter) => void;\n  organization: OrganizationSummary;\n};\n\nfunction Filter(props: Props) {\n  const {currentFilter, onChangeFilter, organization} = props;\n\n  if (!organization.features.includes('performance-ops-breakdown')) {\n    return null;\n  }\n\n  const menuOptions = OPTIONS.map(operationName => ({\n    value: operationName,\n    label: operationName,\n    leadingItems: <OperationDot backgroundColor={pickBarColor(operationName)} />,\n  }));\n\n  return (\n    <GuideAnchor target=\"span_op_breakdowns_filter\" position=\"top\">\n      <CompactSelect\n        isClearable\n        menuTitle={t('Filter by operation')}\n        options={menuOptions}\n        value={currentFilter}\n        onChange={opt => onChangeFilter(opt?.value)}\n        triggerProps={{icon: <IconFilter />}}\n        triggerLabel={\n          currentFilter === SpanOperationBreakdownFilter.None\n            ? t('Filter')\n            : currentFilter\n        }\n      />\n    </GuideAnchor>\n  );\n}\n\nconst OperationDot = styled('div')<{backgroundColor: string}>`\n  display: block;\n  width: ${space(1)};\n  height: ${space(1)};\n  border-radius: 100%;\n  background-color: ${p => p.backgroundColor};\n`;\n\nexport function filterToField(option: SpanOperationBreakdownFilter) {\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return undefined;\n    default: {\n      return `spans.${option}`;\n    }\n  }\n}\n\nexport function filterToSearchConditions(\n  option: SpanOperationBreakdownFilter,\n  location: Location\n) {\n  let field = filterToField(option);\n  if (!field) {\n    field = 'transaction.duration';\n  }\n\n  // Add duration search conditions implicitly\n\n  const {min, max} = decodeHistogramZoom(location);\n  let query = '';\n  if (typeof min === 'number') {\n    query = `${query} ${field}:>${min}ms`;\n  }\n  if (typeof max === 'number') {\n    query = `${query} ${field}:<${max}ms`;\n  }\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return query ? query.trim() : undefined;\n    default: {\n      return `${query} has:${filterToField(option)}`.trim();\n    }\n  }\n}\n\nexport function filterToColor(option: SpanOperationBreakdownFilter) {\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return pickBarColor('');\n    default: {\n      return pickBarColor(option);\n    }\n  }\n}\n\nexport function stringToFilter(option: string) {\n  if (\n    Object.values(SpanOperationBreakdownFilter).includes(\n      option as SpanOperationBreakdownFilter\n    )\n  ) {\n    return option as SpanOperationBreakdownFilter;\n  }\n\n  return SpanOperationBreakdownFilter.None;\n}\n\nexport function decodeFilterFromLocation(location: Location) {\n  return stringToFilter(\n    decodeScalar(location.query.breakdown, SpanOperationBreakdownFilter.None)\n  );\n}\n\nexport function filterToLocationQuery(option: SpanOperationBreakdownFilter) {\n  return {\n    breakdown: option as string,\n  };\n}\n\nexport default Filter;\n","import {Location} from 'history';\n\nimport {decodeInteger} from 'sentry/utils/queryString';\n\nexport const ZOOM_START = 'startDuration';\nexport const ZOOM_END = 'endDuration';\n\nexport function decodeHistogramZoom(location: Location) {\n  let min: number | undefined = undefined;\n  let max: number | undefined = undefined;\n\n  if (ZOOM_START in location.query) {\n    min = decodeInteger(location.query[ZOOM_START], 0);\n  }\n\n  if (ZOOM_END in location.query) {\n    const decodedMax = decodeInteger(location.query[ZOOM_END]);\n    if (typeof decodedMax === 'number') {\n      max = decodedMax;\n    }\n  }\n\n  return {min, max};\n}\n"],"names":["api","Client","async","fetchGuides","data","requestPromise","GuideStore","error","Sentry","registerAnchor","target","unregisterAnchor","nextStep","setForceHide","forceHide","toStep","step","closeGuide","dismissed","dismissGuide","guide","orgId","recordDismiss","recordFinish","request","method","status","user","ConfigStore","eventKey","eventName","organization_id","user_id","parseInt","id","trackAnalyticsEvent","createActions","MenuHeader","MenuItem","p","theme","gray400","innerBorder","space","defaultProps","header","BaseGuideAnchor","Component","active","this","onGuideStateChange","undefined","createRef","e","stopPropagation","props","onStepComplete","onFinish","currentGuide","state","componentDidMount","componentDidUpdate","_prevProps","prevState","containerElement","current","top","getBoundingClientRect","centerElement","window","pageYOffset","innerHeight","scrollTo","err","componentWillUnmount","unsubscribe","steps","currentStep","setState","getHovercardBody","to","totalStepCount","length","currentStepCount","lastStep","hasManySteps","href","location","hash","dismissButton","DismissButton","size","translucentBorder","onClick","handleDismiss","priority","dismissText","t","GuideContainer","GuideContent","title","GuideTitle","GuideDescription","description","GuideAction","Fragment","StyledButton","handleFinish","nextText","hasNextGuide","handleNextStep","cantDismiss","StepCount","tct","render","children","position","offset","containerClassName","StyledHovercard","show","body","tipColor","ref","GuideAnchor","disabled","rest","purple300","white","fontSizeExtraLarge","fontSizeMedium","Button","fontSizeSmall","Hovercard","HovercardBody","AutoSelectText","forwardedRef","className","element","useRef","handleClick","selectText","useImperativeHandle","classNames","forwardRef","SIXTY_DAYS","THIRTY_DAYS","TWO_WEEKS","ONE_WEEK","TWENTY_FOUR_HOURS","SIX_HOURS","ONE_HOUR","RELEASE_LINES_THRESHOLD","truncationFormatter","value","truncate","escape","truncationLength","truncated","substring","useShortInterval","datetimeObj","getDiffInMinutes","getInterval","fidelity","diffInMinutes","getSeriesApiInterval","period","start","end","moment","diff","parsePeriodToHours","DEFAULT_STATS_PERIOD","canIncludePreviousPeriod","includePrevious","shouldFetchPreviousPeriod","getSeriesSelection","decodeList","query","unselectedSeries","reduce","selection","series","isMultiSeriesStats","isTopN","defined","totals","isSingleSeriesStats","getDimensionValue","dimension","lightenHexToRgb","colors","map","hex","rgb","Math","min","slice","DEFAULT_GEO_DATA","processTableResults","tableResults","tableResult","meta","preAggregate","Object","keys","find","column","row","name","getPreviousSeriesName","seriesName","disabledStyles","isDisabled","css","isChecked","isIndeterminate","gray200","backgroundSecondary","border","hoverStyles","textColor","CheckboxFancy","_size","role","color","gray300","Count","toLocaleString","formatAbbreviatedNumber","DateTime","format","date","utc","shortDate","dateOnly","timeOnly","timeAndDate","seconds","options","formatString","clock24Hours","getFormat","momentTimezone","timezone","Duration","fixedDigits","abbreviation","exact","getExactDuration","getDuration","Header","HeaderTitle","subText","HeaderButtonContainer","Body","Grid","GridRow","borderRadius","GridHead","GridHeadCell","isFirst","GridHeadCellStatic","GridBody","GridBodyCell","background","GridStatusWrapper","GRID_BODY_ROW_HEIGHT","GridStatusFloat","GridBodyCellStatus","GridResizer","numOfRows","dataRows","height","COL_WIDTH_UNDEFINED","COL_WIDTH_MINIMUM","GridEditable","numColumn","mousemove","mouseup","i","nextColumnOrder","columnOrder","width","setGridTemplateColumns","onResizeColumn","grid","type","cell","currentTarget","parentElement","resizeMetadata","columnIndex","columnWidth","offsetWidth","cursorX","clientX","addEventListener","onResizeMouseMove","resizeWindowLifecycleEvents","push","onResizeMouseUp","metadata","widthChange","clearWindowLifecycleEvents","requestAnimationFrame","resizeGridColumn","dataRow","prependColumns","renderPrependColumns","item","col","renderBodyCell","key","redrawGridColumn","removeEventListener","forEach","c","refGrid","max","prepend","prependColumnWidths","join","widths","index","style","gridTemplateColumns","renderGridHead","isLoading","renderHeadCell","onMouseDown","onResizeMouseDown","onDoubleClick","onResetColumnSize","onContextMenu","renderGridBody","renderError","renderLoading","renderGridBodyRow","renderEmptyData","headerButtons","showHeader","Profiler","onRender","onRenderCallback","icon","divider","isActive","noAnchor","withBorder","onSelect","allowDefaultEvent","preventDefault","callIfFunction","renderChildren","linkProps","tabIndex","MenuLink","MenuIcon","MenuAnchor","MenuTarget","renderAnchor","MenuListItem","omit","getListItemStyles","common","activeHover","hover","getChildStyles","shouldForwardProp","includes","Link","parseStatsPeriod","input","result","match","periodLength","coerceStatsPeriod","getStatsPeriodValue","maybe","Array","isArray","getDateTimeString","parsed","isValid","normalizeDateTimeString","needle","parseUtcValue","getUtcValue","getProject","projectFromQueryIdInt","isNaN","getEnvironment","normalizeDateTimeParams","params","allowEmptyPeriod","allowAbsoluteDatetime","allowAbsolutePageDatetime","defaultStatsPeriod","pageStatsPeriod","pageStart","pageEnd","pageUtc","statsPeriod","otherParams","coercedPeriod","dateTimeStart","dateTimeEnd","object","paramEntries","entries","filter","_","fromEntries","getStateFromQuery","normalizeOptions","project","URL_PARAM","environment","dateTimeParams","hasAbsolute","getUtcToLocalDateObject","getDatetimeFromState","DATE_TIME_KEYS","TeamKeyTransaction","isOpen","event","menuEl","Element","contains","enabled","handleToggleKeyTransaction","organization","action","trackAdvancedAnalyticsEvent","_props","document","handleClickOutside","partitionTeams","counts","keyedTeams","teams","enabledTeams","disabledTeams","noAccessTeams","projectTeams","Set","team","has","get","MAX_TEAM_KEY_TRANSACTIONS","renderMenuContent","transactionName","isMyTeamsEnabled","myTeamsHandler","toggleSelection","teamIds","hasTeamsWithAccess","DropdownContent","DropdownMenuHeader","first","ActionItem","TeamKeyTransactionItem","isKeyed","slug","renderMenu","createPortal","placement","modifiers","padding","popperRef","DropdownWrapper","Title","initialValue","menu","StarWrapper","Boolean","toggleOpen","DropdownMenuItem","MenuItemContent","zIndex","tooltip","TeamKeyTransactionsManagerContext","createContext","getKeyedTeams","UnwrappedProvider","keyFetchID","teamKeyTransactions","projectId","keyed","keyedTeam","project_id","transaction","add","isKeyTransaction","teamIdSet","newTeamKeyTransactions","count","keyTransaction","projects","addLoadingMessage","promise","String","then","clearIndicators","catch","response","responseJSON","errorDetails","detail","non_field_errors","addErrorMessage","toggleKeyTransaction","fetchData","prevProps","orgSlugChanged","selectedTeamsChanged","isEqual","selectedTeams","selectedProjectsChanged","selectedProjects","Symbol","orgSlug","url","datas","cursor","hasMore","payload","resp","includeAllArgs","pageLinks","getResponseHeader","paginationObject","parseLinkHeader","next","results","flat","fetchTeamKeyTransactions","getCounts","Map","set","childrenProps","Provider","withApi","Consumer","ROW_HEIGHT","ROW_PADDING","RowRectangle","getHatchPattern","DurationPill","fontSizeExtraSmall","showDetail","getDurationPillAlignment","breakpoints","medium","getBackgroundColor","showStriping","primary","alternate","spanBarHatch","durationDisplay","getToggleTheme","isExpanded","errored","isSpanGroupToggler","buttonTheme","button","default","errorTheme","danger","blue300","getDurationDisplay","left","getHumanDuration","duration","minimumFractionDigits","maximumFractionDigits","toPercent","toFixed","getOffsetOfElement","x","pageXOffset","y","rectOfContent","clientLeft","scrollLeft","clientTop","scrollTop","scrollWidth","scrollHeight","clamp","getLetterIndex","letter","indexOf","colorsAsArray","CHART_PALETTE","barColors","http","db","pickBarColor","letterIndex1","letterIndex2","letterIndex3","letterIndex4","BaseScoreBar","score","vertical","thickness","radius","palette","maxScore","scoreInBounds","paletteIndex","barProps","_j","Bar","empty","ScoreBar","similarity","ShortId","shortId","avatar","StyledShortId","StyledAutoSelectText","text","familyMono","linkColor","UserMisery","bars","barHeight","userMisery","miseryLimit","totalUsers","miserableUsers","adjustedMisery","fill","round","containerDisplayMode","Version","version","anchor","preservePageFilters","tooltipRawVersion","withPackage","versionToDisplay","formatVersion","releaseDetailProjectId","features","TooltipContent","TooltipVersionWrapper","TooltipClipboardIconWrapper","isHoverable","overlayStyle","test","getOverlayStyle","pathname","encodeURIComponent","VersionText","renderVersion","overflowEllipsis","withOrganization","withRouter","guidePrioritySort","a","b","a_priority","Number","MAX_SAFE_INTEGER","b_priority","localeCompare","defaultState","guides","anchors","forceShow","prevGuide","storeConfig","unsubscribeListeners","browserHistoryListener","init","listenTo","OrganizationsActions","onSetActiveOrganization","onURLChange","browserHistory","teardown","cleanupActiveRefluxSubscriptions","updateCurrentGuide","fetchSucceeded","requiredTargets","markOthersAsSeen","link","dateThreshold","Date","br","expectedTargets","acc","content","serverGuide","seen","trigger","delete","recordCue","updatePrevGuide","nextGuide","guideOptions","sort","every","assistantThreshold","userDateJoined","dateJoined","isSuperuser","IS_ACCEPTANCE_TEST","HookStore","cb","createStore","makeSafeRefluxStore","dateComparator","other","isDate","getDefaultSelection","pinnedFilters","desyncedFilters","hasInitialState","reset","PageFiltersActions","onReset","onInitializeUrlState","updateProjects","updateDateTime","updateEnvironments","updateDesyncedFilters","pin","_isReady","newSelection","pinned","getState","isReady","filters","environments","datetime","isEqualWith","assert","_value","isNotSharedOrganization","DEFAULT_DAY_START_TIME","DEFAULT_DAY_END_TIME","DATE_FORMAT_NO_TIMEZONE","getParser","local","isValidTime","str","getUtcDateString","dateObj","getFormattedDate","getUserTimezone","toDate","setDateToTime","timeStr","hours","minutes","split","setHours","setUTCHours","setSeconds","getUtcToSystem","getLocalToSystem","getEndOfDay","startOf","subtract","getPeriodAgo","unit","getStartOfPeriodAgo","periodNumber","statsPeriodToDays","endsWith","getTime","shouldUse24Hours","getTimeFormat","displaySeconds","getInternalDate","getDateWithTimezoneInUtc","ArrayValue","expanded","ArrayContainer","ArrayItem","nullableValue","ButtonContainer","handleToggle","TitleStar","keyedTeamsCount","star","isSolid","borderless","teamSlugs","TeamKeyTransactionField","TeamKeyTransactionFieldWrapper","projectSlug","proj","withProjects","EmptyValueContainer","emptyValue","emptyStringValue","FIELD_FORMATTERS","boolean","isSortable","renderFunc","field","getDynamicText","fixed","integer","number","formatFloat","percentage","formatPercentage","string","isUrl","array","SPECIAL_FIELDS","sortField","getShortEventId","trace","issue","issueID","slugs","projectIds","toString","avatarSize","userObj","email","username","ip_address","badge","hideEmail","count_unique_user","release","values","v","team_key_transaction","trend_percentage","SPECIAL_FUNCTIONS","user_misery","fieldName","userMiseryField","projectThresholdConfig","countMiserableUserField","pop","uniqueUsers","countMiserableMiseryLimit","getSortField","tableMeta","hasOwnProperty","isEquation","alias","AGGREGATIONS","startsWith","fieldType","isDurationValue","spanOperationRelativeBreakdownRenderer","eventView","sumOfSpanTime","SPAN_OP_BREAKDOWN_FIELDS","prev","curr","cumulativeSpanOpBreakdown","SPAN_OP_RELATIVE_BREAKDOWN_FIELD","orderedSpanOpsBreakdownFields","otherPercentage","sortingOnField","sorts","op","RelativeOpsBreakdown","operationName","getSpanOperationName","spanOpDuration","widthPercentage","RectangleRelativeOpsBreakdown","backgroundColor","stringToFilter","SpanOperationBreakdownFilter","filterToLocationQuery","OtherRelativeOpsBreakdown","gray100","getFieldRenderer","isAlias","isRelativeSpanOperationBreakdownField","getAggregateAlias","partial","getFieldFormatter","CONDITIONS_ARGUMENTS","label","parameters","documentation","outputType","multiPlotType","count_unique","kind","columnTypes","defaultValue","required","count_miserable","getFieldOverrides","parameter","validColumns","dataType","count_if","validColumnTypes","deniedColumns","eps","epm","failure_count","validateForNumericAggregate","sum","any","p50","p75","p95","p99","p100","percentile","avg","apdex","failure_rate","last_seen","ALIASES","tpm","tps","FieldKey","FIELDS","ID","TIMESTAMP","TIMESTAMP_TO_HOUR","TIMESTAMP_TO_DAY","CULPRIT","LOCATION","MESSAGE","PLATFORM_NAME","ENVIRONMENT","RELEASE","DIST","TITLE","EVENT_TYPE","TRANSACTION","USER","USER_ID","USER_EMAIL","USER_USERNAME","USER_IP","SDK_NAME","SDK_VERSION","HTTP_METHOD","HTTP_REFERER","HTTP_URL","OS_BUILD","OS_KERNEL_VERSION","DEVICE_NAME","DEVICE_BRAND","DEVICE_LOCALE","DEVICE_UUID","DEVICE_ARCH","DEVICE_FAMILY","DEVICE_BATTERY_LEVEL","DEVICE_ORIENTATION","DEVICE_SIMULATOR","DEVICE_ONLINE","DEVICE_CHARGING","GEO_COUNTRY_CODE","GEO_REGION","GEO_CITY","ERROR_TYPE","ERROR_VALUE","ERROR_MECHANISM","ERROR_HANDLED","ERROR_UNHANDLED","LEVEL","STACK_ABS_PATH","STACK_FILENAME","STACK_PACKAGE","STACK_MODULE","STACK_FUNCTION","STACK_IN_APP","STACK_COLNO","STACK_LINENO","STACK_STACK_LEVEL","TRANSACTION_DURATION","TRANSACTION_OP","TRANSACTION_STATUS","TRACE","TRACE_SPAN","TRACE_PARENT_SPAN","PROJECT","ISSUE","USER_DISPLAY","DEPRECATED_FIELDS","FIELD_TAGS","freeze","SEMVER_TAGS","predefined","RELEASE_ADOPTION_STAGES","EXCLUDED_TAG_KEYS","formatTagKey","WebVital","MobileVital","MEASUREMENTS","FP","FCP","LCP","FID","CLS","TTFB","RequestTime","AppStartCold","AppStartWarm","FramesTotal","FramesSlow","FramesFrozen","FramesSlowRate","FramesFrozenRate","StallCount","StallTotalTime","StallLongestTime","StallPercentage","isSpanOperationBreakdownField","TRACING_FIELDS","MEASUREMENT_PATTERN","SPAN_OP_BREAKDOWN_PATTERN","isMeasurement","measurementType","getMeasurementSlug","AGGREGATE_PATTERN","AGGREGATE_BASE","getAggregateArg","parseFunction","arguments","parseArguments","functionText","columnText","trim","args","quoted","escaped","j","EQUATION_PREFIX","EQUATION_ALIAS_PATTERN","CALCULATED_FIELD_PREFIX","isEquationAlias","maybeEquationAlias","stripEquationPrefix","replace","getEquationAliasIndex","getEquation","isAggregateEquation","isLegalEquationColumn","function","columnType","aggregateFunctionOutputType","getColumnType","generateAggregateFields","eventFields","excludeFields","functions","fields","func","param","overrides","newField","stripDerivedMetricsPrefix","explodeFieldString","isDerivedMetric","generateFieldAsString","explodeField","isAggregateField","FIELDS_DOCS","getFieldDoc","getColumnsAndAggregates","aggregates","isNumericMetrics","getAggregateFields","columns","getColumnsAndAggregatesAsStrings","aggregateFields","nonAggregateFields","fieldAliases","fieldString","aggregateOutputType","funcName","firstArg","aggregate","SESSIONS_OPERATIONS","SESSIONS_FIELDS","aggregateMultiPlotType","alignedTypes","fieldAlignment","columnName","align","maybeType","isLegalYAxisType","hasDuplicate","columnList","newColumn","Container","VersionContainer","NumberContainer","FieldDateTime","OverflowLink","FieldShortId","BarContainer","FlexContainer","UserIcon","IconUser","PERFORMANCE_URL_PARAM","TokenType","isOp","OPERATOR","isBooleanOp","toUpperCase","isParen","token","character","MutableSearch","constructor","tokensOrQuery","strTokens","queryChars","from","tokens","endOfPrevWord","quoteType","quoteEnclosed","idx","char","nextChar","isSpace","trimmedToken","splitSearchIntoTokens","tokenState","FREE_TEXT","addOp","parenMatch","paren","len","FILTER","trailingParen","addFreeText","addStringFilter","formattedTokens","escapeDoubleQuotes","shouldEscape","removeSurroundingQuotes","parseFilter","addFilterValues","escapeFilterValue","setFilterValues","removeFilter","getFilterValues","getFilterKeys","hasFilter","parensToDelete","cleanParens","alreadySeen","nextToken","toRemove","splice","removeFilterValue","freeText","copy","q","isEmpty","s","charAt","right","useLegacyStore","PageFiltersStore","WrappedComponent","WithPageFilters","isGlobalSelectionReady","usePageFilters","selectionProps","displayName","getDisplayName","SessionMetric","TransactionMetric","SESSION_ERROR","SESSION_DURATION","SESSION","SESSION_CRASH_FREE_RATE","USER_CRASH_FREE_RATE","SESSION_CRASH_RATE","USER_CRASH_RATE","SESSION_HEALTHY","USER_HEALTHY","SESSION_ABNORMAL","USER_ABNORMAL","SESSION_CRASHED","USER_CRASHED","SESSION_ERRORED","USER_ERRORED","MEASUREMENTS_FP","MEASUREMENTS_FCP","MEASUREMENTS_LCP","MEASUREMENTS_FID","MEASUREMENTS_CLS","MEASUREMENTS_TTFB","MEASUREMENTS_TTFB_REQUESTTIME","MEASUREMENTS_APP_START_COLD","MEASUREMENTS_APP_START_WARM","MEASUREMENTS_FRAMES_TOTAL","MEASUREMENTS_FRAMES_SLOW","MEASUREMENTS_FRAMES_FROZEN","MEASUREMENTS_FRAMES_SLOW_RATE","MEASUREMENTS_FRAMES_FROZEN_RATE","MEASUREMENTS_STALL_COUNT","MEASUREMENTS_STALL_TOTAL_TIME","MEASUREMENTS_STALL_LONGEST_TIME","MEASUREMENTS_STALL_PERCENTAGE","DERIVED_STATUS_METRICS_PATTERN","DerivedStatusFields","FIELD_TO_METRICS_EXPRESSION","METRICS_EXPRESSION_TO_FIELD","invert","DISABLED_SORT","TAG_SORT_DENY_LIST","SessionField","operations","count_healthy","count_abnormal","count_crashed","count_errored","crash_rate","crash_free_rate","SESSIONS_TAGS","SESSIONS_FILTER_TAGS","SESSION_STATUSES","SessionStatus","generateReleaseWidgetFieldOptions","tagKeys","fieldOptions","knownOperations","operation","FieldValueKind","tag","TEMPLATE_TABLE_COLUMN","decodeColumnOrder","useFullEquationAsKey","equations","f","pushEventViewToLocation","nextEventView","extraQuery","queryStringObject","generateQueryStringObject","generateTitle","titles","eventViewName","eventTitle","getTitle","reverse","getPrebuiltQueries","views","ALL_VIEWS","TRANSACTION_VIEWS","WEB_VITALS_VIEWS","downloadAsCsv","tableData","filename","headings","csvContent","Papa","encodedDataUrl","createElement","now","setAttribute","click","remove","ALIASED_AGGREGATES_COLUMN","getExpandedResults","additionalConditions","fieldSet","expandedColumns","exploded","aggregation","drilldownAggregate","nextView","reduceRight","newView","withDeletedColumn","withUpdatedColumn","clone","parsedQuery","conditions","assign","specialKeys","dataKey","shouldQuote","nextValue","tags","tagIndex","findIndex","tagValue","generateAdditionalConditions","generateExpandedConditions","generateFieldOptions","measurementKeys","spanOperationBreakdownKeys","aggregations","fieldKeys","ellipsis","measurement","breakdownField","RENDER_PREBUILT_KEY","shouldRenderPrebuilt","shouldRender","localStorage","setRenderPrebuilt","eventViewToWidgetQuery","yAxis","displayType","widgetBuilderNewDesign","queryYAxis","orderby","DisplayType","orderbyFunction","bareOrderby","newAggregates","handleAddQueryToDashboard","router","displayModeToDisplayType","display","defaultTableFields","defaultWidgetQuery","widgetAsQueryParams","defaultTitle","source","DashboardWidgetSource","urlEncode","defaultTableColumns","limit","topEvents","TOP_N","constructAddQueryToDashboardLink","openAddToDashboardModal","widget","queries","interval","openAddDashboardWidgetModal","saved_query","SPAN_OPERATION_BREAKDOWN_FILTER_TO_FIELD","Http","Db","Browser","Resource","OPTIONS","Filter","currentFilter","onChangeFilter","menuOptions","leadingItems","OperationDot","isClearable","menuTitle","onChange","opt","triggerProps","triggerLabel","None","o","filterToField","option","filterToSearchConditions","decodeHistogramZoom","filterToColor","decodeFilterFromLocation","decodeScalar","breakdown","ZOOM_START","ZOOM_END","decodeInteger","decodedMax"],"sourceRoot":""}