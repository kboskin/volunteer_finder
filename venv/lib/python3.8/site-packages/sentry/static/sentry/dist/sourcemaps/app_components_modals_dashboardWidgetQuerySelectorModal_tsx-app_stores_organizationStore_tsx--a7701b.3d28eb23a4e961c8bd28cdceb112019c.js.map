{"version":3,"file":"chunks/app_components_modals_dashboardWidgetQuerySelectorModal_tsx-app_stores_organizationStore_tsx--a7701b.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/actions/organizationActions.tsx","webpack:///./app/components/arithmeticInput/parser.tsx","webpack:///./app/components/modals/dashboardWidgetQuerySelectorModal.tsx","webpack:///./app/stores/organizationStore.tsx","webpack:///./app/utils/analytics/coreuiAnalyticsEvents.tsx","webpack:///./app/utils/analytics/dashboardsAnalyticsEvents.tsx","webpack:///./app/utils/analytics/discoverAnalyticsEvents.tsx","webpack:///./app/utils/analytics/growthAnalyticsEvents.tsx","webpack:///./app/utils/analytics/issueAnalyticsEvents.tsx","webpack:///./app/utils/analytics/performanceAnalyticsEvents.tsx","webpack:///./app/utils/analytics/samplingAnalyticsEvents.tsx","webpack:///./app/utils/analytics/searchAnalyticsEvents.tsx","webpack:///./app/utils/analytics/settingsAnalyticsEvents.tsx","webpack:///./app/utils/analytics/workflowAnalyticsEvents.tsx","webpack:///./app/utils/useApi.tsx","webpack:///./app/utils/withApi.tsx","webpack:///./app/views/dashboardsV2/utils.tsx","webpack:///../node_modules/lodash/_charsStartIndex.js","webpack:///../node_modules/lodash/cloneDeep.js","webpack:///../node_modules/lodash/pick.js","webpack:///../node_modules/lodash/trimStart.js","webpack:///./app/components/arithmeticInput/grammar.pegjs"],"sourcesContent":["import {createActions} from 'reflux';\n\nconst OrganizationActions = createActions(['reset', 'fetchOrgError', 'update']);\n\nexport default OrganizationActions;\n","import {LocationRange} from 'pegjs';\n\nimport {t} from 'sentry/locale';\n\nimport grammar from './grammar.pegjs';\n\n// This constant should stay in sync with the backend parser\nconst MAX_OPERATORS = 10;\nconst MAX_OPERATOR_MESSAGE = t('Maximum operators exceeded');\n\ntype OperationOpts = {\n  operator: Operator;\n  rhs: Expression;\n  lhs?: Expression;\n};\n\ntype Operator = 'plus' | 'minus' | 'multiply' | 'divide';\ntype Expression = Operation | string | number | null;\n\nexport class Operation {\n  operator: Operator;\n  lhs?: Expression;\n  rhs: Expression;\n\n  constructor({operator, lhs = null, rhs}: OperationOpts) {\n    this.operator = operator;\n    this.lhs = lhs;\n    this.rhs = rhs;\n  }\n}\n\nclass Term {\n  term: Expression;\n  location: LocationRange;\n\n  constructor({term, location}: {location: LocationRange; term: Expression}) {\n    this.term = term;\n    this.location = location;\n  }\n}\n\nexport class TokenConverter {\n  numOperations: number;\n  errors: Array<string>;\n  fields: Array<Term>;\n  functions: Array<Term>;\n\n  constructor() {\n    this.numOperations = 0;\n    this.errors = [];\n    this.fields = [];\n    this.functions = [];\n  }\n\n  tokenTerm = (maybeFactor: Expression, remainingAdds: Array<Operation>): Expression => {\n    if (remainingAdds.length > 0) {\n      remainingAdds[0].lhs = maybeFactor;\n      return flatten(remainingAdds);\n    }\n    return maybeFactor;\n  };\n\n  tokenOperation = (operator: Operator, rhs: Expression): Operation => {\n    this.numOperations += 1;\n    if (\n      this.numOperations > MAX_OPERATORS &&\n      !this.errors.includes(MAX_OPERATOR_MESSAGE)\n    ) {\n      this.errors.push(MAX_OPERATOR_MESSAGE);\n    }\n    if (operator === 'divide' && rhs === '0') {\n      this.errors.push(t('Division by 0 is not allowed'));\n    }\n    return new Operation({operator, rhs});\n  };\n\n  tokenFactor = (primary: Expression, remaining: Array<Operation>): Operation => {\n    remaining[0].lhs = primary;\n    return flatten(remaining);\n  };\n\n  tokenField = (term: Expression, location: LocationRange): Expression => {\n    const field = new Term({term, location});\n    this.fields.push(field);\n    return term;\n  };\n\n  tokenFunction = (term: Expression, location: LocationRange): Expression => {\n    const func = new Term({term, location});\n    this.functions.push(func);\n    return term;\n  };\n}\n\n// Assumes an array with at least one element\nfunction flatten(remaining: Array<Operation>): Operation {\n  let term = remaining.shift();\n  while (remaining.length > 0) {\n    const nextTerm = remaining.shift();\n    if (nextTerm && term && nextTerm.lhs === null) {\n      nextTerm.lhs = term;\n    }\n    term = nextTerm;\n  }\n  // Shouldn't happen, tokenTerm checks remaining and tokenFactor should have at least 1 item\n  // This is just to help ts out\n  if (term === undefined) {\n    throw new Error('Unable to parse arithmetic');\n  }\n  return term;\n}\n\ntype parseResult = {\n  error: string | undefined;\n  result: Expression;\n  tc: TokenConverter;\n};\n\nexport function parseArithmetic(query: string): parseResult {\n  const tc = new TokenConverter();\n  try {\n    const result = grammar.parse(query, {tc});\n    return {result, error: tc.errors[0], tc};\n  } catch (error) {\n    return {result: null, error: error.message, tc};\n  }\n}\n","import {Component, Fragment} from 'react';\nimport {Link} from 'react-router';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport {ModalRenderProps} from 'sentry/actionCreators/modal';\nimport {Client} from 'sentry/api';\nimport Button from 'sentry/components/button';\nimport Input from 'sentry/components/forms/controls/input';\nimport {IconChevron, IconSearch} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, PageFilters} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport withApi from 'sentry/utils/withApi';\nimport withPageFilters from 'sentry/utils/withPageFilters';\nimport {Widget} from 'sentry/views/dashboardsV2/types';\nimport {getWidgetDiscoverUrl} from 'sentry/views/dashboardsV2/utils';\n\nexport type DashboardWidgetQuerySelectorModalOptions = {\n  organization: Organization;\n  widget: Widget;\n};\n\ntype Props = ModalRenderProps &\n  DashboardWidgetQuerySelectorModalOptions & {\n    api: Client;\n    organization: Organization;\n    selection: PageFilters;\n  };\n\nclass DashboardWidgetQuerySelectorModal extends Component<Props> {\n  renderQueries() {\n    const {organization, widget, selection} = this.props;\n    const querySearchBars = widget.queries.map((query, index) => {\n      const discoverLocation = getWidgetDiscoverUrl(\n        {\n          ...widget,\n          queries: [query],\n        },\n        selection,\n        organization\n      );\n      return (\n        <Fragment key={index}>\n          <QueryContainer>\n            <Container>\n              <SearchLabel htmlFor=\"smart-search-input\" aria-label={t('Search events')}>\n                <IconSearch />\n              </SearchLabel>\n              <StyledInput value={query.conditions} disabled />\n            </Container>\n            <Link to={discoverLocation}>\n              <OpenInDiscoverButton\n                priority=\"primary\"\n                icon={<IconChevron size=\"xs\" direction=\"right\" />}\n                onClick={() => {\n                  trackAdvancedAnalyticsEvent(\n                    'dashboards_views.query_selector.selected',\n                    {\n                      organization,\n                      widget_type: widget.displayType,\n                    }\n                  );\n                }}\n                aria-label={t('Open in Discover')}\n              />\n            </Link>\n          </QueryContainer>\n        </Fragment>\n      );\n    });\n    return querySearchBars;\n  }\n\n  render() {\n    const {Body, Header, widget} = this.props;\n    return (\n      <Fragment>\n        <Header closeButton>\n          <h4>{widget.title}</h4>\n        </Header>\n        <Body>\n          <p>\n            {t(\n              'Multiple queries were used to create this widget visualization. Which query would you like to view in Discover?'\n            )}\n          </p>\n          {this.renderQueries()}\n        </Body>\n      </Fragment>\n    );\n  }\n}\n\nconst StyledInput = styled(Input)`\n  text-overflow: ellipsis;\n  padding: 0px;\n  box-shadow: none;\n  height: auto;\n  &:disabled {\n    border: none;\n    cursor: default;\n  }\n`;\nconst QueryContainer = styled('div')`\n  display: flex;\n  margin-bottom: ${space(1)};\n`;\nconst OpenInDiscoverButton = styled(Button)`\n  margin-left: ${space(1)};\n`;\n\nconst Container = styled('div')`\n  border: 1px solid ${p => p.theme.border};\n  box-shadow: inset ${p => p.theme.dropShadowLight};\n  background: ${p => p.theme.backgroundSecondary};\n  padding: 7px ${space(1)};\n  position: relative;\n  display: grid;\n  grid-template-columns: max-content 1fr max-content;\n  gap: ${space(1)};\n  align-items: start;\n  flex-grow: 1;\n  border-radius: ${p => p.theme.borderRadius};\n`;\n\nconst SearchLabel = styled('label')`\n  display: flex;\n  padding: ${space(0.5)} 0;\n  margin: 0;\n  color: ${p => p.theme.gray300};\n`;\n\nexport const modalCss = css`\n  width: 100%;\n  max-width: 700px;\n  margin: 70px auto;\n`;\n\nexport default withApi(withPageFilters(DashboardWidgetQuerySelectorModal));\n","import {createStore} from 'reflux';\n\nimport OrganizationActions from 'sentry/actions/organizationActions';\nimport {ORGANIZATION_FETCH_ERROR_TYPES} from 'sentry/constants';\nimport {Organization} from 'sentry/types';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\nimport RequestError from 'sentry/utils/requestError/requestError';\n\nimport {CommonStoreDefinition} from './types';\n\ntype UpdateOptions = {\n  replace?: boolean;\n};\n\ntype State = {\n  dirty: boolean;\n  loading: boolean;\n  organization: Organization | null;\n  error?: RequestError | null;\n  errorType?: string | null;\n};\n\ninterface OrganizationStoreDefinition extends CommonStoreDefinition<State> {\n  get(): State;\n  init(): void;\n  onFetchOrgError(err: RequestError): void;\n  onUpdate(org: Organization, options: UpdateOptions): void;\n  reset(): void;\n}\n\nconst storeConfig: OrganizationStoreDefinition = {\n  unsubscribeListeners: [],\n\n  init() {\n    this.reset();\n    this.unsubscribeListeners.push(\n      this.listenTo(OrganizationActions.update, this.onUpdate)\n    );\n    this.unsubscribeListeners.push(this.listenTo(OrganizationActions.reset, this.reset));\n    this.unsubscribeListeners.push(\n      this.listenTo(OrganizationActions.fetchOrgError, this.onFetchOrgError)\n    );\n  },\n\n  reset() {\n    this.loading = true;\n    this.error = null;\n    this.errorType = null;\n    this.organization = null;\n    this.dirty = false;\n    this.trigger(this.get());\n  },\n\n  onUpdate(updatedOrg: Organization, {replace = false}: UpdateOptions = {}) {\n    this.loading = false;\n    this.error = null;\n    this.errorType = null;\n    this.organization = replace ? updatedOrg : {...this.organization, ...updatedOrg};\n    this.dirty = false;\n    this.trigger(this.get());\n  },\n\n  onFetchOrgError(err: RequestError) {\n    this.organization = null;\n    this.errorType = null;\n\n    switch (err?.status) {\n      case 401:\n        this.errorType = ORGANIZATION_FETCH_ERROR_TYPES.ORG_NO_ACCESS;\n        break;\n      case 404:\n        this.errorType = ORGANIZATION_FETCH_ERROR_TYPES.ORG_NOT_FOUND;\n        break;\n      default:\n    }\n    this.loading = false;\n    this.error = err;\n    this.dirty = false;\n    this.trigger(this.get());\n  },\n\n  get() {\n    return {\n      organization: this.organization,\n      error: this.error,\n      loading: this.loading,\n      errorType: this.errorType,\n      dirty: this.dirty,\n    };\n  },\n\n  getState() {\n    return this.get();\n  },\n};\n\nconst OrganizationStore = createStore(makeSafeRefluxStore(storeConfig));\n\nexport default OrganizationStore;\n","import {PinnedPageFilter} from 'sentry/types';\n\nexport type CoreUIEventParameters = {\n  'page_filters.pin_click': {\n    filter: PinnedPageFilter;\n    pin: boolean;\n  };\n};\n\ntype CoreUIAnalyticsKey = keyof CoreUIEventParameters;\n\nexport const coreUIEventMap: Record<CoreUIAnalyticsKey, string> = {\n  'page_filters.pin_click': 'Page Filters: Pin Button Clicked',\n};\n","// The add/edit widget modal is currently being ported to the widget builder full-page and\n// this will be removed once that is done.\ntype DashboardsEventParametersAddWidgetModal = {\n  'dashboards_views.add_widget_modal.change': {\n    field: string;\n    from: string;\n    value: string;\n    widget_type: string;\n  };\n  'dashboards_views.add_widget_modal.confirm': {\n    data_set: string;\n  };\n  'dashboards_views.add_widget_modal.opened': {};\n  'dashboards_views.add_widget_modal.save': {\n    data_set: string;\n  };\n  'dashboards_views.edit_widget_modal.confirm': {};\n  'dashboards_views.edit_widget_modal.opened': {};\n};\n\nconst dashboardsEventMapAddWidgetModal: Record<\n  keyof DashboardsEventParametersAddWidgetModal,\n  string | null\n> = {\n  'dashboards_views.edit_widget_modal.confirm':\n    'Dashboards2: Edit Dashboard Widget modal form submitted',\n  'dashboards_views.edit_widget_modal.opened': 'Dashboards2: Edit Widget Modal Opened',\n  'dashboards_views.add_widget_modal.opened': 'Dashboards2: Add Widget Modal opened',\n  'dashboards_views.add_widget_modal.change':\n    'Dashboards2: Field changed in Add Widget Modal',\n  'dashboards_views.add_widget_modal.confirm':\n    'Dashboards2: Add Widget to Dashboard modal form submitted',\n  'dashboards_views.add_widget_modal.save':\n    'Dashboards2: Widget saved directly to Dashboard from Add Widget to Dashboard modal',\n};\n\n// Used in the full-page widget builder\ntype DashboardsEventParametersWidgetBuilder = {\n  'dashboards_views.widget_builder.change': {\n    field: string;\n    from: string;\n    new_widget: boolean;\n    value: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_builder.opened': {\n    new_widget: boolean;\n  };\n  'dashboards_views.widget_builder.save': {\n    data_set: string;\n    new_widget: boolean;\n  };\n};\n\nconst dashboardsEventMapWidgetBuilder: Record<\n  keyof DashboardsEventParametersWidgetBuilder,\n  string | null\n> = {\n  'dashboards_views.widget_builder.change': 'Widget Builder: Field changed',\n  'dashboards_views.widget_builder.save': 'Widget Builder: Form submitted',\n  'dashboards_views.widget_builder.opened': 'Widget Builder: Page opened',\n};\n\nexport type DashboardsEventParameters = {\n  'dashboards_manage.change_sort': {\n    sort: string;\n  };\n  'dashboards_manage.create.start': {};\n  'dashboards_manage.search': {};\n  'dashboards_manage.templates.add': {\n    dashboard_id: string;\n    dashboard_title: string;\n    was_previewed: boolean;\n  };\n  'dashboards_manage.templates.preview': {\n    dashboard_id: string;\n  };\n  'dashboards_manage.templates.toggle': {\n    show_templates: boolean;\n  };\n  'dashboards_views.open_in_discover.opened': {\n    widget_type: string;\n  };\n  'dashboards_views.query_selector.opened': {\n    widget_type: string;\n  };\n  'dashboards_views.query_selector.selected': {\n    widget_type: string;\n  };\n  'dashboards_views.widget_library.add': {\n    num_widgets: number;\n  };\n  'dashboards_views.widget_library.add_widget': {\n    title: string;\n  };\n  'dashboards_views.widget_library.opened': {};\n  'dashboards_views.widget_library.switch_tab': {\n    to: string;\n  };\n  'dashboards_views.widget_viewer.edit': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.open': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.open_source': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.paginate': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.select_query': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.sort': {\n    column: string;\n    display_type: string;\n    order: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.toggle_legend': {\n    display_type: string;\n    widget_type: string;\n  };\n  'dashboards_views.widget_viewer.zoom': {\n    display_type: string;\n    widget_type: string;\n  };\n} & DashboardsEventParametersAddWidgetModal &\n  DashboardsEventParametersWidgetBuilder;\n\nexport type DashboardsEventKey = keyof DashboardsEventParameters;\n\nexport const dashboardsEventMap: Record<DashboardsEventKey, string | null> = {\n  'dashboards_views.query_selector.opened':\n    'Dashboards2: Query Selector opened for Widget',\n  'dashboards_views.query_selector.selected':\n    'Dashboards2: Query selected in Query Selector',\n  'dashboards_views.open_in_discover.opened': 'Dashboards2: Widget Opened In Discover',\n  'dashboards_views.widget_library.add': 'Dashboards2: Number of prebuilt widgets added',\n  'dashboards_views.widget_library.add_widget':\n    'Dashboards2: Title of prebuilt widget added',\n  'dashboards_views.widget_library.switch_tab':\n    'Dashboards2: Widget Library tab switched',\n  'dashboards_views.widget_library.opened': 'Dashboards2: Add Widget Library opened',\n  'dashboards_manage.search': 'Dashboards Manager: Search',\n  'dashboards_manage.change_sort': 'Dashboards Manager: Sort By Changed',\n  'dashboards_manage.create.start': 'Dashboards Manager: Dashboard Create Started',\n  'dashboards_manage.templates.toggle': 'Dashboards Manager: Template Toggle Changed',\n  'dashboards_manage.templates.add': 'Dashboards Manager: Template Added',\n  'dashboards_manage.templates.preview': 'Dashboards Manager: Template Previewed',\n  'dashboards_views.widget_viewer.edit': 'Widget Viewer: Edit Widget Modal Opened',\n  'dashboards_views.widget_viewer.open': 'Widget Viewer: Opened',\n  'dashboards_views.widget_viewer.open_source':\n    'Widget Viewer: Opened in Discover/Issues',\n  'dashboards_views.widget_viewer.paginate': 'Widget Viewer: Paginate',\n  'dashboards_views.widget_viewer.select_query': 'Widget Viewer: Query Selected',\n  'dashboards_views.widget_viewer.sort': 'Widget Viewer: Table Sorted',\n  'dashboards_views.widget_viewer.toggle_legend': 'Widget Viewer: Legend Toggled',\n  'dashboards_views.widget_viewer.zoom': 'Widget Viewer: Chart zoomed',\n  ...dashboardsEventMapAddWidgetModal,\n  ...dashboardsEventMapWidgetBuilder,\n};\n","export type DiscoverEventParameters = {\n  'discover_views.add_to_dashboard.confirm': {};\n  'discover_views.add_to_dashboard.modal_open': {saved_query: boolean};\n};\n\nexport type DiscoverEventKey = keyof DiscoverEventParameters;\n\nexport const discoverEventMap: Record<DiscoverEventKey, string | null> = {\n  'discover_views.add_to_dashboard.modal_open':\n    'Discover2: Add to Dashboard modal opened',\n  'discover_views.add_to_dashboard.confirm':\n    'Discover2: Add to Dashboard modal form submitted',\n};\n","import {PlatformKey} from 'sentry/data/platformCategories';\n\ntype MobilePromptBannerParams = {\n  matchedUserAgentString: string;\n};\n\ntype PlatformParam = {\n  platform: PlatformKey;\n};\n\ntype PlatformCategory = {\n  category: string;\n  source?: string;\n};\n\ntype PlatformPickerParam = {\n  platform_id: string;\n  source?: string;\n};\n\ntype PlatformSearchParam = {\n  num_results: number;\n  search: string;\n  source?: string;\n};\n\ntype SampleEventParam = {\n  platform?: PlatformKey;\n};\n\ntype IntegrationParam = {\n  all_selected_integrations?: string;\n  integration?: string;\n};\n\ntype InviteRequestParam = {\n  invite_status: string;\n  member_id: number;\n};\n\ntype InviteModal = {\n  modal_session: string;\n};\n\ntype SampleEvent = {\n  duration: number;\n  interval: number;\n  platform: string;\n  project_id: string;\n  retries: number;\n  source: string;\n};\n\n// define the event key to payload mappings\nexport type GrowthEventParameters = {\n  'growth.clicked_enter_sandbox': {\n    scenario: string;\n    source?: string;\n  };\n  'growth.clicked_mobile_prompt_ask_teammate': MobilePromptBannerParams;\n  'growth.clicked_mobile_prompt_setup_project': MobilePromptBannerParams;\n  'growth.clicked_sidebar': {\n    item: string;\n  };\n  'growth.demo_click_docs': {};\n  'growth.demo_click_get_started': {cta?: string};\n  'growth.demo_click_request_demo': {};\n  'growth.demo_modal_clicked_continue': {};\n  'growth.demo_modal_clicked_signup': {};\n  'growth.issue_open_in_discover_btn_clicked': {};\n  'growth.onboarding_clicked_instrument_app': {source?: string};\n  'growth.onboarding_clicked_integration_in_sidebar': {integration: string};\n  'growth.onboarding_clicked_project_in_sidebar': {platform: string};\n  'growth.onboarding_clicked_setup_integration_later': {\n    integration: string;\n    integration_index: number;\n  };\n  'growth.onboarding_clicked_setup_platform_later': PlatformParam & {\n    project_index: number;\n  };\n  'growth.onboarding_clicked_skip': {source?: string};\n  'growth.onboarding_load_choose_platform': {};\n  'growth.onboarding_quick_start_cta': SampleEventParam;\n  'growth.onboarding_quick_start_cta_integration': IntegrationParam;\n  'growth.onboarding_set_up_your_integrations': {\n    integration_count: number;\n    integrations: string;\n  };\n  'growth.onboarding_set_up_your_project': PlatformParam;\n  'growth.onboarding_set_up_your_projects': {platform_count: number; platforms: string};\n  'growth.onboarding_start_onboarding': {\n    source?: string;\n  };\n  'growth.onboarding_take_to_error': {};\n  'growth.onboarding_view_full_docs': {};\n  'growth.onboarding_view_sample_event': SampleEventParam;\n  'growth.platformpicker_category': PlatformCategory;\n  'growth.platformpicker_search': PlatformSearchParam;\n  'growth.sample_error_onboarding_link_clicked': {\n    platform?: string;\n    project_id?: string;\n  };\n  'growth.sample_transaction_docs_link_clicked': {\n    project_id: string;\n  };\n  'growth.select_platform': PlatformPickerParam;\n  'growth.submitted_mobile_prompt_ask_teammate': MobilePromptBannerParams;\n  'invite_modal.add_more': InviteModal;\n  'invite_modal.closed': InviteModal;\n  'invite_modal.invites_sent': InviteModal;\n  'invite_modal.opened': InviteModal & {\n    can_invite: boolean;\n    source?: string;\n  };\n  'invite_modal.requests_sent': InviteModal;\n  'invite_request.approved': InviteRequestParam;\n  'invite_request.denied': InviteRequestParam;\n  'member_settings_page.loaded': {\n    num_invite_requests: number;\n    num_members: number;\n  };\n  'onboarding.wizard_clicked': {\n    action: string;\n    todo_id: string;\n    todo_title: string;\n  };\n  'onboarding.wizard_opened': {};\n  'sample_event.button_viewed': {\n    project_id: string;\n    source: string;\n  };\n  'sample_event.created': SampleEvent;\n  'sample_event.failed': SampleEvent;\n  'sdk_updates.clicked': {};\n  'sdk_updates.seen': {};\n  'sdk_updates.snoozed': {};\n};\n\ntype GrowthAnalyticsKey = keyof GrowthEventParameters;\n\nexport const growthEventMap: Record<GrowthAnalyticsKey, string | null> = {\n  'growth.clicked_mobile_prompt_setup_project':\n    'Growth: Clicked Mobile Prompt Setup Project',\n  'growth.clicked_mobile_prompt_ask_teammate':\n    'Growth: Clicked Mobile Prompt Ask Teammate',\n  'growth.submitted_mobile_prompt_ask_teammate':\n    'Growth: Submitted Mobile Prompt Ask Teammate',\n  'growth.demo_click_get_started': 'Growth: Demo Click Get Started',\n  'growth.demo_click_docs': 'Growth: Demo Click Docs',\n  'growth.demo_click_request_demo': 'Growth: Demo Click Request Demo',\n  'growth.clicked_sidebar': 'Growth: Clicked Sidebar',\n  'growth.onboarding_load_choose_platform':\n    'Growth: Onboarding Load Choose Platform Page',\n  'growth.onboarding_set_up_your_project': 'Growth: Onboarding Click Set Up Your Project',\n  'growth.onboarding_set_up_your_projects':\n    'Growth: Onboarding Click Set Up Your Projects',\n  'growth.onboarding_set_up_your_integrations':\n    'Growth: Onboarding Click Set Up Your Integrations',\n  'growth.select_platform': 'Growth: Onboarding Choose Platform',\n  'growth.platformpicker_category': 'Growth: Onboarding Platform Category',\n  'growth.platformpicker_search': 'Growth: Onboarding Platform Search',\n  'growth.onboarding_start_onboarding': 'Growth: Onboarding Start Onboarding',\n  'growth.onboarding_clicked_skip': 'Growth: Onboarding Clicked Skip',\n  'growth.onboarding_take_to_error': 'Growth: Onboarding Take to Error',\n  'growth.onboarding_view_full_docs': 'Growth: Onboarding View Full Docs',\n  'growth.onboarding_view_sample_event': 'Growth: Onboarding View Sample Event',\n  'growth.onboarding_clicked_instrument_app': 'Growth: Onboarding Clicked Instrument App',\n  'growth.onboarding_clicked_setup_platform_later':\n    'Growth: Onboarding Clicked Setup Platform Later',\n  'growth.onboarding_clicked_setup_integration_later':\n    'Growth: Onboarding Clicked Setup Integration Later',\n  'growth.onboarding_quick_start_cta': 'Growth: Quick Start Onboarding CTA',\n  'growth.onboarding_quick_start_cta_integration':\n    'Growth: Quick Start Onboarding Integration CTA',\n  'invite_request.approved': 'Invite Request Approved',\n  'invite_request.denied': 'Invite Request Denied',\n  'growth.demo_modal_clicked_signup': 'Growth: Demo Modal Clicked Signup',\n  'growth.demo_modal_clicked_continue': 'Growth: Demo Modal Clicked Continue',\n  'growth.clicked_enter_sandbox': 'Growth: Clicked Enter Sandbox',\n  'growth.onboarding_clicked_project_in_sidebar': 'Growth: Clicked Project Sidebar',\n  'growth.onboarding_clicked_integration_in_sidebar':\n    'Growth: Clicked Integration Sidebar',\n  'growth.sample_transaction_docs_link_clicked':\n    'Growth: Sample Transaction Docs Link Clicked',\n  'growth.sample_error_onboarding_link_clicked':\n    'Growth: Sample Error Onboarding Link Clicked',\n  'growth.issue_open_in_discover_btn_clicked':\n    'Growth: Open in Discover Button in Issue Details clicked',\n  'member_settings_page.loaded': 'Member Settings Page Loaded',\n  'invite_modal.opened': 'Invite Modal: Opened',\n  'invite_modal.closed': 'Invite Modal: Closed',\n  'invite_modal.add_more': 'Invite Modal: Add More',\n  'invite_modal.invites_sent': 'Invite Modal: Invites Sent',\n  'invite_modal.requests_sent': 'Invite Modal: Requests Sent',\n  'sdk_updates.seen': 'SDK Updates: Seen',\n  'sdk_updates.snoozed': 'SDK Updates: Snoozed',\n  'sdk_updates.clicked': 'SDK Updates: Clicked',\n  'onboarding.wizard_opened': 'Onboarding Wizard Opened',\n  'onboarding.wizard_clicked': 'Onboarding Wizard Clicked',\n  'sample_event.button_viewed': null, // high-volume event\n  'sample_event.created': 'Sample Event Created',\n  'sample_event.failed': 'Sample Event Failed',\n};\n","type IssueStream = {\n  group_id: string;\n  tab: string;\n  was_shown_suggestion: boolean;\n};\n\nexport type IssueEventParameters = {\n  'event_cause.dismissed': {};\n  'event_cause.docs_clicked': {};\n  'event_cause.snoozed': {};\n  'event_cause.viewed': {\n    platform?: string;\n    project_id?: string;\n  };\n  'inbox_tab.issue_clicked': {\n    group_id: string;\n  };\n  'issue.search_sidebar_clicked': {};\n  'issue.shared_publicly': {};\n  'issue_error_banner.viewed': {\n    error_message: string[];\n    error_type: string[];\n    group?: string;\n    platform?: string;\n  };\n  'issue_search.failed': {\n    error: string;\n    search_source: string;\n    search_type: string;\n  };\n  'issues_stream.issue_assigned': IssueStream & {\n    assigned_type: string;\n    did_assign_suggestion: boolean;\n    assigned_suggestion_reason?: string;\n  };\n  'issues_stream.issue_clicked': IssueStream;\n  'issues_tab.viewed': {\n    num_issues: number;\n    tab: string;\n  };\n  resolve_issue: {release: string};\n  'tag.clicked': {\n    is_clickable: boolean;\n  };\n};\n\nexport type IssueEventKey = keyof IssueEventParameters;\n\nexport const issueEventMap: Record<IssueEventKey, string | null> = {\n  'event_cause.viewed': null, // send to main event store only due to high event volume\n  'event_cause.docs_clicked': 'Event Cause Docs Clicked',\n  'event_cause.snoozed': 'Event Cause Snoozed',\n  'event_cause.dismissed': 'Event Cause Dismissed',\n  'issue_error_banner.viewed': 'Issue Error Banner Viewed',\n  'issues_tab.viewed': 'Viewed Issues Tab', // high volume but send to our secondary event store anyways\n  'issue_search.failed': 'Issue Search: Failed',\n  'issue.search_sidebar_clicked': 'Issue Search Sidebar Clicked',\n  'inbox_tab.issue_clicked': 'Clicked Issue from Inbox Tab',\n  'issues_stream.issue_clicked': 'Clicked Issue from Issues Stream',\n  'issues_stream.issue_assigned': 'Assigned Issue from Issues Stream',\n  'issue.shared_publicly': 'Issue Shared Publicly',\n  resolve_issue: 'Resolve Issue',\n  'tag.clicked': 'Tag: Clicked',\n};\n","import {PlatformKey} from 'sentry/data/platformCategories';\n\ntype SampleTransactionParam = {\n  platform?: PlatformKey;\n};\n\ntype PerformanceTourParams = {\n  duration: number;\n  step: number;\n};\n\nexport type PerformanceEventParameters = {\n  'performance_views.all_events.open_in_discover': {};\n  'performance_views.create_sample_transaction': SampleTransactionParam;\n  'performance_views.landingv2.transactions.sort': {\n    direction?: string;\n    field?: string;\n  };\n  'performance_views.landingv3.batch_queries': {\n    num_collected: number;\n    num_saved: number;\n    num_sent: number;\n  };\n  'performance_views.landingv3.display_change': {\n    change_to_display: string;\n    current_display: string;\n    default_display: string;\n    is_default: boolean;\n  };\n  'performance_views.landingv3.table_pagination': {\n    direction: string;\n  };\n  'performance_views.landingv3.widget.interaction': {\n    widget_type?: string;\n  };\n  'performance_views.landingv3.widget.switch': {\n    from_default?: boolean;\n    from_widget?: string;\n    to_widget?: string;\n  };\n  'performance_views.overview.cellaction': {action?: string};\n  'performance_views.overview.navigate.summary': {};\n  'performance_views.overview.search': {};\n  'performance_views.overview.view': {\n    show_onboarding: boolean;\n  };\n  'performance_views.span_summary.change_chart': {\n    change_to_display: string;\n  };\n  'performance_views.spans.change_op': {\n    operation_name?: string;\n  };\n  'performance_views.spans.change_sort': {\n    sort_column?: string;\n  };\n  'performance_views.tags.change_tag': {\n    from_tag: string;\n    is_other_tag: boolean;\n    to_tag: string;\n  };\n  'performance_views.tags.jump_to_release': {};\n  'performance_views.team_key_transaction.set': {\n    action: string;\n  };\n  'performance_views.tour.advance': PerformanceTourParams;\n  'performance_views.tour.close': PerformanceTourParams;\n  'performance_views.tour.start': {};\n  'performance_views.trace_view.view': {};\n  'performance_views.transaction_summary.change_chart_display': {\n    from_chart: string;\n    to_chart: string;\n  };\n  'performance_views.transaction_summary.status_breakdown_click': {\n    status: string;\n  };\n  'performance_views.trends.change_duration': {\n    value: string;\n    widget_type: string;\n  };\n  'performance_views.trends.widget_interaction': {\n    widget_type: string;\n  };\n  'performance_views.trends.widget_pagination': {\n    direction: string;\n    widget_type: string;\n  };\n  'performance_views.vital_detail.view': {};\n};\n\nexport type PerformanceEventKey = keyof PerformanceEventParameters;\n\nexport const performanceEventMap: Record<PerformanceEventKey, string | null> = {\n  'performance_views.create_sample_transaction': 'Growth: Performance Sample Transaction',\n  'performance_views.tour.start': 'Performance Views: Tour Start',\n  'performance_views.tour.advance': 'Performance Views: Tour Advance',\n  'performance_views.tour.close': 'Performance Views: Tour Close',\n  'performance_views.landingv2.transactions.sort':\n    'Performance Views: Landing Transactions Sorted',\n  'performance_views.overview.navigate.summary':\n    'Performance Views: Overview view summary',\n  'performance_views.overview.cellaction': 'Performance Views: Cell Action Clicked',\n  'performance_views.landingv3.widget.interaction':\n    'Performance Views: Landing Widget Interaction',\n  'performance_views.landingv3.widget.switch':\n    'Performance Views: Landing Widget Switched',\n  'performance_views.landingv3.batch_queries':\n    'Performance Views: Landing Query Batching',\n  'performance_views.landingv3.display_change': 'Performance Views: Switch Landing Tabs',\n  'performance_views.landingv3.table_pagination':\n    'Performance Views: Landing Page Transactions Table Page Changed',\n  'performance_views.span_summary.change_chart':\n    'Performance Views: Span Summary displayed chart changed',\n  'performance_views.spans.change_op': 'Performance Views: Change span operation name',\n  'performance_views.spans.change_sort': 'Performance Views: Change span sort column',\n  'performance_views.overview.view': 'Performance Views: Transaction overview view',\n  'performance_views.overview.search': 'Performance Views: Transaction overview search',\n  'performance_views.vital_detail.view': 'Performance Views: Vital Detail viewed',\n  'performance_views.trace_view.view': 'Performance Views: Trace View viewed',\n  'performance_views.transaction_summary.change_chart_display':\n    'Performance Views: Transaction Summary chart display changed',\n  'performance_views.transaction_summary.status_breakdown_click':\n    'Performance Views: Transaction Summary status breakdown option clicked',\n  'performance_views.all_events.open_in_discover':\n    'Performance Views: All Events page open in Discover button clicked',\n  'performance_views.tags.change_tag':\n    'Performance Views: Tags Page changed selected tag',\n  'performance_views.tags.jump_to_release':\n    'Performance Views: Tags Page link to release in table clicked',\n  'performance_views.team_key_transaction.set':\n    'Performance Views: Set Team Key Transaction',\n  'performance_views.trends.widget_interaction':\n    'Performance Views: Trends Widget Interaction',\n  'performance_views.trends.widget_pagination':\n    'Performance Views: Trends Widget Page Changed',\n  'performance_views.trends.change_duration':\n    'Performance Views: Trends Widget Duration Changed',\n};\n","import {SamplingInnerName} from 'sentry/types/sampling';\n\ntype Rule = {\n  conditions: SamplingInnerName[] | string[];\n  conditions_stringified: string;\n  project_id: string;\n  sampling_rate: number | null;\n};\n\nexport type SamplingEventParameters = {\n  'sampling.settings.condition.add': {\n    conditions: SamplingInnerName[] | string[];\n    project_id: string;\n  };\n  'sampling.settings.rule.create': Rule;\n  'sampling.settings.rule.delete': Rule;\n  'sampling.settings.rule.save': Rule;\n  'sampling.settings.rule.update': Rule & {\n    old_conditions: Rule['conditions'];\n    old_conditions_stringified: string;\n    old_sampling_rate: Rule['sampling_rate'];\n  };\n  'sampling.settings.view': {project_id: string};\n};\n\ntype SamplingAnalyticsKey = keyof SamplingEventParameters;\n\nexport const samplingEventMap: Record<SamplingAnalyticsKey, string> = {\n  'sampling.settings.view': 'View Sampling Settings',\n  'sampling.settings.condition.add': 'Add Sampling Condition',\n  'sampling.settings.rule.save': 'Save Sampling Rule', // fired for both create and update\n  'sampling.settings.rule.create': 'Create Sampling Rule',\n  'sampling.settings.rule.update': 'Update Sampling Rule',\n  'sampling.settings.rule.delete': 'Delete Sampling Rule',\n};\n","type SearchEventBase = {\n  query: string;\n  search_type: string;\n  search_source?: string;\n};\n\ntype OpenEvent = {};\ntype SelectEvent = {result_type: string; source_type: string; query?: string};\ntype QueryEvent = {query: string};\ntype ProjectSelectorEvent = {path: string};\n\nexport type SearchEventParameters = {\n  'command_palette.open': OpenEvent;\n  'command_palette.query': QueryEvent;\n  'command_palette.select': SelectEvent;\n  'organization_saved_search.selected': {\n    id: number;\n    search_type: string;\n  };\n  'projectselector.clear': ProjectSelectorEvent;\n  'projectselector.direct_selection': ProjectSelectorEvent;\n  'projectselector.multi_button_clicked': ProjectSelectorEvent & {\n    button_type: 'all' | 'my';\n  };\n  'projectselector.toggle': ProjectSelectorEvent & {\n    action: 'added' | 'removed';\n  };\n  'projectselector.update': ProjectSelectorEvent & {\n    count: number;\n    multi: boolean;\n  };\n  'search.operator_autocompleted': SearchEventBase & {search_operator: string};\n  'search.searched': SearchEventBase & {search_source?: string};\n  'settings_search.open': OpenEvent;\n  'settings_search.query': QueryEvent;\n  'settings_search.select': SelectEvent;\n  'sidebar_help.open': OpenEvent;\n  'sidebar_help.query': QueryEvent;\n  'sidebar_help.select': SelectEvent;\n};\n\nexport type SearchEventKey = keyof SearchEventParameters;\n\nexport const searchEventMap: Record<SearchEventKey, string | null> = {\n  'search.searched': 'Search: Performed search',\n  'search.operator_autocompleted': 'Search: Operator Autocompleted',\n  'organization_saved_search.selected':\n    'Organization Saved Search: Selected saved search',\n  'settings_search.open': 'settings_search Open',\n  'command_palette.open': 'command_palette Open',\n  'sidebar_help.open': 'sidebar_help Open',\n  'settings_search.select': 'settings_search Select',\n  'command_palette.select': 'command_palette Select',\n  'sidebar_help.select': 'sidebar_help Select',\n  'settings_search.query': 'settings_search Query',\n  'command_palette.query': 'command_palette Query',\n  'sidebar_help.query': 'sidebar_help Query',\n  'projectselector.direct_selection': 'Project Selector: Direct Selection',\n  'projectselector.update': 'Project Selector: Update',\n  'projectselector.clear': 'Project Selector: Clear',\n  'projectselector.toggle': 'Project Selector: Toggle',\n  'projectselector.multi_button_clicked': 'Project Selector: Multi Button Clicked',\n};\n","export type SettingsEventParameters = {\n  'notification_settings.index_page_viewed': {};\n  'notification_settings.tuning_page_viewed': {\n    notification_type: string;\n  };\n  'notification_settings.updated_tuning_setting': {\n    notification_type: string;\n    tuning_field_type: string;\n  };\n};\n\nexport type SettingsEventKey = keyof SettingsEventParameters;\n\nexport const settingsEventMap: Record<SettingsEventKey, string | null> = {\n  'notification_settings.index_page_viewed': 'Notification Settings: Index Page Viewed',\n  'notification_settings.tuning_page_viewed': 'Notification Settings: Tuning Page Viewed',\n  'notification_settings.updated_tuning_setting':\n    'Notification Settings: Updated Tuning Setting',\n};\n","import type {ResolutionStatus} from 'sentry/types';\n\ntype RuleViewed = {\n  alert_type: 'issue' | 'metric';\n  project_id: string;\n};\n\ntype IssueDetailsWithAlert = {\n  group_id: number;\n  project_id: number;\n  /** The time that the alert was initially fired. */\n  alert_date?: string;\n  /** Id of the rule that triggered the alert */\n  alert_rule_id?: string;\n  /**  The type of alert notification - email/slack */\n  alert_type?: string;\n};\n\nexport type TeamInsightsEventParameters = {\n  'alert_builder.filter': {query: string; session_id?: string};\n  'alert_details.viewed': {alert_id: number};\n  'alert_rule_details.viewed': {alert: string; has_chartcuterie: string; rule_id: number};\n  'alert_rules.viewed': {sort: string};\n  'alert_stream.viewed': {};\n  'alert_wizard.option_selected': {alert_type: string};\n  'alert_wizard.option_viewed': {alert_type: string};\n  'edit_alert_rule.add_row': {\n    name: string;\n    project_id: string;\n    type: string;\n  };\n  'edit_alert_rule.viewed': RuleViewed;\n  'issue_alert_rule_details.edit_clicked': {rule_id: number};\n  'issue_alert_rule_details.viewed': {rule_id: number};\n  'issue_details.action_clicked': IssueDetailsWithAlert & {\n    action_type:\n      | 'deleted'\n      | 'mark_reviewed'\n      | 'bookmarked'\n      | 'subscribed'\n      | 'shared'\n      | 'discarded'\n      | 'open_in_discover'\n      | ResolutionStatus;\n  };\n  'issue_details.event_json_clicked': {group_id: number};\n  'issue_details.event_navigation_clicked': {button: string; project_id: number};\n  'issue_details.viewed': IssueDetailsWithAlert;\n  'new_alert_rule.viewed': RuleViewed & {\n    duplicate_rule: string;\n    session_id: string;\n    wizard_v3: string;\n  };\n  'team_insights.viewed': {};\n};\n\nexport type TeamInsightsEventKey = keyof TeamInsightsEventParameters;\n\nexport const workflowEventMap: Record<TeamInsightsEventKey, string | null> = {\n  'alert_builder.filter': 'Alert Builder: Filter',\n  'alert_details.viewed': 'Alert Details: Viewed',\n  'alert_rule_details.viewed': 'Alert Rule Details: Viewed',\n  'alert_rules.viewed': 'Alert Rules: Viewed',\n  'alert_stream.viewed': 'Alert Stream: Viewed',\n  'alert_wizard.option_selected': 'Alert Wizard: Option Selected',\n  'alert_wizard.option_viewed': 'Alert Wizard: Option Viewed',\n  'edit_alert_rule.add_row': 'Edit Alert Rule: Add Row',\n  'edit_alert_rule.viewed': 'Edit Alert Rule: Viewed',\n  'issue_alert_rule_details.edit_clicked': 'Issue Alert Rule Details: Edit Clicked',\n  'issue_alert_rule_details.viewed': 'Issue Alert Rule Details: Viewed',\n  'issue_details.action_clicked': 'Issue Details: Action Clicked',\n  'issue_details.event_json_clicked': 'Issue Details: Event JSON Clicked',\n  'issue_details.event_navigation_clicked': 'Issue Details: Event Navigation Clicked',\n  'issue_details.viewed': 'Issue Details: Viewed',\n  'new_alert_rule.viewed': 'New Alert Rule: Viewed',\n  'team_insights.viewed': 'Team Insights: Viewed',\n};\n","import {useCallback, useEffect, useRef} from 'react';\n\nimport {Client} from 'sentry/api';\n\ntype Options = {\n  /**\n   * An existing API client may be provided.\n   *\n   * This is a continent way to re-use clients and still inherit the\n   * persistInFlight configuration.\n   */\n  api?: Client;\n  /**\n   * Enabling this option will disable clearing in-flight requests when the\n   * component is unmounted.\n   *\n   * This may be useful in situations where your component needs to finish up\n   * somewhere the client was passed into some type of action creator and the\n   * component is unmounted.\n   */\n  persistInFlight?: boolean;\n};\n\n/**\n * Returns an API client that will have it's requests canceled when the owning\n * React component is unmounted (may be disabled via options).\n */\nfunction useApi({persistInFlight, api: providedApi}: Options = {}) {\n  const localApi = useRef<Client>();\n\n  // Lazily construct the client if we weren't provided with one\n  if (localApi.current === undefined && providedApi === undefined) {\n    localApi.current = new Client();\n  }\n\n  // Use the provided client if available\n  const api = providedApi ?? localApi.current!;\n\n  // Clear API calls on unmount (if persistInFlight is disabled\n  const clearOnUnmount = useCallback(() => {\n    if (!persistInFlight) {\n      api.clear();\n    }\n  }, [api, persistInFlight]);\n\n  useEffect(() => clearOnUnmount, [clearOnUnmount]);\n\n  return api;\n}\n\nexport default useApi;\n","import {Client} from 'sentry/api';\nimport getDisplayName from 'sentry/utils/getDisplayName';\nimport useApi from 'sentry/utils/useApi';\n\ntype InjectedApiProps = {\n  api: Client;\n};\n\ntype WrappedProps<P> = Omit<P, keyof InjectedApiProps> & Partial<InjectedApiProps>;\n\n/**\n * XXX: Prefer useApi if you are wrapping a Function Component!\n *\n * React Higher-Order Component (HoC) that provides \"api\" client when mounted,\n * and clears API requests when component is unmounted.\n *\n * If an `api` prop is provided when the component is invoked it will be passed\n * through.\n */\nconst withApi = <P extends InjectedApiProps>(\n  WrappedComponent: React.ComponentType<P>,\n  options: Parameters<typeof useApi>[0] = {}\n) => {\n  const WithApi: React.FC<WrappedProps<P>> = ({api: propsApi, ...props}) => {\n    const api = useApi({api: propsApi, ...options});\n\n    return <WrappedComponent {...(props as P)} api={api} />;\n  };\n\n  WithApi.displayName = `withApi(${getDisplayName(WrappedComponent)})`;\n\n  return WithApi;\n};\n\nexport default withApi;\n","import {Query} from 'history';\nimport cloneDeep from 'lodash/cloneDeep';\nimport pick from 'lodash/pick';\nimport trimStart from 'lodash/trimStart';\nimport * as qs from 'query-string';\n\nimport WidgetArea from 'sentry-images/dashboard/widget-area.svg';\nimport WidgetBar from 'sentry-images/dashboard/widget-bar.svg';\nimport WidgetBigNumber from 'sentry-images/dashboard/widget-big-number.svg';\nimport WidgetLine from 'sentry-images/dashboard/widget-line-1.svg';\nimport WidgetTable from 'sentry-images/dashboard/widget-table.svg';\nimport WidgetWorldMap from 'sentry-images/dashboard/widget-world-map.svg';\n\nimport {parseArithmetic} from 'sentry/components/arithmeticInput/parser';\nimport {\n  Fidelity,\n  getDiffInMinutes,\n  getInterval,\n  SIX_HOURS,\n  TWENTY_FOUR_HOURS,\n} from 'sentry/components/charts/utils';\nimport {Organization, PageFilters} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport {getUtcDateString, parsePeriodToHours} from 'sentry/utils/dates';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {\n  getAggregateAlias,\n  getColumnsAndAggregates,\n  isEquation,\n  stripEquationPrefix,\n} from 'sentry/utils/discover/fields';\nimport {DisplayModes} from 'sentry/utils/discover/types';\nimport {\n  DashboardDetails,\n  DisplayType,\n  Widget,\n  WidgetQuery,\n  WidgetType,\n} from 'sentry/views/dashboardsV2/types';\n\nexport type ValidationError = {\n  [key: string]: string | string[] | ValidationError[] | ValidationError;\n};\n\nexport type FlatValidationError = {\n  [key: string]: string | FlatValidationError[] | FlatValidationError;\n};\n\nexport function cloneDashboard(dashboard: DashboardDetails): DashboardDetails {\n  return cloneDeep(dashboard);\n}\n\nexport function eventViewFromWidget(\n  title: string,\n  query: WidgetQuery,\n  selection: PageFilters,\n  widgetDisplayType?: DisplayType\n): EventView {\n  const {start, end, period: statsPeriod} = selection.datetime;\n  const {projects, environments} = selection;\n\n  // World Map requires an additional column (geo.country_code) to display in discover when navigating from the widget\n  const fields =\n    widgetDisplayType === DisplayType.WORLD_MAP &&\n    !query.columns.includes('geo.country_code')\n      ? ['geo.country_code', ...query.columns, ...query.aggregates]\n      : [...query.columns, ...query.aggregates];\n  const conditions =\n    widgetDisplayType === DisplayType.WORLD_MAP &&\n    !query.conditions.includes('has:geo.country_code')\n      ? `${query.conditions} has:geo.country_code`.trim()\n      : query.conditions;\n\n  const {orderby} = query;\n  // Need to convert orderby to aggregate alias because eventView still uses aggregate alias format\n  const aggregateAliasOrderBy = orderby\n    ? `${orderby.startsWith('-') ? '-' : ''}${getAggregateAlias(trimStart(orderby, '-'))}`\n    : orderby;\n  return EventView.fromSavedQuery({\n    id: undefined,\n    name: title,\n    version: 2,\n    fields,\n    query: conditions,\n    orderby: aggregateAliasOrderBy,\n    projects,\n    range: statsPeriod ?? undefined,\n    start: start ? getUtcDateString(start) : undefined,\n    end: end ? getUtcDateString(end) : undefined,\n    environment: environments,\n  });\n}\n\nfunction coerceStringToArray(value?: string | string[] | null) {\n  return typeof value === 'string' ? [value] : value;\n}\n\nexport function constructWidgetFromQuery(query?: Query): Widget | undefined {\n  if (query) {\n    const queryNames = coerceStringToArray(query.queryNames);\n    const queryConditions = coerceStringToArray(query.queryConditions);\n    const queryFields = coerceStringToArray(query.queryFields);\n    const queries: WidgetQuery[] = [];\n    if (\n      queryConditions &&\n      queryNames &&\n      queryFields &&\n      typeof query.queryOrderby === 'string'\n    ) {\n      const {columns, aggregates} = getColumnsAndAggregates(queryFields);\n      queryConditions.forEach((condition, index) => {\n        queries.push({\n          name: queryNames[index],\n          conditions: condition,\n          fields: queryFields,\n          columns,\n          aggregates,\n          orderby: query.queryOrderby as string,\n        });\n      });\n    }\n    if (query.title && query.displayType && query.interval && queries.length > 0) {\n      const newWidget: Widget = {\n        ...(pick(query, ['title', 'displayType', 'interval']) as {\n          displayType: DisplayType;\n          interval: string;\n          title: string;\n        }),\n        widgetType: WidgetType.DISCOVER,\n        queries,\n      };\n      return newWidget;\n    }\n  }\n  return undefined;\n}\n\nexport function miniWidget(displayType: DisplayType): string {\n  switch (displayType) {\n    case DisplayType.BAR:\n      return WidgetBar;\n    case DisplayType.AREA:\n    case DisplayType.TOP_N:\n      return WidgetArea;\n    case DisplayType.BIG_NUMBER:\n      return WidgetBigNumber;\n    case DisplayType.TABLE:\n      return WidgetTable;\n    case DisplayType.WORLD_MAP:\n      return WidgetWorldMap;\n    case DisplayType.LINE:\n    default:\n      return WidgetLine;\n  }\n}\n\nexport function getWidgetInterval(\n  widget: Widget,\n  datetimeObj: Partial<PageFilters['datetime']>,\n  fidelity?: Fidelity\n): string {\n  // Don't fetch more than 66 bins as we're plotting on a small area.\n  const MAX_BIN_COUNT = 66;\n\n  // Bars charts are daily totals to aligned with discover. It also makes them\n  // usefully different from line/area charts until we expose the interval control, or remove it.\n  let interval = widget.displayType === 'bar' ? '1d' : widget.interval;\n  if (!interval) {\n    // Default to 5 minutes\n    interval = '5m';\n  }\n  const desiredPeriod = parsePeriodToHours(interval);\n  const selectedRange = getDiffInMinutes(datetimeObj);\n\n  if (fidelity) {\n    // Primarily to support lower fidelity for Release Health widgets\n    // the sort on releases and hit the metrics API endpoint.\n    interval = getInterval(datetimeObj, fidelity);\n    if (selectedRange > SIX_HOURS && selectedRange <= TWENTY_FOUR_HOURS) {\n      interval = '1h';\n    }\n    return widget.displayType === 'bar' ? '1d' : interval;\n  }\n\n  // selectedRange is in minutes, desiredPeriod is in hours\n  // convert desiredPeriod to minutes\n  if (selectedRange / (desiredPeriod * 60) > MAX_BIN_COUNT) {\n    const highInterval = getInterval(datetimeObj, 'high');\n    // Only return high fidelity interval if desired interval is higher fidelity\n    if (desiredPeriod < parsePeriodToHours(highInterval)) {\n      return highInterval;\n    }\n  }\n  return interval;\n}\n\nexport function getFieldsFromEquations(fields: string[]): string[] {\n  // Gather all fields and functions used in equations and prepend them to the provided fields\n  const termsSet: Set<string> = new Set();\n  fields.filter(isEquation).forEach(field => {\n    const parsed = parseArithmetic(stripEquationPrefix(field)).tc;\n    parsed.fields.forEach(({term}) => termsSet.add(term as string));\n    parsed.functions.forEach(({term}) => termsSet.add(term as string));\n  });\n  return Array.from(termsSet);\n}\n\nexport function getWidgetDiscoverUrl(\n  widget: Widget,\n  selection: PageFilters,\n  organization: Organization,\n  index: number = 0\n) {\n  const eventView = eventViewFromWidget(\n    widget.title,\n    widget.queries[index],\n    selection,\n    widget.displayType\n  );\n  const discoverLocation = eventView.getResultsViewUrlTarget(organization.slug);\n\n  // Pull a max of 3 valid Y-Axis from the widget\n  const yAxisOptions = eventView.getYAxisOptions().map(({value}) => value);\n  discoverLocation.query.yAxis = [\n    ...new Set(\n      widget.queries[0].aggregates.filter(aggregate => yAxisOptions.includes(aggregate))\n    ),\n  ].slice(0, 3);\n\n  // Visualization specific transforms\n  switch (widget.displayType) {\n    case DisplayType.WORLD_MAP:\n      discoverLocation.query.display = DisplayModes.WORLDMAP;\n      break;\n    case DisplayType.BAR:\n      discoverLocation.query.display = DisplayModes.BAR;\n      break;\n    case DisplayType.TOP_N:\n      discoverLocation.query.display = DisplayModes.TOP5;\n      // Last field is used as the yAxis\n      const aggregates = widget.queries[0].aggregates;\n      discoverLocation.query.yAxis = aggregates[aggregates.length - 1];\n      if (aggregates.slice(0, -1).includes(aggregates[aggregates.length - 1])) {\n        discoverLocation.query.field = aggregates.slice(0, -1);\n      }\n      break;\n    default:\n      break;\n  }\n\n  // Equation fields need to have their terms explicitly selected as columns in the discover table\n  const fields = discoverLocation.query.field;\n  const query = widget.queries[0];\n  const queryFields = defined(query.fields)\n    ? query.fields\n    : [...query.columns, ...query.aggregates];\n  const equationFields = getFieldsFromEquations(queryFields);\n  // Updates fields by adding any individual terms from equation fields as a column\n  equationFields.forEach(term => {\n    if (Array.isArray(fields) && !fields.includes(term)) {\n      fields.unshift(term);\n    }\n  });\n\n  // Construct and return the discover url\n  const discoverPath = `${discoverLocation.pathname}?${qs.stringify({\n    ...discoverLocation.query,\n  })}`;\n  return discoverPath;\n}\n\nexport function getWidgetIssueUrl(\n  widget: Widget,\n  selection: PageFilters,\n  organization: Organization\n) {\n  const {start, end, utc, period} = selection.datetime;\n  const datetime =\n    start && end\n      ? {start: getUtcDateString(start), end: getUtcDateString(end), utc}\n      : {statsPeriod: period};\n  const issuesLocation = `/organizations/${organization.slug}/issues/?${qs.stringify({\n    query: widget.queries?.[0]?.conditions,\n    sort: widget.queries?.[0]?.orderby,\n    ...datetime,\n    project: selection.projects,\n    environment: selection.environments,\n  })}`;\n  return issuesLocation;\n}\n\nexport function getWidgetReleasesUrl(\n  _widget: Widget,\n  selection: PageFilters,\n  organization: Organization\n) {\n  const {start, end, utc, period} = selection.datetime;\n  const datetime =\n    start && end\n      ? {start: getUtcDateString(start), end: getUtcDateString(end), utc}\n      : {statsPeriod: period};\n  const releasesLocation = `/organizations/${organization.slug}/releases/?${qs.stringify({\n    ...datetime,\n    project: selection.projects,\n    environment: selection.environments,\n  })}`;\n  return releasesLocation;\n}\n\nexport function flattenErrors(\n  data: ValidationError | string,\n  update: FlatValidationError\n): FlatValidationError {\n  if (typeof data === 'string') {\n    update.error = data;\n  } else {\n    Object.keys(data).forEach((key: string) => {\n      const value = data[key];\n      if (typeof value === 'string') {\n        update[key] = value;\n        return;\n      }\n      // Recurse into nested objects.\n      if (Array.isArray(value) && typeof value[0] === 'string') {\n        update[key] = value[0];\n        return;\n      }\n      if (Array.isArray(value) && typeof value[0] === 'object') {\n        (value as ValidationError[]).map(item => flattenErrors(item, update));\n      } else {\n        flattenErrors(value as ValidationError, update);\n      }\n    });\n  }\n  return update;\n}\n\nexport function getDashboardsMEPQueryParams(isMEPEnabled: boolean) {\n  return isMEPEnabled\n    ? {\n        dataset: 'metricsEnhanced',\n      }\n    : {};\n}\n\nexport function getNumEquations(possibleEquations: string[]) {\n  return possibleEquations.filter(isEquation).length;\n}\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nmodule.exports = charsStartIndex;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var baseToString = require('./_baseToString'),\n    castSlice = require('./_castSlice'),\n    charsStartIndex = require('./_charsStartIndex'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * Removes leading whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trimStart('  abc  ');\n * // => 'abc  '\n *\n * _.trimStart('-_-abc-_-', '_-');\n * // => 'abc-_-'\n */\nfunction trimStart(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrimStart, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      start = charsStartIndex(strSymbols, stringToArray(chars));\n\n  return castSlice(strSymbols, start).join('');\n}\n\nmodule.exports = trimStart;\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { term: peg$parseterm },\n      peg$startRuleFunction  = peg$parseterm,\n\n      peg$c0 = function(maybeFactor, remainingAdds) {\n          return tc.tokenTerm(maybeFactor, remainingAdds);\n        },\n      peg$c1 = function(operator, rhs) {\n          return tc.tokenOperation(operator, rhs);\n        },\n      peg$c2 = function(term) {\n          return term;\n        },\n      peg$c3 = function(primary, remaining) {\n          return tc.tokenFactor(primary, remaining);\n        },\n      peg$c4 = function(operator) {\n          return operator;\n        },\n      peg$c5 = function(primary) {\n          return primary;\n        },\n      peg$c6 = \"+\",\n      peg$c7 = peg$literalExpectation(\"+\", false),\n      peg$c8 = function() {\n          return \"plus\";\n        },\n      peg$c9 = \"-\",\n      peg$c10 = peg$literalExpectation(\"-\", false),\n      peg$c11 = function() {\n          return \"minus\";\n        },\n      peg$c12 = \"*\",\n      peg$c13 = peg$literalExpectation(\"*\", false),\n      peg$c14 = function() {\n          return \"multiply\";\n        },\n      peg$c15 = /^[\\/\\xF7]/,\n      peg$c16 = peg$classExpectation([\"/\", \"\\xF7\"], false, false),\n      peg$c17 = function() {\n          return \"divide\";\n        },\n      peg$c18 = peg$otherExpectation(\"function\"),\n      peg$c19 = function() {\n          return tc.tokenFunction(text(), location());\n        },\n      peg$c20 = peg$otherExpectation(\"number\"),\n      peg$c21 = /^[+\\-]/,\n      peg$c22 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c23 = /^[0-9]/,\n      peg$c24 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c25 = \".\",\n      peg$c26 = peg$literalExpectation(\".\", false),\n      peg$c27 = function() {\n          return text();\n        },\n      peg$c28 = peg$otherExpectation(\"field\"),\n      peg$c29 = /^[a-zA-Z_.]/,\n      peg$c30 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], \"_\", \".\"], false, false),\n      peg$c31 = function() {\n          return tc.tokenField(text(), location());\n        },\n      peg$c32 = /^[^()\\t\\n, \"]/,\n      peg$c33 = peg$classExpectation([\"(\", \")\", \"\\t\", \"\\n\", \",\", \" \", \"\\\"\"], true, false),\n      peg$c34 = \"\\\"\",\n      peg$c35 = peg$literalExpectation(\"\\\"\", false),\n      peg$c36 = \"\\\\\\\"\",\n      peg$c37 = peg$literalExpectation(\"\\\\\\\"\", false),\n      peg$c38 = /^[^\\t\\n\"]/,\n      peg$c39 = peg$classExpectation([\"\\t\", \"\\n\", \"\\\"\"], true, false),\n      peg$c40 = /^[a-zA-Z_0-9]/,\n      peg$c41 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], \"_\", [\"0\", \"9\"]], false, false),\n      peg$c42 = \",\",\n      peg$c43 = peg$literalExpectation(\",\", false),\n      peg$c44 = \"(\",\n      peg$c45 = peg$literalExpectation(\"(\", false),\n      peg$c46 = \")\",\n      peg$c47 = peg$literalExpectation(\")\", false),\n      peg$c48 = \" \",\n      peg$c49 = peg$literalExpectation(\" \", false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parseterm() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemaybe_factor();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseremaining_adds();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseremaining_adds() {\n    var s0, s1;\n\n    s0 = [];\n    s1 = peg$parseadd_sub();\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      s1 = peg$parseadd_sub();\n    }\n\n    return s0;\n  }\n\n  function peg$parseadd_sub() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseadd_sub_operator();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsemaybe_factor();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemaybe_factor() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsespaces();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefactor();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parseprimary();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c2(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefactor() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseprimary();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseremaining_muls();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c3(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseremaining_muls() {\n    var s0, s1;\n\n    s0 = [];\n    s1 = peg$parsemul_div();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsemul_div();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemul_div() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemul_div_operator();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseprimary();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseadd_sub_operator() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsespaces();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseplus();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parseminus();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c4(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemul_div_operator() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsespaces();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsemultiply();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parsedivide();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c4(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseprimary() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsespaces();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseparens();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parsenumeric_value();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parsefunction_value();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parsefield_value();\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseparens() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parseopen_paren();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseterm();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseclosed_paren();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c2(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseplus() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 43) {\n      s1 = peg$c6;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c7); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c8();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseminus() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 45) {\n      s1 = peg$c9;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c10); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c11();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsemultiply() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 42) {\n      s1 = peg$c12;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c13); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c14();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsedivide() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c15.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c16); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c17();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefunction_value() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsefunction_name();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseopen_paren();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsefunction_args();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsespaces();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseclosed_paren();\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c19();\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c18); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric_value() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (peg$c21.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c22); }\n    }\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (peg$c23.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c24); }\n      }\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c23.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c24); }\n          }\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s4 = peg$c25;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c26); }\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = [];\n          if (peg$c23.test(input.charAt(peg$currPos))) {\n            s6 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c24); }\n          }\n          while (s6 !== peg$FAILED) {\n            s5.push(s6);\n            if (peg$c23.test(input.charAt(peg$currPos))) {\n              s6 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c24); }\n            }\n          }\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c27();\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c20); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefield_value() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c29.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c30); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c29.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c30); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c31();\n    }\n    s0 = s1;\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c28); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefunction_args() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parseaggregate_param();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsespaces();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecomma();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsespaces();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parseaggregate_param();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsespaces();\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecomma();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parsespaces();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseaggregate_param();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_param() {\n    var s0;\n\n    s0 = peg$parsequoted_aggregate_param();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseraw_aggregate_param();\n    }\n\n    return s0;\n  }\n\n  function peg$parseraw_aggregate_param() {\n    var s0, s1;\n\n    s0 = [];\n    if (peg$c32.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c33); }\n    }\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (peg$c32.test(input.charAt(peg$currPos))) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c33); }\n        }\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequoted_aggregate_param() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s1 = peg$c34;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c35); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (input.substr(peg$currPos, 2) === peg$c36) {\n        s3 = peg$c36;\n        peg$currPos += 2;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s3 === peg$FAILED) {\n        if (peg$c38.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (input.substr(peg$currPos, 2) === peg$c36) {\n          s3 = peg$c36;\n          peg$currPos += 2;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c37); }\n        }\n        if (s3 === peg$FAILED) {\n          if (peg$c38.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c39); }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s3 = peg$c34;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c35); }\n        }\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefunction_name() {\n    var s0, s1;\n\n    s0 = [];\n    if (peg$c40.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c41); }\n    }\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (peg$c40.test(input.charAt(peg$currPos))) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c41); }\n        }\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c42;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c43); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseopen_paren() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s0 = peg$c44;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c45); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosed_paren() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 41) {\n      s0 = peg$c46;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c47); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsespaces() {\n    var s0, s1;\n\n    s0 = [];\n    if (input.charCodeAt(peg$currPos) === 32) {\n      s1 = peg$c48;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c49); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s1 = peg$c48;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c49); }\n      }\n    }\n\n    return s0;\n  }\n\n\n    const {tc, term} = options;\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n"],"names":["createActions","MAX_OPERATOR_MESSAGE","t","Operation","constructor","operator","lhs","rhs","this","Term","term","location","TokenConverter","maybeFactor","remainingAdds","length","flatten","numOperations","errors","includes","push","primary","remaining","field","fields","func","functions","shift","nextTerm","undefined","Error","parseArithmetic","query","tc","result","grammar","error","message","DashboardWidgetQuerySelectorModal","Component","renderQueries","organization","widget","selection","props","queries","map","index","discoverLocation","getWidgetDiscoverUrl","Fragment","QueryContainer","Container","SearchLabel","htmlFor","StyledInput","value","conditions","disabled","Link","to","OpenInDiscoverButton","priority","icon","size","direction","onClick","trackAdvancedAnalyticsEvent","widget_type","displayType","render","Body","Header","closeButton","title","Input","space","Button","p","theme","border","dropShadowLight","backgroundSecondary","borderRadius","gray300","modalCss","withApi","withPageFilters","storeConfig","unsubscribeListeners","init","reset","listenTo","OrganizationActions","onUpdate","onFetchOrgError","loading","errorType","dirty","trigger","get","updatedOrg","replace","err","status","ORGANIZATION_FETCH_ERROR_TYPES","getState","createStore","makeSafeRefluxStore","coreUIEventMap","dashboardsEventMap","discoverEventMap","growthEventMap","issueEventMap","resolve_issue","performanceEventMap","samplingEventMap","searchEventMap","settingsEventMap","workflowEventMap","persistInFlight","api","providedApi","localApi","useRef","current","Client","clearOnUnmount","useCallback","clear","useEffect","WrappedComponent","options","WithApi","propsApi","useApi","displayName","getDisplayName","cloneDashboard","dashboard","cloneDeep","eventViewFromWidget","widgetDisplayType","start","end","period","statsPeriod","datetime","projects","environments","DisplayType","columns","aggregates","trim","orderby","aggregateAliasOrderBy","startsWith","getAggregateAlias","trimStart","EventView","id","name","version","range","getUtcDateString","environment","coerceStringToArray","constructWidgetFromQuery","queryNames","queryConditions","queryFields","queryOrderby","getColumnsAndAggregates","forEach","condition","interval","pick","widgetType","WidgetType","miniWidget","WidgetBar","WidgetArea","WidgetBigNumber","WidgetTable","WidgetWorldMap","WidgetLine","getWidgetInterval","datetimeObj","fidelity","desiredPeriod","parsePeriodToHours","selectedRange","getDiffInMinutes","getInterval","SIX_HOURS","TWENTY_FOUR_HOURS","highInterval","getFieldsFromEquations","termsSet","Set","filter","isEquation","parsed","stripEquationPrefix","add","Array","from","eventView","getResultsViewUrlTarget","slug","yAxisOptions","getYAxisOptions","yAxis","aggregate","slice","display","DisplayModes","defined","equationFields","isArray","unshift","discoverPath","pathname","qs","getWidgetIssueUrl","utc","sort","project","getWidgetReleasesUrl","_widget","flattenErrors","data","update","Object","keys","key","item","getDashboardsMEPQueryParams","isMEPEnabled","dataset","getNumEquations","possibleEquations","baseIndexOf","module","exports","strSymbols","chrSymbols","baseClone","CLONE_DEEP_FLAG","basePick","flatRest","object","paths","baseToString","castSlice","charsStartIndex","stringToArray","toString","reTrimStart","string","chars","guard","join","peg$SyntaxError","expected","found","captureStackTrace","child","parent","ctor","prototype","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","i","escapedParts","parts","classEscape","inverted","any","other","description","hex","ch","charCodeAt","toUpperCase","s","j","descriptions","type","describeExpected","describeFound","SyntaxError","parse","input","peg$result","peg$FAILED","peg$startRuleFunctions","peg$parseterm","peg$startRuleFunction","peg$c1","tokenOperation","peg$c7","peg$literalExpectation","peg$c10","peg$c13","peg$c15","peg$c16","peg$classExpectation","peg$c18","peg$otherExpectation","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c26","peg$c28","peg$c29","peg$c30","peg$c32","peg$c33","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","peg$c41","peg$c43","peg$c45","peg$c47","peg$c49","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","substring","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","offset","peg$fail","s0","s1","s2","peg$parsemaybe_factor","peg$parseadd_sub","peg$parseremaining_adds","tokenTerm","peg$parsespaces","peg$parseplus","peg$parseminus","peg$parseadd_sub_operator","peg$parseprimary","peg$parsemul_div","peg$parseremaining_muls","tokenFactor","peg$parsefactor","peg$parsemultiply","test","charAt","peg$parsedivide","peg$parsemul_div_operator","peg$parseopen_paren","peg$parseclosed_paren","peg$parseparens","s3","s4","s5","s6","peg$parsenumeric_value","peg$parsefunction_name","s7","peg$parseaggregate_param","peg$parsecomma","peg$parsefunction_args","tokenFunction","peg$parsefunction_value","tokenField","peg$parsefield_value","substr","peg$parsequoted_aggregate_param","peg$parseraw_aggregate_param","peg$buildStructuredError"],"sourceRoot":""}