{"version":3,"file":"chunks/vendors-node_modules_echarts_lib_chart_map_js-node_modules_lodash_max_js.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///../node_modules/zrender/lib/tool/parseSVG.js","webpack:///../node_modules/zrender/lib/tool/parseXML.js","webpack:///../node_modules/echarts/lib/coord/geo/fix/nanhai.js","webpack:///../node_modules/echarts/lib/coord/geo/GeoSVGResource.js","webpack:///../node_modules/echarts/lib/coord/geo/fix/textCoord.js","webpack:///../node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","webpack:///../node_modules/echarts/lib/coord/geo/GeoJSONResource.js","webpack:///../node_modules/echarts/lib/coord/geo/geoSourceManager.js","webpack:///../node_modules/echarts/lib/component/helper/MapDraw.js","webpack:///../node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///../node_modules/echarts/lib/chart/map/MapView.js","webpack:///../node_modules/echarts/lib/chart/map/MapSeries.js","webpack:///../node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","webpack:///../node_modules/echarts/lib/chart/map/mapDataStatistic.js","webpack:///../node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack:///../node_modules/echarts/lib/coord/View.js","webpack:///../node_modules/echarts/lib/coord/geo/Geo.js","webpack:///../node_modules/echarts/lib/coord/geo/geoCreator.js","webpack:///../node_modules/echarts/lib/coord/geo/GeoModel.js","webpack:///../node_modules/echarts/lib/action/roamHelper.js","webpack:///../node_modules/echarts/lib/component/geo/GeoView.js","webpack:///../node_modules/echarts/lib/component/geo/install.js","webpack:///../node_modules/echarts/lib/chart/map.js","webpack:///../node_modules/echarts/lib/chart/map/install.js","webpack:///../node_modules/lodash/_baseExtremum.js","webpack:///../node_modules/lodash/_baseGt.js","webpack:///../node_modules/lodash/max.js"],"sourcesContent":["import Group from '../graphic/Group.js';\nimport ZRImage from '../graphic/Image.js';\nimport Circle from '../graphic/shape/Circle.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Ellipse from '../graphic/shape/Ellipse.js';\nimport Line from '../graphic/shape/Line.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Polyline from '../graphic/shape/Polyline.js';\nimport * as matrix from '../core/matrix.js';\nimport { createFromString } from './path.js';\nimport { defaults, trim, each, map, keys, hasOwn } from '../core/util.js';\nimport LinearGradient from '../graphic/LinearGradient.js';\nimport RadialGradient from '../graphic/RadialGradient.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { parseXML } from './parseXML.js';\n;\nvar nodeParsers;\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP = {\n    'fill': 'fill',\n    'stroke': 'stroke',\n    'stroke-width': 'lineWidth',\n    'opacity': 'opacity',\n    'fill-opacity': 'fillOpacity',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-dasharray': 'lineDash',\n    'stroke-dashoffset': 'lineDashOffset',\n    'stroke-linecap': 'lineCap',\n    'stroke-linejoin': 'lineJoin',\n    'stroke-miterlimit': 'miterLimit',\n    'font-family': 'fontFamily',\n    'font-size': 'fontSize',\n    'font-style': 'fontStyle',\n    'font-weight': 'fontWeight',\n    'text-anchor': 'textAlign',\n    'visibility': 'visibility',\n    'display': 'display'\n};\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS = keys(INHERITABLE_STYLE_ATTRIBUTES_MAP);\nvar SELF_STYLE_ATTRIBUTES_MAP = {\n    'alignment-baseline': 'textBaseline',\n    'stop-color': 'stopColor'\n};\nvar SELF_STYLE_ATTRIBUTES_MAP_KEYS = keys(SELF_STYLE_ATTRIBUTES_MAP);\nvar SVGParser = (function () {\n    function SVGParser() {\n        this._defs = {};\n        this._root = null;\n    }\n    SVGParser.prototype.parse = function (xml, opt) {\n        opt = opt || {};\n        var svg = parseXML(xml);\n        if (process.env.NODE_ENV !== 'production') {\n            if (!svg) {\n                throw new Error('Illegal svg');\n            }\n        }\n        this._defsUsePending = [];\n        var root = new Group();\n        this._root = root;\n        var named = [];\n        var viewBox = svg.getAttribute('viewBox') || '';\n        var width = parseFloat((svg.getAttribute('width') || opt.width));\n        var height = parseFloat((svg.getAttribute('height') || opt.height));\n        isNaN(width) && (width = null);\n        isNaN(height) && (height = null);\n        parseAttributes(svg, root, null, true, false);\n        var child = svg.firstChild;\n        while (child) {\n            this._parseNode(child, root, named, null, false, false);\n            child = child.nextSibling;\n        }\n        applyDefs(this._defs, this._defsUsePending);\n        this._defsUsePending = [];\n        var viewBoxRect;\n        var viewBoxTransform;\n        if (viewBox) {\n            var viewBoxArr = splitNumberSequence(viewBox);\n            if (viewBoxArr.length >= 4) {\n                viewBoxRect = {\n                    x: parseFloat((viewBoxArr[0] || 0)),\n                    y: parseFloat((viewBoxArr[1] || 0)),\n                    width: parseFloat(viewBoxArr[2]),\n                    height: parseFloat(viewBoxArr[3])\n                };\n            }\n        }\n        if (viewBoxRect && width != null && height != null) {\n            viewBoxTransform = makeViewBoxTransform(viewBoxRect, { x: 0, y: 0, width: width, height: height });\n            if (!opt.ignoreViewBox) {\n                var elRoot = root;\n                root = new Group();\n                root.add(elRoot);\n                elRoot.scaleX = elRoot.scaleY = viewBoxTransform.scale;\n                elRoot.x = viewBoxTransform.x;\n                elRoot.y = viewBoxTransform.y;\n            }\n        }\n        if (!opt.ignoreRootClip && width != null && height != null) {\n            root.setClipPath(new Rect({\n                shape: { x: 0, y: 0, width: width, height: height }\n            }));\n        }\n        return {\n            root: root,\n            width: width,\n            height: height,\n            viewBoxRect: viewBoxRect,\n            viewBoxTransform: viewBoxTransform,\n            named: named\n        };\n    };\n    SVGParser.prototype._parseNode = function (xmlNode, parentGroup, named, namedFrom, isInDefs, isInText) {\n        var nodeName = xmlNode.nodeName.toLowerCase();\n        var el;\n        var namedFromForSub = namedFrom;\n        if (nodeName === 'defs') {\n            isInDefs = true;\n        }\n        if (nodeName === 'text') {\n            isInText = true;\n        }\n        if (nodeName === 'defs' || nodeName === 'switch') {\n            el = parentGroup;\n        }\n        else {\n            if (!isInDefs) {\n                var parser_1 = nodeParsers[nodeName];\n                if (parser_1 && hasOwn(nodeParsers, nodeName)) {\n                    el = parser_1.call(this, xmlNode, parentGroup);\n                    var nameAttr = xmlNode.getAttribute('name');\n                    if (nameAttr) {\n                        var newNamed = {\n                            name: nameAttr,\n                            namedFrom: null,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        };\n                        named.push(newNamed);\n                        if (nodeName === 'g') {\n                            namedFromForSub = newNamed;\n                        }\n                    }\n                    else if (namedFrom) {\n                        named.push({\n                            name: namedFrom.name,\n                            namedFrom: namedFrom,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        });\n                    }\n                    parentGroup.add(el);\n                }\n            }\n            var parser = paintServerParsers[nodeName];\n            if (parser && hasOwn(paintServerParsers, nodeName)) {\n                var def = parser.call(this, xmlNode);\n                var id = xmlNode.getAttribute('id');\n                if (id) {\n                    this._defs[id] = def;\n                }\n            }\n        }\n        if (el && el.isGroup) {\n            var child = xmlNode.firstChild;\n            while (child) {\n                if (child.nodeType === 1) {\n                    this._parseNode(child, el, named, namedFromForSub, isInDefs, isInText);\n                }\n                else if (child.nodeType === 3 && isInText) {\n                    this._parseText(child, el);\n                }\n                child = child.nextSibling;\n            }\n        }\n    };\n    SVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n        var text = new TSpan({\n            style: {\n                text: xmlNode.textContent\n            },\n            silent: true,\n            x: this._textX || 0,\n            y: this._textY || 0\n        });\n        inheritStyle(parentGroup, text);\n        parseAttributes(xmlNode, text, this._defsUsePending, false, false);\n        applyTextAlignment(text, parentGroup);\n        var textStyle = text.style;\n        var fontSize = textStyle.fontSize;\n        if (fontSize && fontSize < 9) {\n            textStyle.fontSize = 9;\n            text.scaleX *= fontSize / 9;\n            text.scaleY *= fontSize / 9;\n        }\n        var font = (textStyle.fontSize || textStyle.fontFamily) && [\n            textStyle.fontStyle,\n            textStyle.fontWeight,\n            (textStyle.fontSize || 12) + 'px',\n            textStyle.fontFamily || 'sans-serif'\n        ].join(' ');\n        textStyle.font = font;\n        var rect = text.getBoundingRect();\n        this._textX += rect.width;\n        parentGroup.add(text);\n        return text;\n    };\n    SVGParser.internalField = (function () {\n        nodeParsers = {\n            'g': function (xmlNode, parentGroup) {\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, false);\n                return g;\n            },\n            'rect': function (xmlNode, parentGroup) {\n                var rect = new Rect();\n                inheritStyle(parentGroup, rect);\n                parseAttributes(xmlNode, rect, this._defsUsePending, false, false);\n                rect.setShape({\n                    x: parseFloat(xmlNode.getAttribute('x') || '0'),\n                    y: parseFloat(xmlNode.getAttribute('y') || '0'),\n                    width: parseFloat(xmlNode.getAttribute('width') || '0'),\n                    height: parseFloat(xmlNode.getAttribute('height') || '0')\n                });\n                rect.silent = true;\n                return rect;\n            },\n            'circle': function (xmlNode, parentGroup) {\n                var circle = new Circle();\n                inheritStyle(parentGroup, circle);\n                parseAttributes(xmlNode, circle, this._defsUsePending, false, false);\n                circle.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    r: parseFloat(xmlNode.getAttribute('r') || '0')\n                });\n                circle.silent = true;\n                return circle;\n            },\n            'line': function (xmlNode, parentGroup) {\n                var line = new Line();\n                inheritStyle(parentGroup, line);\n                parseAttributes(xmlNode, line, this._defsUsePending, false, false);\n                line.setShape({\n                    x1: parseFloat(xmlNode.getAttribute('x1') || '0'),\n                    y1: parseFloat(xmlNode.getAttribute('y1') || '0'),\n                    x2: parseFloat(xmlNode.getAttribute('x2') || '0'),\n                    y2: parseFloat(xmlNode.getAttribute('y2') || '0')\n                });\n                line.silent = true;\n                return line;\n            },\n            'ellipse': function (xmlNode, parentGroup) {\n                var ellipse = new Ellipse();\n                inheritStyle(parentGroup, ellipse);\n                parseAttributes(xmlNode, ellipse, this._defsUsePending, false, false);\n                ellipse.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    rx: parseFloat(xmlNode.getAttribute('rx') || '0'),\n                    ry: parseFloat(xmlNode.getAttribute('ry') || '0')\n                });\n                ellipse.silent = true;\n                return ellipse;\n            },\n            'polygon': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polygon = new Polygon({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polygon);\n                parseAttributes(xmlNode, polygon, this._defsUsePending, false, false);\n                return polygon;\n            },\n            'polyline': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polyline = new Polyline({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polyline);\n                parseAttributes(xmlNode, polyline, this._defsUsePending, false, false);\n                return polyline;\n            },\n            'image': function (xmlNode, parentGroup) {\n                var img = new ZRImage();\n                inheritStyle(parentGroup, img);\n                parseAttributes(xmlNode, img, this._defsUsePending, false, false);\n                img.setStyle({\n                    image: xmlNode.getAttribute('xlink:href') || xmlNode.getAttribute('href'),\n                    x: +xmlNode.getAttribute('x'),\n                    y: +xmlNode.getAttribute('y'),\n                    width: +xmlNode.getAttribute('width'),\n                    height: +xmlNode.getAttribute('height')\n                });\n                img.silent = true;\n                return img;\n            },\n            'text': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x') || '0';\n                var y = xmlNode.getAttribute('y') || '0';\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                this._textX = parseFloat(x) + parseFloat(dx);\n                this._textY = parseFloat(y) + parseFloat(dy);\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                return g;\n            },\n            'tspan': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x');\n                var y = xmlNode.getAttribute('y');\n                if (x != null) {\n                    this._textX = parseFloat(x);\n                }\n                if (y != null) {\n                    this._textY = parseFloat(y);\n                }\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                this._textX += parseFloat(dx);\n                this._textY += parseFloat(dy);\n                return g;\n            },\n            'path': function (xmlNode, parentGroup) {\n                var d = xmlNode.getAttribute('d') || '';\n                var path = createFromString(d);\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defsUsePending, false, false);\n                path.silent = true;\n                return path;\n            }\n        };\n    })();\n    return SVGParser;\n}());\nvar paintServerParsers = {\n    'lineargradient': function (xmlNode) {\n        var x1 = parseInt(xmlNode.getAttribute('x1') || '0', 10);\n        var y1 = parseInt(xmlNode.getAttribute('y1') || '0', 10);\n        var x2 = parseInt(xmlNode.getAttribute('x2') || '10', 10);\n        var y2 = parseInt(xmlNode.getAttribute('y2') || '0', 10);\n        var gradient = new LinearGradient(x1, y1, x2, y2);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    },\n    'radialgradient': function (xmlNode) {\n        var cx = parseInt(xmlNode.getAttribute('cx') || '0', 10);\n        var cy = parseInt(xmlNode.getAttribute('cy') || '0', 10);\n        var r = parseInt(xmlNode.getAttribute('r') || '0', 10);\n        var gradient = new RadialGradient(cx, cy, r);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    }\n};\nfunction parsePaintServerUnit(xmlNode, gradient) {\n    var gradientUnits = xmlNode.getAttribute('gradientUnits');\n    if (gradientUnits === 'userSpaceOnUse') {\n        gradient.global = true;\n    }\n}\nfunction parseGradientColorStops(xmlNode, gradient) {\n    var stop = xmlNode.firstChild;\n    while (stop) {\n        if (stop.nodeType === 1\n            && stop.nodeName.toLocaleLowerCase() === 'stop') {\n            var offsetStr = stop.getAttribute('offset');\n            var offset = void 0;\n            if (offsetStr && offsetStr.indexOf('%') > 0) {\n                offset = parseInt(offsetStr, 10) / 100;\n            }\n            else if (offsetStr) {\n                offset = parseFloat(offsetStr);\n            }\n            else {\n                offset = 0;\n            }\n            var styleVals = {};\n            parseInlineStyle(stop, styleVals, styleVals);\n            var stopColor = styleVals.stopColor\n                || stop.getAttribute('stop-color')\n                || '#000000';\n            gradient.colorStops.push({\n                offset: offset,\n                color: stopColor\n            });\n        }\n        stop = stop.nextSibling;\n    }\n}\nfunction inheritStyle(parent, child) {\n    if (parent && parent.__inheritedStyle) {\n        if (!child.__inheritedStyle) {\n            child.__inheritedStyle = {};\n        }\n        defaults(child.__inheritedStyle, parent.__inheritedStyle);\n    }\n}\nfunction parsePoints(pointsString) {\n    var list = splitNumberSequence(pointsString);\n    var points = [];\n    for (var i = 0; i < list.length; i += 2) {\n        var x = parseFloat(list[i]);\n        var y = parseFloat(list[i + 1]);\n        points.push([x, y]);\n    }\n    return points;\n}\nfunction parseAttributes(xmlNode, el, defsUsePending, onlyInlineStyle, isTextGroup) {\n    var disp = el;\n    var inheritedStyle = disp.__inheritedStyle = disp.__inheritedStyle || {};\n    var selfStyle = {};\n    if (xmlNode.nodeType === 1) {\n        parseTransformAttribute(xmlNode, el);\n        parseInlineStyle(xmlNode, inheritedStyle, selfStyle);\n        if (!onlyInlineStyle) {\n            parseAttributeStyle(xmlNode, inheritedStyle, selfStyle);\n        }\n    }\n    disp.style = disp.style || {};\n    if (inheritedStyle.fill != null) {\n        disp.style.fill = getFillStrokeStyle(disp, 'fill', inheritedStyle.fill, defsUsePending);\n    }\n    if (inheritedStyle.stroke != null) {\n        disp.style.stroke = getFillStrokeStyle(disp, 'stroke', inheritedStyle.stroke, defsUsePending);\n    }\n    each([\n        'lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = parseFloat(inheritedStyle[propName]);\n        }\n    });\n    each([\n        'lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = inheritedStyle[propName];\n        }\n    });\n    if (isTextGroup) {\n        disp.__selfStyle = selfStyle;\n    }\n    if (inheritedStyle.lineDash) {\n        disp.style.lineDash = map(splitNumberSequence(inheritedStyle.lineDash), function (str) {\n            return parseFloat(str);\n        });\n    }\n    if (inheritedStyle.visibility === 'hidden' || inheritedStyle.visibility === 'collapse') {\n        disp.invisible = true;\n    }\n    if (inheritedStyle.display === 'none') {\n        disp.ignore = true;\n    }\n}\nfunction applyTextAlignment(text, parentGroup) {\n    var parentSelfStyle = parentGroup.__selfStyle;\n    if (parentSelfStyle) {\n        var textBaseline = parentSelfStyle.textBaseline;\n        var zrTextBaseline = textBaseline;\n        if (!textBaseline || textBaseline === 'auto') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'baseline') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'before-edge' || textBaseline === 'text-before-edge') {\n            zrTextBaseline = 'top';\n        }\n        else if (textBaseline === 'after-edge' || textBaseline === 'text-after-edge') {\n            zrTextBaseline = 'bottom';\n        }\n        else if (textBaseline === 'central' || textBaseline === 'mathematical') {\n            zrTextBaseline = 'middle';\n        }\n        text.style.textBaseline = zrTextBaseline;\n    }\n    var parentInheritedStyle = parentGroup.__inheritedStyle;\n    if (parentInheritedStyle) {\n        var textAlign = parentInheritedStyle.textAlign;\n        var zrTextAlign = textAlign;\n        if (textAlign) {\n            if (textAlign === 'middle') {\n                zrTextAlign = 'center';\n            }\n            text.style.textAlign = zrTextAlign;\n        }\n    }\n}\nvar urlRegex = /^url\\(\\s*#(.*?)\\)/;\nfunction getFillStrokeStyle(el, method, str, defsUsePending) {\n    var urlMatch = str && str.match(urlRegex);\n    if (urlMatch) {\n        var url = trim(urlMatch[1]);\n        defsUsePending.push([el, method, url]);\n        return;\n    }\n    if (str === 'none') {\n        str = null;\n    }\n    return str;\n}\nfunction applyDefs(defs, defsUsePending) {\n    for (var i = 0; i < defsUsePending.length; i++) {\n        var item = defsUsePending[i];\n        item[0].style[item[1]] = defs[item[2]];\n    }\n}\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction splitNumberSequence(rawStr) {\n    return rawStr.match(numberReg) || [];\n}\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.eE,]*)\\)/g;\nvar DEGREE_TO_ANGLE = Math.PI / 180;\nfunction parseTransformAttribute(xmlNode, node) {\n    var transform = xmlNode.getAttribute('transform');\n    if (transform) {\n        transform = transform.replace(/,/g, ' ');\n        var transformOps_1 = [];\n        var mt = null;\n        transform.replace(transformRegex, function (str, type, value) {\n            transformOps_1.push(type, value);\n            return '';\n        });\n        for (var i = transformOps_1.length - 1; i > 0; i -= 2) {\n            var value = transformOps_1[i];\n            var type = transformOps_1[i - 1];\n            var valueArr = splitNumberSequence(value);\n            mt = mt || matrix.create();\n            switch (type) {\n                case 'translate':\n                    matrix.translate(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || '0')]);\n                    break;\n                case 'scale':\n                    matrix.scale(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || valueArr[0])]);\n                    break;\n                case 'rotate':\n                    matrix.rotate(mt, mt, -parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    break;\n                case 'skewX':\n                    var sx = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, 0, sx, 1, 0, 0], mt);\n                    break;\n                case 'skewY':\n                    var sy = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, sy, 0, 1, 0, 0], mt);\n                    break;\n                case 'matrix':\n                    mt[0] = parseFloat(valueArr[0]);\n                    mt[1] = parseFloat(valueArr[1]);\n                    mt[2] = parseFloat(valueArr[2]);\n                    mt[3] = parseFloat(valueArr[3]);\n                    mt[4] = parseFloat(valueArr[4]);\n                    mt[5] = parseFloat(valueArr[5]);\n                    break;\n            }\n        }\n        node.setLocalTransform(mt);\n    }\n}\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\nfunction parseInlineStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    var style = xmlNode.getAttribute('style');\n    if (!style) {\n        return;\n    }\n    styleRegex.lastIndex = 0;\n    var styleRegResult;\n    while ((styleRegResult = styleRegex.exec(style)) != null) {\n        var svgStlAttr = styleRegResult[1];\n        var zrInheritableStlAttr = hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? INHERITABLE_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrInheritableStlAttr) {\n            inheritableStyleResult[zrInheritableStlAttr] = styleRegResult[2];\n        }\n        var zrSelfStlAttr = hasOwn(SELF_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? SELF_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrSelfStlAttr) {\n            selfStyleResult[zrSelfStlAttr] = styleRegResult[2];\n        }\n    }\n}\nfunction parseAttributeStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    for (var i = 0; i < INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            inheritableStyleResult[INHERITABLE_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n    for (var i = 0; i < SELF_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = SELF_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            selfStyleResult[SELF_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n}\nexport function makeViewBoxTransform(viewBoxRect, boundingRect) {\n    var scaleX = boundingRect.width / viewBoxRect.width;\n    var scaleY = boundingRect.height / viewBoxRect.height;\n    var scale = Math.min(scaleX, scaleY);\n    return {\n        scale: scale,\n        x: -(viewBoxRect.x + viewBoxRect.width / 2) * scale + (boundingRect.x + boundingRect.width / 2),\n        y: -(viewBoxRect.y + viewBoxRect.height / 2) * scale + (boundingRect.y + boundingRect.height / 2)\n    };\n}\nexport function parseSVG(xml, opt) {\n    var parser = new SVGParser();\n    return parser.parse(xml, opt);\n}\nexport { parseXML };\n","import { isString } from '../core/util.js';\nexport function parseXML(svg) {\n    if (isString(svg)) {\n        var parser = new DOMParser();\n        svg = parser.parseFromString(svg, 'text/xml');\n    }\n    var svgNode = svg;\n    if (svgNode.nodeType === 9) {\n        svgNode = svgNode.firstChild;\n    }\n    while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\n        svgNode = svgNode.nextSibling;\n    }\n    return svgNode;\n}\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for 南海诸岛\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { GeoJSONRegion } from '../Region.js';\nvar geoCoord = [126, 25];\nvar nanhaiName = '南海诸岛';\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\n\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\n\nexport default function fixNanhai(mapType, regions) {\n  if (mapType === 'china') {\n    for (var i = 0; i < regions.length; i++) {\n      // Already exists.\n      if (regions[i].name === nanhaiName) {\n        return;\n      }\n    }\n\n    regions.push(new GeoJSONRegion(nanhaiName, zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseSVG, makeViewBoxTransform } from 'zrender/lib/tool/parseSVG.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport { assert, createHashMap, each } from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parseXML } from 'zrender/lib/tool/parseXML.js';\nimport { GeoSVGRegion } from './Region.js';\n/**\n * \"region available\" means that: enable users to set attribute `name=\"xxx\"` on those tags\n * to make it be a region.\n * 1. region styles and its label styles can be defined in echarts opton:\n * ```js\n * geo: {\n *     regions: [{\n *         name: 'xxx',\n *         itemStyle: { ... },\n *         label: { ... }\n *     }, {\n *         ...\n *     },\n *     ...]\n * };\n * ```\n * 2. name can be duplicated in different SVG tag. All of the tags with the same name share\n * a region option. For exampel if there are two <path> representing two lung lobes. They have\n * no common parents but both of them need to display label \"lung\" inside.\n */\n\nvar REGION_AVAILABLE_SVG_TAG_MAP = createHashMap(['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path', // <text> <tspan> are also enabled becuase some SVG might paint text itself,\n// but still need to trigger events or tooltip.\n'text', 'tspan', // <g> is also enabled because this case: if multiple tags share one name\n// and need label displayed, every tags will display the name, which is not\n// expected. So we can put them into a <g name=\"xxx\">. Thereby only one label\n// displayed and located based on the bounding rect of the <g>.\n'g']);\n\nvar GeoSVGResource =\n/** @class */\nfunction () {\n  function GeoSVGResource(mapName, svg) {\n    this.type = 'geoSVG'; // All used graphics. key: hostKey, value: root\n\n    this._usedGraphicMap = createHashMap(); // All unused graphics.\n\n    this._freedGraphics = [];\n    this._mapName = mapName; // Only perform parse to XML object here, which might be time\n    // consiming for large SVG.\n    // Although convert XML to zrender element is also time consiming,\n    // if we do it here, the clone of zrender elements has to be\n    // required. So we do it once for each geo instance, util real\n    // performance issues call for optimizing it.\n\n    this._parsedXML = parseXML(svg);\n  }\n\n  GeoSVGResource.prototype.load = function ()\n  /* nameMap: NameMap */\n  {\n    // In the \"load\" stage, graphic need to be built to\n    // get boundingRect for geo coordinate system.\n    var firstGraphic = this._firstGraphic; // Create the return data structure only when first graphic created.\n    // Because they will be used in geo coordinate system update stage,\n    // and `regions` will be mounted at `geo` coordinate system,\n    // in which there is no \"view\" info, so that it should better not to\n    // make references to graphic elements.\n\n    if (!firstGraphic) {\n      firstGraphic = this._firstGraphic = this._buildGraphic(this._parsedXML);\n\n      this._freedGraphics.push(firstGraphic);\n\n      this._boundingRect = this._firstGraphic.boundingRect.clone(); // PENDING: `nameMap` will not be supported until some real requirement come.\n      // if (nameMap) {\n      //     named = applyNameMap(named, nameMap);\n      // }\n\n      var _a = createRegions(firstGraphic.named),\n          regions = _a.regions,\n          regionsMap = _a.regionsMap;\n\n      this._regions = regions;\n      this._regionsMap = regionsMap;\n    }\n\n    return {\n      boundingRect: this._boundingRect,\n      regions: this._regions,\n      regionsMap: this._regionsMap\n    };\n  };\n\n  GeoSVGResource.prototype._buildGraphic = function (svgXML) {\n    var result;\n    var rootFromParse;\n\n    try {\n      result = svgXML && parseSVG(svgXML, {\n        ignoreViewBox: true,\n        ignoreRootClip: true\n      }) || {};\n      rootFromParse = result.root;\n      assert(rootFromParse != null);\n    } catch (e) {\n      throw new Error('Invalid svg format\\n' + e.message);\n    } // Note: we keep the covenant that the root has no transform. So always add an extra root.\n\n\n    var root = new Group();\n    root.add(rootFromParse);\n    root.isGeoSVGGraphicRoot = true; // [THE_RULE_OF_VIEWPORT_AND_VIEWBOX]\n    //\n    // Consider: `<svg width=\"...\" height=\"...\" viewBox=\"...\">`\n    // - the `width/height` we call it `svgWidth/svgHeight` for short.\n    // - `(0, 0, svgWidth, svgHeight)` defines the viewport of the SVG, or say,\n    //   \"viewport boundingRect\", or `boundingRect` for short.\n    // - `viewBox` defines the transform from the real content ot the viewport.\n    //   `viewBox` has the same unit as the content of SVG.\n    //   If `viewBox` exists, a transform is defined, so the unit of `svgWidth/svgHeight` become\n    //   different from the content of SVG. Otherwise, they are the same.\n    //\n    // If both `svgWidth/svgHeight/viewBox` are specified in a SVG file, the transform rule will be:\n    // 0. `boundingRect` is `(0, 0, svgWidth, svgHeight)`. Set it to Geo['_rect'] (View['_rect']).\n    // 1. Make a transform from `viewBox` to `boundingRect`.\n    //    Note: only suport `preserveAspectRatio 'xMidYMid'` here. That is, this transform will preserve\n    //    the aspect ratio.\n    // 2. Make a transform from boundingRect to Geo['_viewRect'] (View['_viewRect'])\n    //    (`Geo`/`View` will do this job).\n    //    Note: this transform might not preserve aspect radio, which depending on how users specify\n    //    viewRect in echarts option (e.g., `geo.left/top/width/height` will not preserve aspect ratio,\n    //    but `geo.layoutCenter/layoutSize` will preserve aspect ratio).\n    //\n    // If `svgWidth/svgHeight` not specified, we use `viewBox` as the `boundingRect` to make the SVG\n    // layout look good.\n    //\n    // If neither `svgWidth/svgHeight` nor `viewBox` are not specified, we calculate the boundingRect\n    // of the SVG content and use them to make SVG layout look good.\n\n    var svgWidth = result.width;\n    var svgHeight = result.height;\n    var viewBoxRect = result.viewBoxRect;\n    var boundingRect = this._boundingRect;\n\n    if (!boundingRect) {\n      var bRectX = void 0;\n      var bRectY = void 0;\n      var bRectWidth = void 0;\n      var bRectHeight = void 0;\n\n      if (svgWidth != null) {\n        bRectX = 0;\n        bRectWidth = svgWidth;\n      } else if (viewBoxRect) {\n        bRectX = viewBoxRect.x;\n        bRectWidth = viewBoxRect.width;\n      }\n\n      if (svgHeight != null) {\n        bRectY = 0;\n        bRectHeight = svgHeight;\n      } else if (viewBoxRect) {\n        bRectY = viewBoxRect.y;\n        bRectHeight = viewBoxRect.height;\n      } // If both viewBox and svgWidth/svgHeight not specified,\n      // we have to determine how to layout those element to make them look good.\n\n\n      if (bRectX == null || bRectY == null) {\n        var calculatedBoundingRect = rootFromParse.getBoundingRect();\n\n        if (bRectX == null) {\n          bRectX = calculatedBoundingRect.x;\n          bRectWidth = calculatedBoundingRect.width;\n        }\n\n        if (bRectY == null) {\n          bRectY = calculatedBoundingRect.y;\n          bRectHeight = calculatedBoundingRect.height;\n        }\n      }\n\n      boundingRect = this._boundingRect = new BoundingRect(bRectX, bRectY, bRectWidth, bRectHeight);\n    }\n\n    if (viewBoxRect) {\n      var viewBoxTransform = makeViewBoxTransform(viewBoxRect, boundingRect); // Only support `preserveAspectRatio 'xMidYMid'`\n\n      rootFromParse.scaleX = rootFromParse.scaleY = viewBoxTransform.scale;\n      rootFromParse.x = viewBoxTransform.x;\n      rootFromParse.y = viewBoxTransform.y;\n    } // SVG needs to clip based on `viewBox`. And some SVG files really rely on this feature.\n    // They do not strictly confine all of the content inside a display rect, but deliberately\n    // use a `viewBox` to define a displayable rect.\n    // PENDING:\n    // The drawback of the `setClipPath` here is: the region label (genereted by echarts) near the\n    // edge might also be clipped, because region labels are put as `textContent` of the SVG path.\n\n\n    root.setClipPath(new Rect({\n      shape: boundingRect.plain()\n    }));\n    var named = [];\n    each(result.named, function (namedItem) {\n      if (REGION_AVAILABLE_SVG_TAG_MAP.get(namedItem.svgNodeTagLower) != null) {\n        named.push(namedItem);\n        setSilent(namedItem.el);\n      }\n    });\n    return {\n      root: root,\n      boundingRect: boundingRect,\n      named: named\n    };\n  };\n  /**\n   * Consider:\n   * (1) One graphic element can not be shared by different `geoView` running simultaneously.\n   *     Notice, also need to consider multiple echarts instances share a `mapRecord`.\n   * (2) Converting SVG to graphic elements is time consuming.\n   * (3) In the current architecture, `load` should be called frequently to get boundingRect,\n   *     and it is called without view info.\n   * So we maintain graphic elements in this module, and enables `view` to use/return these\n   * graphics from/to the pool with it's uid.\n   */\n\n\n  GeoSVGResource.prototype.useGraphic = function (hostKey\n  /*, nameMap: NameMap */\n  ) {\n    var usedRootMap = this._usedGraphicMap;\n    var svgGraphic = usedRootMap.get(hostKey);\n\n    if (svgGraphic) {\n      return svgGraphic;\n    }\n\n    svgGraphic = this._freedGraphics.pop() // use the first boundingRect to avoid duplicated boundingRect calculation.\n    || this._buildGraphic(this._parsedXML);\n    usedRootMap.set(hostKey, svgGraphic); // PENDING: `nameMap` will not be supported until some real requirement come.\n    // `nameMap` can only be obtained from echarts option.\n    // The original `named` must not be modified.\n    // if (nameMap) {\n    //     svgGraphic = extend({}, svgGraphic);\n    //     svgGraphic.named = applyNameMap(svgGraphic.named, nameMap);\n    // }\n\n    return svgGraphic;\n  };\n\n  GeoSVGResource.prototype.freeGraphic = function (hostKey) {\n    var usedRootMap = this._usedGraphicMap;\n    var svgGraphic = usedRootMap.get(hostKey);\n\n    if (svgGraphic) {\n      usedRootMap.removeKey(hostKey);\n\n      this._freedGraphics.push(svgGraphic);\n    }\n  };\n\n  return GeoSVGResource;\n}();\n\nexport { GeoSVGResource };\n\nfunction setSilent(el) {\n  // Only named element has silent: false, other elements should\n  // act as background and has no user interaction.\n  el.silent = false; // text|tspan will be converted to group.\n\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.silent = false;\n    });\n  }\n}\n\nfunction createRegions(named) {\n  var regions = [];\n  var regionsMap = createHashMap(); // Create resions only for the first graphic.\n\n  each(named, function (namedItem) {\n    // Region has feature to calculate center for tooltip or other features.\n    // If there is a <g name=\"xxx\">, the center should be the center of the\n    // bounding rect of the g.\n    if (namedItem.namedFrom != null) {\n      return;\n    }\n\n    var region = new GeoSVGRegion(namedItem.name, namedItem.el); // PENDING: if `nameMap` supported, this region can not be mounted on\n    // `this`, but can only be created each time `load()` called.\n\n    regions.push(region); // PENDING: if multiple tag named with the same name, only one will be\n    // found by `_regionsMap`. `_regionsMap` is used to find a coordinate\n    // by name. We use `region.getCenter()` as the coordinate.\n\n    regionsMap.set(namedItem.name, region);\n  });\n  return {\n    regions: regions,\n    regionsMap: regionsMap\n  };\n} // PENDING: `nameMap` will not be supported until some real requirement come.\n// /**\n//  * Use the alias in geoNameMap.\n//  * The input `named` must not be modified.\n//  */\n// function applyNameMap(\n//     named: GeoSVGGraphicRecord['named'],\n//     nameMap: NameMap\n// ): GeoSVGGraphicRecord['named'] {\n//     const result = [] as GeoSVGGraphicRecord['named'];\n//     for (let i = 0; i < named.length; i++) {\n//         let regionGraphic = named[i];\n//         const name = regionGraphic.name;\n//         if (nameMap && nameMap.hasOwnProperty(name)) {\n//             regionGraphic = extend({}, regionGraphic);\n//             regionGraphic.name = name;\n//         }\n//         result.push(regionGraphic);\n//     }\n//     return result;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar coordsOffsetMap = {\n  '南海诸岛': [32, 80],\n  // 全国\n  '广东': [0, -10],\n  '香港': [10, 5],\n  '澳门': [-10, 10],\n  //'北京': [-10, 0],\n  '天津': [5, 5]\n};\nexport default function fixTextCoords(mapType, region) {\n  if (mapType === 'china') {\n    var coordFix = coordsOffsetMap[region.name];\n\n    if (coordFix) {\n      var cp = region.getCenter();\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n      region.setCenter(cp);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for 钓鱼岛\n// let Region = require('../Region');\n// let zrUtil = require('zrender/lib/core/util');\n// let geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\nexport default function fixDiaoyuIsland(mapType, region) {\n  if (mapType === 'china' && region.name === '台湾') {\n    region.geometries.push({\n      type: 'polygon',\n      exterior: points[0]\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString, createHashMap, hasOwn } from 'zrender/lib/core/util.js';\nimport parseGeoJson from './parseGeoJson.js'; // Built-in GEO fixer.\n\nimport fixNanhai from './fix/nanhai.js';\nimport fixTextCoord from './fix/textCoord.js';\nimport fixDiaoyuIsland from './fix/diaoyuIsland.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nvar DEFAULT_NAME_PROPERTY = 'name';\n\nvar GeoJSONResource =\n/** @class */\nfunction () {\n  function GeoJSONResource(mapName, geoJSON, specialAreas) {\n    this.type = 'geoJSON';\n    this._parsedMap = createHashMap();\n    this._mapName = mapName;\n    this._specialAreas = specialAreas; // PENDING: delay the parse to the first usage to rapid up the FMP?\n\n    this._geoJSON = parseInput(geoJSON);\n  }\n  /**\n   * @param nameMap can be null/undefined\n   * @param nameProperty can be null/undefined\n   */\n\n\n  GeoJSONResource.prototype.load = function (nameMap, nameProperty) {\n    nameProperty = nameProperty || DEFAULT_NAME_PROPERTY;\n\n    var parsed = this._parsedMap.get(nameProperty);\n\n    if (!parsed) {\n      var rawRegions = this._parseToRegions(nameProperty);\n\n      parsed = this._parsedMap.set(nameProperty, {\n        regions: rawRegions,\n        boundingRect: calculateBoundingRect(rawRegions)\n      });\n    }\n\n    var regionsMap = createHashMap();\n    var finalRegions = [];\n    each(parsed.regions, function (region) {\n      var regionName = region.name; // Try use the alias in geoNameMap\n\n      if (nameMap && hasOwn(nameMap, regionName)) {\n        region = region.cloneShallow(regionName = nameMap[regionName]);\n      }\n\n      finalRegions.push(region);\n      regionsMap.set(regionName, region);\n    });\n    return {\n      regions: finalRegions,\n      boundingRect: parsed.boundingRect || new BoundingRect(0, 0, 0, 0),\n      regionsMap: regionsMap\n    };\n  };\n\n  GeoJSONResource.prototype._parseToRegions = function (nameProperty) {\n    var mapName = this._mapName;\n    var geoJSON = this._geoJSON;\n    var rawRegions; // https://jsperf.com/try-catch-performance-overhead\n\n    try {\n      rawRegions = geoJSON ? parseGeoJson(geoJSON, nameProperty) : [];\n    } catch (e) {\n      throw new Error('Invalid geoJson format\\n' + e.message);\n    }\n\n    fixNanhai(mapName, rawRegions);\n    each(rawRegions, function (region) {\n      var regionName = region.name;\n      fixTextCoord(mapName, region);\n      fixDiaoyuIsland(mapName, region); // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n\n      var specialArea = this._specialAreas && this._specialAreas[regionName];\n\n      if (specialArea) {\n        region.transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    }, this);\n    return rawRegions;\n  };\n  /**\n   * Only for exporting to users.\n   * **MUST NOT** used internally.\n   */\n\n\n  GeoJSONResource.prototype.getMapForUser = function () {\n    return {\n      // For backward compatibility, use geoJson\n      // PENDING: it has been returning them without clone.\n      // do we need to avoid outsite modification?\n      geoJson: this._geoJSON,\n      geoJSON: this._geoJSON,\n      specialAreas: this._specialAreas\n    };\n  };\n\n  return GeoJSONResource;\n}();\n\nexport { GeoJSONResource };\n\nfunction calculateBoundingRect(regions) {\n  var rect;\n\n  for (var i = 0; i < regions.length; i++) {\n    var regionRect = regions[i].getBoundingRect();\n    rect = rect || regionRect.clone();\n    rect.union(regionRect);\n  }\n\n  return rect;\n}\n\nfunction parseInput(source) {\n  return !isString(source) ? source : typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(source) : new Function('return (' + source + ');')();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\nimport { GeoSVGResource } from './GeoSVGResource.js';\nimport { GeoJSONResource } from './GeoJSONResource.js';\nvar storage = createHashMap();\nexport default {\n  /**\n   * Compatible with previous `echarts.registerMap`.\n   *\n   * @usage\n   * ```js\n   *\n   * echarts.registerMap('USA', geoJson, specialAreas);\n   *\n   * echarts.registerMap('USA', {\n   *     geoJson: geoJson,\n   *     specialAreas: {...}\n   * });\n   * echarts.registerMap('USA', {\n   *     geoJSON: geoJson,\n   *     specialAreas: {...}\n   * });\n   *\n   * echarts.registerMap('airport', {\n   *     svg: svg\n   * }\n   * ```\n   *\n   * Note:\n   * Do not support that register multiple geoJSON or SVG\n   * one map name. Because different geoJSON and SVG have\n   * different unit. It's not easy to make sure how those\n   * units are mapping/normalize.\n   * If intending to use multiple geoJSON or SVG, we can\n   * use multiple geo coordinate system.\n   */\n  registerMap: function (mapName, rawDef, rawSpecialAreas) {\n    if (rawDef.svg) {\n      var resource = new GeoSVGResource(mapName, rawDef.svg);\n      storage.set(mapName, resource);\n    } else {\n      // Recommend:\n      //     echarts.registerMap('eu', { geoJSON: xxx, specialAreas: xxx });\n      // Backward compatibility:\n      //     echarts.registerMap('eu', geoJSON, specialAreas);\n      //     echarts.registerMap('eu', { geoJson: xxx, specialAreas: xxx });\n      var geoJSON = rawDef.geoJson || rawDef.geoJSON;\n\n      if (geoJSON && !rawDef.features) {\n        rawSpecialAreas = rawDef.specialAreas;\n      } else {\n        geoJSON = rawDef;\n      }\n\n      var resource = new GeoJSONResource(mapName, geoJSON, rawSpecialAreas);\n      storage.set(mapName, resource);\n    }\n  },\n  getGeoResource: function (mapName) {\n    return storage.get(mapName);\n  },\n\n  /**\n   * Only for exporting to users.\n   * **MUST NOT** used internally.\n   */\n  getMapForUser: function (mapName) {\n    var resource = storage.get(mapName); // Do not support return SVG until some real requirement come.\n\n    return resource && resource.type === 'geoJSON' && resource.getMapForUser();\n  },\n  load: function (mapName, nameMap, nameProperty) {\n    var resource = storage.get(mapName);\n\n    if (!resource) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Map ' + mapName + ' not exists. The GeoJSON of the map must be provided.');\n      }\n\n      return;\n    }\n\n    return resource.load(nameMap, nameProperty);\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport RoamController from './RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enableComponentHighDownFeatures, setDefaultStateProxy } from '../../util/states.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nimport { getUID } from '../../util/component.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner } from '../../util/model.js';\n/**\n * Only these tags enable use `itemStyle` if they are named in SVG.\n * Other tags like <text> <tspan> <image> might not suitable for `itemStyle`.\n * They will not be considered to be styled until some requirements come.\n */\n\nvar OPTION_STYLE_ENABLED_TAGS = ['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path'];\nvar OPTION_STYLE_ENABLED_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS);\nvar STATE_TRIGGER_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar LABEL_HOST_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar mapLabelRaw = makeInner();\n\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n} // Only stroke can be used for line.\n// Using fill in style if stroke not exits.\n// TODO Not sure yet. Perhaps a separate `lineStyle`?\n\n\nfunction fixLineStyle(styleHost) {\n  var style = styleHost.style;\n\n  if (style) {\n    style.stroke = style.stroke || style.fill;\n    style.fill = null;\n  }\n}\n\nvar MapDraw =\n/** @class */\nfunction () {\n  function MapDraw(api) {\n    var group = new graphic.Group();\n    this.uid = getUID('ec_map_draw');\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    this.group = group;\n    group.add(this._regionsGroup = new graphic.Group());\n    group.add(this._svgGroup = new graphic.Group());\n  }\n\n  MapDraw.prototype.draw = function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n    var transformInfo = geo.getTransformInfo();\n    var transformInfoRaw = transformInfo.raw;\n    var transformInfoRoam = transformInfo.roam; // No animation when first draw or in action\n\n    var isFirstDraw = !regionsGroup.childAt(0) || payload;\n\n    if (isFirstDraw) {\n      group.x = transformInfoRoam.x;\n      group.y = transformInfoRoam.y;\n      group.scaleX = transformInfoRoam.scaleX;\n      group.scaleY = transformInfoRoam.scaleY;\n      group.dirty();\n    } else {\n      graphic.updateProps(group, transformInfoRoam, mapOrGeoModel);\n    }\n\n    var isVisualEncodedByVisualMap = data && data.getVisual('visualMeta') && data.getVisual('visualMeta').length > 0;\n    var viewBuildCtx = {\n      api: api,\n      geo: geo,\n      mapOrGeoModel: mapOrGeoModel,\n      data: data,\n      isVisualEncodedByVisualMap: isVisualEncodedByVisualMap,\n      isGeo: isGeo,\n      transformInfoRaw: transformInfoRaw\n    };\n\n    if (geo.resourceType === 'geoJSON') {\n      this._buildGeoJSON(viewBuildCtx);\n    } else if (geo.resourceType === 'geoSVG') {\n      this._buildSVG(viewBuildCtx);\n    }\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    this._updateMapSelectHandler(mapOrGeoModel, regionsGroup, api, fromView);\n  };\n\n  MapDraw.prototype._buildGeoJSON = function (viewBuildCtx) {\n    var regionsGroupByName = this._regionsGroupByName = zrUtil.createHashMap();\n    var regionsInfoByName = zrUtil.createHashMap();\n    var regionsGroup = this._regionsGroup;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n    var data = viewBuildCtx.data;\n    var projection = viewBuildCtx.geo.projection;\n    var projectionStream = projection && projection.stream;\n\n    function transformPoint(point, project) {\n      if (project) {\n        // projection may return null point.\n        point = project(point);\n      }\n\n      return point && [point[0] * transformInfoRaw.scaleX + transformInfoRaw.x, point[1] * transformInfoRaw.scaleY + transformInfoRaw.y];\n    }\n\n    ;\n\n    function transformPolygonPoints(inPoints) {\n      var outPoints = []; // If projectionStream is provided. Use it instead of single point project.\n\n      var project = !projectionStream && projection && projection.project;\n\n      for (var i = 0; i < inPoints.length; ++i) {\n        var newPt = transformPoint(inPoints[i], project);\n        newPt && outPoints.push(newPt);\n      }\n\n      return outPoints;\n    }\n\n    function getPolyShape(points) {\n      return {\n        shape: {\n          points: transformPolygonPoints(points)\n        }\n      };\n    }\n\n    regionsGroup.removeAll(); // Only when the resource is GeoJSON, there is `geo.regions`.\n\n    zrUtil.each(viewBuildCtx.geo.regions, function (region) {\n      var regionName = region.name; // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n\n      var regionGroup = regionsGroupByName.get(regionName);\n\n      var _a = regionsInfoByName.get(regionName) || {},\n          dataIdx = _a.dataIdx,\n          regionModel = _a.regionModel;\n\n      if (!regionGroup) {\n        regionGroup = regionsGroupByName.set(regionName, new graphic.Group());\n        regionsGroup.add(regionGroup);\n        dataIdx = data ? data.indexOfName(regionName) : null;\n        regionModel = viewBuildCtx.isGeo ? mapOrGeoModel.getRegionModel(regionName) : data ? data.getItemModel(dataIdx) : null;\n        regionsInfoByName.set(regionName, {\n          dataIdx: dataIdx,\n          regionModel: regionModel\n        });\n      }\n\n      var polygonSubpaths = [];\n      var polylineSubpaths = [];\n      zrUtil.each(region.geometries, function (geometry) {\n        // Polygon and MultiPolygon\n        if (geometry.type === 'polygon') {\n          var polys = [geometry.exterior].concat(geometry.interiors || []);\n\n          if (projectionStream) {\n            polys = projectPolys(polys, projectionStream);\n          }\n\n          zrUtil.each(polys, function (poly) {\n            polygonSubpaths.push(new graphic.Polygon(getPolyShape(poly)));\n          });\n        } // LineString and MultiLineString\n        else {\n            var points = geometry.points;\n\n            if (projectionStream) {\n              points = projectPolys(points, projectionStream, true);\n            }\n\n            zrUtil.each(points, function (points) {\n              polylineSubpaths.push(new graphic.Polyline(getPolyShape(points)));\n            });\n          }\n      });\n      var centerPt = transformPoint(region.getCenter(), projection && projection.project);\n\n      function createCompoundPath(subpaths, isLine) {\n        if (!subpaths.length) {\n          return;\n        }\n\n        var compoundPath = new graphic.CompoundPath({\n          culling: true,\n          segmentIgnoreThreshold: 1,\n          shape: {\n            paths: subpaths\n          }\n        });\n        regionGroup.add(compoundPath);\n        applyOptionStyleForRegion(viewBuildCtx, compoundPath, dataIdx, regionModel);\n        resetLabelForRegion(viewBuildCtx, compoundPath, regionName, regionModel, mapOrGeoModel, dataIdx, centerPt);\n\n        if (isLine) {\n          fixLineStyle(compoundPath);\n          zrUtil.each(compoundPath.states, fixLineStyle);\n        }\n      }\n\n      createCompoundPath(polygonSubpaths);\n      createCompoundPath(polylineSubpaths, true);\n    }); // Ensure children have been added to `regionGroup` before calling them.\n\n    regionsGroupByName.each(function (regionGroup, regionName) {\n      var _a = regionsInfoByName.get(regionName),\n          dataIdx = _a.dataIdx,\n          regionModel = _a.regionModel;\n\n      resetEventTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel, dataIdx);\n      resetTooltipForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n      resetStateTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n    }, this);\n  };\n\n  MapDraw.prototype._buildSVG = function (viewBuildCtx) {\n    var mapName = viewBuildCtx.geo.map;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    this._svgGroup.x = transformInfoRaw.x;\n    this._svgGroup.y = transformInfoRaw.y;\n    this._svgGroup.scaleX = transformInfoRaw.scaleX;\n    this._svgGroup.scaleY = transformInfoRaw.scaleY;\n\n    if (this._svgResourceChanged(mapName)) {\n      this._freeSVG();\n\n      this._useSVG(mapName);\n    }\n\n    var svgDispatcherMap = this._svgDispatcherMap = zrUtil.createHashMap();\n    var focusSelf = false;\n    zrUtil.each(this._svgGraphicRecord.named, function (namedItem) {\n      // Note that we also allow different elements have the same name.\n      // For example, a glyph of a city and the label of the city have\n      // the same name and their tooltip info can be defined in a single\n      // region option.\n      var regionName = namedItem.name;\n      var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n      var data = viewBuildCtx.data;\n      var svgNodeTagLower = namedItem.svgNodeTagLower;\n      var el = namedItem.el;\n      var dataIdx = data ? data.indexOfName(regionName) : null;\n      var regionModel = mapOrGeoModel.getRegionModel(regionName);\n\n      if (OPTION_STYLE_ENABLED_TAG_MAP.get(svgNodeTagLower) != null && el instanceof Displayable) {\n        applyOptionStyleForRegion(viewBuildCtx, el, dataIdx, regionModel);\n      }\n\n      if (el instanceof Displayable) {\n        el.culling = true;\n      } // We do not know how the SVG like so we'd better not to change z2.\n      // Otherwise it might bring some unexpected result. For example,\n      // an area hovered that make some inner city can not be clicked.\n\n\n      el.z2EmphasisLift = 0; // If self named:\n\n      if (!namedItem.namedFrom) {\n        // label should batter to be displayed based on the center of <g>\n        // if it is named rather than displayed on each child.\n        if (LABEL_HOST_MAP.get(svgNodeTagLower) != null) {\n          resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx, null);\n        }\n\n        resetEventTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx);\n        resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n        if (STATE_TRIGGER_TAG_MAP.get(svgNodeTagLower) != null) {\n          var focus_1 = resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n          if (focus_1 === 'self') {\n            focusSelf = true;\n          }\n\n          var els = svgDispatcherMap.get(regionName) || svgDispatcherMap.set(regionName, []);\n          els.push(el);\n        }\n      }\n    }, this);\n\n    this._enableBlurEntireSVG(focusSelf, viewBuildCtx);\n  };\n\n  MapDraw.prototype._enableBlurEntireSVG = function (focusSelf, viewBuildCtx) {\n    // It's a little complicated to support blurring the entire geoSVG in series-map.\n    // So do not suport it until some requirements come.\n    // At present, in series-map, only regions can be blurred.\n    if (focusSelf && viewBuildCtx.isGeo) {\n      var blurStyle = viewBuildCtx.mapOrGeoModel.getModel(['blur', 'itemStyle']).getItemStyle(); // Only suport `opacity` here. Because not sure that other props are suitable for\n      // all of the elements generated by SVG (especially for Text/TSpan/Image/... ).\n\n      var opacity_1 = blurStyle.opacity;\n\n      this._svgGraphicRecord.root.traverse(function (el) {\n        if (!el.isGroup) {\n          // PENDING: clear those settings to SVG elements when `_freeSVG`.\n          // (Currently it happen not to be needed.)\n          setDefaultStateProxy(el);\n          var style = el.ensureState('blur').style || {}; // Do not overwrite the region style that already set from region option.\n\n          if (style.opacity == null && opacity_1 != null) {\n            style.opacity = opacity_1;\n          } // If `ensureState('blur').style = {}`, there will be default opacity.\n          // Enable `stateTransition` (animation).\n\n\n          el.ensureState('emphasis');\n        }\n      });\n    }\n  };\n\n  MapDraw.prototype.remove = function () {\n    this._regionsGroup.removeAll();\n\n    this._regionsGroupByName = null;\n\n    this._svgGroup.removeAll();\n\n    this._freeSVG();\n\n    this._controller.dispose();\n\n    this._controllerHost = null;\n  };\n\n  MapDraw.prototype.findHighDownDispatchers = function (name, geoModel) {\n    if (name == null) {\n      return [];\n    }\n\n    var geo = geoModel.coordinateSystem;\n\n    if (geo.resourceType === 'geoJSON') {\n      var regionsGroupByName = this._regionsGroupByName;\n\n      if (regionsGroupByName) {\n        var regionGroup = regionsGroupByName.get(name);\n        return regionGroup ? [regionGroup] : [];\n      }\n    } else if (geo.resourceType === 'geoSVG') {\n      return this._svgDispatcherMap && this._svgDispatcherMap.get(name) || [];\n    }\n  };\n\n  MapDraw.prototype._svgResourceChanged = function (mapName) {\n    return this._svgMapName !== mapName;\n  };\n\n  MapDraw.prototype._useSVG = function (mapName) {\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      var svgGraphic = resource.useGraphic(this.uid);\n\n      this._svgGroup.add(svgGraphic.root);\n\n      this._svgGraphicRecord = svgGraphic;\n      this._svgMapName = mapName;\n    }\n  };\n\n  MapDraw.prototype._freeSVG = function () {\n    var mapName = this._svgMapName;\n\n    if (mapName == null) {\n      return;\n    }\n\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      resource.freeGraphic(this.uid);\n    }\n\n    this._svgGraphicRecord = null;\n    this._svgDispatcherMap = null;\n\n    this._svgGroup.removeAll();\n\n    this._svgMapName = null;\n  };\n\n  MapDraw.prototype._updateController = function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost; // @ts-ignore FIXME:TS\n\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n    // @ts-ignore FIXME:TS\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy,\n        animation: {\n          duration: 0\n        }\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY,\n        animation: {\n          duration: 0\n        }\n      }));\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.containPoint([x, y]) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  };\n  /**\n   * FIXME: this is a temporarily workaround.\n   * When `geoRoam` the elements need to be reset in `MapView['render']`, because the props like\n   * `ignore` might have been modified by `LabelManager`, and `LabelManager#addLabelsOfSeries`\n   * will subsequently cache `defaultAttr` like `ignore`. If do not do this reset, the modified\n   * props will have no chance to be restored.\n   * Note: this reset should be after `clearStates` in `renderSeries` becuase `useStates` in\n   * `renderSeries` will cache the modified `ignore` to `el._normalState`.\n   * TODO:\n   * Use clone/immutable in `LabelManager`?\n   */\n\n\n  MapDraw.prototype.resetForLabelLayout = function () {\n    this.group.traverse(function (el) {\n      var label = el.getTextContent();\n\n      if (label) {\n        label.ignore = mapLabelRaw(label).ignore;\n      }\n    });\n  };\n\n  MapDraw.prototype._updateMapSelectHandler = function (mapOrGeoModel, regionsGroup, api, fromView) {\n    var mapDraw = this;\n    regionsGroup.off('mousedown');\n    regionsGroup.off('click'); // @ts-ignore FIXME:TS resolve type conflict\n\n    if (mapOrGeoModel.get('selectedMode')) {\n      regionsGroup.on('mousedown', function () {\n        mapDraw._mouseDownFlag = true;\n      });\n      regionsGroup.on('click', function (e) {\n        if (!mapDraw._mouseDownFlag) {\n          return;\n        }\n\n        mapDraw._mouseDownFlag = false;\n      });\n    }\n  };\n\n  return MapDraw;\n}();\n\n;\n\nfunction applyOptionStyleForRegion(viewBuildCtx, el, dataIndex, regionModel) {\n  // All of the path are using `itemStyle`, becuase\n  // (1) Some SVG also use fill on polyline (The different between\n  // polyline and polygon is \"open\" or \"close\" but not fill or not).\n  // (2) For the common props like opacity, if some use itemStyle\n  // and some use `lineStyle`, it might confuse users.\n  // (3) Most SVG use <path>, where can not detect wether draw a \"line\"\n  // or a filled shape, so use `itemStyle` for <path>.\n  var normalStyleModel = regionModel.getModel('itemStyle');\n  var emphasisStyleModel = regionModel.getModel(['emphasis', 'itemStyle']);\n  var blurStyleModel = regionModel.getModel(['blur', 'itemStyle']);\n  var selectStyleModel = regionModel.getModel(['select', 'itemStyle']); // NOTE: DONT use 'style' in visual when drawing map.\n  // This component is used for drawing underlying map for both geo component and map series.\n\n  var normalStyle = getFixedItemStyle(normalStyleModel);\n  var emphasisStyle = getFixedItemStyle(emphasisStyleModel);\n  var selectStyle = getFixedItemStyle(selectStyleModel);\n  var blurStyle = getFixedItemStyle(blurStyleModel); // Update the itemStyle if has data visual\n\n  var data = viewBuildCtx.data;\n\n  if (data) {\n    // Only visual color of each item will be used. It can be encoded by visualMap\n    // But visual color of series is used in symbol drawing\n    // Visual color for each series is for the symbol draw\n    var style = data.getItemVisual(dataIndex, 'style');\n    var decal = data.getItemVisual(dataIndex, 'decal');\n\n    if (viewBuildCtx.isVisualEncodedByVisualMap && style.fill) {\n      normalStyle.fill = style.fill;\n    }\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, viewBuildCtx.api);\n    }\n  } // SVG text, tspan and image can be named but not supporeted\n  // to be styled by region option yet.\n\n\n  el.setStyle(normalStyle);\n  el.style.strokeNoScale = true;\n  el.ensureState('emphasis').style = emphasisStyle;\n  el.ensureState('select').style = selectStyle;\n  el.ensureState('blur').style = blurStyle; // Enable blur\n\n  setDefaultStateProxy(el);\n}\n\nfunction resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx, // If labelXY not provided, use `textConfig.position: 'inside'`\nlabelXY) {\n  var data = viewBuildCtx.data;\n  var isGeo = viewBuildCtx.isGeo;\n  var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n  var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n  // 1. In map series and data value is NaN\n  // 2. In geo component\n  // 3. Region has no series legendIcon, which will be add a showLabel flag in mapSymbolLayout\n\n  if (isGeo || isDataNaN || itemLayout && itemLayout.showLabel) {\n    var query = !isGeo ? dataIdx : regionName;\n    var labelFetcher = void 0; // Consider dataIdx not found.\n\n    if (!data || dataIdx >= 0) {\n      labelFetcher = mapOrGeoModel;\n    }\n\n    var specifiedTextOpt = labelXY ? {\n      normal: {\n        align: 'center',\n        verticalAlign: 'middle'\n      }\n    } : null; // Caveat: must be called after `setDefaultStateProxy(el);` called.\n    // because textContent will be assign with `el.stateProxy` inside.\n\n    setLabelStyle(el, getLabelStatesModels(regionModel), {\n      labelFetcher: labelFetcher,\n      labelDataIndex: query,\n      defaultText: regionName\n    }, specifiedTextOpt);\n    var textEl = el.getTextContent();\n\n    if (textEl) {\n      mapLabelRaw(textEl).ignore = textEl.ignore;\n\n      if (el.textConfig && labelXY) {\n        // Compute a relative offset based on the el bounding rect.\n        var rect = el.getBoundingRect().clone(); // Need to make sure the percent position base on the same rect in normal and\n        // emphasis state. Otherwise if using boundingRect of el, but the emphasis state\n        // has borderWidth (even 0.5px), the text position will be changed obviously\n        // if the position is very big like ['1234%', '1345%'].\n\n        el.textConfig.layoutRect = rect;\n        el.textConfig.position = [(labelXY[0] - rect.x) / rect.width * 100 + '%', (labelXY[1] - rect.y) / rect.height * 100 + '%'];\n      }\n    } // PENDING:\n    // If labelLayout is enabled (test/label-layout.html), el.dataIndex should be specified.\n    // But el.dataIndex is also used to determine whether user event should be triggered,\n    // where el.seriesIndex or el.dataModel must be specified. At present for a single el\n    // there is not case that \"only label layout enabled but user event disabled\", so here\n    // we depends `resetEventTriggerForRegion` to do the job of setting `el.dataIndex`.\n\n\n    el.disableLabelAnimation = true;\n  } else {\n    el.removeTextContent();\n    el.removeTextConfig();\n    el.disableLabelAnimation = null;\n  }\n}\n\nfunction resetEventTriggerForRegion(viewBuildCtx, eventTrigger, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx) {\n  // setItemGraphicEl, setHoverStyle after all polygons and labels\n  // are added to the rigionGroup\n  if (viewBuildCtx.data) {\n    // FIXME: when series-map use a SVG map, and there are duplicated name specified\n    // on different SVG elements, after `data.setItemGraphicEl(...)`:\n    // (1) all of them will be mounted with `dataIndex`, `seriesIndex`, so that tooltip\n    // can be triggered only mouse hover. That's correct.\n    // (2) only the last element will be kept in `data`, so that if trigger tooltip\n    // by `dispatchAction`, only the last one can be found and triggered. That might be\n    // not correct. We will fix it in future if anyone demanding that.\n    viewBuildCtx.data.setItemGraphicEl(dataIdx, eventTrigger);\n  } // series-map will not trigger \"geoselectchange\" no matter it is\n  // based on a declared geo component. Becuause series-map will\n  // trigger \"selectchange\". If it trigger both the two events,\n  // If users call `chart.dispatchAction({type: 'toggleSelect'})`,\n  // it not easy to also fire event \"geoselectchanged\".\n  else {\n      // Package custom mouse event for geo component\n      getECData(eventTrigger).eventData = {\n        componentType: 'geo',\n        componentIndex: mapOrGeoModel.componentIndex,\n        geoIndex: mapOrGeoModel.componentIndex,\n        name: regionName,\n        region: regionModel && regionModel.option || {}\n      };\n    }\n}\n\nfunction resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  if (!viewBuildCtx.data) {\n    graphic.setTooltipConfig({\n      el: el,\n      componentModel: mapOrGeoModel,\n      itemName: regionName,\n      // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n      itemTooltipOption: regionModel.get('tooltip')\n    });\n  }\n}\n\nfunction resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n  el.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode'); // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n\n  var emphasisModel = regionModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  toggleHoverEmphasis(el, focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n\n  if (viewBuildCtx.isGeo) {\n    enableComponentHighDownFeatures(el, mapOrGeoModel, regionName);\n  }\n\n  return focus;\n}\n\nfunction projectPolys(rings, // Polygons include exterior and interiors. Or polylines.\ncreateStream, isLine) {\n  var polygons = [];\n  var curPoly;\n\n  function startPolygon() {\n    curPoly = [];\n  }\n\n  function endPolygon() {\n    if (curPoly.length) {\n      polygons.push(curPoly);\n      curPoly = [];\n    }\n  }\n\n  var stream = createStream({\n    polygonStart: startPolygon,\n    polygonEnd: endPolygon,\n    lineStart: startPolygon,\n    lineEnd: endPolygon,\n    point: function (x, y) {\n      // May have NaN values from stream.\n      if (isFinite(x) && isFinite(y)) {\n        curPoly.push([x, y]);\n      }\n    },\n    sphere: function () {}\n  });\n  !isLine && stream.polygonStart();\n  zrUtil.each(rings, function (ring) {\n    stream.lineStart();\n\n    for (var i = 0; i < ring.length; i++) {\n      stream.point(ring[i][0], ring[i][1]);\n    }\n\n    stream.lineEnd();\n  });\n  !isLine && stream.polygonEnd();\n  return polygons;\n}\n\nexport default MapDraw; // @ts-ignore FIXME:TS fix the \"compatible with each other\"?","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n */\n\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  target.x -= (zoomX - target.x) * (zoomScale - 1);\n  target.y -= (zoomY - target.y) * (zoomScale - 1);\n  target.scaleX *= zoomScale;\n  target.scaleY *= zoomScale;\n  target.dirty();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport MapDraw from '../../component/helper/MapDraw.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states.js';\n\nvar MapView =\n/** @class */\nfunction (_super) {\n  __extends(MapView, _super);\n\n  function MapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapView.type;\n    return _this;\n  }\n\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    }\n\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\n      this._mapDraw.resetForLabelLayout();\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  };\n\n  MapView.prototype.remove = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  };\n\n  MapView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  };\n\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          // TODO\n          fill: mapModel.getData().getVisual('style').fill\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name_1 = originalData.getName(originalDataIndex);\n        var fullIndex_1 = fullData.indexOfName(name_1);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\n          labelFetcher: {\n            getFormattedLabel: function (idx, state) {\n              return mapModel.getFormattedLabel(fullIndex_1, state);\n            }\n          },\n          defaultText: name_1\n        });\n        circle.disableLabelAnimation = true;\n\n        if (!labelModel.get('position')) {\n          circle.setTextConfig({\n            position: 'bottom'\n          });\n        }\n\n        regionGroup.onHoverStateChange = function (toState) {\n          setStatesFlag(circle, toState);\n        };\n      }\n\n      group.add(circle);\n    });\n  };\n\n  MapView.type = 'map';\n  return MapView;\n}(ChartView);\n\nexport default MapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { createSymbol } from '../../util/symbol.js';\n\nvar MapSeries =\n/** @class */\nfunction (_super) {\n  __extends(MapSeries, _super);\n\n  function MapSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapSeries.type; // Only first map series of same mapType will drawMap.\n\n    _this.needsDrawMap = false; // Group of all map series with same mapType\n\n    _this.seriesGroup = [];\n\n    _this.getTooltipPosition = function (dataIndex) {\n      if (dataIndex != null) {\n        var name_1 = this.getData().getName(dataIndex);\n        var geo = this.coordinateSystem;\n        var region = geo.getRegion(name_1);\n        return region && geo.dataToPoint(region.getCenter());\n      }\n    };\n\n    return _this;\n  }\n\n  MapSeries.prototype.getInitialData = function (option) {\n    var data = createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var dataNameMap = zrUtil.createHashMap();\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name_2 = data.getName(i);\n      dataNameMap.set(name_2, true);\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        toAppendNames.push(name);\n      }\n    }); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  };\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n\n\n  MapSeries.prototype.getHostGeoModel = function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\n  };\n\n  MapSeries.prototype.getMapType = function () {\n    return (this.getHostGeoModel() || this).option.map;\n  }; // _fillOption(option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // }\n\n\n  MapSeries.prototype.getRawValue = function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  };\n  /**\n   * Get model of region\n   */\n\n\n  MapSeries.prototype.getRegionModel = function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  };\n  /**\n   * Map tooltip formatter\n   */\n\n\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(seriesGroup[i].name);\n      }\n    }\n\n    return createTooltipMarkup('section', {\n      header: seriesNames.join(', '),\n      noHeader: !seriesNames.length,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: name,\n        value: value\n      })]\n    });\n  };\n\n  MapSeries.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  MapSeries.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  MapSeries.prototype.getLegendIcon = function (opt) {\n    var iconType = opt.icon || 'roundRect';\n    var icon = createSymbol(iconType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n    icon.setStyle(opt.itemStyle); // Map do not use itemStyle.borderWidth as border width\n\n    icon.style.stroke = 'none'; // No rotation because no series visual symbol for map\n\n    if (iconType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n\n    return icon;\n  };\n\n  MapSeries.type = 'series.map';\n  MapSeries.dependencies = ['geo'];\n  MapSeries.layoutMode = 'box';\n  MapSeries.defaultOption = {\n    // 一级层叠\n    // zlevel: 0,\n    // 二级层叠\n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    showLegendSymbol: true,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    selectedMode: true,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    nameProperty: 'name'\n  };\n  return MapSeries;\n}(SeriesModel);\n\nexport default MapSeries;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { extend, isArray } from 'zrender/lib/core/util.js';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function mapSymbolLayout(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.getCenter());\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendIcon (which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { parsePercent } from '../util/number.js';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  }\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord, api) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = [parsePercent(centerCoord[0], api.getWidth()), parsePercent(centerCoord[1], api.getHeight())];\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable; // Becuase roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalcualte them.\n\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport View from '../View.js';\nimport geoSourceManager from './geoSourceManager.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { warn } from '../../util/log.js';\nvar GEO_DEFAULT_PARAMS = {\n  'geoJSON': {\n    aspectScale: 0.75,\n    invertLongitute: true\n  },\n  'geoSVG': {\n    aspectScale: 1,\n    invertLongitute: false\n  }\n};\nexport var geo2DDimensions = ['lng', 'lat'];\n\nvar Geo =\n/** @class */\nfunction (_super) {\n  __extends(Geo, _super);\n\n  function Geo(name, map, opt) {\n    var _this = _super.call(this, name) || this;\n\n    _this.dimensions = geo2DDimensions;\n    _this.type = 'geo'; // Only store specified name coord via `addGeoCoord`.\n\n    _this._nameCoordMap = zrUtil.createHashMap();\n    _this.map = map;\n    var projection = opt.projection;\n    var source = geoSourceManager.load(map, opt.nameMap, opt.nameProperty);\n    var resource = geoSourceManager.getGeoResource(map);\n    var resourceType = _this.resourceType = resource ? resource.type : null;\n    var regions = _this.regions = source.regions;\n    var defaultParams = GEO_DEFAULT_PARAMS[resource.type];\n    _this._regionsMap = source.regionsMap;\n    _this.regions = source.regions;\n\n    if (process.env.NODE_ENV !== 'production' && projection) {\n      // Do some check\n      if (resourceType === 'geoSVG') {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\"Map \" + map + \" with SVG source can't use projection. Only GeoJSON source supports projection.\");\n        }\n\n        projection = null;\n      }\n\n      if (!(projection.project && projection.unproject)) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('project and unproject must be both provided in the projeciton.');\n        }\n\n        projection = null;\n      }\n    }\n\n    _this.projection = projection;\n    var boundingRect;\n\n    if (projection) {\n      // Can't reuse the raw bounding rect\n      for (var i = 0; i < regions.length; i++) {\n        var regionRect = regions[i].getBoundingRect(projection);\n        boundingRect = boundingRect || regionRect.clone();\n        boundingRect.union(regionRect);\n      }\n    } else {\n      boundingRect = source.boundingRect;\n    }\n\n    _this.setBoundingRect(boundingRect.x, boundingRect.y, boundingRect.width, boundingRect.height); // aspectScale and invertLongitute actually is the parameters default raw projection.\n    // So we ignore them if projection is given.\n    // Ignore default aspect scale if projection exits.\n\n\n    _this.aspectScale = projection ? 1 : zrUtil.retrieve2(opt.aspectScale, defaultParams.aspectScale); // Not invert longitute if projection exits.\n\n    _this._invertLongitute = projection ? false : defaultParams.invertLongitute;\n    return _this;\n  }\n\n  Geo.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransformable.parent;\n    rawTransformable.parent = null;\n    rawTransformable.decomposeTransform();\n    rawTransformable.parent = rawParent;\n\n    if (invertLongitute) {\n      rawTransformable.scaleY = -rawTransformable.scaleY;\n    }\n\n    this._updateTransform();\n  };\n\n  Geo.prototype.getRegion = function (name) {\n    return this._regionsMap.get(name);\n  };\n\n  Geo.prototype.getRegionByCoord = function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      var region = regions[i];\n\n      if (region.type === 'geoJSON' && region.contain(coord)) {\n        return regions[i];\n      }\n    }\n  };\n  /**\n   * Add geoCoord for indexing by name\n   */\n\n\n  Geo.prototype.addGeoCoord = function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  };\n  /**\n   * Get geoCoord by name\n   */\n\n\n  Geo.prototype.getGeoCoord = function (name) {\n    var region = this._regionsMap.get(name); // calcualte center only on demand.\n\n\n    return this._nameCoordMap.get(name) || region && region.getCenter();\n  };\n\n  Geo.prototype.dataToPoint = function (data, noRoam, out) {\n    if (zrUtil.isString(data)) {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      var projection = this.projection;\n\n      if (projection) {\n        // projection may return null point.\n        data = projection.project(data);\n      }\n\n      return data && this.projectedToPoint(data, noRoam, out);\n    }\n  };\n\n  Geo.prototype.pointToData = function (point) {\n    var projection = this.projection;\n\n    if (projection) {\n      // projection may return null point.\n      point = projection.unproject(point);\n    }\n\n    return point && this.pointToProjected(point);\n  };\n  /**\n   * Point to projected data. Same with pointToData when projection is used.\n   */\n\n\n  Geo.prototype.pointToProjected = function (point) {\n    return _super.prototype.pointToData.call(this, point);\n  };\n\n  Geo.prototype.projectedToPoint = function (projected, noRoam, out) {\n    return _super.prototype.dataToPoint.call(this, projected, noRoam, out);\n  };\n\n  Geo.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Geo.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  return Geo;\n}(View);\n\n;\nzrUtil.mixin(Geo, View);\n\nfunction getCoordSys(finder) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  return geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map series.\n  || (seriesModel.getReferringComponents('geo', SINGLE_REFERRING).models[0] || {}).coordinateSystem : null;\n}\n\nexport default Geo;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Geo, { geo2DDimensions } from './Geo.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js';\nimport geoSourceManager from './geoSourceManager.js';\nimport * as vector from 'zrender/lib/core/vector.js';\n/**\n * Resize method bound to the geo\n */\n\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop_1 = boundingCoords[0];\n    var rightBottom_1 = boundingCoords[1];\n\n    if (!(isFinite(leftTop_1[0]) && isFinite(leftTop_1[1]) && isFinite(rightBottom_1[0]) && isFinite(rightBottom_1[1]))) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Invalid boundingCoords');\n      }\n    } else {\n      // Sample around the lng/lat rect and use projection to calculate actual bounding rect.\n      var projection_1 = this.projection;\n\n      if (projection_1) {\n        var xMin = leftTop_1[0];\n        var yMin = leftTop_1[1];\n        var xMax = rightBottom_1[0];\n        var yMax = rightBottom_1[1];\n        leftTop_1 = [Infinity, Infinity];\n        rightBottom_1 = [-Infinity, -Infinity]; // TODO better way?\n\n        var sampleLine = function (x0, y0, x1, y1) {\n          var dx = x1 - x0;\n          var dy = y1 - y0;\n\n          for (var i = 0; i <= 100; i++) {\n            var p = i / 100;\n            var pt = projection_1.project([x0 + dx * p, y0 + dy * p]);\n            vector.min(leftTop_1, leftTop_1, pt);\n            vector.max(rightBottom_1, rightBottom_1, pt);\n          }\n        }; // Top\n\n\n        sampleLine(xMin, yMin, xMax, yMin); // Right\n\n        sampleLine(xMax, yMin, xMax, yMax); // Bottom\n\n        sampleLine(xMax, yMax, xMin, yMax); // Left\n\n        sampleLine(xMin, yMax, xMax, yMin);\n      }\n\n      this.setBoundingRect(leftTop_1[0], leftTop_1[1], rightBottom_1[0] - leftTop_1[0], rightBottom_1[1] - leftTop_1[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var centerOption = geoModel.get('layoutCenter');\n  var sizeOption = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n  var center;\n  var size;\n\n  if (centerOption && sizeOption) {\n    center = [numberUtil.parsePercent(centerOption[0], viewWidth), numberUtil.parsePercent(centerOption[1], viewHeight)];\n    size = numberUtil.parsePercent(sizeOption, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.');\n      }\n    }\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    var boxLayoutOption = geoModel.getBoxLayoutParams();\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'), api);\n  this.setZoom(geoModel.get('zoom'));\n} // Back compat for ECharts2, where the coord map is set on map series:\n// {type: 'map', geoCoord: {'cityA': [116.46,39.92], 'cityA': [119.12,24.61]}},\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar GeoCreator =\n/** @class */\nfunction () {\n  function GeoCreator() {\n    // For deciding which dimensions to use when creating list data\n    this.dimensions = geo2DDimensions;\n  }\n\n  GeoCreator.prototype.create = function (ecModel, api) {\n    var geoList = [];\n\n    function getCommonGeoProperties(model) {\n      return {\n        nameProperty: model.get('nameProperty'),\n        aspectScale: model.get('aspectScale'),\n        projection: model.get('projection')\n      };\n    } // FIXME Create each time may be slow\n\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var mapName = geoModel.get('map');\n      var geo = new Geo(mapName + idx, mapName, zrUtil.extend({\n        nameMap: geoModel.get('nameMap')\n      }, getCommonGeoProperties(geoModel)));\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo); // setGeoCoords(geo, geoModel);\n\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, zrUtil.extend({\n        nameMap: zrUtil.mergeAll(nameMapList)\n      }, getCommonGeoProperties(mapSeries[0])));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  };\n  /**\n   * Fill given regions array\n   */\n\n\n  GeoCreator.prototype.getFilledRegions = function (originRegionArr, mapName, nameMap, nameProperty) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap, nameProperty);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  };\n\n  return GeoCreator;\n}();\n\nvar geoCreator = new GeoCreator();\nexport default geoCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport Model from '../../model/Model.js';\nimport geoCreator from './geoCreator.js';\nimport geoSourceManager from './geoSourceManager.js';\n;\n\nvar GeoModel =\n/** @class */\nfunction (_super) {\n  __extends(GeoModel, _super);\n\n  function GeoModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoModel.type;\n    return _this;\n  }\n\n  GeoModel.prototype.init = function (option, parentModel, ecModel) {\n    var source = geoSourceManager.getGeoResource(option.map);\n\n    if (source && source.type === 'geoJSON') {\n      var itemStyle = option.itemStyle = option.itemStyle || {};\n\n      if (!('color' in itemStyle)) {\n        itemStyle.color = '#eee';\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n  };\n\n  GeoModel.prototype.optionUpdated = function () {\n    var _this = this;\n\n    var option = this.option;\n    option.regions = geoCreator.getFilledRegions(option.regions, option.map, option.nameMap, option.nameProperty);\n    var selectedMap = {};\n    this._optionModelMap = zrUtil.reduce(option.regions || [], function (optionModelMap, regionOpt) {\n      var regionName = regionOpt.name;\n\n      if (regionName) {\n        optionModelMap.set(regionName, new Model(regionOpt, _this, _this.ecModel));\n\n        if (regionOpt.selected) {\n          selectedMap[regionName] = true;\n        }\n      }\n\n      return optionModelMap;\n    }, zrUtil.createHashMap());\n\n    if (!option.selectedMap) {\n      option.selectedMap = selectedMap;\n    }\n  };\n  /**\n   * Get model of region.\n   */\n\n\n  GeoModel.prototype.getRegionModel = function (name) {\n    return this._optionModelMap.get(name) || new Model(null, this, this.ecModel);\n  };\n  /**\n   * Format label\n   * @param name Region name\n   */\n\n\n  GeoModel.prototype.getFormattedLabel = function (name, status) {\n    var regionModel = this.getRegionModel(name);\n    var formatter = status === 'normal' ? regionModel.get(['label', 'formatter']) : regionModel.get(['emphasis', 'label', 'formatter']);\n    var params = {\n      name: name\n    };\n\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      return formatter.replace('{a}', name != null ? name : '');\n    }\n  };\n\n  GeoModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GeoModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  }; // PENGING If selectedMode is null ?\n\n\n  GeoModel.prototype.select = function (name) {\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n\n    if (!selectedMode) {\n      return;\n    }\n\n    if (selectedMode !== 'multiple') {\n      option.selectedMap = null;\n    }\n\n    var selectedMap = option.selectedMap || (option.selectedMap = {});\n    selectedMap[name] = true;\n  };\n\n  GeoModel.prototype.unSelect = function (name) {\n    var selectedMap = this.option.selectedMap;\n\n    if (selectedMap) {\n      selectedMap[name] = false;\n    }\n  };\n\n  GeoModel.prototype.toggleSelected = function (name) {\n    this[this.isSelected(name) ? 'unSelect' : 'select'](name);\n  };\n\n  GeoModel.prototype.isSelected = function (name) {\n    var selectedMap = this.option.selectedMap;\n    return !!(selectedMap && selectedMap[name]);\n  };\n\n  GeoModel.type = 'geo';\n  GeoModel.layoutMode = 'box';\n  GeoModel.defaultOption = {\n    // zlevel: 0,\n    z: 0,\n    show: true,\n    left: 'center',\n    top: 'center',\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    silent: false,\n    // Map type\n    map: '',\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ]\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    // selectedMode: false\n    label: {\n      show: false,\n      color: '#000'\n    },\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444' // Default color:\n      // + geoJSON: #eee\n      // + geoSVG: null (use SVG original `fill`)\n      // color: '#eee'\n\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    regions: [] // tooltip: {\n    //     show: false\n    // }\n\n  };\n  return GeoModel;\n}(ComponentModel);\n\nexport default GeoModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getCenterCoord(view, point) {\n  // Use projected coord as center because it's linear.\n  return view.pointToProjected ? view.pointToProjected(point) : view.pointToData(point);\n}\n\nexport function updateCenterAndZoom(view, payload, zoomLimit, api) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.projectedToPoint ? view.projectedToPoint(center) : view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(getCenterCoord(view, point), api);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scaleX *= zoom;\n    view.scaleY *= zoom;\n    var fixX = (payload.originX - view.x) * (zoom - 1);\n    var fixY = (payload.originY - view.y) * (zoom - 1);\n    view.x -= fixX;\n    view.y -= fixY;\n    view.updateTransform(); // Get the new center\n\n    view.setCenter(getCenterCoord(view, point), api);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MapDraw from '../helper/MapDraw.js';\nimport ComponentView from '../../view/Component.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { findEventDispatcher } from '../../util/event.js';\n\nvar GeoView =\n/** @class */\nfunction (_super) {\n  __extends(GeoView, _super);\n\n  function GeoView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoView.type;\n    _this.focusBlurEnabled = true;\n    return _this;\n  }\n\n  GeoView.prototype.init = function (ecModel, api) {\n    this._api = api;\n  };\n\n  GeoView.prototype.render = function (geoModel, ecModel, api, payload) {\n    this._model = geoModel;\n\n    if (!geoModel.get('show')) {\n      this._mapDraw && this._mapDraw.remove();\n      this._mapDraw = null;\n      return;\n    }\n\n    if (!this._mapDraw) {\n      this._mapDraw = new MapDraw(api);\n    }\n\n    var mapDraw = this._mapDraw;\n    mapDraw.draw(geoModel, ecModel, api, this, payload);\n    mapDraw.group.on('click', this._handleRegionClick, this);\n    mapDraw.group.silent = geoModel.get('silent');\n    this.group.add(mapDraw.group);\n    this.updateSelectStatus(geoModel, ecModel, api);\n  };\n\n  GeoView.prototype._handleRegionClick = function (e) {\n    var eventData;\n    findEventDispatcher(e.target, function (current) {\n      return (eventData = getECData(current).eventData) != null;\n    }, true);\n\n    if (eventData) {\n      this._api.dispatchAction({\n        type: 'geoToggleSelect',\n        geoId: this._model.id,\n        name: eventData.name\n      });\n    }\n  };\n\n  GeoView.prototype.updateSelectStatus = function (model, ecModel, api) {\n    var _this = this;\n\n    this._mapDraw.group.traverse(function (node) {\n      var eventData = getECData(node).eventData;\n\n      if (eventData) {\n        _this._model.isSelected(eventData.name) ? api.enterSelect(node) : api.leaveSelect(node); // No need to traverse children.\n\n        return true;\n      }\n    });\n  };\n\n  GeoView.prototype.findHighDownDispatchers = function (name) {\n    return this._mapDraw && this._mapDraw.findHighDownDispatchers(name, this._model);\n  };\n\n  GeoView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n  };\n\n  GeoView.type = 'geo';\n  return GeoView;\n}(ComponentView);\n\nexport default GeoView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GeoModel from '../../coord/geo/GeoModel.js';\nimport geoCreator from '../../coord/geo/geoCreator.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport GeoView from './GeoView.js';\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\n\nfunction registerMap(mapName, geoJson, specialAreas) {\n  geoSourceManager.registerMap(mapName, geoJson, specialAreas);\n}\n\nexport function install(registers) {\n  registers.registerCoordinateSystem('geo', geoCreator);\n  registers.registerComponentModel(GeoModel);\n  registers.registerComponentView(GeoView);\n  registers.registerImpl('registerMap', registerMap);\n  registers.registerImpl('getMap', function (mapName) {\n    return geoSourceManager.getMapForUser(mapName);\n  });\n\n  function makeAction(method, actionInfo) {\n    actionInfo.update = 'geo:updateSelectStatus';\n    registers.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      var allSelected = [];\n      ecModel.eachComponent({\n        mainType: 'geo',\n        query: payload\n      }, function (geoModel) {\n        geoModel[method](payload.name);\n        var geo = geoModel.coordinateSystem;\n        each(geo.regions, function (region) {\n          selected[region.name] = geoModel.isSelected(region.name) || false;\n        }); // Notice: there might be duplicated name in different regions.\n\n        var names = [];\n        each(selected, function (v, name) {\n          selected[name] && names.push(name);\n        });\n        allSelected.push({\n          geoIndex: geoModel.componentIndex,\n          // Use singular, the same naming convention as the event `selectchanged`.\n          name: names\n        });\n      });\n      return {\n        selected: selected,\n        allSelected: allSelected,\n        name: payload.name\n      };\n    });\n  }\n\n  makeAction('toggleSelected', {\n    type: 'geoToggleSelect',\n    event: 'geoselectchanged'\n  });\n  makeAction('select', {\n    type: 'geoSelect',\n    event: 'geoselected'\n  });\n  makeAction('unSelect', {\n    type: 'geoUnSelect',\n    event: 'geounselected'\n  });\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'geoRoam',\n    event: 'geoRoam',\n    update: 'updateTransform'\n  }, function (payload, ecModel, api) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      var geo = componentModel.coordinateSystem;\n\n      if (geo.type !== 'geo') {\n        return;\n      }\n\n      var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'), api);\n      componentModel.setCenter && componentModel.setCenter(res.center);\n      componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n      // So the center and zoom must be in sync. Include the series not selected by legend\n\n      if (componentType === 'series') {\n        each(componentModel.seriesGroup, function (seriesModel) {\n          seriesModel.setCenter(res.center);\n          seriesModel.setZoom(res.zoom);\n        });\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../extension.js';\nimport { install } from './map/install.js';\nuse(install);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport MapView from './MapView.js';\nimport MapSeries from './MapSeries.js';\nimport mapDataStatistic from './mapDataStatistic.js';\nimport mapSymbolLayout from './mapSymbolLayout.js';\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport { install as installGeo } from '../../component/geo/install.js';\nexport function install(registers) {\n  use(installGeo);\n  registers.registerChartView(MapView);\n  registers.registerSeriesModel(MapSeries);\n  registers.registerLayout(mapSymbolLayout);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\n  createLegacyDataSelectAction('map', registers.registerAction);\n}","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n"],"names":["nodeParsers","parseXML","svg","isString","DOMParser","parseFromString","svgNode","nodeType","firstChild","nodeName","toLowerCase","nextSibling","INHERITABLE_STYLE_ATTRIBUTES_MAP","INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS","keys","SELF_STYLE_ATTRIBUTES_MAP","SELF_STYLE_ATTRIBUTES_MAP_KEYS","SVGParser","this","_defs","_root","prototype","parse","xml","opt","_defsUsePending","root","Group","named","viewBox","getAttribute","width","parseFloat","height","isNaN","parseAttributes","viewBoxRect","viewBoxTransform","child","_parseNode","defs","defsUsePending","i","length","item","style","applyDefs","viewBoxArr","splitNumberSequence","x","y","makeViewBoxTransform","ignoreViewBox","elRoot","add","scaleX","scaleY","scale","ignoreRootClip","setClipPath","Rect","shape","xmlNode","parentGroup","namedFrom","isInDefs","isInText","el","namedFromForSub","parser_1","hasOwn","call","nameAttr","newNamed","name","svgNodeTagLower","push","parser","paintServerParsers","def","id","isGroup","_parseText","text","TSpan","textContent","silent","_textX","_textY","inheritStyle","parentSelfStyle","__selfStyle","textBaseline","zrTextBaseline","parentInheritedStyle","__inheritedStyle","textAlign","zrTextAlign","applyTextAlignment","textStyle","fontSize","font","fontFamily","fontStyle","fontWeight","join","rect","getBoundingRect","internalField","g","setShape","circle","Circle","cx","cy","r","line","Line","x1","y1","x2","y2","ellipse","Ellipse","rx","ry","pointsArr","pointsStr","parsePoints","polygon","Polygon","points","polyline","Polyline","img","setStyle","image","dx","dy","d","path","parseInt","gradient","LinearGradient","parsePaintServerUnit","parseGradientColorStops","RadialGradient","global","stop","toLocaleLowerCase","offset","offsetStr","indexOf","styleVals","parseInlineStyle","stopColor","colorStops","color","parent","defaults","pointsString","list","onlyInlineStyle","isTextGroup","disp","inheritedStyle","selfStyle","node","transform","replace","transformOps_1","mt","transformRegex","str","type","value","valueArr","matrix","create","translate","rotate","DEGREE_TO_ANGLE","sx","Math","tan","mul","sy","setLocalTransform","parseTransformAttribute","inheritableStyleResult","selfStyleResult","svgAttrName","attrValue","parseAttributeStyle","fill","getFillStrokeStyle","stroke","each","propName","lineDash","map","visibility","invisible","display","ignore","urlRegex","method","urlMatch","match","url","trim","numberReg","rawStr","PI","styleRegex","styleRegResult","lastIndex","exec","svgStlAttr","zrInheritableStlAttr","zrSelfStlAttr","boundingRect","min","REGION_AVAILABLE_SVG_TAG_MAP","createHashMap","GeoSVGResource","mapName","_usedGraphicMap","_freedGraphics","_mapName","_parsedXML","load","firstGraphic","_firstGraphic","_buildGraphic","_boundingRect","clone","_a","regions","regionsMap","namedItem","region","set","createRegions","_regions","_regionsMap","svgXML","result","rootFromParse","assert","e","Error","message","isGeoSVGGraphicRoot","svgWidth","svgHeight","bRectX","bRectY","bRectWidth","bRectHeight","calculatedBoundingRect","BoundingRect","plain","get","traverse","useGraphic","hostKey","usedRootMap","svgGraphic","pop","freeGraphic","removeKey","geoCoord","nanhaiName","k","coordsOffsetMap","GeoJSONResource","geoJSON","specialAreas","source","_parsedMap","_specialAreas","_geoJSON","JSON","Function","nameMap","nameProperty","parsed","rawRegions","_parseToRegions","calculateBoundingRect","finalRegions","regionName","cloneShallow","parseGeoJson","mapType","exterior","fixNanhai","coordFix","cp","getCenter","setCenter","geometries","fixDiaoyuIsland","specialArea","transformTo","left","top","getMapForUser","geoJson","regionRect","union","storage","resource","OPTION_STYLE_ENABLED_TAGS","OPTION_STYLE_ENABLED_TAG_MAP","STATE_TRIGGER_TAG_MAP","concat","LABEL_HOST_MAP","mapLabelRaw","getFixedItemStyle","model","itemStyle","getItemStyle","areaColor","fixLineStyle","styleHost","MapDraw","api","group","uid","_controller","RoamController","getZr","_controllerHost","target","_regionsGroup","_svgGroup","draw","mapOrGeoModel","ecModel","fromView","payload","isGeo","mainType","data","getData","eachComponent","subType","mapSeries","getHostGeoModel","geo","coordinateSystem","regionsGroup","transformInfo","getTransformInfo","transformInfoRaw","raw","transformInfoRoam","roam","childAt","dirty","isVisualEncodedByVisualMap","getVisual","viewBuildCtx","resourceType","_buildGeoJSON","_buildSVG","_updateController","_updateMapSelectHandler","regionsGroupByName","_regionsGroupByName","regionsInfoByName","projection","projectionStream","stream","transformPoint","point","project","transformPolygonPoints","inPoints","outPoints","newPt","getPolyShape","removeAll","regionGroup","dataIdx","regionModel","indexOfName","getRegionModel","getItemModel","polygonSubpaths","polylineSubpaths","geometry","polys","interiors","projectPolys","poly","centerPt","createCompoundPath","subpaths","isLine","compoundPath","culling","segmentIgnoreThreshold","paths","applyOptionStyleForRegion","resetLabelForRegion","states","resetEventTriggerForRegion","resetTooltipForRegion","resetStateTriggerForRegion","_svgResourceChanged","_freeSVG","_useSVG","svgDispatcherMap","_svgDispatcherMap","focusSelf","_svgGraphicRecord","Displayable","z2EmphasisLift","_enableBlurEntireSVG","opacity_1","getModel","opacity","ensureState","remove","dispose","findHighDownDispatchers","geoModel","_svgMapName","geoSourceManager","controller","controllerHost","zoomLimit","zoom","getZoom","enable","makeActionBase","action","componentType","off","on","_mouseDownFlag","dispatchAction","animation","duration","zoomDelta","zoomX","zoomY","newZoom","zoomMin","zoomMax","max","Infinity","zoomScale","originX","originY","setPointerChecker","containPoint","resetForLabelLayout","label","getTextContent","mapDraw","dataIndex","normalStyleModel","emphasisStyleModel","blurStyleModel","selectStyleModel","normalStyle","emphasisStyle","selectStyle","blurStyle","getItemVisual","decal","strokeNoScale","labelXY","isDataNaN","mapDimension","itemLayout","getItemLayout","showLabel","query","labelFetcher","specifiedTextOpt","normal","align","verticalAlign","labelDataIndex","defaultText","textEl","textConfig","layoutRect","position","disableLabelAnimation","removeTextContent","removeTextConfig","eventTrigger","setItemGraphicEl","eventData","componentIndex","geoIndex","option","graphic","setTooltipConfig","componentModel","itemName","itemTooltipOption","highDownSilentOnTouch","emphasisModel","focus","rings","createStream","curPoly","polygons","startPolygon","endPolygon","polygonStart","polygonEnd","lineStart","lineEnd","isFinite","sphere","ring","MapView","_super","_this","apply","arguments","render","mapModel","from","_mapDraw","seriesId","needsDrawMap","getComponent","_renderSymbols","originalData","originalDataIndex","layout","z2","fullData","mainSeries","name_1","getName","fullIndex_1","itemModel","labelModel","getItemGraphicEl","getFormattedLabel","idx","state","setTextConfig","onHoverStateChange","toState","MapSeries","seriesGroup","getTooltipPosition","getRegion","dataToPoint","getInitialData","seriesModel","nameList","isArray","coordDimensions","extend","encodeDefine","getEncode","getSource","dimensions","SeriesData","initData","createSeriesDataSimply","encodeDefaulter","dataNameMap","toAppendNames","len","count","name_2","geoSource","getMapType","appendValues","getRawValue","formatTooltip","multipleSeries","dataType","seriesNames","otherIndex","valueDim","header","noHeader","blocks","setZoom","center","getLegendIcon","iconType","icon","itemWidth","itemHeight","lineWidth","dependencies","layoutMode","defaultOption","z","aspectScale","showLegendSymbol","boundingCoords","scaleLimit","selectedMode","show","borderWidth","borderColor","emphasis","select","Series","mapDataStatistic","seriesGroups","eachSeriesByType","hostGeoModel","key","seriesList","datas","statisticType","mapKey","sum","NaN","setData","mapSymbolLayout","processedMapType","mapSymbolOffsets","subMapSeries","setItemLayout","v2ApplyTransform","vector","applyTransform","getCoordSys","finder","View","_roamTransformable","Transformable","_rawTransformable","setBoundingRect","_rect","setViewRect","_transformTo","_viewRect","rawTransform","calculateTransform","rawParent","decomposeTransform","_updateTransform","centerCoord","_center","getWidth","getHeight","_updateCenterAndZoom","_zoom","getDefaultCenter","rawRect","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","updateTransform","copy","_rawTransform","invTransform","invert","dummyTransformable","getViewRect","getViewRectAfterRoam","noRoam","out","pointToData","convertToPixel","coordSys","convertFromPixel","pixel","contain","GEO_DEFAULT_PARAMS","invertLongitute","geo2DDimensions","Geo","_nameCoordMap","defaultParams","_invertLongitute","getRegionByCoord","coord","addGeoCoord","getGeoCoord","projectedToPoint","unproject","pointToProjected","projected","getReferringComponents","models","resizeGeo","leftTop_1","rightBottom_1","projection_1","xMin","yMin","xMax","yMax","sampleLine","x0","y0","p","pt","size","viewRect","centerOption","sizeOption","viewWidth","viewHeight","aspect","useCenterAndSize","number","boxLayoutOption","getBoxLayoutParams","GeoCreator","geoList","getCommonGeoProperties","resize","eachSeries","mapModelGroupBySeries","nameMapList","singleMapSeries","setGeoCoords","getFilledRegions","originRegionArr","regionsArr","slice","GeoModel","init","parentModel","mergeDefaultAndTheme","optionUpdated","selectedMap","_optionModelMap","optionModelMap","regionOpt","Model","selected","status","formatter","params","unSelect","toggleSelected","isSelected","Component","getCenterCoord","view","GeoView","focusBlurEnabled","_api","_model","_handleRegionClick","updateSelectStatus","current","geoId","enterSelect","leaveSelect","registerMap","rawDef","rawSpecialAreas","features","install","registers","makeAction","actionInfo","update","registerAction","allSelected","names","v","registerCoordinateSystem","registerComponentModel","registerComponentView","registerImpl","event","res","previousZoom","fixX","fixY","updateCenterAndZoom","registerChartView","registerSeriesModel","registerLayout","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","isSymbol","module","exports","array","iteratee","comparator","index","undefined","computed","other","baseExtremum","baseGt","identity"],"sourceRoot":""}