{"version":3,"file":"chunks/vendors-node_modules_echarts_lib_component_visualMap_js.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///../node_modules/echarts/lib/visual/visualDefault.js","webpack:///../node_modules/echarts/lib/visual/VisualMapping.js","webpack:///../node_modules/echarts/lib/visual/visualSolution.js","webpack:///../node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack:///../node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack:///../node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack:///../node_modules/echarts/lib/component/visualMap/helper.js","webpack:///../node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack:///../node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack:///../node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack:///../node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack:///../node_modules/echarts/lib/component/visualMap/installCommon.js","webpack:///../node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","webpack:///../node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack:///../node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack:///../node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js","webpack:///../node_modules/echarts/lib/component/visualMap.js","webpack:///../node_modules/echarts/lib/component/visualMap/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nexport default visualDefault;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as zrColor from 'zrender/lib/tool/color.js';\nimport { linearMap } from '../util/number.js';\nimport { warn } from '../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n\nvar VisualMapping =\n/** @class */\nfunction () {\n  function VisualMapping(option) {\n    var mappingMethod = option.mappingMethod;\n    var visualType = option.type;\n    var thisOption = this.option = zrUtil.clone(option);\n    this.type = visualType;\n    this.mappingMethod = mappingMethod;\n    this._normalizeData = normalizers[mappingMethod];\n    var visualHandler = VisualMapping.visualHandlers[visualType];\n    this.applyVisual = visualHandler.applyVisual;\n    this.getColorMapper = visualHandler.getColorMapper;\n    this._normalizedToVisual = visualHandler._normalizedToVisual[mappingMethod];\n\n    if (mappingMethod === 'piecewise') {\n      normalizeVisualRange(thisOption);\n      preprocessForPiecewise(thisOption);\n    } else if (mappingMethod === 'category') {\n      thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n      // which need no more preprocess except normalize visual.\n      : normalizeVisualRange(thisOption, true);\n    } else {\n      // mappingMethod === 'linear' or 'fixed'\n      zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n      normalizeVisualRange(thisOption);\n    }\n  }\n\n  VisualMapping.prototype.mapValueToVisual = function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._normalizedToVisual(normalized, value);\n  };\n\n  VisualMapping.prototype.getNormalizer = function () {\n    return zrUtil.bind(this._normalizeData, this);\n  };\n  /**\n   * List available visual types.\n   *\n   * @public\n   * @return {Array.<string>}\n   */\n\n\n  VisualMapping.listVisualTypes = function () {\n    return zrUtil.keys(VisualMapping.visualHandlers);\n  }; // /**\n  //  * @public\n  //  */\n  // static addVisualHandler(name, handler) {\n  //     visualHandlers[name] = handler;\n  // }\n\n  /**\n   * @public\n   */\n\n\n  VisualMapping.isValidType = function (visualType) {\n    return VisualMapping.visualHandlers.hasOwnProperty(visualType);\n  };\n  /**\n   * Convinent method.\n   * Visual can be Object or Array or primary type.\n   */\n\n\n  VisualMapping.eachVisual = function (visual, callback, context) {\n    if (zrUtil.isObject(visual)) {\n      zrUtil.each(visual, callback, context);\n    } else {\n      callback.call(context, visual);\n    }\n  };\n\n  VisualMapping.mapVisual = function (visual, callback, context) {\n    var isPrimary;\n    var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n    VisualMapping.eachVisual(visual, function (v, key) {\n      var newVal = callback.call(context, v, key);\n      isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n    });\n    return newVisual;\n  };\n  /**\n   * Retrieve visual properties from given object.\n   */\n\n\n  VisualMapping.retrieveVisuals = function (obj) {\n    var ret = {};\n    var hasVisual;\n    obj && each(VisualMapping.visualHandlers, function (h, visualType) {\n      if (obj.hasOwnProperty(visualType)) {\n        ret[visualType] = obj[visualType];\n        hasVisual = true;\n      }\n    });\n    return hasVisual ? ret : null;\n  };\n  /**\n   * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n   *\n   * @public\n   * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n   *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n   * @return {Array.<string>} Sorted visual types.\n   */\n\n\n  VisualMapping.prepareVisualTypes = function (visualTypes) {\n    if (zrUtil.isArray(visualTypes)) {\n      visualTypes = visualTypes.slice();\n    } else if (isObject(visualTypes)) {\n      var types_1 = [];\n      each(visualTypes, function (item, type) {\n        types_1.push(type);\n      });\n      visualTypes = types_1;\n    } else {\n      return [];\n    }\n\n    visualTypes.sort(function (type1, type2) {\n      // color should be front of colorSaturation, colorAlpha, ...\n      // symbol and symbolSize do not matter.\n      return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n    });\n    return visualTypes;\n  };\n  /**\n   * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n   * Other visuals are only depends on themself.\n   */\n\n\n  VisualMapping.dependsOn = function (visualType1, visualType2) {\n    return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n  };\n  /**\n   * @param value\n   * @param pieceList [{value: ..., interval: [min, max]}, ...]\n   *                         Always from small to big.\n   * @param findClosestWhenOutside Default to be false\n   * @return index\n   */\n\n\n  VisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n    var possibleI;\n    var abs = Infinity; // value has the higher priority.\n\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var pieceValue = pieceList[i].value;\n\n      if (pieceValue != null) {\n        if (pieceValue === value // FIXME\n        // It is supposed to compare value according to value type of dimension,\n        // but currently value type can exactly be string or number.\n        // Compromise for numeric-like string (like '12'), especially\n        // in the case that visualMap.categories is ['22', '33'].\n        || zrUtil.isString(pieceValue) && pieceValue === value + '') {\n          return i;\n        }\n\n        findClosestWhenOutside && updatePossible(pieceValue, i);\n      }\n    }\n\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var piece = pieceList[i];\n      var interval = piece.interval;\n      var close_1 = piece.close;\n\n      if (interval) {\n        if (interval[0] === -Infinity) {\n          if (littleThan(close_1[1], value, interval[1])) {\n            return i;\n          }\n        } else if (interval[1] === Infinity) {\n          if (littleThan(close_1[0], interval[0], value)) {\n            return i;\n          }\n        } else if (littleThan(close_1[0], interval[0], value) && littleThan(close_1[1], value, interval[1])) {\n          return i;\n        }\n\n        findClosestWhenOutside && updatePossible(interval[0], i);\n        findClosestWhenOutside && updatePossible(interval[1], i);\n      }\n    }\n\n    if (findClosestWhenOutside) {\n      return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n    }\n\n    function updatePossible(val, index) {\n      var newAbs = Math.abs(val - value);\n\n      if (newAbs < abs) {\n        abs = newAbs;\n        possibleI = index;\n      }\n    }\n  };\n\n  VisualMapping.visualHandlers = {\n    color: {\n      applyVisual: makeApplyVisual('color'),\n      getColorMapper: function () {\n        var thisOption = this.option;\n        return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n          !isNormalized && (value = this._normalizeData(value));\n          return doMapCategory.call(this, value);\n        } : function (value, isNormalized, out) {\n          // If output rgb array\n          // which will be much faster and useful in pixel manipulation\n          var returnRGBArray = !!out;\n          !isNormalized && (value = this._normalizeData(value));\n          out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n          return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n        }, this);\n      },\n      _normalizedToVisual: {\n        linear: function (normalized) {\n          return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        },\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n\n          if (result == null) {\n            result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n          }\n\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    colorHue: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, value);\n    }),\n    colorSaturation: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, value);\n    }),\n    colorLightness: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, null, value);\n    }),\n    colorAlpha: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyAlpha(color, value);\n    }),\n    decal: {\n      applyVisual: makeApplyVisual('decal'),\n      _normalizedToVisual: {\n        linear: null,\n        category: doMapCategory,\n        piecewise: null,\n        fixed: null\n      }\n    },\n    opacity: {\n      applyVisual: makeApplyVisual('opacity'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    },\n    liftZ: {\n      applyVisual: makeApplyVisual('liftZ'),\n      _normalizedToVisual: {\n        linear: doMapFixed,\n        category: doMapFixed,\n        piecewise: doMapFixed,\n        fixed: doMapFixed\n      }\n    },\n    symbol: {\n      applyVisual: function (value, getter, setter) {\n        var symbolCfg = this.mapValueToVisual(value);\n        setter('symbol', symbolCfg);\n      },\n      _normalizedToVisual: {\n        linear: doMapToArray,\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n\n          if (result == null) {\n            result = doMapToArray.call(this, normalized);\n          }\n\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    symbolSize: {\n      applyVisual: makeApplyVisual('symbolSize'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    }\n  };\n  return VisualMapping;\n}();\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var categoryMap = thisOption.categoryMap = {};\n  var visual = thisOption.visual;\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr_1 = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr_1[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr_1[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr_1);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      // Only used in HSL\n      var colorChannel = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), colorChannel));\n    },\n    _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {}; // TODO {}?\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  // visual will be convert to array.\n  return this.option.visual[0];\n}\n/**\n * Create mapped to numeric visual\n */\n\n\nfunction createNormalizedToNumericVisual(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      var color = zrColor.parse(item);\n\n      if (!color && process.env.NODE_ENV !== 'production') {\n        warn(\"'\" + item + \"' is an illegal color, fallback to '#000000'\", true);\n      }\n\n      return color || [0, 0, 0, 1];\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal value\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nexport default VisualMapping;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from './VisualMapping.js';\nimport { getItemVisualFromData, setItemVisualFromData } from './helper.js';\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name_1 in obj) {\n      if (obj.hasOwnProperty(name_1)) {\n        return true;\n      }\n    }\n  }\n}\n\nexport function createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\nexport function replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param stateList\n * @param visualMappings\n * @param list\n * @param getValueState param: valueOrIndex, return: state.\n * @param scope Scope for getValueState\n * @param dimension Concrete dimension, if used.\n */\n// ???! handle brush?\n\nexport function applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return getItemVisualFromData(data, dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    setItemVisualFromData(data, dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex // First argument is index\n    : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n    // @ts-ignore\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param data\n * @param stateList\n * @param visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param getValueState param: valueOrIndex, return: state.\n * @param dim dimension or dimension index.\n */\n\nexport function incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  return {\n    progress: function progress(params, data) {\n      var dimIndex;\n\n      if (dim != null) {\n        dimIndex = data.getDimensionIndex(dim);\n      }\n\n      function getVisual(key) {\n        return getItemVisualFromData(data, dataIndex, key);\n      }\n\n      function setVisual(key, value) {\n        setItemVisualFromData(data, dataIndex, key, value);\n      }\n\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n        // @ts-ignore\n\n        if (rawDataItem && rawDataItem.visualMap === false) {\n          continue;\n        }\n\n        var value = dim != null ? store.get(dimIndex, dataIndex) : dataIndex;\n        var valueState = getValueState(value);\n        var mappings = visualMappings[valueState];\n        var visualTypes = visualTypesMap[valueState];\n\n        for (var i = 0, len = visualTypes.length; i < len; i++) {\n          var type = visualTypes[i];\n          mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\n\nvar VisualMapModel =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapModel, _super);\n\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n\n\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n\n\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimention. If return null/undefined, no dimension used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n\n\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n\n    var dimNames = data.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter none\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max_1 = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.setSelected = function (selected) {};\n\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n\n\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\n\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\n\nvar ContinuousModel =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n\n  });\n  return ContinuousModel;\n}(VisualMapModel);\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nexport default ContinuousModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\n\nvar VisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapView, _super);\n\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n\n\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\n\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\n\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\n\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousView, _super);\n\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    this._api = api;\n\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  };\n\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text\n      })\n    }));\n  };\n\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup); // Bar\n\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true))); // A border radius clip.\n\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('国');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n\n    targetGroup.add(mainGroup);\n  };\n\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function (e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd, // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]);\n\n      this._hideIndicator(); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n\n\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor // opacity: visualInRange.opacity\n\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor // opacity: visualOutOfRange.opacity\n\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    }; // Update handle label position.\n\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.mainGroup);\n\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, '≈ ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || getECData(el).dataIndex == null) {\n      return;\n    }\n\n    var ecData = getECData(el);\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  };\n\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  }; // TODO: TYPE more specified payload types.\n\n\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.remove = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default ContinuousView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}, // Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}]; // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar PiecewiseModel =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseModel, _super);\n\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n\n    _this._pieceList = [];\n    return _this;\n  }\n\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n\n    var mode = this._mode = this._determineMode();\n\n    this._pieceList = [];\n\n    resetMethods[this._mode].call(this, this._pieceList);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n\n\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n\n\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n\n\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  };\n\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n\n  });\n  return PiecewiseModel;\n}(VisualMapModel);\n\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function (outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME category模式也使用pieceList，但在visualMapping中不是使用pieceList。\n      // 是否改一致。\n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList); // Only pieces\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', '≤'][close[1]], ['>', '≥'][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nexport default PiecewiseModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\n\nvar PiecewiseVisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList); // TODO Category\n\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n\n    var onHoverLink = function (method) {\n      var visualMapModel = _this.visualMapModel; // TODO: TYPE More detailed action types\n\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  };\n\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n\n\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n        endsText = endsText.slice().reverse();\n      }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam) {\n    group.add(createSymbol( // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], // color will be string\n    this.getControllerVisual(representValue, 'color')));\n  };\n\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n\n    if (!selectedMode) {\n      return;\n    }\n\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\n\nexport default PiecewiseVisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../extension.js';\nimport { install } from './visualMap/install.js';\nuse(install);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}"],"names":["visualDefault","get","visualType","key","isCategory","value","defaultOption","length","color","active","inactive","colorHue","colorSaturation","colorLightness","colorAlpha","opacity","symbol","symbolSize","each","isObject","VisualMapping","option","mappingMethod","type","thisOption","this","_normalizeData","normalizers","visualHandler","visualHandlers","applyVisual","getColorMapper","_normalizedToVisual","normalizeVisualRange","pieceList","hasSpecialVisual","piece","index","originIndex","visual","preprocessForPiecewise","categories","categoryMap","cate","visualArr_1","v","CATEGORY_DEFAULT_VISUAL_INDEX","setVisualToOption","i","pop","preprocessForSpecifiedCategory","dataExtent","prototype","mapValueToVisual","normalized","getNormalizer","listVisualTypes","isValidType","hasOwnProperty","eachVisual","callback","context","call","mapVisual","isPrimary","newVisual","newVal","retrieveVisuals","obj","hasVisual","ret","h","prepareVisualTypes","visualTypes","slice","types_1","item","push","sort","type1","type2","indexOf","dependsOn","visualType1","visualType2","findPieceIndex","findClosestWhenOutside","possibleI","abs","Infinity","len","pieceValue","updatePossible","interval","close_1","close","littleThan","val","newAbs","Math","makeApplyVisual","isNormalized","doMapCategory","out","returnRGBArray","parsedVisual","linear","category","piecewise","result","getSpecifiedVisual","fixed","doMapFixed","makePartialColorVisualHandler","decal","createNormalizedToNumericVisual","liftZ","getter","setter","doMapToArray","visualArr","applyValue","colorChannel","round","loop","sourceExtent","pieceIndex","a","b","hasKeys","name_1","createVisualMappings","stateList","supplementVisualOption","visualMappings","state","Creater","mappings","__hidden","visualData","mappingOption","__alphaForOpacity","isArray","asc","number","linearMap","VisualMapModel","_super","_this","apply","arguments","replacableOptionKeys","layoutMode","ignoreSize","dataBound","targetVisuals","controllerVisuals","init","parentModel","ecModel","mergeDefaultAndTheme","optionUpdated","newOption","isInit","keys","has","textStyleModel","getModel","resetItemSize","completeVisualOption","resetVisual","controller","target","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","seriesIndex","seriesIndices","eachSeries","seriesModel","model","eachTargetSeries","getSeriesByIndex","isTargetSeries","is","formatValueText","edgeSymbols","isMinMax","precision","formatter","textValue","toFixed","replace","min","resetExtent","extent","max","_dataExtent","getDataDimensionIndex","data","optDim","dimension","getDimensionIndex","dimNames","dimensions","dimName","dimInfo","getDimensionInfo","isCalculationCoord","storeDimIndex","getExtent","base","inRange","outOfRange","completeSingle","reverse","stateExist","stateAbsent","optExist","optAbsent","defa","symbolExists","symbolSizeExists","inactiveColor","defaultSymbol","itemSize","visuals","max_1","parseFloat","setSelected","selected","getSelected","getValueState","getVisualMeta","getColorVisual","dependencies","show","z","left","right","top","bottom","itemWidth","itemHeight","inverse","orient","backgroundColor","borderColor","contentColor","borderWidth","padding","textGap","textStyle","Component","DEFAULT_BAR_BOUND","ContinuousModel","_resetRange","isNaN","range","auto","dataInterval","findTargetDataIndices","dataIndices","getData","dataIndex","seriesId","id","oVals","getColorStopValues","iVals","stops","setStop","valueState","iIdx","oIdx","iLen","oLen","first","stopsLen","outerColors","align","calculable","hoverLink","realtime","handleIcon","handleSize","handleStyle","indicatorIcon","indicatorSize","indicatorStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","visualMapModel","step","stopValues","VisualMapView","autoPositionValues","api","render","payload","doRender","group","removeAll","renderBackground","format","rect","getBoundingRect","add","Rect","z2","silent","shape","x","y","width","height","style","fill","stroke","lineWidth","getControllerVisual","targetValue","visualCluster","opts","forceState","visualObj","defaultColor","visualMapping","convertOpacityToAlpha","positionGroup","layout","getBoxLayoutParams","getWidth","getHeight","paramsSet","getItemAlign","modelOption","itemAlign","ecSize","realIndex","reals","fakeValue","layoutInput","rParam","margin","makeHighDownBatch","batch","batchItem","dataIndexInside","highlightKey","componentIndex","mathMin","mathMax","createPolygon","points","cursor","onDrift","onDragEnd","draggable","drift","onmousemove","e","event","ondragend","useHoverLinkOnHandle","hoverLinkOnHandle","getCursor","ContinuousView","_shapes","_dataInterval","_handleEnds","_hoverLinkDataIndices","_api","from","uid","_buildView","thisGroup","_orient","_useHandle","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","text","barGroup","mainGroup","position","_applyTransform","verticalAlign","targetGroup","shapes","useHandle","_createBarGroup","gradientBarGroup","_dragHandle","setClipPath","r","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","handleThumb","attr","useStyle","getItemStyle","setStyle","strokeNoScale","strokeFirst","ensureState","handleLabel","stateTransition","duration","handleLabelPoint","scale","indicator","invisible","pathStyle","image","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","isEnd","dx","dy","_dragging","vertex","_updateInterval","_hideIndicator","dispatchAction","visualMapId","_hovering","_clearHoverLinkToSeries","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","sliderMove","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","setShape","barPoints","_updateHandle","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","offset","currValue","scaleX","rotation","PI","scaleY","textPoint","graphic","applyTransform","getTransform","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","isHorizontal","indicatorNewProps","labelNewProps","isAnimationEnabled","animationCfg","easing","additive","animateTo","enterBlur","self","on","pos","offsetX","offsetY","zr","getZr","_hoverLinkFromSeriesMouseOver","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","HOVER_LINK_SIZE","hoverLinkDataSize","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","_dispatchHighDown","el","ecData","dataModel","dataType","getStore","leaveBlur","indices","off","element","global","transform","transformDirection","dispose","remove","visualMapActionInfo","update","visualMapActionHander","eachComponent","mainType","query","visualMapEncodingHandlers","createOnAllSeries","reset","resetDefines","dim","visualTypesMap","pipelineContext","large","progress","params","dimIndex","getVisual","setVisual","store","next","rawDataItem","getRawDataItem","visualMap","visualMetaList","visualMeta","dimIdx","resultVisual","mapping","visualMapPreprocessor","opt","pieces","splitList","start","end","name","installed","installCommon","registers","registerSubTypeDefaulter","splitNumber","registerAction","handler","registerVisual","PRIORITY","VISUAL","COMPONENT","registerPreprocessor","install","registerComponentModel","registerComponentView","PiecewiseModel","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","visualTypesInPieces","exists","getSelectedMapKey","selectedMode","hasSel_1","getPieceList","getRepresentValue","representValue","pieceInterval","edge","unshift","curr","minOpen","maxOpen","itemSymbol","itemGap","outPieceList","parseInt","splitStep","normalizeReverse","pieceListItem","label","closeList","infinityList","useMinMax","lg","names","PiecewiseVisualMapView","textFont","getFont","textFill","getTextColor","_getItemAlign","viewData","_getViewData","endsText","showLabel","viewPieceList","itemGroup","onclick","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","font","onHoverLink","method","shapeParam","newKey","o","PiecewiseView"],"sourceRoot":""}